var qR=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var UY=qR((qY,lg)=>{function QR(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function a0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gy={exports:{}},Lf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function KR(){if(lS)return Lf;lS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var u in s)u!=="key"&&(r[u]=s[u])}else r=s;return s=r.ref,{$$typeof:t,type:n,key:a,ref:s!==void 0?s:null,props:r}}return Lf.Fragment=e,Lf.jsx=i,Lf.jsxs=i,Lf}var uS;function jR(){return uS||(uS=1,Gy.exports=KR()),Gy.exports}var Re=jR(),Hy={exports:{}},Cf={},Vy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS;function JR(){return hS||(hS=1,function(t){function e(W,st){var _t=W.length;W.push(st);t:for(;0<_t;){var Vt=_t-1>>>1,X=W[Vt];if(0<s(X,st))W[Vt]=st,W[_t]=X,_t=Vt;else break t}}function i(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var st=W[0],_t=W.pop();if(_t!==st){W[0]=_t;t:for(var Vt=0,X=W.length,et=X>>>1;Vt<et;){var Dt=2*(Vt+1)-1,Mt=W[Dt],At=Dt+1,Xt=W[At];if(0>s(Mt,_t))At<X&&0>s(Xt,Mt)?(W[Vt]=Xt,W[At]=_t,Vt=At):(W[Vt]=Mt,W[Dt]=_t,Vt=Dt);else if(At<X&&0>s(Xt,_t))W[Vt]=Xt,W[At]=_t,Vt=At;else break t}}return st}function s(W,st){var _t=W.sortIndex-st.sortIndex;return _t!==0?_t:W.id-st.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],c=[],g=1,_=null,m=3,v=!1,b=!1,x=!1,M=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(W){for(var st=i(c);st!==null;){if(st.callback===null)n(c);else if(st.startTime<=W)n(c),st.sortIndex=st.expirationTime,e(h,st);else break;st=i(c)}}function F(W){if(x=!1,P(W),!b)if(i(h)!==null)b=!0,U||(U=!0,lt());else{var st=i(c);st!==null&&ht(F,st.startTime-W)}}var U=!1,V=-1,Y=5,K=-1;function tt(){return M?!0:!(t.unstable_now()-K<Y)}function j(){if(M=!1,U){var W=t.unstable_now();K=W;var st=!0;try{t:{b=!1,x&&(x=!1,O(V),V=-1),v=!0;var _t=m;try{e:{for(P(W),_=i(h);_!==null&&!(_.expirationTime>W&&tt());){var Vt=_.callback;if(typeof Vt=="function"){_.callback=null,m=_.priorityLevel;var X=Vt(_.expirationTime<=W);if(W=t.unstable_now(),typeof X=="function"){_.callback=X,P(W),st=!0;break e}_===i(h)&&n(h),P(W)}else n(h);_=i(h)}if(_!==null)st=!0;else{var et=i(c);et!==null&&ht(F,et.startTime-W),st=!1}}break t}finally{_=null,m=_t,v=!1}st=void 0}}finally{st?lt():U=!1}}}var lt;if(typeof R=="function")lt=function(){R(j)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,ft=pt.port2;pt.port1.onmessage=j,lt=function(){ft.postMessage(null)}}else lt=function(){N(j,0)};function ht(W,st){V=N(function(){W(t.unstable_now())},st)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var st=3;break;default:st=m}var _t=m;m=st;try{return W()}finally{m=_t}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(W,st){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _t=m;m=W;try{return st()}finally{m=_t}},t.unstable_scheduleCallback=function(W,st,_t){var Vt=t.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Vt+_t:Vt):_t=Vt,W){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=_t+X,W={id:g++,callback:st,priorityLevel:W,startTime:_t,expirationTime:X,sortIndex:-1},_t>Vt?(W.sortIndex=_t,e(c,W),i(h)===null&&W===i(c)&&(x?(O(V),V=-1):x=!0,ht(F,_t-Vt))):(W.sortIndex=X,e(h,W),b||v||(b=!0,U||(U=!0,lt()))),W},t.unstable_shouldYield=tt,t.unstable_wrapCallback=function(W){var st=m;return function(){var _t=m;m=st;try{return W.apply(this,arguments)}finally{m=_t}}}}(Yy)),Yy}var dS;function $R(){return dS||(dS=1,Vy.exports=JR()),Vy.exports}var Xy={exports:{}},wi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function tO(){if(cS)return wi;cS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function M(X,et,Dt){this.props=X,this.context=et,this.refs=x,this.updater=Dt||v}M.prototype.isReactComponent={},M.prototype.setState=function(X,et){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,et,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function N(){}N.prototype=M.prototype;function O(X,et,Dt){this.props=X,this.context=et,this.refs=x,this.updater=Dt||v}var R=O.prototype=new N;R.constructor=O,b(R,M.prototype),R.isPureReactComponent=!0;var P=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function V(X,et,Dt,Mt,At,Xt){return Dt=Xt.ref,{$$typeof:t,type:X,key:et,ref:Dt!==void 0?Dt:null,props:Xt}}function Y(X,et){return V(X.type,et,void 0,void 0,void 0,X.props)}function K(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function tt(X){var et={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Dt){return et[Dt]})}var j=/\/+/g;function lt(X,et){return typeof X=="object"&&X!==null&&X.key!=null?tt(""+X.key):et.toString(36)}function pt(){}function ft(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(pt,pt):(X.status="pending",X.then(function(et){X.status==="pending"&&(X.status="fulfilled",X.value=et)},function(et){X.status==="pending"&&(X.status="rejected",X.reason=et)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ht(X,et,Dt,Mt,At){var Xt=typeof X;(Xt==="undefined"||Xt==="boolean")&&(X=null);var jt=!1;if(X===null)jt=!0;else switch(Xt){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(X.$$typeof){case t:case e:jt=!0;break;case g:return jt=X._init,ht(jt(X._payload),et,Dt,Mt,At)}}if(jt)return At=At(X),jt=Mt===""?"."+lt(X,0):Mt,P(At)?(Dt="",jt!=null&&(Dt=jt.replace(j,"$&/")+"/"),ht(At,et,Dt,"",function(Lt){return Lt})):At!=null&&(K(At)&&(At=Y(At,Dt+(At.key==null||X&&X.key===At.key?"":(""+At.key).replace(j,"$&/")+"/")+jt)),et.push(At)),1;jt=0;var Ge=Mt===""?".":Mt+":";if(P(X))for(var Se=0;Se<X.length;Se++)Mt=X[Se],Xt=Ge+lt(Mt,Se),jt+=ht(Mt,et,Dt,Xt,At);else if(Se=m(X),typeof Se=="function")for(X=Se.call(X),Se=0;!(Mt=X.next()).done;)Mt=Mt.value,Xt=Ge+lt(Mt,Se++),jt+=ht(Mt,et,Dt,Xt,At);else if(Xt==="object"){if(typeof X.then=="function")return ht(ft(X),et,Dt,Mt,At);throw et=String(X),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return jt}function W(X,et,Dt){if(X==null)return X;var Mt=[],At=0;return ht(X,Mt,"","",function(Xt){return et.call(Dt,Xt,At++)}),Mt}function st(X){if(X._status===-1){var et=X._result;et=et(),et.then(function(Dt){(X._status===0||X._status===-1)&&(X._status=1,X._result=Dt)},function(Dt){(X._status===0||X._status===-1)&&(X._status=2,X._result=Dt)}),X._status===-1&&(X._status=0,X._result=et)}if(X._status===1)return X._result.default;throw X._result}var _t=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function Vt(){}return wi.Children={map:W,forEach:function(X,et,Dt){W(X,function(){et.apply(this,arguments)},Dt)},count:function(X){var et=0;return W(X,function(){et++}),et},toArray:function(X){return W(X,function(et){return et})||[]},only:function(X){if(!K(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},wi.Component=M,wi.Fragment=i,wi.Profiler=s,wi.PureComponent=O,wi.StrictMode=n,wi.Suspense=h,wi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,wi.__COMPILER_RUNTIME={__proto__:null,c:function(X){return F.H.useMemoCache(X)}},wi.cache=function(X){return function(){return X.apply(null,arguments)}},wi.cloneElement=function(X,et,Dt){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Mt=b({},X.props),At=X.key,Xt=void 0;if(et!=null)for(jt in et.ref!==void 0&&(Xt=void 0),et.key!==void 0&&(At=""+et.key),et)!U.call(et,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&et.ref===void 0||(Mt[jt]=et[jt]);var jt=arguments.length-2;if(jt===1)Mt.children=Dt;else if(1<jt){for(var Ge=Array(jt),Se=0;Se<jt;Se++)Ge[Se]=arguments[Se+2];Mt.children=Ge}return V(X.type,At,void 0,void 0,Xt,Mt)},wi.createContext=function(X){return X={$$typeof:a,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},wi.createElement=function(X,et,Dt){var Mt,At={},Xt=null;if(et!=null)for(Mt in et.key!==void 0&&(Xt=""+et.key),et)U.call(et,Mt)&&Mt!=="key"&&Mt!=="__self"&&Mt!=="__source"&&(At[Mt]=et[Mt]);var jt=arguments.length-2;if(jt===1)At.children=Dt;else if(1<jt){for(var Ge=Array(jt),Se=0;Se<jt;Se++)Ge[Se]=arguments[Se+2];At.children=Ge}if(X&&X.defaultProps)for(Mt in jt=X.defaultProps,jt)At[Mt]===void 0&&(At[Mt]=jt[Mt]);return V(X,Xt,void 0,void 0,null,At)},wi.createRef=function(){return{current:null}},wi.forwardRef=function(X){return{$$typeof:u,render:X}},wi.isValidElement=K,wi.lazy=function(X){return{$$typeof:g,_payload:{_status:-1,_result:X},_init:st}},wi.memo=function(X,et){return{$$typeof:c,type:X,compare:et===void 0?null:et}},wi.startTransition=function(X){var et=F.T,Dt={};F.T=Dt;try{var Mt=X(),At=F.S;At!==null&&At(Dt,Mt),typeof Mt=="object"&&Mt!==null&&typeof Mt.then=="function"&&Mt.then(Vt,_t)}catch(Xt){_t(Xt)}finally{F.T=et}},wi.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},wi.use=function(X){return F.H.use(X)},wi.useActionState=function(X,et,Dt){return F.H.useActionState(X,et,Dt)},wi.useCallback=function(X,et){return F.H.useCallback(X,et)},wi.useContext=function(X){return F.H.useContext(X)},wi.useDebugValue=function(){},wi.useDeferredValue=function(X,et){return F.H.useDeferredValue(X,et)},wi.useEffect=function(X,et,Dt){var Mt=F.H;if(typeof Dt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Mt.useEffect(X,et)},wi.useId=function(){return F.H.useId()},wi.useImperativeHandle=function(X,et,Dt){return F.H.useImperativeHandle(X,et,Dt)},wi.useInsertionEffect=function(X,et){return F.H.useInsertionEffect(X,et)},wi.useLayoutEffect=function(X,et){return F.H.useLayoutEffect(X,et)},wi.useMemo=function(X,et){return F.H.useMemo(X,et)},wi.useOptimistic=function(X,et){return F.H.useOptimistic(X,et)},wi.useReducer=function(X,et,Dt){return F.H.useReducer(X,et,Dt)},wi.useRef=function(X){return F.H.useRef(X)},wi.useState=function(X){return F.H.useState(X)},wi.useSyncExternalStore=function(X,et,Dt){return F.H.useSyncExternalStore(X,et,Dt)},wi.useTransition=function(){return F.H.useTransition()},wi.version="19.1.0",wi}var fS;function Dg(){return fS||(fS=1,Xy.exports=tO()),Xy.exports}var Zy={exports:{}},Kr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function eO(){if(gS)return Kr;gS=1;var t=Dg();function e(h){var c="https://react.dev/errors/"+h;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(h,c,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:h,containerInfo:c,implementation:g}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,c){if(h==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Kr.createPortal=function(h,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return r(h,c,null,g)},Kr.flushSync=function(h){var c=a.T,g=n.p;try{if(a.T=null,n.p=2,h)return h()}finally{a.T=c,n.p=g,n.d.f()}},Kr.preconnect=function(h,c){typeof h=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(h,c))},Kr.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Kr.preinit=function(h,c){if(typeof h=="string"&&c&&typeof c.as=="string"){var g=c.as,_=u(g,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;g==="style"?n.d.S(h,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:_,integrity:m,fetchPriority:v}):g==="script"&&n.d.X(h,{crossOrigin:_,integrity:m,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Kr.preinitModule=function(h,c){if(typeof h=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var g=u(c.as,c.crossOrigin);n.d.M(h,{crossOrigin:g,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(h)},Kr.preload=function(h,c){if(typeof h=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var g=c.as,_=u(g,c.crossOrigin);n.d.L(h,g,{crossOrigin:_,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Kr.preloadModule=function(h,c){if(typeof h=="string")if(c){var g=u(c.as,c.crossOrigin);n.d.m(h,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:g,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(h)},Kr.requestFormReset=function(h){n.d.r(h)},Kr.unstable_batchedUpdates=function(h,c){return h(c)},Kr.useFormState=function(h,c,g){return a.H.useFormState(h,c,g)},Kr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Kr.version="19.1.0",Kr}var _S;function gp(){if(_S)return Zy.exports;_S=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zy.exports=eO(),Zy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function iO(){if(mS)return Cf;mS=1;var t=$R(),e=Dg(),i=gp();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(r(o)!==o)throw Error(n(188))}function h(o){var l=o.alternate;if(!l){if(l=r(o),l===null)throw Error(n(188));return l!==o?null:o}for(var f=o,y=l;;){var w=f.return;if(w===null)break;var I=w.alternate;if(I===null){if(y=w.return,y!==null){f=y;continue}break}if(w.child===I.child){for(I=w.child;I;){if(I===f)return u(w),o;if(I===y)return u(w),l;I=I.sibling}throw Error(n(188))}if(f.return!==y.return)f=w,y=I;else{for(var Z=!1,$=w.child;$;){if($===f){Z=!0,f=w,y=I;break}if($===y){Z=!0,y=w,f=I;break}$=$.sibling}if(!Z){for($=I.child;$;){if($===f){Z=!0,f=I,y=w;break}if($===y){Z=!0,y=I,f=w;break}$=$.sibling}if(!Z)throw Error(n(189))}}if(f.alternate!==y)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:l}function c(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=c(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function lt(o){return o===null||typeof o!="object"?null:(o=j&&o[j]||o["@@iterator"],typeof o=="function"?o:null)}var pt=Symbol.for("react.client.reference");function ft(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===pt?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case M:return"Profiler";case x:return"StrictMode";case F:return"Suspense";case U:return"SuspenseList";case K:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case R:return(o.displayName||"Context")+".Provider";case O:return(o._context.displayName||"Context")+".Consumer";case P:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case V:return l=o.displayName||null,l!==null?l:ft(o.type)||"Memo";case Y:l=o._payload,o=o._init;try{return ft(o(l))}catch{}}return null}var ht=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},Vt=[],X=-1;function et(o){return{current:o}}function Dt(o){0>X||(o.current=Vt[X],Vt[X]=null,X--)}function Mt(o,l){X++,Vt[X]=o.current,o.current=l}var At=et(null),Xt=et(null),jt=et(null),Ge=et(null);function Se(o,l){switch(Mt(jt,l),Mt(Xt,o),Mt(At,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?DE(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=DE(l),o=kE(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Dt(At),Mt(At,o)}function Lt(){Dt(At),Dt(Xt),Dt(jt)}function Gt(o){o.memoizedState!==null&&Mt(Ge,o);var l=At.current,f=kE(l,o.type);l!==f&&(Mt(Xt,o),Mt(At,f))}function ie(o){Xt.current===o&&(Dt(At),Dt(Xt)),Ge.current===o&&(Dt(Ge),Ef._currentValue=_t)}var kt=Object.prototype.hasOwnProperty,$t=t.unstable_scheduleCallback,ne=t.unstable_cancelCallback,ee=t.unstable_shouldYield,se=t.unstable_requestPaint,ve=t.unstable_now,Oe=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,Xe=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,Ae=t.unstable_LowPriority,Ze=t.unstable_IdlePriority,ki=t.log,ei=t.unstable_setDisableYieldValue,qe=null,hi=null;function Ji(o){if(typeof ki=="function"&&ei(o),hi&&typeof hi.setStrictMode=="function")try{hi.setStrictMode(qe,o)}catch{}}var Mi=Math.clz32?Math.clz32:Is,Vs=Math.log,ls=Math.LN2;function Is(o){return o>>>=0,o===0?32:31-(Vs(o)/ls|0)|0}var Jn=256,Cn=4194304;function bn(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function di(o,l,f){var y=o.pendingLanes;if(y===0)return 0;var w=0,I=o.suspendedLanes,Z=o.pingedLanes;o=o.warmLanes;var $=y&134217727;return $!==0?(y=$&~I,y!==0?w=bn(y):(Z&=$,Z!==0?w=bn(Z):f||(f=$&~o,f!==0&&(w=bn(f))))):($=y&~I,$!==0?w=bn($):Z!==0?w=bn(Z):f||(f=y&~o,f!==0&&(w=bn(f)))),w===0?0:l!==0&&l!==w&&(l&I)===0&&(I=w&-w,f=l&-l,I>=f||I===32&&(f&4194048)!==0)?l:w}function gi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function lr(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(){var o=Jn;return Jn<<=1,(Jn&4194048)===0&&(Jn=256),o}function Hi(){var o=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),o}function $i(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Mn(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function zr(o,l,f,y,w,I){var Z=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var $=o.entanglements,ct=o.expirationTimes,Ut=o.hiddenUpdates;for(f=Z&~f;0<f;){var ae=31-Mi(f),fe=1<<ae;$[ae]=0,ct[ae]=-1;var Yt=Ut[ae];if(Yt!==null)for(Ut[ae]=null,ae=0;ae<Yt.length;ae++){var Zt=Yt[ae];Zt!==null&&(Zt.lane&=-536870913)}f&=~fe}y!==0&&ur(o,y,0),I!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=I&~(Z&~l))}function ur(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var y=31-Mi(l);o.entangledLanes|=l,o.entanglements[y]=o.entanglements[y]|1073741824|f&4194090}function Xi(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var y=31-Mi(f),w=1<<y;w&l|o[y]&l&&(o[y]|=l),f&=~w}}function us(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function vi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function pn(){var o=st.p;return o!==0?o:(o=window.event,o===void 0?32:iS(o.type))}function Ni(o,l){var f=st.p;try{return st.p=o,l()}finally{st.p=f}}var yn=Math.random().toString(36).slice(2),Ii="__reactFiber$"+yn,Fe="__reactProps$"+yn,$n="__reactContainer$"+yn,Fn="__reactEvents$"+yn,Ee="__reactListeners$"+yn,xi="__reactHandles$"+yn,Dr="__reactResources$"+yn,er="__reactMarker$"+yn;function ci(o){delete o[Ii],delete o[Fe],delete o[Fn],delete o[Ee],delete o[xi]}function Fi(o){var l=o[Ii];if(l)return l;for(var f=o.parentNode;f;){if(l=f[$n]||f[Ii]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=GE(o);o!==null;){if(f=o[Ii])return f;o=GE(o)}return l}o=f,f=o.parentNode}return null}function ts(o){if(o=o[Ii]||o[$n]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Bi(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function Ss(o){var l=o[Dr];return l||(l=o[Dr]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function tn(o){o[er]=!0}var ro=new Set,oo={};function ir(o,l){hr(o,l),hr(o+"Capture",l)}function hr(o,l){for(oo[o]=l,o=0;o<l.length;o++)ro.add(l[o])}var en=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},at={};function it(o){return kt.call(at,o)?!0:kt.call(ot,o)?!1:en.test(o)?at[o]=!0:(ot[o]=!0,!1)}function ut(o,l,f){if(it(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function yt(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function bt(o,l,f,y){if(y===null)o.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+y)}}var vt,St;function Tt(o){if(vt===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);vt=l&&l[1]||"",St=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vt+o+St}var Wt=!1;function wt(o,l){if(!o||Wt)return"";Wt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(Zt){var Yt=Zt}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(Zt){Yt=Zt}o.call(fe.prototype)}}else{try{throw Error()}catch(Zt){Yt=Zt}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(Zt){if(Zt&&Yt&&typeof Zt.stack=="string")return[Zt.stack,Yt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=y.DetermineComponentFrameRoot(),Z=I[0],$=I[1];if(Z&&$){var ct=Z.split(`
`),Ut=$.split(`
`);for(w=y=0;y<ct.length&&!ct[y].includes("DetermineComponentFrameRoot");)y++;for(;w<Ut.length&&!Ut[w].includes("DetermineComponentFrameRoot");)w++;if(y===ct.length||w===Ut.length)for(y=ct.length-1,w=Ut.length-1;1<=y&&0<=w&&ct[y]!==Ut[w];)w--;for(;1<=y&&0<=w;y--,w--)if(ct[y]!==Ut[w]){if(y!==1||w!==1)do if(y--,w--,0>w||ct[y]!==Ut[w]){var ae=`
`+ct[y].replace(" at new "," at ");return o.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",o.displayName)),ae}while(1<=y&&0<=w);break}}}finally{Wt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Tt(f):""}function Nt(o){switch(o.tag){case 26:case 27:case 5:return Tt(o.type);case 16:return Tt("Lazy");case 13:return Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return wt(o.type,!1);case 11:return wt(o.type.render,!1);case 1:return wt(o.type,!0);case 31:return Tt("Activity");default:return""}}function Ft(o){try{var l="";do l+=Nt(o),o=o.return;while(o);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function te(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ot(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function oe(o){var l=Ot(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var w=f.get,I=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return w.call(this)},set:function(Z){y=""+Z,I.call(this,Z)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(Z){y=""+Z},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function he(o){o._valueTracker||(o._valueTracker=oe(o))}function Kt(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),y="";return o&&(y=Ot(o)?o.checked?"true":"false":o.value),o=y,o!==f?(l.setValue(o),!0):!1}function le(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ge=/[\n"\\]/g;function ue(o){return o.replace(ge,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function _e(o,l,f,y,w,I,Z,$){o.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?o.type=Z:o.removeAttribute("type"),l!=null?Z==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+te(l)):o.value!==""+te(l)&&(o.value=""+te(l)):Z!=="submit"&&Z!=="reset"||o.removeAttribute("value"),l!=null?Te(o,Z,te(l)):f!=null?Te(o,Z,te(f)):y!=null&&o.removeAttribute("value"),w==null&&I!=null&&(o.defaultChecked=!!I),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?o.name=""+te($):o.removeAttribute("name")}function me(o,l,f,y,w,I,Z,$){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.type=I),l!=null||f!=null){if(!(I!=="submit"&&I!=="reset"||l!=null))return;f=f!=null?""+te(f):"",l=l!=null?""+te(l):f,$||l===o.value||(o.value=l),o.defaultValue=l}y=y??w,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=$?o.checked:!!y,o.defaultChecked=!!y,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(o.name=Z)}function Te(o,l,f){l==="number"&&le(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Ie(o,l,f,y){if(o=o.options,l){l={};for(var w=0;w<f.length;w++)l["$"+f[w]]=!0;for(f=0;f<o.length;f++)w=l.hasOwnProperty("$"+o[f].value),o[f].selected!==w&&(o[f].selected=w),w&&y&&(o[f].defaultSelected=!0)}else{for(f=""+te(f),l=null,w=0;w<o.length;w++){if(o[w].value===f){o[w].selected=!0,y&&(o[w].defaultSelected=!0);return}l!==null||o[w].disabled||(l=o[w])}l!==null&&(l.selected=!0)}}function Le(o,l,f){if(l!=null&&(l=""+te(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+te(f):""}function We(o,l,f,y){if(l==null){if(y!=null){if(f!=null)throw Error(n(92));if(ht(y)){if(1<y.length)throw Error(n(93));y=y[0]}f=y}f==null&&(f=""),l=f}f=te(l),o.defaultValue=f,y=o.textContent,y===f&&y!==""&&y!==null&&(o.value=y)}function $e(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Ei=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Si(o,l,f){var y=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?y?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":y?o.setProperty(l,f):typeof f!="number"||f===0||Ei.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function ui(o,l,f){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,f!=null){for(var y in f)!f.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var w in l)y=l[w],l.hasOwnProperty(w)&&f[w]!==y&&Si(o,w,y)}else for(var I in l)l.hasOwnProperty(I)&&Si(o,I,l[I])}function Zi(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var En=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vi(o){return Wi.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var hn=null;function Nn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ai=null,vs=null;function Ao(o){var l=ts(o);if(l&&(o=l.stateNode)){var f=o[Fe]||null;t:switch(o=l.stateNode,l.type){case"input":if(_e(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ue(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var y=f[l];if(y!==o&&y.form===o.form){var w=y[Fe]||null;if(!w)throw Error(n(90));_e(y,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<f.length;l++)y=f[l],y.form===o.form&&Kt(y)}break t;case"textarea":Le(o,f.value,f.defaultValue);break t;case"select":l=f.value,l!=null&&Ie(o,!!f.multiple,l,!1)}}}var Pe=!1;function dn(o,l,f){if(Pe)return o(l,f);Pe=!0;try{var y=o(l);return y}finally{if(Pe=!1,(Ai!==null||vs!==null)&&(a_(),Ai&&(l=Ai,o=vs,vs=Ai=null,Ao(l),o)))for(l=0;l<o.length;l++)Ao(o[l])}}function Me(o,l){var f=o.stateNode;if(f===null)return null;var y=f[Fe]||null;if(y===null)return null;f=y[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break t;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,l,typeof f));return f}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qi=!1;if(rn)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){qi=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{qi=!1}var cn=null,Bn=null,Ys=null;function Xs(){if(Ys)return Ys;var o,l=Bn,f=l.length,y,w="value"in cn?cn.value:cn.textContent,I=w.length;for(o=0;o<f&&l[o]===w[o];o++);var Z=f-o;for(y=1;y<=Z&&l[f-y]===w[I-y];y++);return Ys=w.slice(o,1<y?1-y:void 0)}function Ui(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function As(){return!0}function xr(){return!1}function Ts(o){function l(f,y,w,I,Z){this._reactName=f,this._targetInst=w,this.type=y,this.nativeEvent=I,this.target=Z,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(f=o[$],this[$]=f?f(I):I[$]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?As:xr,this.isPropagationStopped=xr,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),l}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=Ts(ao),br=g({},ao,{view:0,detail:0}),Mu=Ts(br),za,_i,Da,Zs=g({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Da&&(Da&&o.type==="mousemove"?(za=o.screenX-Da.screenX,_i=o.screenY-Da.screenY):_i=za=0,Da=o),za)},movementY:function(o){return"movementY"in o?o.movementY:_i}}),ha=Ts(Zs),Vl=g({},Zs,{dataTransfer:0}),Nu=Ts(Vl),Yl=g({},br,{relatedTarget:0}),ko=Ts(Yl),Xl=g({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),cl=Ts(Xl),wh=g({},ao,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ka=Ts(wh),Ru=g({},ao,{data:0}),ws=Ts(Ru),Zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function da(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=lo[o])?!!l[o]:!1}function uo(){return da}var Wl=g({},br,{key:function(o){if(o.key){var l=Zl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ui(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Fa[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(o){return o.type==="keypress"?Ui(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ui(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Lh=Ts(Wl),hs=g({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=Ts(hs),Bo=g({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),Ba=Ts(Bo),fl=g({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uo=Ts(fl),xs=g({},Zs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ps=Ts(xs),Ls=g({},ao,{newState:0,oldState:0}),Er=Ts(Ls),Ou=[9,13,27,32],ho=rn&&"CompositionEvent"in window,es=null;rn&&"documentMode"in document&&(es=document.documentMode);var gl=rn&&"TextEvent"in window&&!es,Ws=rn&&(!ho||es&&8<es&&11>=es),_l=" ",ca=!1;function Go(o,l){switch(o){case"keyup":return Ou.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ml(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var co=!1;function qs(o,l){switch(o){case"compositionend":return ml(l);case"keypress":return l.which!==32?null:(ca=!0,_l);case"textInput":return o=l.data,o===_l&&ca?null:o;default:return null}}function Ch(o,l){if(co)return o==="compositionend"||!ho&&Go(o,l)?(o=Xs(),Ys=Bn=cn=null,co=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ws&&l.locale!=="ko"?null:l.data;default:return null}}var zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fo(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!zs[o.type]:l==="textarea"}function pl(o,l,f,y){Ai?vs?vs.push(y):vs=[y]:Ai=y,l=f_(l,"onChange"),0<l.length&&(f=new kr("onChange","change",null,f,y),o.push({event:f,listeners:l}))}var Ds=null,To=null;function Fr(o){RE(o,0)}function fa(o){var l=Bi(o);if(Kt(l))return o}function Ho(o,l){if(o==="change")return l}var Ua=!1;if(rn){var Sr;if(rn){var Br="oninput"in document;if(!Br){var Qs=document.createElement("div");Qs.setAttribute("oninput","return;"),Br=typeof Qs.oninput=="function"}Sr=Br}else Sr=!1;Ua=Sr&&(!document.documentMode||9<document.documentMode)}function Ar(){Ds&&(Ds.detachEvent("onpropertychange",ga),To=Ds=null)}function ga(o){if(o.propertyName==="value"&&fa(To)){var l=[];pl(l,To,o,Nn(o)),dn(Fr,l)}}function _a(o,l,f){o==="focusin"?(Ar(),Ds=l,To=f,Ds.attachEvent("onpropertychange",ga)):o==="focusout"&&Ar()}function ql(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return fa(To)}function nr(o,l){if(o==="click")return fa(l)}function Vo(o,l){if(o==="input"||o==="change")return fa(l)}function ma(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Cs=typeof Object.is=="function"?Object.is:ma;function Ks(o,l){if(Cs(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var w=f[y];if(!kt.call(l,w)||!Cs(o[w],l[w]))return!1}return!0}function dr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function S(o,l){var f=dr(o);o=0;for(var y;f;){if(f.nodeType===3){if(y=o+f.textContent.length,o<=l&&y>=l)return{node:f,offset:l-o};o=y}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=dr(f)}}function C(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?C(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function k(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=le(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=le(o.document)}return l}function G(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var Q=rn&&"documentMode"in document&&11>=document.documentMode,nt=null,mt=null,Jt=null,Pt=!1;function qt(o,l,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Pt||nt==null||nt!==le(y)||(y=nt,"selectionStart"in y&&G(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Jt&&Ks(Jt,y)||(Jt=y,y=f_(mt,"onSelect"),0<y.length&&(l=new kr("onSelect","select",null,l,f),o.push({event:l,listeners:y}),l.target=nt)))}function xe(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var pe={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},De={},Qe={};rn&&(Qe=document.createElement("div").style,"AnimationEvent"in window||(delete pe.animationend.animation,delete pe.animationiteration.animation,delete pe.animationstart.animation),"TransitionEvent"in window||delete pe.transitionend.transition);function Ve(o){if(De[o])return De[o];if(!pe[o])return o;var l=pe[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in Qe)return De[o]=l[f];return o}var ii=Ve("animationend"),mi=Ve("animationiteration"),Pi=Ve("animationstart"),Qi=Ve("transitionrun"),nn=Ve("transitionstart"),Ye=Ve("transitioncancel"),Sn=Ve("transitionend"),pi=new Map,vn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vn.push("scrollEnd");function on(o,l){pi.set(o,l),ir(l,[o])}var Je=new WeakMap;function Gi(o,l){if(typeof o=="object"&&o!==null){var f=Je.get(o);return f!==void 0?f:(l={value:o,source:l,stack:Ft(l)},Je.set(o,l),l)}return{value:o,source:l,stack:Ft(l)}}var Zn=[],Rn=0,is=0;function Ms(){for(var o=Rn,l=is=Rn=0;l<o;){var f=Zn[l];Zn[l++]=null;var y=Zn[l];Zn[l++]=null;var w=Zn[l];Zn[l++]=null;var I=Zn[l];if(Zn[l++]=null,y!==null&&w!==null){var Z=y.pending;Z===null?w.next=w:(w.next=Z.next,Z.next=w),y.pending=w}I!==0&&sr(f,w,I)}}function Un(o,l,f,y){Zn[Rn++]=o,Zn[Rn++]=l,Zn[Rn++]=f,Zn[Rn++]=y,is|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Gn(o,l,f,y){return Un(o,l,f,y),On(o)}function Hn(o,l){return Un(o,null,null,l),On(o)}function sr(o,l,f){o.lanes|=f;var y=o.alternate;y!==null&&(y.lanes|=f);for(var w=!1,I=o.return;I!==null;)I.childLanes|=f,y=I.alternate,y!==null&&(y.childLanes|=f),I.tag===22&&(o=I.stateNode,o===null||o._visibility&1||(w=!0)),o=I,I=I.return;return o.tag===3?(I=o.stateNode,w&&l!==null&&(w=31-Mi(f),o=I.hiddenUpdates,y=o[w],y===null?o[w]=[l]:y.push(l),l.lane=f|536870912),I):null}function On(o){if(50<gf)throw gf=0,dy=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var cr={};function Ur(o,l,f,y){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(o,l,f,y){return new Ur(o,l,f,y)}function Gr(o){return o=o.prototype,!(!o||!o.isReactComponent)}function rr(o,l){var f=o.alternate;return f===null?(f=Wn(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function pa(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Hr(o,l,f,y,w,I){var Z=0;if(y=o,typeof o=="function")Gr(o)&&(Z=1);else if(typeof o=="string")Z=zR(o,f,At.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case K:return o=Wn(31,f,l,w),o.elementType=K,o.lanes=I,o;case b:return ds(f.children,w,I,l);case x:Z=8,w|=24;break;case M:return o=Wn(12,f,l,w|2),o.elementType=M,o.lanes=I,o;case F:return o=Wn(13,f,l,w),o.elementType=F,o.lanes=I,o;case U:return o=Wn(19,f,l,w),o.elementType=U,o.lanes=I,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:case R:Z=10;break t;case O:Z=9;break t;case P:Z=11;break t;case V:Z=14;break t;case Y:Z=16,y=null;break t}Z=29,f=Error(n(130,o===null?"null":typeof o,"")),y=null}return l=Wn(Z,f,l,w),l.elementType=o,l.type=y,l.lanes=I,l}function ds(o,l,f,y){return o=Wn(7,o,y,l),o.lanes=f,o}function yl(o,l,f){return o=Wn(6,o,null,l),o.lanes=f,o}function wo(o,l,f){return l=Wn(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var go=[],Lo=0,d=null,p=0,A=[],z=0,B=null,J=1,dt="";function Ct(o,l){go[Lo++]=p,go[Lo++]=d,d=o,p=l}function Ht(o,l,f){A[z++]=J,A[z++]=dt,A[z++]=B,B=o;var y=J;o=dt;var w=32-Mi(y)-1;y&=~(1<<w),f+=1;var I=32-Mi(l)+w;if(30<I){var Z=w-w%5;I=(y&(1<<Z)-1).toString(32),y>>=Z,w-=Z,J=1<<32-Mi(l)+w|f<<w|y,dt=I+o}else J=1<<I|f<<w|y,dt=o}function ce(o){o.return!==null&&(Ct(o,1),Ht(o,1,0))}function be(o){for(;o===d;)d=go[--Lo],go[Lo]=null,p=go[--Lo],go[Lo]=null;for(;o===B;)B=A[--z],A[z]=null,dt=A[--z],A[z]=null,J=A[--z],A[z]=null}var Ce=null,we=null,ti=!1,Yi=null,Ki=!1,Li=Error(n(519));function ks(o){var l=Error(n(418,""));throw or(Gi(l,o)),Li}function fr(o){var l=o.stateNode,f=o.type,y=o.memoizedProps;switch(l[Ii]=o,l[Fe]=y,f){case"dialog":Di("cancel",l),Di("close",l);break;case"iframe":case"object":case"embed":Di("load",l);break;case"video":case"audio":for(f=0;f<mf.length;f++)Di(mf[f],l);break;case"source":Di("error",l);break;case"img":case"image":case"link":Di("error",l),Di("load",l);break;case"details":Di("toggle",l);break;case"input":Di("invalid",l),me(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),he(l);break;case"select":Di("invalid",l);break;case"textarea":Di("invalid",l),We(l,y.value,y.defaultValue,y.children),he(l)}f=y.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||y.suppressHydrationWarning===!0||zE(l.textContent,f)?(y.popover!=null&&(Di("beforetoggle",l),Di("toggle",l)),y.onScroll!=null&&Di("scroll",l),y.onScrollEnd!=null&&Di("scrollend",l),y.onClick!=null&&(l.onclick=g_),l=!0):l=!1,l||ks(o)}function Yo(o){for(Ce=o.return;Ce;)switch(Ce.tag){case 5:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:Ce=Ce.return}}function _o(o){if(o!==Ce)return!1;if(!ti)return Yo(o),ti=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Ly(o.type,o.memoizedProps)),f=!f),f&&we&&ks(o),Yo(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));t:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(l===0){we=tl(o.nextSibling);break t}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;o=o.nextSibling}we=null}}else l===27?(l=we,Ju(o.type)?(o=Ry,Ry=null,we=o):we=l):we=Ce?tl(o.stateNode.nextSibling):null;return!0}function gr(){we=Ce=null,ti=!1}function Tr(){var o=Yi;return o!==null&&(Io===null?Io=o:Io.push.apply(Io,o),Yi=null),o}function or(o){Yi===null?Yi=[o]:Yi.push(o)}var fi=et(null),cs=null,wr=null;function Vr(o,l,f){Mt(fi,l._currentValue),l._currentValue=f}function js(o){o._currentValue=fi.current,Dt(fi)}function Xo(o,l,f){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===f)break;o=o.return}}function In(o,l,f,y){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var I=w.dependencies;if(I!==null){var Z=w.child;I=I.firstContext;t:for(;I!==null;){var $=I;I=w;for(var ct=0;ct<l.length;ct++)if($.context===l[ct]){I.lanes|=f,$=I.alternate,$!==null&&($.lanes|=f),Xo(I.return,f,o),y||(Z=null);break t}I=$.next}}else if(w.tag===18){if(Z=w.return,Z===null)throw Error(n(341));Z.lanes|=f,I=Z.alternate,I!==null&&(I.lanes|=f),Xo(Z,f,o),Z=null}else Z=w.child;if(Z!==null)Z.return=w;else for(Z=w;Z!==null;){if(Z===o){Z=null;break}if(w=Z.sibling,w!==null){w.return=Z.return,Z=w;break}Z=Z.return}w=Z}}function Yr(o,l,f,y){o=null;for(var w=l,I=!1;w!==null;){if(!I){if((w.flags&524288)!==0)I=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var Z=w.alternate;if(Z===null)throw Error(n(387));if(Z=Z.memoizedProps,Z!==null){var $=w.type;Cs(w.pendingProps.value,Z.value)||(o!==null?o.push($):o=[$])}}else if(w===Ge.current){if(Z=w.alternate,Z===null)throw Error(n(387));Z.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(Ef):o=[Ef])}w=w.return}o!==null&&In(l,o,f,y),l.flags|=262144}function Co(o){for(o=o.firstContext;o!==null;){if(!Cs(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function _r(o){cs=o,wr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function fs(o){return mr(cs,o)}function ya(o,l){return cs===null&&_r(o),mr(o,l)}function mr(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},wr===null){if(o===null)throw Error(n(308));wr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else wr=wr.next=l;return f}var wd=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,y){o.push(y)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},Ga=t.unstable_scheduleCallback,Mh=t.unstable_NormalPriority,Pn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function va(){return{controller:new wd,data:new Map,refCount:0}}function Zo(o){o.refCount--,o.refCount===0&&Ga(Mh,function(){o.controller.abort()})}var Xr=null,Ha=0,Wo=0,qo=null;function Ql(o,l){if(Xr===null){var f=Xr=[];Ha=0,Wo=yy(),qo={status:"pending",value:void 0,then:function(y){f.push(y)}}}return Ha++,l.then(Zr,Zr),l}function Zr(){if(--Ha===0&&Xr!==null){qo!==null&&(qo.status="fulfilled");var o=Xr;Xr=null,Wo=0,qo=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function Qo(o,l){var f=[],y={status:"pending",value:null,reason:null,then:function(w){f.push(w)}};return o.then(function(){y.status="fulfilled",y.value=l;for(var w=0;w<f.length;w++)(0,f[w])(l)},function(w){for(y.status="rejected",y.reason=w,w=0;w<f.length;w++)(0,f[w])(void 0)}),y}var Va=W.S;W.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Ql(o,l),Va!==null&&Va(o,l)};var Lr=et(null);function Ya(){var o=Lr.current;return o!==null?o:Kn.pooledCache}function Ko(o,l){l===null?Mt(Lr,Lr.current):Mt(Lr,l.pool)}function vl(){var o=Ya();return o===null?null:{parent:Pn._currentValue,pool:o}}var Wr=Error(n(460)),jo=Error(n(474)),Mo=Error(n(542)),Jo={then:function(){}};function xl(o){return o=o.status,o==="fulfilled"||o==="rejected"}function E(){}function T(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(E,E),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,q(o),o;default:if(typeof l.status=="string")l.then(E,E);else{if(o=Kn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(y){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=y}},function(y){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,q(o),o}throw D=l,Wr}}var D=null;function H(){if(D===null)throw Error(n(459));var o=D;return D=null,o}function q(o){if(o===Wr||o===Mo)throw Error(n(483))}var rt=!1;function gt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bt(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function xt(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function It(o,l,f){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(wn&2)!==0){var w=y.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),y.pending=l,l=On(o),sr(o,null,f),l}return Un(o,y,l,f),On(o)}function ye(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var y=l.lanes;y&=o.pendingLanes,f|=y,l.lanes=f,Xi(o,f)}}function re(o,l){var f=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var w=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var Z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};I===null?w=I=Z:I=I.next=Z,f=f.next}while(f!==null);I===null?w=I=l:I=I.next=l}else w=I=l;f={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:I,shared:y.shared,callbacks:y.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var Ne=!1;function Ue(){if(Ne){var o=qo;if(o!==null)throw o}}function Ke(o,l,f,y){Ne=!1;var w=o.updateQueue;rt=!1;var I=w.firstBaseUpdate,Z=w.lastBaseUpdate,$=w.shared.pending;if($!==null){w.shared.pending=null;var ct=$,Ut=ct.next;ct.next=null,Z===null?I=Ut:Z.next=Ut,Z=ct;var ae=o.alternate;ae!==null&&(ae=ae.updateQueue,$=ae.lastBaseUpdate,$!==Z&&($===null?ae.firstBaseUpdate=Ut:$.next=Ut,ae.lastBaseUpdate=ct))}if(I!==null){var fe=w.baseState;Z=0,ae=Ut=ct=null,$=I;do{var Yt=$.lane&-536870913,Zt=Yt!==$.lane;if(Zt?(ji&Yt)===Yt:(y&Yt)===Yt){Yt!==0&&Yt===Wo&&(Ne=!0),ae!==null&&(ae=ae.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});t:{var ai=o,si=$;Yt=l;var kn=f;switch(si.tag){case 1:if(ai=si.payload,typeof ai=="function"){fe=ai.call(kn,fe,Yt);break t}fe=ai;break t;case 3:ai.flags=ai.flags&-65537|128;case 0:if(ai=si.payload,Yt=typeof ai=="function"?ai.call(kn,fe,Yt):ai,Yt==null)break t;fe=g({},fe,Yt);break t;case 2:rt=!0}}Yt=$.callback,Yt!==null&&(o.flags|=64,Zt&&(o.flags|=8192),Zt=w.callbacks,Zt===null?w.callbacks=[Yt]:Zt.push(Yt))}else Zt={lane:Yt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ae===null?(Ut=ae=Zt,ct=fe):ae=ae.next=Zt,Z|=Yt;if($=$.next,$===null){if($=w.shared.pending,$===null)break;Zt=$,$=Zt.next,Zt.next=null,w.lastBaseUpdate=Zt,w.shared.pending=null}}while(!0);ae===null&&(ct=fe),w.baseState=ct,w.firstBaseUpdate=Ut,w.lastBaseUpdate=ae,I===null&&(w.shared.lanes=0),qu|=Z,o.lanes=Z,o.memoizedState=fe}}function oi(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function fn(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)oi(f[o],l)}var An=et(null),Ti=et(0);function Fs(o,l){o=su,Mt(Ti,o),Mt(An,l),su=o|l.baseLanes}function Vn(){Mt(Ti,su),Mt(An,An.current)}function Js(){su=Ti.current,Dt(An),Dt(Ti)}var zn=0,ni=null,yi=null,bi=null,qn=!1,gn=!1,Qn=!1,$o=0,qr=0,Cr=null,bl=0;function Tn(){throw Error(n(321))}function Ld(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Cs(o[f],l[f]))return!1;return!0}function Cd(o,l,f,y,w,I){return zn=I,ni=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,W.H=o===null||o.memoizedState===null?$l:nf,Qn=!1,I=f(y,w),Qn=!1,gn&&(I=Hc(l,f,y,w)),Gc(o),I}function Gc(o){W.H=Zh;var l=yi!==null&&yi.next!==null;if(zn=0,bi=yi=ni=null,qn=!1,qr=0,Cr=null,l)throw Error(n(300));o===null||pr||(o=o.dependencies,o!==null&&Co(o)&&(pr=!0))}function Hc(o,l,f,y){ni=o;var w=0;do{if(gn&&(Cr=null),qr=0,gn=!1,25<=w)throw Error(n(301));if(w+=1,bi=yi=null,o.updateQueue!=null){var I=o.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}W.H=Bd,I=l(f,y)}while(gn);return I}function Vc(){var o=W.H,l=o.useState()[0];return l=typeof l.then=="function"?Xa(l):l,o=o.useState()[0],(yi!==null?yi.memoizedState:null)!==o&&(ni.flags|=1024),l}function Nh(){var o=$o!==0;return $o=0,o}function Rh(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function Oh(o){if(qn){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}qn=!1}zn=0,bi=yi=ni=null,gn=!1,qr=$o=0,Cr=null}function $s(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?ni.memoizedState=bi=o:bi=bi.next=o,bi}function an(){if(yi===null){var o=ni.alternate;o=o!==null?o.memoizedState:null}else o=yi.next;var l=bi===null?ni.memoizedState:bi.next;if(l!==null)bi=l,yi=o;else{if(o===null)throw ni.alternate===null?Error(n(467)):Error(n(310));yi=o,o={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},bi===null?ni.memoizedState=bi=o:bi=bi.next=o}return bi}function Md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xa(o){var l=qr;return qr+=1,Cr===null&&(Cr=[]),o=T(Cr,o,l),l=ni,(bi===null?l.memoizedState:bi.next)===null&&(l=l.alternate,W.H=l===null||l.memoizedState===null?$l:nf),o}function Ih(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Xa(o);if(o.$$typeof===R)return fs(o)}throw Error(n(438,String(o)))}function Nd(o){var l=null,f=ni.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var y=ni.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Md(),ni.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),y=0;y<o;y++)f[y]=tt;return l.index++,f}function xa(o,l){return typeof l=="function"?l(o):l}function Ph(o){var l=an();return Rd(l,yi,o)}function Rd(o,l,f){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=f;var w=o.baseQueue,I=y.pending;if(I!==null){if(w!==null){var Z=w.next;w.next=I.next,I.next=Z}l.baseQueue=w=I,y.pending=null}if(I=o.baseState,w===null)o.memoizedState=I;else{l=w.next;var $=Z=null,ct=null,Ut=l,ae=!1;do{var fe=Ut.lane&-536870913;if(fe!==Ut.lane?(ji&fe)===fe:(zn&fe)===fe){var Yt=Ut.revertLane;if(Yt===0)ct!==null&&(ct=ct.next={lane:0,revertLane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),fe===Wo&&(ae=!0);else if((zn&Yt)===Yt){Ut=Ut.next,Yt===Wo&&(ae=!0);continue}else fe={lane:0,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},ct===null?($=ct=fe,Z=I):ct=ct.next=fe,ni.lanes|=Yt,qu|=Yt;fe=Ut.action,Qn&&f(I,fe),I=Ut.hasEagerState?Ut.eagerState:f(I,fe)}else Yt={lane:fe,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},ct===null?($=ct=Yt,Z=I):ct=ct.next=Yt,ni.lanes|=fe,qu|=fe;Ut=Ut.next}while(Ut!==null&&Ut!==l);if(ct===null?Z=I:ct.next=$,!Cs(I,o.memoizedState)&&(pr=!0,ae&&(f=qo,f!==null)))throw f;o.memoizedState=I,o.baseState=Z,o.baseQueue=ct,y.lastRenderedState=I}return w===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Od(o){var l=an(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var y=f.dispatch,w=f.pending,I=l.memoizedState;if(w!==null){f.pending=null;var Z=w=w.next;do I=o(I,Z.action),Z=Z.next;while(Z!==w);Cs(I,l.memoizedState)||(pr=!0),l.memoizedState=I,l.baseQueue===null&&(l.baseState=I),f.lastRenderedState=I}return[I,y]}function Iu(o,l,f){var y=ni,w=an(),I=ti;if(I){if(f===void 0)throw Error(n(407));f=f()}else f=l();var Z=!Cs((yi||w).memoizedState,f);Z&&(w.memoizedState=f,pr=!0),w=w.queue;var $=Xc.bind(null,y,w,o);if(Kl(2048,8,$,[o]),w.getSnapshot!==l||Z||bi!==null&&bi.memoizedState.tag&1){if(y.flags|=2048,Ea(9,Sl(),Yc.bind(null,y,w,f,l),null),Kn===null)throw Error(n(349));I||(zn&124)!==0||ba(y,l,f)}return f}function ba(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=ni.updateQueue,l===null?(l=Md(),ni.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function Yc(o,l,f,y){l.value=f,l.getSnapshot=y,Pu(l)&&Zc(o)}function Xc(o,l,f){return f(function(){Pu(l)&&Zc(o)})}function Pu(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Cs(o,f)}catch{return!0}}function Zc(o){var l=Hn(o,2);l!==null&&oa(l,o,2)}function Za(o){var l=$s();if(typeof o=="function"){var f=o;if(o=f(),Qn){Ji(!0);try{f()}finally{Ji(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:o},l}function zu(o,l,f,y){return o.baseState=f,Rd(o,yi,typeof y=="function"?y:xa)}function zh(o,l,f,y,w){if(Al(o))throw Error(n(485));if(o=l.action,o!==null){var I={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){I.listeners.push(Z)}};W.T!==null?f(!0):I.isTransition=!1,y(I),f=l.pending,f===null?(I.next=l.pending=I,Du(l,I)):(I.next=f.next,l.pending=f.next=I)}}function Du(o,l){var f=l.action,y=l.payload,w=o.state;if(l.isTransition){var I=W.T,Z={};W.T=Z;try{var $=f(w,y),ct=W.S;ct!==null&&ct(Z,$),ku(o,l,$)}catch(Ut){Dh(o,l,Ut)}finally{W.T=I}}else try{I=f(w,y),ku(o,l,I)}catch(Ut){Dh(o,l,Ut)}}function ku(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){Wa(o,l,y)},function(y){return Dh(o,l,y)}):Wa(o,l,f)}function Wa(o,l,f){l.status="fulfilled",l.value=f,Id(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,Du(o,f)))}function Dh(o,l,f){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=f,Id(l),l=l.next;while(l!==y)}o.action=null}function Id(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function El(o,l){return l}function Wc(o,l){if(ti){var f=Kn.formState;if(f!==null){t:{var y=ni;if(ti){if(we){e:{for(var w=we,I=Ki;w.nodeType!==8;){if(!I){w=null;break e}if(w=tl(w.nextSibling),w===null){w=null;break e}}I=w.data,w=I==="F!"||I==="F"?w:null}if(w){we=tl(w.nextSibling),y=w.data==="F!";break t}}ks(y)}y=!1}y&&(l=f[0])}}return f=$s(),f.memoizedState=f.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:l},f.queue=y,f=tf.bind(null,ni,y),y.dispatch=f,y=Za(!1),I=Gu.bind(null,ni,!1,y.queue),y=$s(),w={state:l,dispatch:null,action:o,pending:null},y.queue=w,f=zh.bind(null,ni,w,I,f),w.dispatch=f,y.memoizedState=o,[l,f,!1]}function kh(o){var l=an();return qc(l,yi,o)}function qc(o,l,f){if(l=Rd(o,l,El)[0],o=Ph(xa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=Xa(l)}catch(Z){throw Z===Wr?Mo:Z}else y=l;l=an();var w=l.queue,I=w.dispatch;return f!==l.memoizedState&&(ni.flags|=2048,Ea(9,Sl(),Fh.bind(null,w,f),null)),[y,I,o]}function Fh(o,l){o.action=l}function Qc(o){var l=an(),f=yi;if(f!==null)return qc(l,f,o);an(),l=l.memoizedState,f=an();var y=f.queue.dispatch;return f.memoizedState=o,[l,y,!1]}function Ea(o,l,f,y){return o={tag:o,create:f,deps:y,inst:l,next:null},l=ni.updateQueue,l===null&&(l=Md(),ni.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(y=f.next,f.next=o,o.next=y,l.lastEffect=o),o}function Sl(){return{destroy:void 0,resource:void 0}}function Kc(){return an().memoizedState}function Bh(o,l,f,y){var w=$s();y=y===void 0?null:y,ni.flags|=o,w.memoizedState=Ea(1|l,Sl(),f,y)}function Kl(o,l,f,y){var w=an();y=y===void 0?null:y;var I=w.memoizedState.inst;yi!==null&&y!==null&&Ld(y,yi.memoizedState.deps)?w.memoizedState=Ea(l,I,f,y):(ni.flags|=o,w.memoizedState=Ea(1|l,I,f,y))}function $g(o,l){Bh(8390656,8,o,l)}function qa(o,l){Kl(2048,8,o,l)}function Uh(o,l){return Kl(4,2,o,l)}function Fu(o,l){return Kl(4,4,o,l)}function jl(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Gh(o,l,f){f=f!=null?f.concat([o]):null,Kl(4,4,jl.bind(null,l,o),f)}function Bu(){}function Pd(o,l){var f=an();l=l===void 0?null:l;var y=f.memoizedState;return l!==null&&Ld(l,y[1])?y[0]:(f.memoizedState=[o,l],o)}function jc(o,l){var f=an();l=l===void 0?null:l;var y=f.memoizedState;if(l!==null&&Ld(l,y[1]))return y[0];if(y=o(),Qn){Ji(!0);try{o()}finally{Ji(!1)}}return f.memoizedState=[y,l],y}function Hh(o,l,f){return f===void 0||(zn&1073741824)!==0?o.memoizedState=l:(o.memoizedState=f,o=lE(),ni.lanes|=o,qu|=o,f)}function Jc(o,l,f,y){return Cs(f,l)?f:An.current!==null?(o=Hh(o,f,y),Cs(o,l)||(pr=!0),o):(zn&42)===0?(pr=!0,o.memoizedState=f):(o=lE(),ni.lanes|=o,qu|=o,l)}function Vh(o,l,f,y,w){var I=st.p;st.p=I!==0&&8>I?I:8;var Z=W.T,$={};W.T=$,Gu(o,!1,l,f);try{var ct=w(),Ut=W.S;if(Ut!==null&&Ut($,ct),ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var ae=Qo(ct,y);Qa(o,l,ae,ra(o))}else Qa(o,l,y,ra(o))}catch(fe){Qa(o,l,{then:function(){},status:"rejected",reason:fe},ra())}finally{st.p=I,W.T=Z}}function zd(){}function Dd(o,l,f,y){if(o.tag!==5)throw Error(n(476));var w=Yh(o).queue;Vh(o,w,l,_t,f===null?zd:function(){return kd(o),f(y)})}function Yh(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:_t},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function kd(o){var l=Yh(o).next.queue;Qa(o,l,{},ra())}function Fd(){return fs(Ef)}function $c(){return an().memoizedState}function Xh(){return an().memoizedState}function Jl(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=ra();o=xt(f);var y=It(l,o,f);y!==null&&(oa(y,l,f),ye(y,l,f)),l={cache:va()},o.payload=l;return}l=l.return}}function Uu(o,l,f){var y=ra();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Al(o)?ef(l,f):(f=Gn(o,l,f,y),f!==null&&(oa(f,o,y),Tl(f,l,y)))}function tf(o,l,f){var y=ra();Qa(o,l,f,y)}function Qa(o,l,f,y){var w={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Al(o))ef(l,w);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=l.lastRenderedReducer,I!==null))try{var Z=l.lastRenderedState,$=I(Z,f);if(w.hasEagerState=!0,w.eagerState=$,Cs($,Z))return Un(o,l,w,0),Kn===null&&Ms(),!1}catch{}finally{}if(f=Gn(o,l,w,y),f!==null)return oa(f,o,y),Tl(f,l,y),!0}return!1}function Gu(o,l,f,y){if(y={lane:2,revertLane:yy(),action:y,hasEagerState:!1,eagerState:null,next:null},Al(o)){if(l)throw Error(n(479))}else l=Gn(o,f,y,2),l!==null&&oa(l,o,2)}function Al(o){var l=o.alternate;return o===ni||l!==null&&l===ni}function ef(o,l){gn=qn=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function Tl(o,l,f){if((f&4194048)!==0){var y=l.lanes;y&=o.pendingLanes,f|=y,l.lanes=f,Xi(o,f)}}var Zh={readContext:fs,use:Ih,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},$l={readContext:fs,use:Ih,useCallback:function(o,l){return $s().memoizedState=[o,l===void 0?null:l],o},useContext:fs,useEffect:$g,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,Bh(4194308,4,jl.bind(null,l,o),f)},useLayoutEffect:function(o,l){return Bh(4194308,4,o,l)},useInsertionEffect:function(o,l){Bh(4,2,o,l)},useMemo:function(o,l){var f=$s();l=l===void 0?null:l;var y=o();if(Qn){Ji(!0);try{o()}finally{Ji(!1)}}return f.memoizedState=[y,l],y},useReducer:function(o,l,f){var y=$s();if(f!==void 0){var w=f(l);if(Qn){Ji(!0);try{f(l)}finally{Ji(!1)}}}else w=l;return y.memoizedState=y.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},y.queue=o,o=o.dispatch=Uu.bind(null,ni,o),[y.memoizedState,o]},useRef:function(o){var l=$s();return o={current:o},l.memoizedState=o},useState:function(o){o=Za(o);var l=o.queue,f=tf.bind(null,ni,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:Bu,useDeferredValue:function(o,l){var f=$s();return Hh(f,o,l)},useTransition:function(){var o=Za(!1);return o=Vh.bind(null,ni,o.queue,!0,!1),$s().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var y=ni,w=$s();if(ti){if(f===void 0)throw Error(n(407));f=f()}else{if(f=l(),Kn===null)throw Error(n(349));(ji&124)!==0||ba(y,l,f)}w.memoizedState=f;var I={value:f,getSnapshot:l};return w.queue=I,$g(Xc.bind(null,y,I,o),[o]),y.flags|=2048,Ea(9,Sl(),Yc.bind(null,y,I,f,l),null),f},useId:function(){var o=$s(),l=Kn.identifierPrefix;if(ti){var f=dt,y=J;f=(y&~(1<<32-Mi(y)-1)).toString(32)+f,l=""+l+"R"+f,f=$o++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=bl++,l=""+l+"r"+f.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:Fd,useFormState:Wc,useActionState:Wc,useOptimistic:function(o){var l=$s();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Gu.bind(null,ni,!0,f),f.dispatch=l,[o,l]},useMemoCache:Nd,useCacheRefresh:function(){return $s().memoizedState=Jl.bind(null,ni)}},nf={readContext:fs,use:Ih,useCallback:Pd,useContext:fs,useEffect:qa,useImperativeHandle:Gh,useInsertionEffect:Uh,useLayoutEffect:Fu,useMemo:jc,useReducer:Ph,useRef:Kc,useState:function(){return Ph(xa)},useDebugValue:Bu,useDeferredValue:function(o,l){var f=an();return Jc(f,yi.memoizedState,o,l)},useTransition:function(){var o=Ph(xa)[0],l=an().memoizedState;return[typeof o=="boolean"?o:Xa(o),l]},useSyncExternalStore:Iu,useId:$c,useHostTransitionStatus:Fd,useFormState:kh,useActionState:kh,useOptimistic:function(o,l){var f=an();return zu(f,yi,o,l)},useMemoCache:Nd,useCacheRefresh:Xh},Bd={readContext:fs,use:Ih,useCallback:Pd,useContext:fs,useEffect:qa,useImperativeHandle:Gh,useInsertionEffect:Uh,useLayoutEffect:Fu,useMemo:jc,useReducer:Od,useRef:Kc,useState:function(){return Od(xa)},useDebugValue:Bu,useDeferredValue:function(o,l){var f=an();return yi===null?Hh(f,o,l):Jc(f,yi.memoizedState,o,l)},useTransition:function(){var o=Od(xa)[0],l=an().memoizedState;return[typeof o=="boolean"?o:Xa(o),l]},useSyncExternalStore:Iu,useId:$c,useHostTransitionStatus:Fd,useFormState:Qc,useActionState:Qc,useOptimistic:function(o,l){var f=an();return yi!==null?zu(f,yi,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:Nd,useCacheRefresh:Xh},wl=null,Ka=0;function Wh(o){var l=Ka;return Ka+=1,wl===null&&(wl=[]),T(wl,o,l)}function ja(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Ll(o,l){throw l.$$typeof===_?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Hu(o){var l=o._init;return l(o._payload)}function qh(o){function l(Rt,Et){if(o){var zt=Rt.deletions;zt===null?(Rt.deletions=[Et],Rt.flags|=16):zt.push(Et)}}function f(Rt,Et){if(!o)return null;for(;Et!==null;)l(Rt,Et),Et=Et.sibling;return null}function y(Rt){for(var Et=new Map;Rt!==null;)Rt.key!==null?Et.set(Rt.key,Rt):Et.set(Rt.index,Rt),Rt=Rt.sibling;return Et}function w(Rt,Et){return Rt=rr(Rt,Et),Rt.index=0,Rt.sibling=null,Rt}function I(Rt,Et,zt){return Rt.index=zt,o?(zt=Rt.alternate,zt!==null?(zt=zt.index,zt<Et?(Rt.flags|=67108866,Et):zt):(Rt.flags|=67108866,Et)):(Rt.flags|=1048576,Et)}function Z(Rt){return o&&Rt.alternate===null&&(Rt.flags|=67108866),Rt}function $(Rt,Et,zt,de){return Et===null||Et.tag!==6?(Et=yl(zt,Rt.mode,de),Et.return=Rt,Et):(Et=w(Et,zt),Et.return=Rt,Et)}function ct(Rt,Et,zt,de){var He=zt.type;return He===b?ae(Rt,Et,zt.props.children,de,zt.key):Et!==null&&(Et.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&Hu(He)===Et.type)?(Et=w(Et,zt.props),ja(Et,zt),Et.return=Rt,Et):(Et=Hr(zt.type,zt.key,zt.props,null,Rt.mode,de),ja(Et,zt),Et.return=Rt,Et)}function Ut(Rt,Et,zt,de){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==zt.containerInfo||Et.stateNode.implementation!==zt.implementation?(Et=wo(zt,Rt.mode,de),Et.return=Rt,Et):(Et=w(Et,zt.children||[]),Et.return=Rt,Et)}function ae(Rt,Et,zt,de,He){return Et===null||Et.tag!==7?(Et=ds(zt,Rt.mode,de,He),Et.return=Rt,Et):(Et=w(Et,zt),Et.return=Rt,Et)}function fe(Rt,Et,zt){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Et=yl(""+Et,Rt.mode,zt),Et.return=Rt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case m:return zt=Hr(Et.type,Et.key,Et.props,null,Rt.mode,zt),ja(zt,Et),zt.return=Rt,zt;case v:return Et=wo(Et,Rt.mode,zt),Et.return=Rt,Et;case Y:var de=Et._init;return Et=de(Et._payload),fe(Rt,Et,zt)}if(ht(Et)||lt(Et))return Et=ds(Et,Rt.mode,zt,null),Et.return=Rt,Et;if(typeof Et.then=="function")return fe(Rt,Wh(Et),zt);if(Et.$$typeof===R)return fe(Rt,ya(Rt,Et),zt);Ll(Rt,Et)}return null}function Yt(Rt,Et,zt,de){var He=Et!==null?Et.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return He!==null?null:$(Rt,Et,""+zt,de);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case m:return zt.key===He?ct(Rt,Et,zt,de):null;case v:return zt.key===He?Ut(Rt,Et,zt,de):null;case Y:return He=zt._init,zt=He(zt._payload),Yt(Rt,Et,zt,de)}if(ht(zt)||lt(zt))return He!==null?null:ae(Rt,Et,zt,de,null);if(typeof zt.then=="function")return Yt(Rt,Et,Wh(zt),de);if(zt.$$typeof===R)return Yt(Rt,Et,ya(Rt,zt),de);Ll(Rt,zt)}return null}function Zt(Rt,Et,zt,de,He){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Rt=Rt.get(zt)||null,$(Et,Rt,""+de,He);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case m:return Rt=Rt.get(de.key===null?zt:de.key)||null,ct(Et,Rt,de,He);case v:return Rt=Rt.get(de.key===null?zt:de.key)||null,Ut(Et,Rt,de,He);case Y:var Oi=de._init;return de=Oi(de._payload),Zt(Rt,Et,zt,de,He)}if(ht(de)||lt(de))return Rt=Rt.get(zt)||null,ae(Et,Rt,de,He,null);if(typeof de.then=="function")return Zt(Rt,Et,zt,Wh(de),He);if(de.$$typeof===R)return Zt(Rt,Et,zt,ya(Et,de),He);Ll(Et,de)}return null}function ai(Rt,Et,zt,de){for(var He=null,Oi=null,je=Et,ri=Et=0,vr=null;je!==null&&ri<zt.length;ri++){je.index>ri?(vr=je,je=null):vr=je.sibling;var ln=Yt(Rt,je,zt[ri],de);if(ln===null){je===null&&(je=vr);break}o&&je&&ln.alternate===null&&l(Rt,je),Et=I(ln,Et,ri),Oi===null?He=ln:Oi.sibling=ln,Oi=ln,je=vr}if(ri===zt.length)return f(Rt,je),ti&&Ct(Rt,ri),He;if(je===null){for(;ri<zt.length;ri++)je=fe(Rt,zt[ri],de),je!==null&&(Et=I(je,Et,ri),Oi===null?He=je:Oi.sibling=je,Oi=je);return ti&&Ct(Rt,ri),He}for(je=y(je);ri<zt.length;ri++)vr=Zt(je,Rt,ri,zt[ri],de),vr!==null&&(o&&vr.alternate!==null&&je.delete(vr.key===null?ri:vr.key),Et=I(vr,Et,ri),Oi===null?He=vr:Oi.sibling=vr,Oi=vr);return o&&je.forEach(function(nh){return l(Rt,nh)}),ti&&Ct(Rt,ri),He}function si(Rt,Et,zt,de){if(zt==null)throw Error(n(151));for(var He=null,Oi=null,je=Et,ri=Et=0,vr=null,ln=zt.next();je!==null&&!ln.done;ri++,ln=zt.next()){je.index>ri?(vr=je,je=null):vr=je.sibling;var nh=Yt(Rt,je,ln.value,de);if(nh===null){je===null&&(je=vr);break}o&&je&&nh.alternate===null&&l(Rt,je),Et=I(nh,Et,ri),Oi===null?He=nh:Oi.sibling=nh,Oi=nh,je=vr}if(ln.done)return f(Rt,je),ti&&Ct(Rt,ri),He;if(je===null){for(;!ln.done;ri++,ln=zt.next())ln=fe(Rt,ln.value,de),ln!==null&&(Et=I(ln,Et,ri),Oi===null?He=ln:Oi.sibling=ln,Oi=ln);return ti&&Ct(Rt,ri),He}for(je=y(je);!ln.done;ri++,ln=zt.next())ln=Zt(je,Rt,ri,ln.value,de),ln!==null&&(o&&ln.alternate!==null&&je.delete(ln.key===null?ri:ln.key),Et=I(ln,Et,ri),Oi===null?He=ln:Oi.sibling=ln,Oi=ln);return o&&je.forEach(function(WR){return l(Rt,WR)}),ti&&Ct(Rt,ri),He}function kn(Rt,Et,zt,de){if(typeof zt=="object"&&zt!==null&&zt.type===b&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case m:t:{for(var He=zt.key;Et!==null;){if(Et.key===He){if(He=zt.type,He===b){if(Et.tag===7){f(Rt,Et.sibling),de=w(Et,zt.props.children),de.return=Rt,Rt=de;break t}}else if(Et.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&Hu(He)===Et.type){f(Rt,Et.sibling),de=w(Et,zt.props),ja(de,zt),de.return=Rt,Rt=de;break t}f(Rt,Et);break}else l(Rt,Et);Et=Et.sibling}zt.type===b?(de=ds(zt.props.children,Rt.mode,de,zt.key),de.return=Rt,Rt=de):(de=Hr(zt.type,zt.key,zt.props,null,Rt.mode,de),ja(de,zt),de.return=Rt,Rt=de)}return Z(Rt);case v:t:{for(He=zt.key;Et!==null;){if(Et.key===He)if(Et.tag===4&&Et.stateNode.containerInfo===zt.containerInfo&&Et.stateNode.implementation===zt.implementation){f(Rt,Et.sibling),de=w(Et,zt.children||[]),de.return=Rt,Rt=de;break t}else{f(Rt,Et);break}else l(Rt,Et);Et=Et.sibling}de=wo(zt,Rt.mode,de),de.return=Rt,Rt=de}return Z(Rt);case Y:return He=zt._init,zt=He(zt._payload),kn(Rt,Et,zt,de)}if(ht(zt))return ai(Rt,Et,zt,de);if(lt(zt)){if(He=lt(zt),typeof He!="function")throw Error(n(150));return zt=He.call(zt),si(Rt,Et,zt,de)}if(typeof zt.then=="function")return kn(Rt,Et,Wh(zt),de);if(zt.$$typeof===R)return kn(Rt,Et,ya(Rt,zt),de);Ll(Rt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint"?(zt=""+zt,Et!==null&&Et.tag===6?(f(Rt,Et.sibling),de=w(Et,zt),de.return=Rt,Rt=de):(f(Rt,Et),de=yl(zt,Rt.mode,de),de.return=Rt,Rt=de),Z(Rt)):f(Rt,Et)}return function(Rt,Et,zt,de){try{Ka=0;var He=kn(Rt,Et,zt,de);return wl=null,He}catch(je){if(je===Wr||je===Mo)throw je;var Oi=Wn(29,je,null,Rt.mode);return Oi.lanes=de,Oi.return=Rt,Oi}finally{}}}var No=qh(!0),ar=qh(!1),xn=et(null),ta=null;function mo(o){var l=o.alternate;Mt(Ns,Ns.current&1),Mt(xn,o),ta===null&&(l===null||An.current!==null||l.memoizedState!==null)&&(ta=o)}function Ud(o){if(o.tag===22){if(Mt(Ns,Ns.current),Mt(xn,o),ta===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(ta=o)}}else Qr()}function Qr(){Mt(Ns,Ns.current),Mt(xn,xn.current)}function ea(o){Dt(xn),ta===o&&(ta=null),Dt(Ns)}var Ns=et(0);function Sa(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Ny(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Qh(o,l,f,y){l=o.memoizedState,f=f(y,l),f=f==null?l:g({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Kh={enqueueSetState:function(o,l,f){o=o._reactInternals;var y=ra(),w=xt(y);w.payload=l,f!=null&&(w.callback=f),l=It(o,w,y),l!==null&&(oa(l,o,y),ye(l,o,y))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var y=ra(),w=xt(y);w.tag=1,w.payload=l,f!=null&&(w.callback=f),l=It(o,w,y),l!==null&&(oa(l,o,y),ye(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=ra(),y=xt(f);y.tag=2,l!=null&&(y.callback=l),l=It(o,y,f),l!==null&&(oa(l,o,f),ye(l,o,f))}};function sf(o,l,f,y,w,I,Z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,I,Z):l.prototype&&l.prototype.isPureReactComponent?!Ks(f,y)||!Ks(w,I):!0}function Gd(o,l,f,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==o&&Kh.enqueueReplaceState(l,l.state,null)}function Cl(o,l){var f=l;if("ref"in l){f={};for(var y in l)y!=="ref"&&(f[y]=l[y])}if(o=o.defaultProps){f===l&&(f=g({},f));for(var w in o)f[w]===void 0&&(f[w]=o[w])}return f}var Vu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function rf(o){Vu(o)}function Hd(o){console.error(o)}function of(o){Vu(o)}function Ja(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function Ro(o,l,f){try{var y=o.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Vd(o,l,f){return f=xt(f),f.tag=3,f.payload={element:null},f.callback=function(){Ja(o,l)},f}function Lb(o){return o=xt(o),o.tag=3,o}function Cb(o,l,f,y){var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var I=y.value;o.payload=function(){return w(I)},o.callback=function(){Ro(l,f,y)}}var Z=f.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(o.callback=function(){Ro(l,f,y),typeof w!="function"&&(Qu===null?Qu=new Set([this]):Qu.add(this));var $=y.stack;this.componentDidCatch(y.value,{componentStack:$!==null?$:""})})}function WN(o,l,f,y,w){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=f.alternate,l!==null&&Yr(l,f,w,!0),f=xn.current,f!==null){switch(f.tag){case 13:return ta===null?fy():f.alternate===null&&Rs===0&&(Rs=3),f.flags&=-257,f.flags|=65536,f.lanes=w,y===Jo?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([y]):l.add(y),_y(o,y,w)),!1;case 22:return f.flags|=65536,y===Jo?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([y]):f.add(y)),_y(o,y,w)),!1}throw Error(n(435,f.tag))}return _y(o,y,w),fy(),!1}if(ti)return l=xn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,y!==Li&&(o=Error(n(422),{cause:y}),or(Gi(o,f)))):(y!==Li&&(l=Error(n(423),{cause:y}),or(Gi(l,f))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,y=Gi(y,f),w=Vd(o.stateNode,y,w),re(o,w),Rs!==4&&(Rs=2)),!1;var I=Error(n(520),{cause:y});if(I=Gi(I,f),ff===null?ff=[I]:ff.push(I),Rs!==4&&(Rs=2),l===null)return!0;y=Gi(y,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=w&-w,f.lanes|=o,o=Vd(f.stateNode,y,o),re(f,o),!1;case 1:if(l=f.type,I=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Qu===null||!Qu.has(I))))return f.flags|=65536,w&=-w,f.lanes|=w,w=Lb(w),Cb(w,o,f,y),re(f,w),!1}f=f.return}while(f!==null);return!1}var Mb=Error(n(461)),pr=!1;function Mr(o,l,f,y){l.child=o===null?ar(l,null,f,y):No(l,o.child,f,y)}function Nb(o,l,f,y,w){f=f.render;var I=l.ref;if("ref"in y){var Z={};for(var $ in y)$!=="ref"&&(Z[$]=y[$])}else Z=y;return _r(l),y=Cd(o,l,f,Z,I,w),$=Nh(),o!==null&&!pr?(Rh(o,l,w),tu(o,l,w)):(ti&&$&&ce(l),l.flags|=1,Mr(o,l,y,w),l.child)}function Rb(o,l,f,y,w){if(o===null){var I=f.type;return typeof I=="function"&&!Gr(I)&&I.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=I,Ob(o,l,I,y,w)):(o=Hr(f.type,null,y,l,l.mode,w),o.ref=l.ref,o.return=l,l.child=o)}if(I=o.child,!jp(o,w)){var Z=I.memoizedProps;if(f=f.compare,f=f!==null?f:Ks,f(Z,y)&&o.ref===l.ref)return tu(o,l,w)}return l.flags|=1,o=rr(I,y),o.ref=l.ref,o.return=l,l.child=o}function Ob(o,l,f,y,w){if(o!==null){var I=o.memoizedProps;if(Ks(I,y)&&o.ref===l.ref)if(pr=!1,l.pendingProps=y=I,jp(o,w))(o.flags&131072)!==0&&(pr=!0);else return l.lanes=o.lanes,tu(o,l,w)}return Yp(o,l,f,y,w)}function Ib(o,l,f){var y=l.pendingProps,w=y.children,I=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=I!==null?I.baseLanes|f:f,o!==null){for(w=l.child=o.child,I=0;w!==null;)I=I|w.lanes|w.childLanes,w=w.sibling;l.childLanes=I&~y}else l.childLanes=0,l.child=null;return Pb(o,l,y,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ko(l,I!==null?I.cachePool:null),I!==null?Fs(l,I):Vn(),Ud(l);else return l.lanes=l.childLanes=536870912,Pb(o,l,I!==null?I.baseLanes|f:f,f)}else I!==null?(Ko(l,I.cachePool),Fs(l,I),Qr(),l.memoizedState=null):(o!==null&&Ko(l,null),Vn(),Qr());return Mr(o,l,w,f),l.child}function Pb(o,l,f,y){var w=Ya();return w=w===null?null:{parent:Pn._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},o!==null&&Ko(l,null),Vn(),Ud(l),o!==null&&Yr(o,l,y,!0),null}function t_(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function Yp(o,l,f,y,w){return _r(l),f=Cd(o,l,f,y,void 0,w),y=Nh(),o!==null&&!pr?(Rh(o,l,w),tu(o,l,w)):(ti&&y&&ce(l),l.flags|=1,Mr(o,l,f,w),l.child)}function zb(o,l,f,y,w,I){return _r(l),l.updateQueue=null,f=Hc(l,y,f,w),Gc(o),y=Nh(),o!==null&&!pr?(Rh(o,l,I),tu(o,l,I)):(ti&&y&&ce(l),l.flags|=1,Mr(o,l,f,I),l.child)}function Db(o,l,f,y,w){if(_r(l),l.stateNode===null){var I=cr,Z=f.contextType;typeof Z=="object"&&Z!==null&&(I=fs(Z)),I=new f(y,I),l.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Kh,l.stateNode=I,I._reactInternals=l,I=l.stateNode,I.props=y,I.state=l.memoizedState,I.refs={},gt(l),Z=f.contextType,I.context=typeof Z=="object"&&Z!==null?fs(Z):cr,I.state=l.memoizedState,Z=f.getDerivedStateFromProps,typeof Z=="function"&&(Qh(l,f,Z,y),I.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Z=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Z!==I.state&&Kh.enqueueReplaceState(I,I.state,null),Ke(l,y,I,w),Ue(),I.state=l.memoizedState),typeof I.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(o===null){I=l.stateNode;var $=l.memoizedProps,ct=Cl(f,$);I.props=ct;var Ut=I.context,ae=f.contextType;Z=cr,typeof ae=="object"&&ae!==null&&(Z=fs(ae));var fe=f.getDerivedStateFromProps;ae=typeof fe=="function"||typeof I.getSnapshotBeforeUpdate=="function",$=l.pendingProps!==$,ae||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($||Ut!==Z)&&Gd(l,I,y,Z),rt=!1;var Yt=l.memoizedState;I.state=Yt,Ke(l,y,I,w),Ue(),Ut=l.memoizedState,$||Yt!==Ut||rt?(typeof fe=="function"&&(Qh(l,f,fe,y),Ut=l.memoizedState),(ct=rt||sf(l,f,ct,y,Yt,Ut,Z))?(ae||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(l.flags|=4194308)):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Ut),I.props=y,I.state=Ut,I.context=Z,y=ct):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{I=l.stateNode,Bt(o,l),Z=l.memoizedProps,ae=Cl(f,Z),I.props=ae,fe=l.pendingProps,Yt=I.context,Ut=f.contextType,ct=cr,typeof Ut=="object"&&Ut!==null&&(ct=fs(Ut)),$=f.getDerivedStateFromProps,(Ut=typeof $=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Z!==fe||Yt!==ct)&&Gd(l,I,y,ct),rt=!1,Yt=l.memoizedState,I.state=Yt,Ke(l,y,I,w),Ue();var Zt=l.memoizedState;Z!==fe||Yt!==Zt||rt||o!==null&&o.dependencies!==null&&Co(o.dependencies)?(typeof $=="function"&&(Qh(l,f,$,y),Zt=l.memoizedState),(ae=rt||sf(l,f,ae,y,Yt,Zt,ct)||o!==null&&o.dependencies!==null&&Co(o.dependencies))?(Ut||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(y,Zt,ct),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(y,Zt,ct)),typeof I.componentDidUpdate=="function"&&(l.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof I.componentDidUpdate!="function"||Z===o.memoizedProps&&Yt===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&Yt===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Zt),I.props=y,I.state=Zt,I.context=ct,y=ae):(typeof I.componentDidUpdate!="function"||Z===o.memoizedProps&&Yt===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&Yt===o.memoizedState||(l.flags|=1024),y=!1)}return I=y,t_(o,l),y=(l.flags&128)!==0,I||y?(I=l.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:I.render(),l.flags|=1,o!==null&&y?(l.child=No(l,o.child,null,w),l.child=No(l,null,f,w)):Mr(o,l,f,w),l.memoizedState=I.state,o=l.child):o=tu(o,l,w),o}function kb(o,l,f,y){return gr(),l.flags|=256,Mr(o,l,f,y),l.child}var Xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zp(o){return{baseLanes:o,cachePool:vl()}}function Wp(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=Aa),o}function Fb(o,l,f){var y=l.pendingProps,w=!1,I=(l.flags&128)!==0,Z;if((Z=I)||(Z=o!==null&&o.memoizedState===null?!1:(Ns.current&2)!==0),Z&&(w=!0,l.flags&=-129),Z=(l.flags&32)!==0,l.flags&=-33,o===null){if(ti){if(w?mo(l):Qr(),ti){var $=we,ct;if(ct=$){t:{for(ct=$,$=Ki;ct.nodeType!==8;){if(!$){$=null;break t}if(ct=tl(ct.nextSibling),ct===null){$=null;break t}}$=ct}$!==null?(l.memoizedState={dehydrated:$,treeContext:B!==null?{id:J,overflow:dt}:null,retryLane:536870912,hydrationErrors:null},ct=Wn(18,null,null,0),ct.stateNode=$,ct.return=l,l.child=ct,Ce=l,we=null,ct=!0):ct=!1}ct||ks(l)}if($=l.memoizedState,$!==null&&($=$.dehydrated,$!==null))return Ny($)?l.lanes=32:l.lanes=536870912,null;ea(l)}return $=y.children,y=y.fallback,w?(Qr(),w=l.mode,$=e_({mode:"hidden",children:$},w),y=ds(y,w,f,null),$.return=l,y.return=l,$.sibling=y,l.child=$,w=l.child,w.memoizedState=Zp(f),w.childLanes=Wp(o,Z,f),l.memoizedState=Xp,y):(mo(l),qp(l,$))}if(ct=o.memoizedState,ct!==null&&($=ct.dehydrated,$!==null)){if(I)l.flags&256?(mo(l),l.flags&=-257,l=Qp(o,l,f)):l.memoizedState!==null?(Qr(),l.child=o.child,l.flags|=128,l=null):(Qr(),w=y.fallback,$=l.mode,y=e_({mode:"visible",children:y.children},$),w=ds(w,$,f,null),w.flags|=2,y.return=l,w.return=l,y.sibling=w,l.child=y,No(l,o.child,null,f),y=l.child,y.memoizedState=Zp(f),y.childLanes=Wp(o,Z,f),l.memoizedState=Xp,l=w);else if(mo(l),Ny($)){if(Z=$.nextSibling&&$.nextSibling.dataset,Z)var Ut=Z.dgst;Z=Ut,y=Error(n(419)),y.stack="",y.digest=Z,or({value:y,source:null,stack:null}),l=Qp(o,l,f)}else if(pr||Yr(o,l,f,!1),Z=(f&o.childLanes)!==0,pr||Z){if(Z=Kn,Z!==null&&(y=f&-f,y=(y&42)!==0?1:us(y),y=(y&(Z.suspendedLanes|f))!==0?0:y,y!==0&&y!==ct.retryLane))throw ct.retryLane=y,Hn(o,y),oa(Z,o,y),Mb;$.data==="$?"||fy(),l=Qp(o,l,f)}else $.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=ct.treeContext,we=tl($.nextSibling),Ce=l,ti=!0,Yi=null,Ki=!1,o!==null&&(A[z++]=J,A[z++]=dt,A[z++]=B,J=o.id,dt=o.overflow,B=l),l=qp(l,y.children),l.flags|=4096);return l}return w?(Qr(),w=y.fallback,$=l.mode,ct=o.child,Ut=ct.sibling,y=rr(ct,{mode:"hidden",children:y.children}),y.subtreeFlags=ct.subtreeFlags&65011712,Ut!==null?w=rr(Ut,w):(w=ds(w,$,f,null),w.flags|=2),w.return=l,y.return=l,y.sibling=w,l.child=y,y=w,w=l.child,$=o.child.memoizedState,$===null?$=Zp(f):(ct=$.cachePool,ct!==null?(Ut=Pn._currentValue,ct=ct.parent!==Ut?{parent:Ut,pool:Ut}:ct):ct=vl(),$={baseLanes:$.baseLanes|f,cachePool:ct}),w.memoizedState=$,w.childLanes=Wp(o,Z,f),l.memoizedState=Xp,y):(mo(l),f=o.child,o=f.sibling,f=rr(f,{mode:"visible",children:y.children}),f.return=l,f.sibling=null,o!==null&&(Z=l.deletions,Z===null?(l.deletions=[o],l.flags|=16):Z.push(o)),l.child=f,l.memoizedState=null,f)}function qp(o,l){return l=e_({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function e_(o,l){return o=Wn(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Qp(o,l,f){return No(l,o.child,null,f),o=qp(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Bb(o,l,f){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),Xo(o.return,l,f)}function Kp(o,l,f,y,w){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:w}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=y,I.tail=f,I.tailMode=w)}function Ub(o,l,f){var y=l.pendingProps,w=y.revealOrder,I=y.tail;if(Mr(o,l,y.children,f),y=Ns.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Bb(o,f,l);else if(o.tag===19)Bb(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Mt(Ns,y),w){case"forwards":for(f=l.child,w=null;f!==null;)o=f.alternate,o!==null&&Sa(o)===null&&(w=f),f=f.sibling;f=w,f===null?(w=l.child,l.child=null):(w=f.sibling,f.sibling=null),Kp(l,!1,w,f,I);break;case"backwards":for(f=null,w=l.child,l.child=null;w!==null;){if(o=w.alternate,o!==null&&Sa(o)===null){l.child=w;break}o=w.sibling,w.sibling=f,f=w,w=o}Kp(l,!0,f,null,I);break;case"together":Kp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function tu(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),qu|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(Yr(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,f=rr(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=rr(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function jp(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Co(o)))}function qN(o,l,f){switch(l.tag){case 3:Se(l,l.stateNode.containerInfo),Vr(l,Pn,o.memoizedState.cache),gr();break;case 27:case 5:Gt(l);break;case 4:Se(l,l.stateNode.containerInfo);break;case 10:Vr(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(mo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?Fb(o,l,f):(mo(l),o=tu(o,l,f),o!==null?o.sibling:null);mo(l);break;case 19:var w=(o.flags&128)!==0;if(y=(f&l.childLanes)!==0,y||(Yr(o,l,f,!1),y=(f&l.childLanes)!==0),w){if(y)return Ub(o,l,f);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Mt(Ns,Ns.current),y)break;return null;case 22:case 23:return l.lanes=0,Ib(o,l,f);case 24:Vr(l,Pn,o.memoizedState.cache)}return tu(o,l,f)}function Gb(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)pr=!0;else{if(!jp(o,f)&&(l.flags&128)===0)return pr=!1,qN(o,l,f);pr=(o.flags&131072)!==0}else pr=!1,ti&&(l.flags&1048576)!==0&&Ht(l,p,l.index);switch(l.lanes=0,l.tag){case 16:t:{o=l.pendingProps;var y=l.elementType,w=y._init;if(y=w(y._payload),l.type=y,typeof y=="function")Gr(y)?(o=Cl(y,o),l.tag=1,l=Db(null,l,y,o,f)):(l.tag=0,l=Yp(null,l,y,o,f));else{if(y!=null){if(w=y.$$typeof,w===P){l.tag=11,l=Nb(null,l,y,o,f);break t}else if(w===V){l.tag=14,l=Rb(null,l,y,o,f);break t}}throw l=ft(y)||y,Error(n(306,l,""))}}return l;case 0:return Yp(o,l,l.type,l.pendingProps,f);case 1:return y=l.type,w=Cl(y,l.pendingProps),Db(o,l,y,w,f);case 3:t:{if(Se(l,l.stateNode.containerInfo),o===null)throw Error(n(387));y=l.pendingProps;var I=l.memoizedState;w=I.element,Bt(o,l),Ke(l,y,null,f);var Z=l.memoizedState;if(y=Z.cache,Vr(l,Pn,y),y!==I.cache&&In(l,[Pn],f,!0),Ue(),y=Z.element,I.isDehydrated)if(I={element:y,isDehydrated:!1,cache:Z.cache},l.updateQueue.baseState=I,l.memoizedState=I,l.flags&256){l=kb(o,l,y,f);break t}else if(y!==w){w=Gi(Error(n(424)),l),or(w),l=kb(o,l,y,f);break t}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(we=tl(o.firstChild),Ce=l,ti=!0,Yi=null,Ki=!0,f=ar(l,null,y,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(gr(),y===w){l=tu(o,l,f);break t}Mr(o,l,y,f)}l=l.child}return l;case 26:return t_(o,l),o===null?(f=XE(l.type,null,l.pendingProps,null))?l.memoizedState=f:ti||(f=l.type,o=l.pendingProps,y=__(jt.current).createElement(f),y[Ii]=l,y[Fe]=o,Rr(y,f,o),tn(y),l.stateNode=y):l.memoizedState=XE(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Gt(l),o===null&&ti&&(y=l.stateNode=HE(l.type,l.pendingProps,jt.current),Ce=l,Ki=!0,w=we,Ju(l.type)?(Ry=w,we=tl(y.firstChild)):we=w),Mr(o,l,l.pendingProps.children,f),t_(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&ti&&((w=y=we)&&(y=ER(y,l.type,l.pendingProps,Ki),y!==null?(l.stateNode=y,Ce=l,we=tl(y.firstChild),Ki=!1,w=!0):w=!1),w||ks(l)),Gt(l),w=l.type,I=l.pendingProps,Z=o!==null?o.memoizedProps:null,y=I.children,Ly(w,I)?y=null:Z!==null&&Ly(w,Z)&&(l.flags|=32),l.memoizedState!==null&&(w=Cd(o,l,Vc,null,null,f),Ef._currentValue=w),t_(o,l),Mr(o,l,y,f),l.child;case 6:return o===null&&ti&&((o=f=we)&&(f=SR(f,l.pendingProps,Ki),f!==null?(l.stateNode=f,Ce=l,we=null,o=!0):o=!1),o||ks(l)),null;case 13:return Fb(o,l,f);case 4:return Se(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=No(l,null,y,f):Mr(o,l,y,f),l.child;case 11:return Nb(o,l,l.type,l.pendingProps,f);case 7:return Mr(o,l,l.pendingProps,f),l.child;case 8:return Mr(o,l,l.pendingProps.children,f),l.child;case 12:return Mr(o,l,l.pendingProps.children,f),l.child;case 10:return y=l.pendingProps,Vr(l,l.type,y.value),Mr(o,l,y.children,f),l.child;case 9:return w=l.type._context,y=l.pendingProps.children,_r(l),w=fs(w),y=y(w),l.flags|=1,Mr(o,l,y,f),l.child;case 14:return Rb(o,l,l.type,l.pendingProps,f);case 15:return Ob(o,l,l.type,l.pendingProps,f);case 19:return Ub(o,l,f);case 31:return y=l.pendingProps,f=l.mode,y={mode:y.mode,children:y.children},o===null?(f=e_(y,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=rr(o.child,y),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return Ib(o,l,f);case 24:return _r(l),y=fs(Pn),o===null?(w=Ya(),w===null&&(w=Kn,I=va(),w.pooledCache=I,I.refCount++,I!==null&&(w.pooledCacheLanes|=f),w=I),l.memoizedState={parent:y,cache:w},gt(l),Vr(l,Pn,w)):((o.lanes&f)!==0&&(Bt(o,l),Ke(l,null,null,f),Ue()),w=o.memoizedState,I=l.memoizedState,w.parent!==y?(w={parent:y,cache:y},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),Vr(l,Pn,y)):(y=I.cache,Vr(l,Pn,y),y!==w.cache&&In(l,[Pn],f,!0))),Mr(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function eu(o){o.flags|=4}function Hb(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!KE(l)){if(l=xn.current,l!==null&&((ji&4194048)===ji?ta!==null:(ji&62914560)!==ji&&(ji&536870912)===0||l!==ta))throw D=Jo,jo;o.flags|=8192}}function i_(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Hi():536870912,o.lanes|=l,Wd|=l)}function af(o,l){if(!ti)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function bs(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,y=0;if(l)for(var w=o.child;w!==null;)f|=w.lanes|w.childLanes,y|=w.subtreeFlags&65011712,y|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)f|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=y,o.childLanes=f,l}function QN(o,l,f){var y=l.pendingProps;switch(be(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(l),null;case 1:return bs(l),null;case 3:return f=l.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),js(Pn),Lt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(_o(l)?eu(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Tr())),bs(l),null;case 26:return f=l.memoizedState,o===null?(eu(l),f!==null?(bs(l),Hb(l,f)):(bs(l),l.flags&=-16777217)):f?f!==o.memoizedState?(eu(l),bs(l),Hb(l,f)):(bs(l),l.flags&=-16777217):(o.memoizedProps!==y&&eu(l),bs(l),l.flags&=-16777217),null;case 27:ie(l),f=jt.current;var w=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==y&&eu(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return bs(l),null}o=At.current,_o(l)?fr(l):(o=HE(w,y,f),l.stateNode=o,eu(l))}return bs(l),null;case 5:if(ie(l),f=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==y&&eu(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return bs(l),null}if(o=At.current,_o(l))fr(l);else{switch(w=__(jt.current),o){case 1:o=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?w.createElement("select",{is:y.is}):w.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?w.createElement(f,{is:y.is}):w.createElement(f)}}o[Ii]=l,o[Fe]=y;t:for(w=l.child;w!==null;){if(w.tag===5||w.tag===6)o.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===l)break t;for(;w.sibling===null;){if(w.return===null||w.return===l)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}l.stateNode=o;t:switch(Rr(o,f,y),f){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&eu(l)}}return bs(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==y&&eu(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(o=jt.current,_o(l)){if(o=l.stateNode,f=l.memoizedProps,y=null,w=Ce,w!==null)switch(w.tag){case 27:case 5:y=w.memoizedProps}o[Ii]=l,o=!!(o.nodeValue===f||y!==null&&y.suppressHydrationWarning===!0||zE(o.nodeValue,f)),o||ks(l)}else o=__(o).createTextNode(y),o[Ii]=l,l.stateNode=o}return bs(l),null;case 13:if(y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=_o(l),y!==null&&y.dehydrated!==null){if(o===null){if(!w)throw Error(n(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[Ii]=l}else gr(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;bs(l),w=!1}else w=Tr(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(ea(l),l):(ea(l),null)}if(ea(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=y!==null,o=o!==null&&o.memoizedState!==null,f){y=l.child,w=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(w=y.alternate.memoizedState.cachePool.pool);var I=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(I=y.memoizedState.cachePool.pool),I!==w&&(y.flags|=2048)}return f!==o&&f&&(l.child.flags|=8192),i_(l,l.updateQueue),bs(l),null;case 4:return Lt(),o===null&&Ey(l.stateNode.containerInfo),bs(l),null;case 10:return js(l.type),bs(l),null;case 19:if(Dt(Ns),w=l.memoizedState,w===null)return bs(l),null;if(y=(l.flags&128)!==0,I=w.rendering,I===null)if(y)af(w,!1);else{if(Rs!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(I=Sa(o),I!==null){for(l.flags|=128,af(w,!1),o=I.updateQueue,l.updateQueue=o,i_(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)pa(f,o),f=f.sibling;return Mt(Ns,Ns.current&1|2),l.child}o=o.sibling}w.tail!==null&&ve()>r_&&(l.flags|=128,y=!0,af(w,!1),l.lanes=4194304)}else{if(!y)if(o=Sa(I),o!==null){if(l.flags|=128,y=!0,o=o.updateQueue,l.updateQueue=o,i_(l,o),af(w,!0),w.tail===null&&w.tailMode==="hidden"&&!I.alternate&&!ti)return bs(l),null}else 2*ve()-w.renderingStartTime>r_&&f!==536870912&&(l.flags|=128,y=!0,af(w,!1),l.lanes=4194304);w.isBackwards?(I.sibling=l.child,l.child=I):(o=w.last,o!==null?o.sibling=I:l.child=I,w.last=I)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=ve(),l.sibling=null,o=Ns.current,Mt(Ns,y?o&1|2:o&1),l):(bs(l),null);case 22:case 23:return ea(l),Js(),y=l.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(f&536870912)!==0&&(l.flags&128)===0&&(bs(l),l.subtreeFlags&6&&(l.flags|=8192)):bs(l),f=l.updateQueue,f!==null&&i_(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048),o!==null&&Dt(Lr),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),js(Pn),bs(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function KN(o,l){switch(be(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return js(Pn),Lt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return ie(l),null;case 13:if(ea(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));gr()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Dt(Ns),null;case 4:return Lt(),null;case 10:return js(l.type),null;case 22:case 23:return ea(l),Js(),o!==null&&Dt(Lr),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return js(Pn),null;case 25:return null;default:return null}}function Vb(o,l){switch(be(l),l.tag){case 3:js(Pn),Lt();break;case 26:case 27:case 5:ie(l);break;case 4:Lt();break;case 13:ea(l);break;case 19:Dt(Ns);break;case 10:js(l.type);break;case 22:case 23:ea(l),Js(),o!==null&&Dt(Lr);break;case 24:js(Pn)}}function lf(o,l){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var w=y.next;f=w;do{if((f.tag&o)===o){y=void 0;var I=f.create,Z=f.inst;y=I(),Z.destroy=y}f=f.next}while(f!==w)}}catch($){Yn(l,l.return,$)}}function Yu(o,l,f){try{var y=l.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var I=w.next;y=I;do{if((y.tag&o)===o){var Z=y.inst,$=Z.destroy;if($!==void 0){Z.destroy=void 0,w=l;var ct=f,Ut=$;try{Ut()}catch(ae){Yn(w,ct,ae)}}}y=y.next}while(y!==I)}}catch(ae){Yn(l,l.return,ae)}}function Yb(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{fn(l,f)}catch(y){Yn(o,o.return,y)}}}function Xb(o,l,f){f.props=Cl(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(y){Yn(o,l,y)}}function uf(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof f=="function"?o.refCleanup=f(y):f.current=y}}catch(w){Yn(o,l,w)}}function Ml(o,l){var f=o.ref,y=o.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(w){Yn(o,l,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(w){Yn(o,l,w)}else f.current=null}function Zb(o){var l=o.type,f=o.memoizedProps,y=o.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&y.focus();break t;case"img":f.src?y.src=f.src:f.srcSet&&(y.srcset=f.srcSet)}}catch(w){Yn(o,o.return,w)}}function Jp(o,l,f){try{var y=o.stateNode;pR(y,o.type,f,l),y[Fe]=l}catch(w){Yn(o,o.return,w)}}function Wb(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ju(o.type)||o.tag===4}function $p(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||Wb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ju(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ty(o,l,f){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=g_));else if(y!==4&&(y===27&&Ju(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(ty(o,l,f),o=o.sibling;o!==null;)ty(o,l,f),o=o.sibling}function n_(o,l,f){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(y!==4&&(y===27&&Ju(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(n_(o,l,f),o=o.sibling;o!==null;)n_(o,l,f),o=o.sibling}function qb(o){var l=o.stateNode,f=o.memoizedProps;try{for(var y=o.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);Rr(l,y,f),l[Ii]=o,l[Fe]=f}catch(I){Yn(o,o.return,I)}}var iu=!1,Bs=!1,ey=!1,Qb=typeof WeakSet=="function"?WeakSet:Set,yr=null;function jN(o,l){if(o=o.containerInfo,Ty=b_,o=k(o),G(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else t:{f=(f=o.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var w=y.anchorOffset,I=y.focusNode;y=y.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break t}var Z=0,$=-1,ct=-1,Ut=0,ae=0,fe=o,Yt=null;e:for(;;){for(var Zt;fe!==f||w!==0&&fe.nodeType!==3||($=Z+w),fe!==I||y!==0&&fe.nodeType!==3||(ct=Z+y),fe.nodeType===3&&(Z+=fe.nodeValue.length),(Zt=fe.firstChild)!==null;)Yt=fe,fe=Zt;for(;;){if(fe===o)break e;if(Yt===f&&++Ut===w&&($=Z),Yt===I&&++ae===y&&(ct=Z),(Zt=fe.nextSibling)!==null)break;fe=Yt,Yt=fe.parentNode}fe=Zt}f=$===-1||ct===-1?null:{start:$,end:ct}}else f=null}f=f||{start:0,end:0}}else f=null;for(wy={focusedElem:o,selectionRange:f},b_=!1,yr=l;yr!==null;)if(l=yr,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,yr=o;else for(;yr!==null;){switch(l=yr,I=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&I!==null){o=void 0,f=l,w=I.memoizedProps,I=I.memoizedState,y=f.stateNode;try{var ai=Cl(f.type,w,f.elementType===f.type);o=y.getSnapshotBeforeUpdate(ai,I),y.__reactInternalSnapshotBeforeUpdate=o}catch(si){Yn(f,f.return,si)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)My(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":My(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,yr=o;break}yr=l.return}}function Kb(o,l,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:Xu(o,f),y&4&&lf(5,f);break;case 1:if(Xu(o,f),y&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(Z){Yn(f,f.return,Z)}else{var w=Cl(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(w,l,o.__reactInternalSnapshotBeforeUpdate)}catch(Z){Yn(f,f.return,Z)}}y&64&&Yb(f),y&512&&uf(f,f.return);break;case 3:if(Xu(o,f),y&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{fn(o,l)}catch(Z){Yn(f,f.return,Z)}}break;case 27:l===null&&y&4&&qb(f);case 26:case 5:Xu(o,f),l===null&&y&4&&Zb(f),y&512&&uf(f,f.return);break;case 12:Xu(o,f);break;case 13:Xu(o,f),y&4&&$b(o,f),y&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=oR.bind(null,f),AR(o,f))));break;case 22:if(y=f.memoizedState!==null||iu,!y){l=l!==null&&l.memoizedState!==null||Bs,w=iu;var I=Bs;iu=y,(Bs=l)&&!I?Zu(o,f,(f.subtreeFlags&8772)!==0):Xu(o,f),iu=w,Bs=I}break;case 30:break;default:Xu(o,f)}}function jb(o){var l=o.alternate;l!==null&&(o.alternate=null,jb(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&ci(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var gs=null,Oo=!1;function nu(o,l,f){for(f=f.child;f!==null;)Jb(o,l,f),f=f.sibling}function Jb(o,l,f){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(qe,f)}catch{}switch(f.tag){case 26:Bs||Ml(f,l),nu(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Bs||Ml(f,l);var y=gs,w=Oo;Ju(f.type)&&(gs=f.stateNode,Oo=!1),nu(o,l,f),yf(f.stateNode),gs=y,Oo=w;break;case 5:Bs||Ml(f,l);case 6:if(y=gs,w=Oo,gs=null,nu(o,l,f),gs=y,Oo=w,gs!==null)if(Oo)try{(gs.nodeType===9?gs.body:gs.nodeName==="HTML"?gs.ownerDocument.body:gs).removeChild(f.stateNode)}catch(I){Yn(f,l,I)}else try{gs.removeChild(f.stateNode)}catch(I){Yn(f,l,I)}break;case 18:gs!==null&&(Oo?(o=gs,UE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),wf(o)):UE(gs,f.stateNode));break;case 4:y=gs,w=Oo,gs=f.stateNode.containerInfo,Oo=!0,nu(o,l,f),gs=y,Oo=w;break;case 0:case 11:case 14:case 15:Bs||Yu(2,f,l),Bs||Yu(4,f,l),nu(o,l,f);break;case 1:Bs||(Ml(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"&&Xb(f,l,y)),nu(o,l,f);break;case 21:nu(o,l,f);break;case 22:Bs=(y=Bs)||f.memoizedState!==null,nu(o,l,f),Bs=y;break;default:nu(o,l,f)}}function $b(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{wf(o)}catch(f){Yn(l,l.return,f)}}function JN(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new Qb),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new Qb),l;default:throw Error(n(435,o.tag))}}function iy(o,l){var f=JN(o);l.forEach(function(y){var w=aR.bind(null,o,y);f.has(y)||(f.add(y),y.then(w,w))})}function ia(o,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var w=f[y],I=o,Z=l,$=Z;t:for(;$!==null;){switch($.tag){case 27:if(Ju($.type)){gs=$.stateNode,Oo=!1;break t}break;case 5:gs=$.stateNode,Oo=!1;break t;case 3:case 4:gs=$.stateNode.containerInfo,Oo=!0;break t}$=$.return}if(gs===null)throw Error(n(160));Jb(I,Z,w),gs=null,Oo=!1,I=w.alternate,I!==null&&(I.return=null),w.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)tE(l,o),l=l.sibling}var $a=null;function tE(o,l){var f=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ia(l,o),na(o),y&4&&(Yu(3,o,o.return),lf(3,o),Yu(5,o,o.return));break;case 1:ia(l,o),na(o),y&512&&(Bs||f===null||Ml(f,f.return)),y&64&&iu&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:var w=$a;if(ia(l,o),na(o),y&512&&(Bs||f===null||Ml(f,f.return)),y&4){var I=f!==null?f.memoizedState:null;if(y=o.memoizedState,f===null)if(y===null)if(o.stateNode===null){t:{y=o.type,f=o.memoizedProps,w=w.ownerDocument||w;e:switch(y){case"title":I=w.getElementsByTagName("title")[0],(!I||I[er]||I[Ii]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=w.createElement(y),w.head.insertBefore(I,w.querySelector("head > title"))),Rr(I,y,f),I[Ii]=o,tn(I),y=I;break t;case"link":var Z=qE("link","href",w).get(y+(f.href||""));if(Z){for(var $=0;$<Z.length;$++)if(I=Z[$],I.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&I.getAttribute("rel")===(f.rel==null?null:f.rel)&&I.getAttribute("title")===(f.title==null?null:f.title)&&I.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){Z.splice($,1);break e}}I=w.createElement(y),Rr(I,y,f),w.head.appendChild(I);break;case"meta":if(Z=qE("meta","content",w).get(y+(f.content||""))){for($=0;$<Z.length;$++)if(I=Z[$],I.getAttribute("content")===(f.content==null?null:""+f.content)&&I.getAttribute("name")===(f.name==null?null:f.name)&&I.getAttribute("property")===(f.property==null?null:f.property)&&I.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&I.getAttribute("charset")===(f.charSet==null?null:f.charSet)){Z.splice($,1);break e}}I=w.createElement(y),Rr(I,y,f),w.head.appendChild(I);break;default:throw Error(n(468,y))}I[Ii]=o,tn(I),y=I}o.stateNode=y}else QE(w,o.type,o.stateNode);else o.stateNode=WE(w,y,o.memoizedProps);else I!==y?(I===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):I.count--,y===null?QE(w,o.type,o.stateNode):WE(w,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Jp(o,o.memoizedProps,f.memoizedProps)}break;case 27:ia(l,o),na(o),y&512&&(Bs||f===null||Ml(f,f.return)),f!==null&&y&4&&Jp(o,o.memoizedProps,f.memoizedProps);break;case 5:if(ia(l,o),na(o),y&512&&(Bs||f===null||Ml(f,f.return)),o.flags&32){w=o.stateNode;try{$e(w,"")}catch(Zt){Yn(o,o.return,Zt)}}y&4&&o.stateNode!=null&&(w=o.memoizedProps,Jp(o,w,f!==null?f.memoizedProps:w)),y&1024&&(ey=!0);break;case 6:if(ia(l,o),na(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,f=o.stateNode;try{f.nodeValue=y}catch(Zt){Yn(o,o.return,Zt)}}break;case 3:if(y_=null,w=$a,$a=m_(l.containerInfo),ia(l,o),$a=w,na(o),y&4&&f!==null&&f.memoizedState.isDehydrated)try{wf(l.containerInfo)}catch(Zt){Yn(o,o.return,Zt)}ey&&(ey=!1,eE(o));break;case 4:y=$a,$a=m_(o.stateNode.containerInfo),ia(l,o),na(o),$a=y;break;case 12:ia(l,o),na(o);break;case 13:ia(l,o),na(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(ly=ve()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,iy(o,y)));break;case 22:w=o.memoizedState!==null;var ct=f!==null&&f.memoizedState!==null,Ut=iu,ae=Bs;if(iu=Ut||w,Bs=ae||ct,ia(l,o),Bs=ae,iu=Ut,na(o),y&8192)t:for(l=o.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(f===null||ct||iu||Bs||jh(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){ct=f=l;try{if(I=ct.stateNode,w)Z=I.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{$=ct.stateNode;var fe=ct.memoizedProps.style,Yt=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;$.style.display=Yt==null||typeof Yt=="boolean"?"":(""+Yt).trim()}}catch(Zt){Yn(ct,ct.return,Zt)}}}else if(l.tag===6){if(f===null){ct=l;try{ct.stateNode.nodeValue=w?"":ct.memoizedProps}catch(Zt){Yn(ct,ct.return,Zt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=o.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,iy(o,f))));break;case 19:ia(l,o),na(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,iy(o,y)));break;case 30:break;case 21:break;default:ia(l,o),na(o)}}function na(o){var l=o.flags;if(l&2){try{for(var f,y=o.return;y!==null;){if(Wb(y)){f=y;break}y=y.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var w=f.stateNode,I=$p(o);n_(o,I,w);break;case 5:var Z=f.stateNode;f.flags&32&&($e(Z,""),f.flags&=-33);var $=$p(o);n_(o,$,Z);break;case 3:case 4:var ct=f.stateNode.containerInfo,Ut=$p(o);ty(o,Ut,ct);break;default:throw Error(n(161))}}catch(ae){Yn(o,o.return,ae)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function eE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;eE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Xu(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Kb(o,l.alternate,l),l=l.sibling}function jh(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Yu(4,l,l.return),jh(l);break;case 1:Ml(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Xb(l,l.return,f),jh(l);break;case 27:yf(l.stateNode);case 26:case 5:Ml(l,l.return),jh(l);break;case 22:l.memoizedState===null&&jh(l);break;case 30:jh(l);break;default:jh(l)}o=o.sibling}}function Zu(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,w=o,I=l,Z=I.flags;switch(I.tag){case 0:case 11:case 15:Zu(w,I,f),lf(4,I);break;case 1:if(Zu(w,I,f),y=I,w=y.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Ut){Yn(y,y.return,Ut)}if(y=I,w=y.updateQueue,w!==null){var $=y.stateNode;try{var ct=w.shared.hiddenCallbacks;if(ct!==null)for(w.shared.hiddenCallbacks=null,w=0;w<ct.length;w++)oi(ct[w],$)}catch(Ut){Yn(y,y.return,Ut)}}f&&Z&64&&Yb(I),uf(I,I.return);break;case 27:qb(I);case 26:case 5:Zu(w,I,f),f&&y===null&&Z&4&&Zb(I),uf(I,I.return);break;case 12:Zu(w,I,f);break;case 13:Zu(w,I,f),f&&Z&4&&$b(w,I);break;case 22:I.memoizedState===null&&Zu(w,I,f),uf(I,I.return);break;case 30:break;default:Zu(w,I,f)}l=l.sibling}}function ny(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Zo(f))}function sy(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Zo(o))}function Nl(o,l,f,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)iE(o,l,f,y),l=l.sibling}function iE(o,l,f,y){var w=l.flags;switch(l.tag){case 0:case 11:case 15:Nl(o,l,f,y),w&2048&&lf(9,l);break;case 1:Nl(o,l,f,y);break;case 3:Nl(o,l,f,y),w&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Zo(o)));break;case 12:if(w&2048){Nl(o,l,f,y),o=l.stateNode;try{var I=l.memoizedProps,Z=I.id,$=I.onPostCommit;typeof $=="function"&&$(Z,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ct){Yn(l,l.return,ct)}}else Nl(o,l,f,y);break;case 13:Nl(o,l,f,y);break;case 23:break;case 22:I=l.stateNode,Z=l.alternate,l.memoizedState!==null?I._visibility&2?Nl(o,l,f,y):hf(o,l):I._visibility&2?Nl(o,l,f,y):(I._visibility|=2,Yd(o,l,f,y,(l.subtreeFlags&10256)!==0)),w&2048&&ny(Z,l);break;case 24:Nl(o,l,f,y),w&2048&&sy(l.alternate,l);break;default:Nl(o,l,f,y)}}function Yd(o,l,f,y,w){for(w=w&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var I=o,Z=l,$=f,ct=y,Ut=Z.flags;switch(Z.tag){case 0:case 11:case 15:Yd(I,Z,$,ct,w),lf(8,Z);break;case 23:break;case 22:var ae=Z.stateNode;Z.memoizedState!==null?ae._visibility&2?Yd(I,Z,$,ct,w):hf(I,Z):(ae._visibility|=2,Yd(I,Z,$,ct,w)),w&&Ut&2048&&ny(Z.alternate,Z);break;case 24:Yd(I,Z,$,ct,w),w&&Ut&2048&&sy(Z.alternate,Z);break;default:Yd(I,Z,$,ct,w)}l=l.sibling}}function hf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,y=l,w=y.flags;switch(y.tag){case 22:hf(f,y),w&2048&&ny(y.alternate,y);break;case 24:hf(f,y),w&2048&&sy(y.alternate,y);break;default:hf(f,y)}l=l.sibling}}var df=8192;function Xd(o){if(o.subtreeFlags&df)for(o=o.child;o!==null;)nE(o),o=o.sibling}function nE(o){switch(o.tag){case 26:Xd(o),o.flags&df&&o.memoizedState!==null&&kR($a,o.memoizedState,o.memoizedProps);break;case 5:Xd(o);break;case 3:case 4:var l=$a;$a=m_(o.stateNode.containerInfo),Xd(o),$a=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=df,df=16777216,Xd(o),df=l):Xd(o));break;default:Xd(o)}}function sE(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function cf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];yr=y,oE(y,o)}sE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rE(o),o=o.sibling}function rE(o){switch(o.tag){case 0:case 11:case 15:cf(o),o.flags&2048&&Yu(9,o,o.return);break;case 3:cf(o);break;case 12:cf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,s_(o)):cf(o);break;default:cf(o)}}function s_(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];yr=y,oE(y,o)}sE(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Yu(8,l,l.return),s_(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,s_(l));break;default:s_(l)}o=o.sibling}}function oE(o,l){for(;yr!==null;){var f=yr;switch(f.tag){case 0:case 11:case 15:Yu(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Zo(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,yr=y;else t:for(f=o;yr!==null;){y=yr;var w=y.sibling,I=y.return;if(jb(y),y===f){yr=null;break t}if(w!==null){w.return=I,yr=w;break t}yr=I}}}var $N={getCacheForType:function(o){var l=fs(Pn),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f}},tR=typeof WeakMap=="function"?WeakMap:Map,wn=0,Kn=null,zi=null,ji=0,Ln=0,sa=null,Wu=!1,Zd=!1,ry=!1,su=0,Rs=0,qu=0,Jh=0,oy=0,Aa=0,Wd=0,ff=null,Io=null,ay=!1,ly=0,r_=1/0,o_=null,Qu=null,Nr=0,Ku=null,qd=null,Qd=0,uy=0,hy=null,aE=null,gf=0,dy=null;function ra(){if((wn&2)!==0&&ji!==0)return ji&-ji;if(W.T!==null){var o=Wo;return o!==0?o:yy()}return pn()}function lE(){Aa===0&&(Aa=(ji&536870912)===0||ti?ys():536870912);var o=xn.current;return o!==null&&(o.flags|=32),Aa}function oa(o,l,f){(o===Kn&&(Ln===2||Ln===9)||o.cancelPendingCommit!==null)&&(Kd(o,0),ju(o,ji,Aa,!1)),Mn(o,f),((wn&2)===0||o!==Kn)&&(o===Kn&&((wn&2)===0&&(Jh|=f),Rs===4&&ju(o,ji,Aa,!1)),Rl(o))}function uE(o,l,f){if((wn&6)!==0)throw Error(n(327));var y=!f&&(l&124)===0&&(l&o.expiredLanes)===0||gi(o,l),w=y?nR(o,l):gy(o,l,!0),I=y;do{if(w===0){Zd&&!y&&ju(o,l,0,!1);break}else{if(f=o.current.alternate,I&&!eR(f)){w=gy(o,l,!1),I=!1;continue}if(w===2){if(I=l,o.errorRecoveryDisabledLanes&I)var Z=0;else Z=o.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){l=Z;t:{var $=o;w=ff;var ct=$.current.memoizedState.isDehydrated;if(ct&&(Kd($,Z).flags|=256),Z=gy($,Z,!1),Z!==2){if(ry&&!ct){$.errorRecoveryDisabledLanes|=I,Jh|=I,w=4;break t}I=Io,Io=w,I!==null&&(Io===null?Io=I:Io.push.apply(Io,I))}w=Z}if(I=!1,w!==2)continue}}if(w===1){Kd(o,0),ju(o,l,0,!0);break}t:{switch(y=o,I=w,I){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:ju(y,l,Aa,!Wu);break t;case 2:Io=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(w=ly+300-ve(),10<w)){if(ju(y,l,Aa,!Wu),di(y,0,!0)!==0)break t;y.timeoutHandle=FE(hE.bind(null,y,f,Io,o_,ay,l,Aa,Jh,Wd,Wu,I,2,-0,0),w);break t}hE(y,f,Io,o_,ay,l,Aa,Jh,Wd,Wu,I,0,-0,0)}}break}while(!0);Rl(o)}function hE(o,l,f,y,w,I,Z,$,ct,Ut,ae,fe,Yt,Zt){if(o.timeoutHandle=-1,fe=l.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(bf={stylesheets:null,count:0,unsuspend:DR},nE(l),fe=FR(),fe!==null)){o.cancelPendingCommit=fe(pE.bind(null,o,l,I,f,y,w,Z,$,ct,ae,1,Yt,Zt)),ju(o,I,Z,!Ut);return}pE(o,l,I,f,y,w,Z,$,ct)}function eR(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var w=f[y],I=w.getSnapshot;w=w.value;try{if(!Cs(I(),w))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ju(o,l,f,y){l&=~oy,l&=~Jh,o.suspendedLanes|=l,o.pingedLanes&=~l,y&&(o.warmLanes|=l),y=o.expirationTimes;for(var w=l;0<w;){var I=31-Mi(w),Z=1<<I;y[I]=-1,w&=~Z}f!==0&&ur(o,f,l)}function a_(){return(wn&6)===0?(_f(0),!1):!0}function cy(){if(zi!==null){if(Ln===0)var o=zi.return;else o=zi,wr=cs=null,Oh(o),wl=null,Ka=0,o=zi;for(;o!==null;)Vb(o.alternate,o),o=o.return;zi=null}}function Kd(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,vR(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),cy(),Kn=o,zi=f=rr(o.current,null),ji=l,Ln=0,sa=null,Wu=!1,Zd=gi(o,l),ry=!1,Wd=Aa=oy=Jh=qu=Rs=0,Io=ff=null,ay=!1,(l&8)!==0&&(l|=l&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=l;0<y;){var w=31-Mi(y),I=1<<w;l|=o[w],y&=~I}return su=l,Ms(),f}function dE(o,l){ni=null,W.H=Zh,l===Wr||l===Mo?(l=H(),Ln=3):l===jo?(l=H(),Ln=4):Ln=l===Mb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,sa=l,zi===null&&(Rs=1,Ja(o,Gi(l,o.current)))}function cE(){var o=W.H;return W.H=Zh,o===null?Zh:o}function fE(){var o=W.A;return W.A=$N,o}function fy(){Rs=4,Wu||(ji&4194048)!==ji&&xn.current!==null||(Zd=!0),(qu&134217727)===0&&(Jh&134217727)===0||Kn===null||ju(Kn,ji,Aa,!1)}function gy(o,l,f){var y=wn;wn|=2;var w=cE(),I=fE();(Kn!==o||ji!==l)&&(o_=null,Kd(o,l)),l=!1;var Z=Rs;t:do try{if(Ln!==0&&zi!==null){var $=zi,ct=sa;switch(Ln){case 8:cy(),Z=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(l=!0);var Ut=Ln;if(Ln=0,sa=null,jd(o,$,ct,Ut),f&&Zd){Z=0;break t}break;default:Ut=Ln,Ln=0,sa=null,jd(o,$,ct,Ut)}}iR(),Z=Rs;break}catch(ae){dE(o,ae)}while(!0);return l&&o.shellSuspendCounter++,wr=cs=null,wn=y,W.H=w,W.A=I,zi===null&&(Kn=null,ji=0,Ms()),Z}function iR(){for(;zi!==null;)gE(zi)}function nR(o,l){var f=wn;wn|=2;var y=cE(),w=fE();Kn!==o||ji!==l?(o_=null,r_=ve()+500,Kd(o,l)):Zd=gi(o,l);t:do try{if(Ln!==0&&zi!==null){l=zi;var I=sa;e:switch(Ln){case 1:Ln=0,sa=null,jd(o,l,I,1);break;case 2:case 9:if(xl(I)){Ln=0,sa=null,_E(l);break}l=function(){Ln!==2&&Ln!==9||Kn!==o||(Ln=7),Rl(o)},I.then(l,l);break t;case 3:Ln=7;break t;case 4:Ln=5;break t;case 7:xl(I)?(Ln=0,sa=null,_E(l)):(Ln=0,sa=null,jd(o,l,I,7));break;case 5:var Z=null;switch(zi.tag){case 26:Z=zi.memoizedState;case 5:case 27:var $=zi;if(!Z||KE(Z)){Ln=0,sa=null;var ct=$.sibling;if(ct!==null)zi=ct;else{var Ut=$.return;Ut!==null?(zi=Ut,l_(Ut)):zi=null}break e}}Ln=0,sa=null,jd(o,l,I,5);break;case 6:Ln=0,sa=null,jd(o,l,I,6);break;case 8:cy(),Rs=6;break t;default:throw Error(n(462))}}sR();break}catch(ae){dE(o,ae)}while(!0);return wr=cs=null,W.H=y,W.A=w,wn=f,zi!==null?0:(Kn=null,ji=0,Ms(),Rs)}function sR(){for(;zi!==null&&!ee();)gE(zi)}function gE(o){var l=Gb(o.alternate,o,su);o.memoizedProps=o.pendingProps,l===null?l_(o):zi=l}function _E(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=zb(f,l,l.pendingProps,l.type,void 0,ji);break;case 11:l=zb(f,l,l.pendingProps,l.type.render,l.ref,ji);break;case 5:Oh(l);default:Vb(f,l),l=zi=pa(l,su),l=Gb(f,l,su)}o.memoizedProps=o.pendingProps,l===null?l_(o):zi=l}function jd(o,l,f,y){wr=cs=null,Oh(l),wl=null,Ka=0;var w=l.return;try{if(WN(o,w,l,f,ji)){Rs=1,Ja(o,Gi(f,o.current)),zi=null;return}}catch(I){if(w!==null)throw zi=w,I;Rs=1,Ja(o,Gi(f,o.current)),zi=null;return}l.flags&32768?(ti||y===1?o=!0:Zd||(ji&536870912)!==0?o=!1:(Wu=o=!0,(y===2||y===9||y===3||y===6)&&(y=xn.current,y!==null&&y.tag===13&&(y.flags|=16384))),mE(l,o)):l_(l)}function l_(o){var l=o;do{if((l.flags&32768)!==0){mE(l,Wu);return}o=l.return;var f=QN(l.alternate,l,su);if(f!==null){zi=f;return}if(l=l.sibling,l!==null){zi=l;return}zi=l=o}while(l!==null);Rs===0&&(Rs=5)}function mE(o,l){do{var f=KN(o.alternate,o);if(f!==null){f.flags&=32767,zi=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){zi=o;return}zi=o=f}while(o!==null);Rs=6,zi=null}function pE(o,l,f,y,w,I,Z,$,ct){o.cancelPendingCommit=null;do u_();while(Nr!==0);if((wn&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(I=l.lanes|l.childLanes,I|=is,zr(o,f,I,Z,$,ct),o===Kn&&(zi=Kn=null,ji=0),qd=l,Ku=o,Qd=f,uy=I,hy=w,aE=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,lR(Be,function(){return EE(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=W.T,W.T=null,w=st.p,st.p=2,Z=wn,wn|=4;try{jN(o,l,f)}finally{wn=Z,st.p=w,W.T=y}}Nr=1,yE(),vE(),xE()}}function yE(){if(Nr===1){Nr=0;var o=Ku,l=qd,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=W.T,W.T=null;var y=st.p;st.p=2;var w=wn;wn|=4;try{tE(l,o);var I=wy,Z=k(o.containerInfo),$=I.focusedElem,ct=I.selectionRange;if(Z!==$&&$&&$.ownerDocument&&C($.ownerDocument.documentElement,$)){if(ct!==null&&G($)){var Ut=ct.start,ae=ct.end;if(ae===void 0&&(ae=Ut),"selectionStart"in $)$.selectionStart=Ut,$.selectionEnd=Math.min(ae,$.value.length);else{var fe=$.ownerDocument||document,Yt=fe&&fe.defaultView||window;if(Yt.getSelection){var Zt=Yt.getSelection(),ai=$.textContent.length,si=Math.min(ct.start,ai),kn=ct.end===void 0?si:Math.min(ct.end,ai);!Zt.extend&&si>kn&&(Z=kn,kn=si,si=Z);var Rt=S($,si),Et=S($,kn);if(Rt&&Et&&(Zt.rangeCount!==1||Zt.anchorNode!==Rt.node||Zt.anchorOffset!==Rt.offset||Zt.focusNode!==Et.node||Zt.focusOffset!==Et.offset)){var zt=fe.createRange();zt.setStart(Rt.node,Rt.offset),Zt.removeAllRanges(),si>kn?(Zt.addRange(zt),Zt.extend(Et.node,Et.offset)):(zt.setEnd(Et.node,Et.offset),Zt.addRange(zt))}}}}for(fe=[],Zt=$;Zt=Zt.parentNode;)Zt.nodeType===1&&fe.push({element:Zt,left:Zt.scrollLeft,top:Zt.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<fe.length;$++){var de=fe[$];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}b_=!!Ty,wy=Ty=null}finally{wn=w,st.p=y,W.T=f}}o.current=l,Nr=2}}function vE(){if(Nr===2){Nr=0;var o=Ku,l=qd,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=W.T,W.T=null;var y=st.p;st.p=2;var w=wn;wn|=4;try{Kb(o,l.alternate,l)}finally{wn=w,st.p=y,W.T=f}}Nr=3}}function xE(){if(Nr===4||Nr===3){Nr=0,se();var o=Ku,l=qd,f=Qd,y=aE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Nr=5:(Nr=0,qd=Ku=null,bE(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(Qu=null),vi(f),l=l.stateNode,hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(qe,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=W.T,w=st.p,st.p=2,W.T=null;try{for(var I=o.onRecoverableError,Z=0;Z<y.length;Z++){var $=y[Z];I($.value,{componentStack:$.stack})}}finally{W.T=l,st.p=w}}(Qd&3)!==0&&u_(),Rl(o),w=o.pendingLanes,(f&4194090)!==0&&(w&42)!==0?o===dy?gf++:(gf=0,dy=o):gf=0,_f(0)}}function bE(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Zo(l)))}function u_(o){return yE(),vE(),xE(),EE()}function EE(){if(Nr!==5)return!1;var o=Ku,l=uy;uy=0;var f=vi(Qd),y=W.T,w=st.p;try{st.p=32>f?32:f,W.T=null,f=hy,hy=null;var I=Ku,Z=Qd;if(Nr=0,qd=Ku=null,Qd=0,(wn&6)!==0)throw Error(n(331));var $=wn;if(wn|=4,rE(I.current),iE(I,I.current,Z,f),wn=$,_f(0,!1),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(qe,I)}catch{}return!0}finally{st.p=w,W.T=y,bE(o,l)}}function SE(o,l,f){l=Gi(f,l),l=Vd(o.stateNode,l,2),o=It(o,l,2),o!==null&&(Mn(o,2),Rl(o))}function Yn(o,l,f){if(o.tag===3)SE(o,o,f);else for(;l!==null;){if(l.tag===3){SE(l,o,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Qu===null||!Qu.has(y))){o=Gi(f,o),f=Lb(2),y=It(l,f,2),y!==null&&(Cb(f,y,l,o),Mn(y,2),Rl(y));break}}l=l.return}}function _y(o,l,f){var y=o.pingCache;if(y===null){y=o.pingCache=new tR;var w=new Set;y.set(l,w)}else w=y.get(l),w===void 0&&(w=new Set,y.set(l,w));w.has(f)||(ry=!0,w.add(f),o=rR.bind(null,o,l,f),l.then(o,o))}function rR(o,l,f){var y=o.pingCache;y!==null&&y.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Kn===o&&(ji&f)===f&&(Rs===4||Rs===3&&(ji&62914560)===ji&&300>ve()-ly?(wn&2)===0&&Kd(o,0):oy|=f,Wd===ji&&(Wd=0)),Rl(o)}function AE(o,l){l===0&&(l=Hi()),o=Hn(o,l),o!==null&&(Mn(o,l),Rl(o))}function oR(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),AE(o,f)}function aR(o,l){var f=0;switch(o.tag){case 13:var y=o.stateNode,w=o.memoizedState;w!==null&&(f=w.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(l),AE(o,f)}function lR(o,l){return $t(o,l)}var h_=null,Jd=null,my=!1,d_=!1,py=!1,$h=0;function Rl(o){o!==Jd&&o.next===null&&(Jd===null?h_=Jd=o:Jd=Jd.next=o),d_=!0,my||(my=!0,hR())}function _f(o,l){if(!py&&d_){py=!0;do for(var f=!1,y=h_;y!==null;){if(o!==0){var w=y.pendingLanes;if(w===0)var I=0;else{var Z=y.suspendedLanes,$=y.pingedLanes;I=(1<<31-Mi(42|o)+1)-1,I&=w&~(Z&~$),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(f=!0,CE(y,I))}else I=ji,I=di(y,y===Kn?I:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(I&3)===0||gi(y,I)||(f=!0,CE(y,I));y=y.next}while(f);py=!1}}function uR(){TE()}function TE(){d_=my=!1;var o=0;$h!==0&&(yR()&&(o=$h),$h=0);for(var l=ve(),f=null,y=h_;y!==null;){var w=y.next,I=wE(y,l);I===0?(y.next=null,f===null?h_=w:f.next=w,w===null&&(Jd=f)):(f=y,(o!==0||(I&3)!==0)&&(d_=!0)),y=w}_f(o)}function wE(o,l){for(var f=o.suspendedLanes,y=o.pingedLanes,w=o.expirationTimes,I=o.pendingLanes&-62914561;0<I;){var Z=31-Mi(I),$=1<<Z,ct=w[Z];ct===-1?(($&f)===0||($&y)!==0)&&(w[Z]=lr($,l)):ct<=l&&(o.expiredLanes|=$),I&=~$}if(l=Kn,f=ji,f=di(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,f===0||o===l&&(Ln===2||Ln===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&ne(y),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||gi(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(y!==null&&ne(y),vi(f)){case 2:case 8:f=Xe;break;case 32:f=Be;break;case 268435456:f=Ze;break;default:f=Be}return y=LE.bind(null,o),f=$t(f,y),o.callbackPriority=l,o.callbackNode=f,l}return y!==null&&y!==null&&ne(y),o.callbackPriority=2,o.callbackNode=null,2}function LE(o,l){if(Nr!==0&&Nr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(u_()&&o.callbackNode!==f)return null;var y=ji;return y=di(o,o===Kn?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(uE(o,y,l),wE(o,ve()),o.callbackNode!=null&&o.callbackNode===f?LE.bind(null,o):null)}function CE(o,l){if(u_())return null;uE(o,l,!0)}function hR(){xR(function(){(wn&6)!==0?$t(ke,uR):TE()})}function yy(){return $h===0&&($h=ys()),$h}function ME(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Vi(""+o)}function NE(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function dR(o,l,f,y,w){if(l==="submit"&&f&&f.stateNode===w){var I=ME((w[Fe]||null).action),Z=y.submitter;Z&&(l=(l=Z[Fe]||null)?ME(l.formAction):Z.getAttribute("formAction"),l!==null&&(I=l,Z=null));var $=new kr("action","action",null,y,w);o.push({event:$,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if($h!==0){var ct=Z?NE(w,Z):new FormData(w);Dd(f,{pending:!0,data:ct,method:w.method,action:I},null,ct)}}else typeof I=="function"&&($.preventDefault(),ct=Z?NE(w,Z):new FormData(w),Dd(f,{pending:!0,data:ct,method:w.method,action:I},I,ct))},currentTarget:w}]})}}for(var vy=0;vy<vn.length;vy++){var xy=vn[vy],cR=xy.toLowerCase(),fR=xy[0].toUpperCase()+xy.slice(1);on(cR,"on"+fR)}on(ii,"onAnimationEnd"),on(mi,"onAnimationIteration"),on(Pi,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(Qi,"onTransitionRun"),on(nn,"onTransitionStart"),on(Ye,"onTransitionCancel"),on(Sn,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mf));function RE(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var y=o[f],w=y.event;y=y.listeners;t:{var I=void 0;if(l)for(var Z=y.length-1;0<=Z;Z--){var $=y[Z],ct=$.instance,Ut=$.currentTarget;if($=$.listener,ct!==I&&w.isPropagationStopped())break t;I=$,w.currentTarget=Ut;try{I(w)}catch(ae){Vu(ae)}w.currentTarget=null,I=ct}else for(Z=0;Z<y.length;Z++){if($=y[Z],ct=$.instance,Ut=$.currentTarget,$=$.listener,ct!==I&&w.isPropagationStopped())break t;I=$,w.currentTarget=Ut;try{I(w)}catch(ae){Vu(ae)}w.currentTarget=null,I=ct}}}}function Di(o,l){var f=l[Fn];f===void 0&&(f=l[Fn]=new Set);var y=o+"__bubble";f.has(y)||(OE(l,o,2,!1),f.add(y))}function by(o,l,f){var y=0;l&&(y|=4),OE(f,o,y,l)}var c_="_reactListening"+Math.random().toString(36).slice(2);function Ey(o){if(!o[c_]){o[c_]=!0,ro.forEach(function(f){f!=="selectionchange"&&(gR.has(f)||by(f,!1,o),by(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[c_]||(l[c_]=!0,by("selectionchange",!1,l))}}function OE(o,l,f,y){switch(iS(l)){case 2:var w=GR;break;case 8:w=HR;break;default:w=Dy}f=w.bind(null,l,f,o),w=void 0,!qi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),y?w!==void 0?o.addEventListener(l,f,{capture:!0,passive:w}):o.addEventListener(l,f,!0):w!==void 0?o.addEventListener(l,f,{passive:w}):o.addEventListener(l,f,!1)}function Sy(o,l,f,y,w){var I=y;if((l&1)===0&&(l&2)===0&&y!==null)t:for(;;){if(y===null)return;var Z=y.tag;if(Z===3||Z===4){var $=y.stateNode.containerInfo;if($===w)break;if(Z===4)for(Z=y.return;Z!==null;){var ct=Z.tag;if((ct===3||ct===4)&&Z.stateNode.containerInfo===w)return;Z=Z.return}for(;$!==null;){if(Z=Fi($),Z===null)return;if(ct=Z.tag,ct===5||ct===6||ct===26||ct===27){y=I=Z;continue t}$=$.parentNode}}y=y.return}dn(function(){var Ut=I,ae=Nn(f),fe=[];t:{var Yt=pi.get(o);if(Yt!==void 0){var Zt=kr,ai=o;switch(o){case"keypress":if(Ui(f)===0)break t;case"keydown":case"keyup":Zt=Lh;break;case"focusin":ai="focus",Zt=ko;break;case"focusout":ai="blur",Zt=ko;break;case"beforeblur":case"afterblur":Zt=ko;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=Ba;break;case ii:case mi:case Pi:Zt=cl;break;case Sn:Zt=Uo;break;case"scroll":case"scrollend":Zt=Mu;break;case"wheel":Zt=Ps;break;case"copy":case"cut":case"paste":Zt=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=Fo;break;case"toggle":case"beforetoggle":Zt=Er}var si=(l&4)!==0,kn=!si&&(o==="scroll"||o==="scrollend"),Rt=si?Yt!==null?Yt+"Capture":null:Yt;si=[];for(var Et=Ut,zt;Et!==null;){var de=Et;if(zt=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||zt===null||Rt===null||(de=Me(Et,Rt),de!=null&&si.push(pf(Et,de,zt))),kn)break;Et=Et.return}0<si.length&&(Yt=new Zt(Yt,ai,null,f,ae),fe.push({event:Yt,listeners:si}))}}if((l&7)===0){t:{if(Yt=o==="mouseover"||o==="pointerover",Zt=o==="mouseout"||o==="pointerout",Yt&&f!==hn&&(ai=f.relatedTarget||f.fromElement)&&(Fi(ai)||ai[$n]))break t;if((Zt||Yt)&&(Yt=ae.window===ae?ae:(Yt=ae.ownerDocument)?Yt.defaultView||Yt.parentWindow:window,Zt?(ai=f.relatedTarget||f.toElement,Zt=Ut,ai=ai?Fi(ai):null,ai!==null&&(kn=r(ai),si=ai.tag,ai!==kn||si!==5&&si!==27&&si!==6)&&(ai=null)):(Zt=null,ai=Ut),Zt!==ai)){if(si=ha,de="onMouseLeave",Rt="onMouseEnter",Et="mouse",(o==="pointerout"||o==="pointerover")&&(si=Fo,de="onPointerLeave",Rt="onPointerEnter",Et="pointer"),kn=Zt==null?Yt:Bi(Zt),zt=ai==null?Yt:Bi(ai),Yt=new si(de,Et+"leave",Zt,f,ae),Yt.target=kn,Yt.relatedTarget=zt,de=null,Fi(ae)===Ut&&(si=new si(Rt,Et+"enter",ai,f,ae),si.target=zt,si.relatedTarget=kn,de=si),kn=de,Zt&&ai)e:{for(si=Zt,Rt=ai,Et=0,zt=si;zt;zt=$d(zt))Et++;for(zt=0,de=Rt;de;de=$d(de))zt++;for(;0<Et-zt;)si=$d(si),Et--;for(;0<zt-Et;)Rt=$d(Rt),zt--;for(;Et--;){if(si===Rt||Rt!==null&&si===Rt.alternate)break e;si=$d(si),Rt=$d(Rt)}si=null}else si=null;Zt!==null&&IE(fe,Yt,Zt,si,!1),ai!==null&&kn!==null&&IE(fe,kn,ai,si,!0)}}t:{if(Yt=Ut?Bi(Ut):window,Zt=Yt.nodeName&&Yt.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&Yt.type==="file")var He=Ho;else if(fo(Yt))if(Ua)He=Vo;else{He=ql;var Oi=_a}else Zt=Yt.nodeName,!Zt||Zt.toLowerCase()!=="input"||Yt.type!=="checkbox"&&Yt.type!=="radio"?Ut&&Zi(Ut.elementType)&&(He=Ho):He=nr;if(He&&(He=He(o,Ut))){pl(fe,He,f,ae);break t}Oi&&Oi(o,Yt,Ut),o==="focusout"&&Ut&&Yt.type==="number"&&Ut.memoizedProps.value!=null&&Te(Yt,"number",Yt.value)}switch(Oi=Ut?Bi(Ut):window,o){case"focusin":(fo(Oi)||Oi.contentEditable==="true")&&(nt=Oi,mt=Ut,Jt=null);break;case"focusout":Jt=mt=nt=null;break;case"mousedown":Pt=!0;break;case"contextmenu":case"mouseup":case"dragend":Pt=!1,qt(fe,f,ae);break;case"selectionchange":if(Q)break;case"keydown":case"keyup":qt(fe,f,ae)}var je;if(ho)t:{switch(o){case"compositionstart":var ri="onCompositionStart";break t;case"compositionend":ri="onCompositionEnd";break t;case"compositionupdate":ri="onCompositionUpdate";break t}ri=void 0}else co?Go(o,f)&&(ri="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(ri="onCompositionStart");ri&&(Ws&&f.locale!=="ko"&&(co||ri!=="onCompositionStart"?ri==="onCompositionEnd"&&co&&(je=Xs()):(cn=ae,Bn="value"in cn?cn.value:cn.textContent,co=!0)),Oi=f_(Ut,ri),0<Oi.length&&(ri=new ws(ri,o,null,f,ae),fe.push({event:ri,listeners:Oi}),je?ri.data=je:(je=ml(f),je!==null&&(ri.data=je)))),(je=gl?qs(o,f):Ch(o,f))&&(ri=f_(Ut,"onBeforeInput"),0<ri.length&&(Oi=new ws("onBeforeInput","beforeinput",null,f,ae),fe.push({event:Oi,listeners:ri}),Oi.data=je)),dR(fe,o,Ut,f,ae)}RE(fe,l)})}function pf(o,l,f){return{instance:o,listener:l,currentTarget:f}}function f_(o,l){for(var f=l+"Capture",y=[];o!==null;){var w=o,I=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||I===null||(w=Me(o,f),w!=null&&y.unshift(pf(o,w,I)),w=Me(o,l),w!=null&&y.push(pf(o,w,I))),o.tag===3)return y;o=o.return}return[]}function $d(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function IE(o,l,f,y,w){for(var I=l._reactName,Z=[];f!==null&&f!==y;){var $=f,ct=$.alternate,Ut=$.stateNode;if($=$.tag,ct!==null&&ct===y)break;$!==5&&$!==26&&$!==27||Ut===null||(ct=Ut,w?(Ut=Me(f,I),Ut!=null&&Z.unshift(pf(f,Ut,ct))):w||(Ut=Me(f,I),Ut!=null&&Z.push(pf(f,Ut,ct)))),f=f.return}Z.length!==0&&o.push({event:l,listeners:Z})}var _R=/\r\n?/g,mR=/\u0000|\uFFFD/g;function PE(o){return(typeof o=="string"?o:""+o).replace(_R,`
`).replace(mR,"")}function zE(o,l){return l=PE(l),PE(o)===l}function g_(){}function Dn(o,l,f,y,w,I){switch(f){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||$e(o,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&$e(o,""+y);break;case"className":yt(o,"class",y);break;case"tabIndex":yt(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":yt(o,f,y);break;case"style":ui(o,y,I);break;case"data":if(l!=="object"){yt(o,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(f);break}y=Vi(""+y),o.setAttribute(f,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(f==="formAction"?(l!=="input"&&Dn(o,l,"name",w.name,w,null),Dn(o,l,"formEncType",w.formEncType,w,null),Dn(o,l,"formMethod",w.formMethod,w,null),Dn(o,l,"formTarget",w.formTarget,w,null)):(Dn(o,l,"encType",w.encType,w,null),Dn(o,l,"method",w.method,w,null),Dn(o,l,"target",w.target,w,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(f);break}y=Vi(""+y),o.setAttribute(f,y);break;case"onClick":y!=null&&(o.onclick=g_);break;case"onScroll":y!=null&&Di("scroll",o);break;case"onScrollEnd":y!=null&&Di("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(f=y.__html,f!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}f=Vi(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(f,""+y):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":y===!0?o.setAttribute(f,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(f,y):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(f,y):o.removeAttribute(f);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(f):o.setAttribute(f,y);break;case"popover":Di("beforetoggle",o),Di("toggle",o),ut(o,"popover",y);break;case"xlinkActuate":bt(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":bt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":bt(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":bt(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":bt(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":bt(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":bt(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":bt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":bt(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ut(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=En.get(f)||f,ut(o,f,y))}}function Ay(o,l,f,y,w,I){switch(f){case"style":ui(o,y,I);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(f=y.__html,f!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof y=="string"?$e(o,y):(typeof y=="number"||typeof y=="bigint")&&$e(o,""+y);break;case"onScroll":y!=null&&Di("scroll",o);break;case"onScrollEnd":y!=null&&Di("scrollend",o);break;case"onClick":y!=null&&(o.onclick=g_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oo.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(w=f.endsWith("Capture"),l=f.slice(2,w?f.length-7:void 0),I=o[Fe]||null,I=I!=null?I[f]:null,typeof I=="function"&&o.removeEventListener(l,I,w),typeof y=="function")){typeof I!="function"&&I!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,y,w);break t}f in o?o[f]=y:y===!0?o.setAttribute(f,""):ut(o,f,y)}}}function Rr(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Di("error",o),Di("load",o);var y=!1,w=!1,I;for(I in f)if(f.hasOwnProperty(I)){var Z=f[I];if(Z!=null)switch(I){case"src":y=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Dn(o,l,I,Z,f,null)}}w&&Dn(o,l,"srcSet",f.srcSet,f,null),y&&Dn(o,l,"src",f.src,f,null);return;case"input":Di("invalid",o);var $=I=Z=w=null,ct=null,Ut=null;for(y in f)if(f.hasOwnProperty(y)){var ae=f[y];if(ae!=null)switch(y){case"name":w=ae;break;case"type":Z=ae;break;case"checked":ct=ae;break;case"defaultChecked":Ut=ae;break;case"value":I=ae;break;case"defaultValue":$=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,l));break;default:Dn(o,l,y,ae,f,null)}}me(o,I,$,ct,Ut,Z,w,!1),he(o);return;case"select":Di("invalid",o),y=Z=I=null;for(w in f)if(f.hasOwnProperty(w)&&($=f[w],$!=null))switch(w){case"value":I=$;break;case"defaultValue":Z=$;break;case"multiple":y=$;default:Dn(o,l,w,$,f,null)}l=I,f=Z,o.multiple=!!y,l!=null?Ie(o,!!y,l,!1):f!=null&&Ie(o,!!y,f,!0);return;case"textarea":Di("invalid",o),I=w=y=null;for(Z in f)if(f.hasOwnProperty(Z)&&($=f[Z],$!=null))switch(Z){case"value":y=$;break;case"defaultValue":w=$;break;case"children":I=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(n(91));break;default:Dn(o,l,Z,$,f,null)}We(o,y,w,I),he(o);return;case"option":for(ct in f)if(f.hasOwnProperty(ct)&&(y=f[ct],y!=null))switch(ct){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Dn(o,l,ct,y,f,null)}return;case"dialog":Di("beforetoggle",o),Di("toggle",o),Di("cancel",o),Di("close",o);break;case"iframe":case"object":Di("load",o);break;case"video":case"audio":for(y=0;y<mf.length;y++)Di(mf[y],o);break;case"image":Di("error",o),Di("load",o);break;case"details":Di("toggle",o);break;case"embed":case"source":case"link":Di("error",o),Di("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ut in f)if(f.hasOwnProperty(Ut)&&(y=f[Ut],y!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Dn(o,l,Ut,y,f,null)}return;default:if(Zi(l)){for(ae in f)f.hasOwnProperty(ae)&&(y=f[ae],y!==void 0&&Ay(o,l,ae,y,f,void 0));return}}for($ in f)f.hasOwnProperty($)&&(y=f[$],y!=null&&Dn(o,l,$,y,f,null))}function pR(o,l,f,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,I=null,Z=null,$=null,ct=null,Ut=null,ae=null;for(Zt in f){var fe=f[Zt];if(f.hasOwnProperty(Zt)&&fe!=null)switch(Zt){case"checked":break;case"value":break;case"defaultValue":ct=fe;default:y.hasOwnProperty(Zt)||Dn(o,l,Zt,null,y,fe)}}for(var Yt in y){var Zt=y[Yt];if(fe=f[Yt],y.hasOwnProperty(Yt)&&(Zt!=null||fe!=null))switch(Yt){case"type":I=Zt;break;case"name":w=Zt;break;case"checked":Ut=Zt;break;case"defaultChecked":ae=Zt;break;case"value":Z=Zt;break;case"defaultValue":$=Zt;break;case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(n(137,l));break;default:Zt!==fe&&Dn(o,l,Yt,Zt,y,fe)}}_e(o,Z,$,ct,Ut,ae,I,w);return;case"select":Zt=Z=$=Yt=null;for(I in f)if(ct=f[I],f.hasOwnProperty(I)&&ct!=null)switch(I){case"value":break;case"multiple":Zt=ct;default:y.hasOwnProperty(I)||Dn(o,l,I,null,y,ct)}for(w in y)if(I=y[w],ct=f[w],y.hasOwnProperty(w)&&(I!=null||ct!=null))switch(w){case"value":Yt=I;break;case"defaultValue":$=I;break;case"multiple":Z=I;default:I!==ct&&Dn(o,l,w,I,y,ct)}l=$,f=Z,y=Zt,Yt!=null?Ie(o,!!f,Yt,!1):!!y!=!!f&&(l!=null?Ie(o,!!f,l,!0):Ie(o,!!f,f?[]:"",!1));return;case"textarea":Zt=Yt=null;for($ in f)if(w=f[$],f.hasOwnProperty($)&&w!=null&&!y.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Dn(o,l,$,null,y,w)}for(Z in y)if(w=y[Z],I=f[Z],y.hasOwnProperty(Z)&&(w!=null||I!=null))switch(Z){case"value":Yt=w;break;case"defaultValue":Zt=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:w!==I&&Dn(o,l,Z,w,y,I)}Le(o,Yt,Zt);return;case"option":for(var ai in f)if(Yt=f[ai],f.hasOwnProperty(ai)&&Yt!=null&&!y.hasOwnProperty(ai))switch(ai){case"selected":o.selected=!1;break;default:Dn(o,l,ai,null,y,Yt)}for(ct in y)if(Yt=y[ct],Zt=f[ct],y.hasOwnProperty(ct)&&Yt!==Zt&&(Yt!=null||Zt!=null))switch(ct){case"selected":o.selected=Yt&&typeof Yt!="function"&&typeof Yt!="symbol";break;default:Dn(o,l,ct,Yt,y,Zt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var si in f)Yt=f[si],f.hasOwnProperty(si)&&Yt!=null&&!y.hasOwnProperty(si)&&Dn(o,l,si,null,y,Yt);for(Ut in y)if(Yt=y[Ut],Zt=f[Ut],y.hasOwnProperty(Ut)&&Yt!==Zt&&(Yt!=null||Zt!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":if(Yt!=null)throw Error(n(137,l));break;default:Dn(o,l,Ut,Yt,y,Zt)}return;default:if(Zi(l)){for(var kn in f)Yt=f[kn],f.hasOwnProperty(kn)&&Yt!==void 0&&!y.hasOwnProperty(kn)&&Ay(o,l,kn,void 0,y,Yt);for(ae in y)Yt=y[ae],Zt=f[ae],!y.hasOwnProperty(ae)||Yt===Zt||Yt===void 0&&Zt===void 0||Ay(o,l,ae,Yt,y,Zt);return}}for(var Rt in f)Yt=f[Rt],f.hasOwnProperty(Rt)&&Yt!=null&&!y.hasOwnProperty(Rt)&&Dn(o,l,Rt,null,y,Yt);for(fe in y)Yt=y[fe],Zt=f[fe],!y.hasOwnProperty(fe)||Yt===Zt||Yt==null&&Zt==null||Dn(o,l,fe,Yt,y,Zt)}var Ty=null,wy=null;function __(o){return o.nodeType===9?o:o.ownerDocument}function DE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kE(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Ly(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cy=null;function yR(){var o=window.event;return o&&o.type==="popstate"?o===Cy?!1:(Cy=o,!0):(Cy=null,!1)}var FE=typeof setTimeout=="function"?setTimeout:void 0,vR=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,xR=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(o){return BE.resolve(null).then(o).catch(bR)}:FE;function bR(o){setTimeout(function(){throw o})}function Ju(o){return o==="head"}function UE(o,l){var f=l,y=0,w=0;do{var I=f.nextSibling;if(o.removeChild(f),I&&I.nodeType===8)if(f=I.data,f==="/$"){if(0<y&&8>y){f=y;var Z=o.ownerDocument;if(f&1&&yf(Z.documentElement),f&2&&yf(Z.body),f&4)for(f=Z.head,yf(f),Z=f.firstChild;Z;){var $=Z.nextSibling,ct=Z.nodeName;Z[er]||ct==="SCRIPT"||ct==="STYLE"||ct==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||f.removeChild(Z),Z=$}}if(w===0){o.removeChild(I),wf(l);return}w--}else f==="$"||f==="$?"||f==="$!"?w++:y=f.charCodeAt(0)-48;else y=0;f=I}while(f);wf(l)}function My(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":My(f),ci(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function ER(o,l,f,y){for(;o.nodeType===1;){var w=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[er])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(I=o.getAttribute("rel"),I==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(I!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(I=o.getAttribute("src"),(I!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&I&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var I=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===I)return o}else return o;if(o=tl(o.nextSibling),o===null)break}return null}function SR(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=tl(o.nextSibling),o===null))return null;return o}function Ny(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function AR(o,l){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")l();else{var y=function(){l(),f.removeEventListener("DOMContentLoaded",y)};f.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function tl(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Ry=null;function GE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}function HE(o,l,f){switch(l=__(f),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function yf(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);ci(o)}var Ta=new Map,VE=new Set;function m_(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ru=st.d;st.d={f:TR,r:wR,D:LR,C:CR,L:MR,m:NR,X:OR,S:RR,M:IR};function TR(){var o=ru.f(),l=a_();return o||l}function wR(o){var l=ts(o);l!==null&&l.tag===5&&l.type==="form"?kd(l):ru.r(o)}var tc=typeof document>"u"?null:document;function YE(o,l,f){var y=tc;if(y&&typeof l=="string"&&l){var w=ue(l);w='link[rel="'+o+'"][href="'+w+'"]',typeof f=="string"&&(w+='[crossorigin="'+f+'"]'),VE.has(w)||(VE.add(w),o={rel:o,crossOrigin:f,href:l},y.querySelector(w)===null&&(l=y.createElement("link"),Rr(l,"link",o),tn(l),y.head.appendChild(l)))}}function LR(o){ru.D(o),YE("dns-prefetch",o,null)}function CR(o,l){ru.C(o,l),YE("preconnect",o,l)}function MR(o,l,f){ru.L(o,l,f);var y=tc;if(y&&o&&l){var w='link[rel="preload"][as="'+ue(l)+'"]';l==="image"&&f&&f.imageSrcSet?(w+='[imagesrcset="'+ue(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(w+='[imagesizes="'+ue(f.imageSizes)+'"]')):w+='[href="'+ue(o)+'"]';var I=w;switch(l){case"style":I=ec(o);break;case"script":I=ic(o)}Ta.has(I)||(o=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),Ta.set(I,o),y.querySelector(w)!==null||l==="style"&&y.querySelector(vf(I))||l==="script"&&y.querySelector(xf(I))||(l=y.createElement("link"),Rr(l,"link",o),tn(l),y.head.appendChild(l)))}}function NR(o,l){ru.m(o,l);var f=tc;if(f&&o){var y=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+ue(y)+'"][href="'+ue(o)+'"]',I=w;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=ic(o)}if(!Ta.has(I)&&(o=g({rel:"modulepreload",href:o},l),Ta.set(I,o),f.querySelector(w)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(xf(I)))return}y=f.createElement("link"),Rr(y,"link",o),tn(y),f.head.appendChild(y)}}}function RR(o,l,f){ru.S(o,l,f);var y=tc;if(y&&o){var w=Ss(y).hoistableStyles,I=ec(o);l=l||"default";var Z=w.get(I);if(!Z){var $={loading:0,preload:null};if(Z=y.querySelector(vf(I)))$.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},f),(f=Ta.get(I))&&Oy(o,f);var ct=Z=y.createElement("link");tn(ct),Rr(ct,"link",o),ct._p=new Promise(function(Ut,ae){ct.onload=Ut,ct.onerror=ae}),ct.addEventListener("load",function(){$.loading|=1}),ct.addEventListener("error",function(){$.loading|=2}),$.loading|=4,p_(Z,l,y)}Z={type:"stylesheet",instance:Z,count:1,state:$},w.set(I,Z)}}}function OR(o,l){ru.X(o,l);var f=tc;if(f&&o){var y=Ss(f).hoistableScripts,w=ic(o),I=y.get(w);I||(I=f.querySelector(xf(w)),I||(o=g({src:o,async:!0},l),(l=Ta.get(w))&&Iy(o,l),I=f.createElement("script"),tn(I),Rr(I,"link",o),f.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},y.set(w,I))}}function IR(o,l){ru.M(o,l);var f=tc;if(f&&o){var y=Ss(f).hoistableScripts,w=ic(o),I=y.get(w);I||(I=f.querySelector(xf(w)),I||(o=g({src:o,async:!0,type:"module"},l),(l=Ta.get(w))&&Iy(o,l),I=f.createElement("script"),tn(I),Rr(I,"link",o),f.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},y.set(w,I))}}function XE(o,l,f,y){var w=(w=jt.current)?m_(w):null;if(!w)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=ec(f.href),f=Ss(w).hoistableStyles,y=f.get(l),y||(y={type:"style",instance:null,count:0,state:null},f.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=ec(f.href);var I=Ss(w).hoistableStyles,Z=I.get(o);if(Z||(w=w.ownerDocument||w,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(o,Z),(I=w.querySelector(vf(o)))&&!I._p&&(Z.instance=I,Z.state.loading=5),Ta.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ta.set(o,f),I||PR(w,o,f,Z.state))),l&&y===null)throw Error(n(528,""));return Z}if(l&&y!==null)throw Error(n(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ic(f),f=Ss(w).hoistableScripts,y=f.get(l),y||(y={type:"script",instance:null,count:0,state:null},f.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function ec(o){return'href="'+ue(o)+'"'}function vf(o){return'link[rel="stylesheet"]['+o+"]"}function ZE(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function PR(o,l,f,y){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=o.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),Rr(l,"link",f),tn(l),o.head.appendChild(l))}function ic(o){return'[src="'+ue(o)+'"]'}function xf(o){return"script[async]"+o}function WE(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var y=o.querySelector('style[data-href~="'+ue(f.href)+'"]');if(y)return l.instance=y,tn(y),y;var w=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),tn(y),Rr(y,"style",w),p_(y,f.precedence,o),l.instance=y;case"stylesheet":w=ec(f.href);var I=o.querySelector(vf(w));if(I)return l.state.loading|=4,l.instance=I,tn(I),I;y=ZE(f),(w=Ta.get(w))&&Oy(y,w),I=(o.ownerDocument||o).createElement("link"),tn(I);var Z=I;return Z._p=new Promise(function($,ct){Z.onload=$,Z.onerror=ct}),Rr(I,"link",y),l.state.loading|=4,p_(I,f.precedence,o),l.instance=I;case"script":return I=ic(f.src),(w=o.querySelector(xf(I)))?(l.instance=w,tn(w),w):(y=f,(w=Ta.get(I))&&(y=g({},f),Iy(y,w)),o=o.ownerDocument||o,w=o.createElement("script"),tn(w),Rr(w,"link",y),o.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,p_(y,f.precedence,o));return l.instance}function p_(o,l,f){for(var y=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=y.length?y[y.length-1]:null,I=w,Z=0;Z<y.length;Z++){var $=y[Z];if($.dataset.precedence===l)I=$;else if(I!==w)break}I?I.parentNode.insertBefore(o,I.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function Oy(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Iy(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var y_=null;function qE(o,l,f){if(y_===null){var y=new Map,w=y_=new Map;w.set(f,y)}else w=y_,y=w.get(f),y||(y=new Map,w.set(f,y));if(y.has(o))return y;for(y.set(o,null),f=f.getElementsByTagName(o),w=0;w<f.length;w++){var I=f[w];if(!(I[er]||I[Ii]||o==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=I.getAttribute(l)||"";Z=o+Z;var $=y.get(Z);$?$.push(I):y.set(Z,[I])}}return y}function QE(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function zR(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function KE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var bf=null;function DR(){}function kR(o,l,f){if(bf===null)throw Error(n(475));var y=bf;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var w=ec(f.href),I=o.querySelector(vf(w));if(I){o=I._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=v_.bind(y),o.then(y,y)),l.state.loading|=4,l.instance=I,tn(I);return}I=o.ownerDocument||o,f=ZE(f),(w=Ta.get(w))&&Oy(f,w),I=I.createElement("link"),tn(I);var Z=I;Z._p=new Promise(function($,ct){Z.onload=$,Z.onerror=ct}),Rr(I,"link",f),l.instance=I}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=v_.bind(y),o.addEventListener("load",l),o.addEventListener("error",l))}}function FR(){if(bf===null)throw Error(n(475));var o=bf;return o.stylesheets&&o.count===0&&Py(o,o.stylesheets),0<o.count?function(l){var f=setTimeout(function(){if(o.stylesheets&&Py(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f)}}:null}function v_(){if(this.count--,this.count===0){if(this.stylesheets)Py(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var x_=null;function Py(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,x_=new Map,l.forEach(BR,o),x_=null,v_.call(o))}function BR(o,l){if(!(l.state.loading&4)){var f=x_.get(o);if(f)var y=f.get(null);else{f=new Map,x_.set(o,f);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<w.length;I++){var Z=w[I];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(f.set(Z.dataset.precedence,Z),y=Z)}y&&f.set(null,y)}w=l.instance,Z=w.getAttribute("data-precedence"),I=f.get(Z)||y,I===y&&f.set(null,w),f.set(Z,w),this.count++,y=v_.bind(this),w.addEventListener("load",y),w.addEventListener("error",y),I?I.parentNode.insertBefore(w,I.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),l.state.loading|=4}}var Ef={$$typeof:R,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function UR(o,l,f,y,w,I,Z,$){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=y,this.onUncaughtError=w,this.onCaughtError=I,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function jE(o,l,f,y,w,I,Z,$,ct,Ut,ae,fe){return o=new UR(o,l,f,Z,$,ct,Ut,fe),l=1,I===!0&&(l|=24),I=Wn(3,null,null,l),o.current=I,I.stateNode=o,l=va(),l.refCount++,o.pooledCache=l,l.refCount++,I.memoizedState={element:y,isDehydrated:f,cache:l},gt(I),o}function JE(o){return o?(o=cr,o):cr}function $E(o,l,f,y,w,I){w=JE(w),y.context===null?y.context=w:y.pendingContext=w,y=xt(l),y.payload={element:f},I=I===void 0?null:I,I!==null&&(y.callback=I),f=It(o,y,l),f!==null&&(oa(f,o,l),ye(f,o,l))}function tS(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function zy(o,l){tS(o,l),(o=o.alternate)&&tS(o,l)}function eS(o){if(o.tag===13){var l=Hn(o,67108864);l!==null&&oa(l,o,67108864),zy(o,67108864)}}var b_=!0;function GR(o,l,f,y){var w=W.T;W.T=null;var I=st.p;try{st.p=2,Dy(o,l,f,y)}finally{st.p=I,W.T=w}}function HR(o,l,f,y){var w=W.T;W.T=null;var I=st.p;try{st.p=8,Dy(o,l,f,y)}finally{st.p=I,W.T=w}}function Dy(o,l,f,y){if(b_){var w=ky(y);if(w===null)Sy(o,l,y,E_,f),nS(o,y);else if(YR(w,o,l,f,y))y.stopPropagation();else if(nS(o,y),l&4&&-1<VR.indexOf(o)){for(;w!==null;){var I=ts(w);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var Z=bn(I.pendingLanes);if(Z!==0){var $=I;for($.pendingLanes|=2,$.entangledLanes|=2;Z;){var ct=1<<31-Mi(Z);$.entanglements[1]|=ct,Z&=~ct}Rl(I),(wn&6)===0&&(r_=ve()+500,_f(0))}}break;case 13:$=Hn(I,2),$!==null&&oa($,I,2),a_(),zy(I,2)}if(I=ky(y),I===null&&Sy(o,l,y,E_,f),I===w)break;w=I}w!==null&&y.stopPropagation()}else Sy(o,l,y,null,f)}}function ky(o){return o=Nn(o),Fy(o)}var E_=null;function Fy(o){if(E_=null,o=Fi(o),o!==null){var l=r(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return E_=o,null}function iS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oe()){case ke:return 2;case Xe:return 8;case Be:case Ae:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var By=!1,$u=null,th=null,eh=null,Sf=new Map,Af=new Map,ih=[],VR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nS(o,l){switch(o){case"focusin":case"focusout":$u=null;break;case"dragenter":case"dragleave":th=null;break;case"mouseover":case"mouseout":eh=null;break;case"pointerover":case"pointerout":Sf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Af.delete(l.pointerId)}}function Tf(o,l,f,y,w,I){return o===null||o.nativeEvent!==I?(o={blockedOn:l,domEventName:f,eventSystemFlags:y,nativeEvent:I,targetContainers:[w]},l!==null&&(l=ts(l),l!==null&&eS(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),o)}function YR(o,l,f,y,w){switch(l){case"focusin":return $u=Tf($u,o,l,f,y,w),!0;case"dragenter":return th=Tf(th,o,l,f,y,w),!0;case"mouseover":return eh=Tf(eh,o,l,f,y,w),!0;case"pointerover":var I=w.pointerId;return Sf.set(I,Tf(Sf.get(I)||null,o,l,f,y,w)),!0;case"gotpointercapture":return I=w.pointerId,Af.set(I,Tf(Af.get(I)||null,o,l,f,y,w)),!0}return!1}function sS(o){var l=Fi(o.target);if(l!==null){var f=r(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,Ni(o.priority,function(){if(f.tag===13){var y=ra();y=us(y);var w=Hn(f,y);w!==null&&oa(w,f,y),zy(f,y)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function S_(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=ky(o.nativeEvent);if(f===null){f=o.nativeEvent;var y=new f.constructor(f.type,f);hn=y,f.target.dispatchEvent(y),hn=null}else return l=ts(f),l!==null&&eS(l),o.blockedOn=f,!1;l.shift()}return!0}function rS(o,l,f){S_(o)&&f.delete(l)}function XR(){By=!1,$u!==null&&S_($u)&&($u=null),th!==null&&S_(th)&&(th=null),eh!==null&&S_(eh)&&(eh=null),Sf.forEach(rS),Af.forEach(rS)}function A_(o,l){o.blockedOn===l&&(o.blockedOn=null,By||(By=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,XR)))}var T_=null;function oS(o){T_!==o&&(T_=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){T_===o&&(T_=null);for(var l=0;l<o.length;l+=3){var f=o[l],y=o[l+1],w=o[l+2];if(typeof y!="function"){if(Fy(y||f)===null)continue;break}var I=ts(f);I!==null&&(o.splice(l,3),l-=3,Dd(I,{pending:!0,data:w,method:f.method,action:y},y,w))}}))}function wf(o){function l(ct){return A_(ct,o)}$u!==null&&A_($u,o),th!==null&&A_(th,o),eh!==null&&A_(eh,o),Sf.forEach(l),Af.forEach(l);for(var f=0;f<ih.length;f++){var y=ih[f];y.blockedOn===o&&(y.blockedOn=null)}for(;0<ih.length&&(f=ih[0],f.blockedOn===null);)sS(f),f.blockedOn===null&&ih.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(y=0;y<f.length;y+=3){var w=f[y],I=f[y+1],Z=w[Fe]||null;if(typeof I=="function")Z||oS(f);else if(Z){var $=null;if(I&&I.hasAttribute("formAction")){if(w=I,Z=I[Fe]||null)$=Z.formAction;else if(Fy(w)!==null)continue}else $=Z.action;typeof $=="function"?f[y+1]=$:(f.splice(y,3),y-=3),oS(f)}}}function Uy(o){this._internalRoot=o}w_.prototype.render=Uy.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var f=l.current,y=ra();$E(f,y,o,l,null,null)},w_.prototype.unmount=Uy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;$E(o.current,2,null,o,null,null),a_(),l[$n]=null}};function w_(o){this._internalRoot=o}w_.prototype.unstable_scheduleHydration=function(o){if(o){var l=pn();o={blockedOn:null,target:o,priority:l};for(var f=0;f<ih.length&&l!==0&&l<ih[f].priority;f++);ih.splice(f,0,o),f===0&&sS(o)}};var aS=e.version;if(aS!=="19.1.0")throw Error(n(527,aS,"19.1.0"));st.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(l),o=o!==null?c(o):null,o=o===null?null:o.stateNode,o};var ZR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L_.isDisabled&&L_.supportsFiber)try{qe=L_.inject(ZR),hi=L_}catch{}}return Cf.createRoot=function(o,l){if(!s(o))throw Error(n(299));var f=!1,y="",w=rf,I=Hd,Z=of,$=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(I=l.onCaughtError),l.onRecoverableError!==void 0&&(Z=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&($=l.unstable_transitionCallbacks)),l=jE(o,1,!1,null,null,f,y,w,I,Z,$,null),o[$n]=l.current,Ey(o),new Uy(l)},Cf.hydrateRoot=function(o,l,f){if(!s(o))throw Error(n(299));var y=!1,w="",I=rf,Z=Hd,$=of,ct=null,Ut=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(I=f.onUncaughtError),f.onCaughtError!==void 0&&(Z=f.onCaughtError),f.onRecoverableError!==void 0&&($=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ct=f.unstable_transitionCallbacks),f.formState!==void 0&&(Ut=f.formState)),l=jE(o,1,!0,l,f??null,y,w,I,Z,$,ct,Ut),l.context=JE(null),f=l.current,y=ra(),y=us(y),w=xt(y),w.callback=null,It(f,w,y),f=y,l.current.lanes=f,Mn(l,f),Rl(l),o[$n]=l.current,Ey(o),new w_(l)},Cf.version="19.1.0",Cf}var pS;function nO(){if(pS)return Hy.exports;pS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hy.exports=iO(),Hy.exports}var sO=nO(),rO=Object.create,l0=Object.defineProperty,oO=Object.getOwnPropertyDescriptor,mw=Object.getOwnPropertyNames,aO=Object.getPrototypeOf,lO=Object.prototype.hasOwnProperty,pw=(t,e)=>function(){return e||(0,t[mw(t)[0]])((e={exports:{}}).exports,e),e.exports},kg=(t,e)=>{for(var i in e)l0(t,i,{get:e[i],enumerable:!0})},uO=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mw(e))lO.call(t,s)||s===i||l0(t,s,{get:()=>e[s],enumerable:!(n=oO(e,s))||n.enumerable});return t},u0=(t,e,i)=>(i=t!=null?rO(aO(t)):{},uO(t&&t.__esModule?i:l0(i,"default",{value:t,enumerable:!0}),t)),yw=pw({"node_modules/@linkurious/ogma-parsers/dist/ogma-parsers.umd.js"(t,e){var i,n;i=t,n=function(s){/**
* Ogma Parsers
* @description Parsers for Ogma
* @version 0.0.25 (built on Tue Mar 18 2025 15:30:37 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2025. All rights reserved.
* @preserve
*/function r(Lt,Gt,ie){ie=ie||Gt,Gt in Lt&&(Lt.attributes[ie]=Lt[Gt])}function a(Lt,Gt,ie){if(Lt&&typeof Lt=="object"){if(Array.isArray(Lt))return Lt.forEach(kt=>a(kt,Gt,ie));if(function($t){return $t.type==="vertex"||$t._type==="vertex"||$t.inE||$t.outE||$t._inE||$t._outE}(Lt)){const kt={};Lt.properties&&Object.keys(Lt.properties).forEach(ne=>{kt[ne]=Lt.properties[ne][0].value});const $t=h(Lt);Gt.push({id:$t,data:{id:Lt.id+"",categories:[Lt.label],properties:kt}});for(const ne in Lt)ne!=="properties"&&a(Lt[ne],Gt,ie);return}if(function($t){return $t.type==="edge"||$t._type==="edge"||$t.inV||$t.outV||$t._outV||$t._inV}(Lt)){const kt=h(Lt);ie.push({id:kt,source:u(Lt,["inV","_inV"]),target:u(Lt,["outV","_outV"]),data:{id:kt,type:Lt.label,properties:Lt.properties||{}}});for(const $t in Lt)$t!=="properties"&&a(Lt[$t],Gt,ie);return}Object.keys(Lt).forEach(kt=>a(Lt[kt],Gt,ie))}}function u(Lt,Gt){for(const ie of Gt)if(Lt[ie])return h(Lt[ie])}function h(Lt){if(typeof Lt=="string"||isFinite(Lt))return String(Lt);const Gt=Lt;return String(Gt.id||Gt._id)}const c=Lt=>Lt.charCodeAt(0),g=c(" "),_=c("<"),m=c(">"),v=c('"'),b=c(`
`),x=c("\r"),M=c("/"),N=c("\\"),O=c("a"),R=c("z"),P=c("A"),F=c("Z"),U=c("0"),V=c("9"),Y=c(":");function K(Lt,Gt,ie,kt){const $t=kt.length;if(ie-Gt!==$t)return!1;for(let ne=0;ne<$t;++ne)if(Lt[Gt+ne]!==kt[ne])return!1;return!0}function tt(Lt,Gt,ie,kt){return j(Lt.tags,Gt,ie,kt)}function j(Lt,Gt,ie,kt){const $t=Lt.length;for(let ne=0;ne<$t;++ne)if(K(Gt,ie,kt,Lt[ne]))return ne;return Lt.push(Gt.slice(ie,kt)),$t}function lt(Lt,Gt,ie){let kt=ft(Gt,ie),$t=Gt[kt];if($t===m||$t===M)return kt;let ne=kt;kt=W(Gt,kt);const ee=function(ve,Oe,ke,Xe){return j(ve.attributes,Oe,ke,Xe)}(Lt,Gt,ne,kt);for(;Gt[kt]!==v;)++kt;for(++kt,ne=kt;($t=Gt[kt])!==v;)$t===N&&++kt,++kt;return Lt.tokens.push(-3,ee,ne,kt),kt+1}function pt(Lt){return Lt===g||Lt===b||Lt===x}function ft(Lt,Gt){for(;pt(Lt[Gt]);)++Gt;return Gt}function ht(Lt){return Lt>=O&&Lt<=R||Lt>=P&&Lt<=F||Lt===Y||Lt>=U&&Lt<=V}function W(Lt,Gt){for(;ht(Lt[Gt]);)++Gt;return Gt}function st(Lt,Gt){const ie=Object.keys(Gt),kt={};if(ie.length>0)for(let $t=0;$t<ie.length;++$t){const ne=Gt[ie[$t]],ee=ne.title;kt[ee]=ne.default!==void 0?JSON.stringify(ne.default):void 0}return Lt?()=>({id:void 0,attributes:{text:void 0,color:void 0,radius:void 0,x:void 0,y:void 0},data:{...kt}}):()=>({id:void 0,source:void 0,target:void 0,attributes:{color:void 0,text:void 0,width:void 0},data:{...kt}})}function _t(Lt){return Lt.indexOf("\\")===-1||(Lt=Lt.replace(/\\"/g,'"')),Lt}function Vt(Lt,Gt){let ie=0;for(let kt=0;kt<20;++kt){const $t=ie+Lt[kt]+Gt[kt];ie=+($t>=10),Lt[kt]=$t%10}}const X=new class{constructor(){this._decimalPowerOfTwo=new Uint8Array(20),this._binaryNumber=new Uint8Array(64),this._decimalNumber=new Uint8Array(20)}int64ToString({low:Gt,high:ie}){if(Gt===0&&ie===0)return"0";(function(se,ve,Oe){for(let ke=0;ke<32;++ke)Oe[ke]=+!!(se&1<<ke);for(let ke=0;ke<32;++ke)Oe[ke+32]=+!!(ve&1<<ke);return Oe})(Gt,ie,this._binaryNumber),this._decimalNumber.fill(0),this._decimalPowerOfTwo.fill(0),this._decimalPowerOfTwo[0]=1;const kt=this._binaryNumber[63]===1;kt&&function(se){for(let ve=0;ve<64;++ve)se[ve]^=1;for(let ve=0;ve<64&&!(se[ve]^=1);++ve);}(this._binaryNumber);for(let ee=0;ee<64;++ee)this._binaryNumber[ee]&&Vt(this._decimalNumber,this._decimalPowerOfTwo),Vt(this._decimalPowerOfTwo,this._decimalPowerOfTwo);const $t=[];let ne=this._decimalNumber.length-1;for(kt&&$t.push("-");!this._decimalNumber[ne];)ne-=1;for(let ee=ne;ee>=0;--ee)$t.push(String(this._decimalNumber[ee]));return $t.join("")}};function et(Lt){return X.int64ToString(Lt)}function Dt(Lt){return typeof Lt=="object"&&"high"in Lt&&"low"in Lt}function Mt(Lt,Gt,ie,kt){if(Gt)if(Array.isArray(Gt))Gt.forEach($t=>Mt(Lt,$t,ie,kt));else if(($t=>"segments"in $t)(Gt))(function(ne,ee,se,ve){ee.segments.forEach(Oe=>{Mt(ne,Oe.start,se,ve),Mt(ne,Oe.end,se,ve),Mt(ne,Oe.relationship,se,ve)})})(Lt,Gt,ie,kt);else if(function(ne){if(typeof ne!="object"||ne===null)throw new Error("Ogma can only retrieve nodes and relationships from Neo4j. Please make sure that your Cypher query returns nodes and edges, not values.");const ee=Object.keys(ne.properties);for(const se of ee){const ve=ne.properties[se];Dt(ve)&&(ne.properties[se]=et(ve))}if(ne.identity!==void 0){if(Dt(ne.identity)&&(ne.identity=et(ne.identity)),function(ve){return"start"in ve&&"end"in ve}(ne)){const se=ne.start.identity||ne.start,ve=ne.end.identity||ne.end;Dt(se)&&(ne.start=et(se)),Dt(ve)&&(ne.end=et(ve))}}else ne.id&&(ne.identity=ne.id)}(Gt),($t=>"start"in $t&&"end"in $t&&"type"in $t)(Gt))kt.has(Gt.identity)||(kt.add(Gt.identity),Lt.edges.push({id:Gt.identity,source:Gt.start,target:Gt.end,data:{neo4jType:Gt.type,neo4jProperties:Gt.properties}}));else{const $t=Gt;ie.has($t.identity)||(ie.add($t.identity),Lt.nodes.push({id:$t.identity,attributes:{},data:{neo4jLabels:$t.labels,neo4jProperties:$t.properties}}))}}const At={boolean:Lt=>Lt.toLowerCase()==="true",int:parseFloat,long:parseFloat,float:parseFloat,double:parseFloat,string:Lt=>Lt};function Xt(Lt,Gt,ie){const kt=Lt.getElementsByTagName("data"),$t={};for(let ne=0;ne<kt.length;ne++){const ee=kt[ne],se=ee.getAttribute("key");if(se===null)continue;const ve=Gt[se];typeof ve>"u"?$t[se]=ee.textContent:ee.textContent&&ee.textContent.length!==0&&($t[ve.name]=ve.parse(ee.textContent))}for(const ne in ie)ne in $t||($t[ne]=ie[ne]);return $t}function jt(Lt){return Lt.color?Lt.color:Lt.r&&Lt.g&&Lt.b?`rgb(${Lt.r}, ${Lt.g}, ${Lt.b})`:void 0}const Ge=new Set(["x","y","size","color","r","g","b","label"]);function Se(Lt){const Gt={};for(const ie in Lt)Ge.has(ie)||Lt[ie]===void 0||(Gt[ie]=Lt[ie]);return Gt}s.gexf=function(Gt){if(Gt.indexOf("<gexf")===-1)throw new Error("not a GEXF file");const ie=function(at){const it=new Int32Array(at.length);for(let ut=0,yt=at.length;ut<yt;++ut)it[ut]=at.charCodeAt(ut);return it}(Gt),kt=function(at,it){let ut,yt;const bt={tags:[],attributes:[],tokens:[]},vt=bt.tokens;let St=ft(at,it);for(;St<at.length;){let Tt=at[St];if(Tt===_){if(St=ft(at,++St),at[St]===M)for(vt.push(-2);at[++St]!==m;);else{ut=St,St=W(at,ut);const Wt=tt(bt,at,ut,St);for(vt.push(-1,Wt),Tt=at[St];Tt!==m&&Tt!==M;)St=lt(bt,at,St),Tt=at[St];if(Tt===M)for(vt.push(-2);at[++St]!==m;);}St+=1}else{for(ut=St;at[++St]!==_;);for(yt=St-1;pt(at[yt]);)--yt;vt.push(-4,ut,yt+1)}St=ft(at,St)}return bt}(ie,Gt.indexOf("<gexf ")),$t={},ne={};kt.tags.forEach((ot,at)=>{const it=String.fromCharCode.apply(null,ot);$t[it]=at}),kt.attributes.forEach((ot,at)=>{const it=String.fromCharCode.apply(null,ot);ne[it]=at});const ee=$t.attributes,se=$t.attribute,ve=$t.node,Oe=$t.edge,ke=$t.default,Xe=$t["viz:position"],Be=$t["viz:size"],Ae=$t["viz:color"],Ze=$t.attvalue,ki=ne.class,ei=ne.id,qe=ne.type,hi=ne.title,Ji=ne.label,Mi=ne.source,Vs=ne.target,ls=ne.x,Is=ne.y,Jn=ne.r,Cn=ne.g,bn=ne.b,di=ne.a,gi=ne.value,lr=ne.for,ys=ne.weight,Hi={float:1,double:1,integer:2,boolean:3,string:4,"list-string":5};let $i=0;const Mn=kt.tokens,zr=Mn.length,ur=new Array(16);let Xi=0,us=0,vi=0,pn=!0;const Ni={},yn={};let Ii,Fe,$n="",Fn="",Ee="",xi={attributes:{}},Dr=0,er=0,ci=0,Fi=1,ts="",Bi=!1,Ss=!0,tn=null,ro=null;const oo=[],ir=[];let hr=0,en={};for(;$i<zr;){const ot=Mn[$i];if(ot===-1)us=Xi,Xi=Mn[$i+1],ur[vi]=Xi,vi+=1,Xi===ve?(tn||(tn=st(!0,Ni)),xi=tn(),Ss=!0,en=Ni):Xi===Oe&&(ro||(ro=st(!1,yn)),xi=ro(),Ss=!1,en=yn),$i+=2;else if(ot===-2){if($n&&Xi===se){en=pn?Ni:yn;const at=Hi[Fn];let it=Ii;it&&(at===1?it=+it:at===2?it=0|+it:at===3?it=it==="true":at===5&&(it=it.split(" ").filter(ut=>ut))),en[$n]={title:Ee||$n,default:it,type:at},$n="",Ee="",Fn="",Ii=void 0}else if(Xi===ve&&vi===4)Bi&&xi.attributes&&(xi.attributes.color=`rgba(${Dr}, ${er}, ${ci}, ${Fi})`,Dr=0,er=0,ci=0,Fi=1,Bi=!1),xi.id||(xi.id=++hr),oo.push(xi);else if(Xi===Oe&&vi===4)xi.id||(xi.id=++hr),ir.push(xi);else if(Xi===Ze&&vi===6&&ts){const at=(Ss?Ni:yn)[ts];if(at){if(Fe===void 0)Fe=at.default;else{const ut=at.type;ut&&(ut===1?Fe=+Fe:ut===2?Fe=0|+Fe:ut===3?Fe=Fe==="true":ut===5?Fe=Fe.split(" ").filter(yt=>yt).map(yt=>_t(yt)):typeof ie=="string"&&(Fe=_t(Fe)))}xi.data||(xi.data={});const it=en;xi.data[it[ts].title]=Fe}ts="",Fe=null}vi-=1,Xi=us,us=ur[vi-2],$i+=1}else if(ot===-3){const at=Mn[$i+1],it=Gt.substring(Mn[$i+2],Mn[$i+3]);if(Xi===ee)at===ki&&(pn=it!=="edge"&&it!=="edges");else if(Xi===se)at===ei?$n=it:at===qe?Fn=it:at===hi&&(Ee=it);else if(Xi!==ve&&Xi!==Oe||vi!==4)if(Xi===Xe&&vi===5){if(at===ls)xi.attributes.x=parseFloat(it);else if(at===Is){const ut=parseFloat(it);xi.attributes.y=ut===0?ut:-ut}}else Xi===Ae&&vi===5?(Bi=!0,at===Jn?Dr=parseInt(it):at===Cn?er=parseInt(it):at===bn?ci=parseInt(it):at===di&&(Fi=parseFloat(it))):Xi===Be&&vi===5?at===gi&&(Ss?xi.attributes.radius=+it:xi.attributes.width=+it):Xi===Ze&&vi===6&&(at===lr||at===ei?ts=it:at===gi&&(Fe=it));else at===ei?xi.id=it:at===Ji?xi.attributes.text=it:at===Mi?xi.source=it:at===Vs?xi.target=it:at===ys&&(xi.attributes.width=+it);$i+=4}else{if(ot!==-4)throw new Error(`at index ${$i}: token ${ot}`);{const at=Gt.substring(Mn[$i+1],Mn[$i+2]);Xi===ke&&(Ii=at),$i+=3}}}return{nodes:oo,edges:ir}},s.graphml=function(Gt,ie){if(!ie){if(typeof DOMParser>"u")throw new Error("DOMParser is not available. You need to provide a DOMParser instance as second argument, if you are not in the browser environment");ie=new DOMParser}const kt=ie.parseFromString(Gt,"application/xml"),$t=kt.getElementsByTagName("key"),ne=kt.getElementsByTagName("node"),ee=kt.getElementsByTagName("edge"),{definitions:se,defaults:ve}=function(Ae){const Ze={graph:{},node:{},edge:{}},ki={graph:{},node:{},edge:{}};for(let ei=0;ei<Ae.length;ei++){const qe=Ae[ei],hi=qe.getAttribute("for")||"node",Ji=qe.getAttribute("id"),Mi=qe.getAttribute("attr.name"),Vs=qe.getAttribute("attr.type")||"string",ls=qe.getElementsByTagName("default"),Is=ls.length!==0?ls[0].textContent:void 0;Ze[hi][Ji]={name:Mi,parse:At[Vs]},typeof Is<"u"&&(ki[hi][Mi]=Is)}return{definitions:Ze,defaults:ki}}($t),Oe=[],ke=new Set;for(let Be=0;Be<ne.length;Be++){const Ae=ne[Be],Ze=Ae.getAttribute("id"),ki=Ae.getAttribute("href")||void 0,ei=Xt(Ae,se.node,ve.node);ke.add(Ze);const qe={id:Ze,attributes:{x:ei.x,y:ei.y,radius:ei.size,color:jt(ei),text:ei.label},data:Se(ei)};ei.x!==void 0&&(qe.attributes.x=ei.x),ei.y!==void 0&&(qe.attributes.y=ei.y),ei.size!==void 0&&(qe.attributes.radius=ei.size),ei.label!==void 0&&(qe.attributes.text=ei.label);const hi=jt(ei);hi!==void 0&&(qe.attributes.color=hi),ki!==void 0&&(qe.data.href=ki),Oe.push(qe)}const Xe=[];for(let Be=0;Be<ee.length;Be++){const Ae=ee[Be],Ze=Ae.getAttribute("id")||Be,ki=Ae.getAttribute("source"),ei=Ae.getAttribute("target"),qe=Ae.getAttribute("xlink:href")||void 0;if(!ke.has(ki)||!ke.has(ei))throw new Error(`Invalid edge: ${ki} -> ${ei}`);const hi=Xt(Ae,se.edge,ve.edge),Ji={id:Ze,source:ki,target:ei,attributes:{},data:Se(hi)},Mi=jt(hi);Mi!==void 0&&(Ji.attributes.color=Mi),qe!==void 0&&(Ji.data.href=qe),Xe.push(Ji)}return{nodes:Oe,edges:Xe}},s.janus=function(Gt){const ie=[],kt=[];return a(typeof Gt=="string"?JSON.parse(Gt):Gt,ie,kt),{nodes:ie,edges:kt}},s.json=function(Gt,ie=kt=>kt){const kt=ie(JSON.parse(Gt)),$t=kt.nodes||[],ne=kt.edges||[];for(let ee=0;ee<$t.length;ee++){const se=$t[ee];se.attributes||(se.attributes={}),typeof se.size=="string"&&(se.size=+se.size),typeof se.x=="string"&&(se.x=+se.x),typeof se.y=="string"&&(se.y=+se.y),r(se,"x"),r(se,"y"),r(se,"size","radius"),r(se,"color"),r(se,"text")}for(let ee=0;ee<ne.length;ee++){const se=ne[ee];se.attributes||(se.attributes={}),typeof se.size=="string"&&(se.size=+se.size),r(se,"size","width"),r(se,"color"),r(se,"text")}return{nodes:$t,edges:ne}},s.mtx=Lt=>{const Gt=Lt.split(`
`).filter($t=>!$t.startsWith("%")),[ie]=Gt[0].split(" ").map(Number),kt=Gt.slice(1).map($t=>$t.split(" ").slice(0,2).map(Number)).filter($t=>$t.length===2);return{nodes:Array.from({length:Number(ie)},($t,ne)=>({id:ne})),edges:kt.map(([$t,ne])=>({source:$t%ie,target:ne%ie}))}},s.neo4j=function(Gt){let ie=typeof Gt=="string"?JSON.parse(Gt):Gt;const kt={nodes:[],edges:[]},$t=new Set,ne=new Set;return(ee=>"queryKeys"in ee&&"values"in ee)(ie)&&(ie=function(se){const ve=[];return se.values.forEach(Oe=>{const{nodes:ke=[],relationships:Xe=[],segments:Be=[]}=Oe.adapted,Ae=[{segments:Be,properties:{}}];ve.push({_fields:[...ke,...Xe,...Ae]})}),{records:ve}}(ie)),ie.records.forEach(({_fields:ee})=>ee.forEach(se=>Mt(kt,se,$t,ne))),kt},Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})},typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):n((i=typeof globalThis<"u"?globalThis:i||self).ogmaParsers={})}}),hO=pw({"node_modules/@linkurious/ogma-generators/dist/ogma-generators.umd.js"(t,e){var i,n;i=t,n=function(s){/**
* Ogma Generators
* @description Graphs Generators for Ogma
* @version 0.0.13 (built on Tue Nov 14 2023 10:49:46 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2023. All rights reserved.
* @preserve
*/const r=Object.freeze(Object.defineProperty({__proto__:null,configure:({nodes:N=10,edges:O=10,texts:R=!1,scale:P=100}={})=>({nodes:N,edges:O,texts:R,scale:P}),generate:function({nodes:O,scale:R,texts:P,edges:F}){const U=[],V=[];for(let Y=0;Y<O;Y++)U.push({id:Y,attributes:{x:Math.random()*R,y:Math.random()*R,text:P?`Node ${Y}`:void 0}});for(let Y=0;Y<F;Y++)V.push({id:Y,source:Math.random()*O|0,target:Math.random()*O|0,attributes:{text:P?`Edge ${Y}`:void 0}});return{nodes:U,edges:V}}},Symbol.toStringTag,{value:"Module"})),a=Object.freeze(Object.defineProperty({__proto__:null,configure:({rows:N=4,columns:O=4,columnDistance:R=20,rowDistance:P=20,xmin:F=0,ymin:U=0}={})=>({rows:N,columns:O,columnDistance:R,rowDistance:P,xmin:F,ymin:U}),generate:function({rows:O,columns:R,columnDistance:P,rowDistance:F,xmin:U,ymin:V}){const Y={nodes:[],edges:[]};let K=0;for(let tt=0;tt<O;++tt)for(let j=0;j<R;++j){const lt=tt*R+j;Y.nodes.push({id:lt,attributes:{x:U+j*P,y:V+tt*F}}),j!==R-1&&(Y.edges.push({id:K,source:lt,target:tt*R+j+1}),K++),tt!==O-1&&(Y.edges.push({id:K,source:lt,target:(tt+1)*R+j}),K++)}return Y}},Symbol.toStringTag,{value:"Module"})),u=Object.freeze(Object.defineProperty({__proto__:null,configure:({length:N=5,scale:O=100}={})=>({length:N,scale:O}),generate:function({length:O,scale:R}){const P={nodes:[],edges:[]};if(O<=0)return P;P.nodes.push({id:0,attributes:{x:Math.random()*R,y:Math.random()*R}});for(let F=1;F<O;++F)P.nodes.push({id:F,attributes:{x:Math.random()*R,y:Math.random()*R}}),P.edges.push({id:F-1,source:F-1,target:F});return P}},Symbol.toStringTag,{value:"Module"}));function h(N){return typeof N=="number"&&isFinite(N)?N:void 0}const c=Object.freeze(Object.defineProperty({__proto__:null,configure:function({children:O=2,height:R=3}={}){if(!function(F){return typeof F=="number"&&isFinite(F)&&F>0?F:void 0}(O))throw new TypeError('Invalid argument: "children" is not a positive number, was '+O);if(!function(F){return typeof F=="number"&&isFinite(F)&&F>=0?F:void 0}(R))throw new TypeError('Invalid argument: "height" is not a positive number, was '+R);return{children:O,height:R}},generate:function({children:O,height:R}){R+=1;const P=Math.pow(O,R),F=[],U=[];let V=1,Y=0,K=0;for(let tt=0;tt<R;++tt){const j=P/(V+1)/1.5;for(let lt=0;lt<V;++lt){const pt=Y++;if(F.push({id:pt,attributes:{x:(lt+1)*j*10,y:20*tt}}),tt!==R-1)for(let ft=0;ft<O;++ft)U.push({id:K,source:pt,target:pt*O+ft+1}),K+=1}V*=O}return{nodes:F,edges:U}}},Symbol.toStringTag,{value:"Module"})),g=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:O=20,edges:R,p:P,scale:F=100}={}){if(!h(O)||O<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+O);if(R!==void 0&&P!==void 0)throw new TypeError("Invalid argument: choose between options.edges and options.p");return R===void 0&&P===void 0&&(P=.1),P===void 0&&(P=-1),R===void 0&&(R=-1),{nodes:O,p:P,edges:R,scale:F}},generate:function(O){const R={nodes:[],edges:[]},P=O.nodes,F=O.p,U=O.scale;if(F>=0){let V=0;for(let Y=0;Y<P;Y++){R.nodes.push({id:Y,attributes:{x:Math.random()*U,y:Math.random()*U}});for(let K=0;K<Y;K++)Math.random()<F&&R.edges.push({id:V++,source:Y,target:K})}}else{const V=[],Y=O.edges;for(let tt=0;tt<P;tt++){R.nodes.push({id:tt,attributes:{x:100*Math.random(),y:100*Math.random()}});for(let j=tt+1;j<P;j++)V.push({source:tt,target:j})}let K=V.length-1;for(let tt=0;tt<Y;tt++){const j=V.splice(Math.floor(Math.random()*K),1)[0];j.id=tt,R.edges.push(j),K--}}return R}},Symbol.toStringTag,{value:"Module"})),_=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:O=40,m0:R=5,m:P=1,scale:F=100}={}){if(!h(O)||O<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+O);if(!h(R)||R>=O)throw new TypeError(`Invalid argument: options.m0 is not a number < ${O}, was ${R}`);if(!h(R)||P>=R)throw new TypeError(`Invalid argument: options.m is not a number <= ${R}, was ${P}`);if(!h(F)||F<0)throw new TypeError("Invalid argument: options.scale is not a number or is less than 0");return{nodes:O,m0:R,m:P,scale:F}},generate:function({scale:O,nodes:R,m0:P,m:F}){const U={nodes:[],edges:[]},V={},Y=[],K=O/10;let tt=0;for(let j=0;j<P;j++)U.nodes.push({id:j,attributes:{x:Math.random()*K,y:Math.random()*K}}),Y[j]=0;for(let j=0;j<P;j++)for(let lt=j+1;lt<P;lt++){const pt={id:tt++,source:j,target:lt};V[pt.source+"-"+pt.target]=pt,U.edges.push(pt),Y[j]++,Y[lt]++}for(let j=P;j<R;j++){U.nodes.push({id:j,attributes:{x:Math.random()*O,y:Math.random()*O}}),Y[j]=0;let lt=0;for(let ft=0;ft<j;ft++)lt+=Y[ft];let pt=0;for(let ft=0;ft<F;ft++){const ht=Math.random();let W=0;for(let st=0;st<j;st++)if(!V[`${j}-${st}`]&&!V[`${st}-${j}`]&&(W=j===1?1:W+Y[st]/lt+pt/(j-ft),ht<=W)){pt+=Y[st]/lt;const _t={id:tt++,source:j,target:st};V[`${_t.source}-${_t.target}`]=_t,U.edges.push(_t),Y[j]++,Y[st]++;break}}}return U}},Symbol.toStringTag,{value:"Module"})),m=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:O=50,width:R=100,height:P=100,x:F=0,y:U=0}={}){if(!isFinite(O)||O<1)throw new RangeError("Tree generator: number of nodes must be a positive integer");return{nodes:O,width:R,height:P,x:F,y:U}},generate:function({nodes:O,x:R,y:P,width:F,height:U}){const V=R-F/2,Y=P-U/2;return{nodes:new Array(O).fill(0).map((K,tt)=>({id:tt,attributes:{x:V+Math.random()*F,y:Y+Math.random()*U}})),edges:new Array(O-1).fill(0).map((K,tt)=>({id:tt,source:Math.floor(Math.sqrt(tt)),target:tt+1}))}}},Symbol.toStringTag,{value:"Module"}));function v(N){return 10*Math.pow(2.7,N)}function b(N){return 5+v(N)/10}function x(N,O,R,P,F){if(R===0)return F;const U=v(R),V=b(R),Y=.2*V;let K=-Math.PI;const tt=2*Math.PI/O,j=P.attributes.x||0,lt=P.attributes.y||0;for(let pt=0;pt<O;++pt){const ft={id:F,attributes:{x:j+U*Math.cos(K),y:lt+U*Math.sin(K),radius:V}},ht={id:F,source:P.id,target:F,attributes:{width:Y}};N.nodes.push(ft),N.edges.push(ht),F=x(N,O,R-1,ft,F+1),K+=tt}return F}const M=Object.freeze(Object.defineProperty({__proto__:null,configure:function({depth:O=3,breadth:R=3,nodes:P}){return P!==void 0?(R=5,O=Math.ceil(Math.log(P)/Math.log(5))):P=-1,{depth:O,breadth:R,nodes:P}},generate:function({depth:O,breadth:R,nodes:P}){const F={id:0,attributes:{x:0,y:0,radius:b(O+1)}},U={nodes:[F],edges:[]};return x(U,R,O,F,1),P!==void 0&&P>=0&&(U.nodes=U.nodes.slice(0,P),U.edges=U.edges.slice(0,Math.max(P-1,0))),U}},Symbol.toStringTag,{value:"Module"}));s.balancedTree=c,s.barabasiAlbert=_,s.erdosRenyi=g,s.flower=M,s.grid=a,s.path=u,s.random=r,s.randomTree=m,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})},typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):n((i=typeof globalThis<"u"?globalThis:i||self).ogmaGenerators={})}}),jn=class{constructor(t){this._ogma=t}};function Wf(t,e){for(let i=1,n=t.length;i<n;i++){const s=t[i];let r=i;for(;r>0&&e.get(t[r-1])>e.get(s);)t[r]=t[r-1],--r;t[r]=s}return t}function dO(t,e){for(let i=1,n=t.length;i<n;i++){const s=t[i];let r=i;for(;r>0&&e.get(t[r-1])<e.get(s);)t[r]=t[r-1],--r;t[r]=s}return t}function Ir(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Yv(t){return Array.isArray(t)?t:[t]}function vw(t){const e=[];for(let i=0;i<t.length;++i){const n=t[i];if(Array.isArray(n))for(let s=0;s<n.length;++s)e.push(n[s]);else e.push(n)}return e}function cO(...t){if(t.length===0)return[];const e=t[0].constructor;let i=0;for(const r of t)i+=r.length;const n=new e(i);let s=0;for(const r of t){for(let a=0;a<r.length;a++)n[s+a]=r[a];s+=r.length}return n}function fO(t,e){const i=t.indexOf(e);return i!==-1&&(t.splice(i,1),!0)}function xw(t,e){let i,n,s=0,r=t.length-1;for(;s<=r;)if(i=(s+r)/2|0,n=t[i],n<e)s=i+1;else{if(!(n>e))return i;r=i-1}return-1}var vg=(t,e)=>{const i=new Array(t.length);for(let n=0;n<t.length;n++)i[n]=e[t[n]];return i};function gO(t){return typeof t=="number"&&t%1==0}function Xv(t){return Array.isArray(t)?t.join("."):t}function pd(t){if(!t)return[];if(typeof t=="string")return t.split(".");if(Array.isArray(t)){for(let e=0;e<t.length;++e)if(typeof t[e]!="string")throw new TypeError(`${t[e]} is not a string`);return t.slice()}throw new TypeError(`invalid property path "${t}": expected string or array of strings`)}function _p(t,e,i){let n,s,r;if(e===0)return function(){t.apply(i,arguments)};const a=function(){n=!1,s&&(r.apply(i,s),s=null)};return r=function(){let u;return n?s=arguments:(u=t.apply(i,arguments),setTimeout(a,e),n=!0),u},r}function _O(t,e,i){let n,s,r,a,u;const h=e===0||e===void 0?100:e;function c(){const _=Date.now()-a;_<h&&_>=0?n=setTimeout(c,h-_):(n=null,i||(u=t.apply(r,s),r=s=null))}const g=function(){r=this,s=arguments,a=Date.now();const _=i&&!n;return n||(n=setTimeout(c,e)),_&&(u=t.apply(r,s),r=s=null),u};return g.clear=function(){n&&(clearTimeout(n),n=null)},g.flush=function(){n&&(u=t.apply(r,s),r=s=null,clearTimeout(n),n=null)},g}function bw(t,e,i,n,s){i(t[e],e,t,n,s).then(r=>{e===t.length-1?n(r):bw(t,e+1,i,n,s)}).catch(s)}function mO(t,e){return new Promise((i,n)=>bw(t,0,e,i,n))}function mp(){return new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120}function Ew(t){return t.reduce((e,i)=>e.then(i),Promise.resolve())}function Zv(t,e,i,n,s,r,a,u){return t+s+256*(e+r)+65536*(i+a)+16777216*(n+u)}function pO(t,e){return t<e?t*e+Math.pow(e-t-1,2)/4:t*e+Math.pow(t-e-1,2)/4}function yd(t){return!(t===null||typeof t!="object"||Ir(t)||t instanceof RegExp||typeof HTMLElement<"u"&&t instanceof HTMLElement)}function ug(t){const e=Object.keys(t),i=new Array(e.length);for(let n=0;n<e.length;++n)i[n]=t[e[n]];return i}function Bl(t,e,i){if(Array.isArray(t))return t.forEach(e,i);if(!yd(t))throw new Error("forEach: invalid argument "+JSON.stringify(t));const n=Object.keys(t);if(i!==void 0)for(let s=0;s<n.length;++s){const r=n[s];e.call(i,t[r],r)}else for(let s=0;s<n.length;++s){const r=n[s];e(t[r],r)}}function ps(t){if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;++s)n[s]=ps(t[s]);return n}if(!Hs(t))return t;const e={},i=Object.keys(t);for(const n of i)e[n]=ps(t[n]);return e}function yO(t,e){e.forEach(i=>{t.indexOf(i)===-1&&t.push(i)})}function _u(t,e,i){const n=typeof e=="string"?e.split("."):e;for(let s=0;s<n.length-1;++s){const r=n[s];let a=t[r];a||(a={},t[r]=a),t=a}t[n[n.length-1]]=i}function _s(t,e){const i=pd(e);if(!i.length)return t;if(t){for(let n=0;n<i.length-1;++n){const s=t[i[n]];if(!s)return;t=s}return t[i[i.length-1]]}}function xg(t,e,i="."){e||(e=r=>!yd(r));const n={},s=Object.keys(t);for(let r=0;r<s.length;++r){const a=s[r],u=t[a];if(e(u))n[a]=u;else{const h=xg(u,e),c=Object.keys(h);for(let g=0;g<c.length;g++){const _=c[g];n[`${a}${i}${_}`]=h[_]}}}return n}function Wv(t){const e={},i=Object.keys(t);for(let n=0;n<i.length;++n){const s=i[n];_u(e,s,t[s])}return e}function vd(t,e,i=[]){const n=Object.keys(t);for(let s=0;s<n.length;++s){const r=n[s],a=t[r],u=e?e+r:r;Hs(a)?vd(a,u+".",i):i.push(u)}return i}var Sw=Object.prototype.hasOwnProperty;function Aw(t,e){const i=[t];let n;for(;i.length>0;)if(n=i.pop(),n)if(Hs(n))for(const s in n)Sw.call(n,s)&&i.push(n[s]);else e(n)}function vO(t){const e={};return Aw(t,i=>e[i.getName()]=i),e}function pp(t,e=[]){if(Hs(t)){const i=Object.keys(t);for(const n of i)pp(t[n],e)}else e.push(t);return e}function yp(t){for(const e in t)typeof t[e]=="function"&&delete t[e];return t}function ua(t,e){if(t===void 0)return ps(e);if(!yd(t))return t;const i={},n=Object.keys(e);for(const s of n){const r=e[s],a=t[s];yd(r)?i[s]=ua(a,r):i[s]=a===void 0?ps(r):a}return i}function Hs(t){return t&&(t.constructor===Object||!t.constructor)}function Pm(t,e){if(!Hs(e)||!Hs(t))return e;const i=Object.assign({},t),n=Object.keys(e);for(const s of n)i[s]=Pm(i[s],e[s]);return i}function qv(t,e){return e==null?t:e.reduce((i,n)=>(i[n]=t[n],i),{})}var _c=(...t)=>{const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)Sw.call(n,s)&&(Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=Array.from(new Set(e[s].concat(n[s]))):Hs(e[s])&&Hs(n[s])?e[s]=_c(e[s],n[s]):e[s]=n[s])}return e},xO=typeof global=="object"&&global!==null&&global.it!==void 0,xu=typeof document<"u",yh=typeof window<"u",vp=yh&&!window.__OGMA_HEADLESS,xp=vp&&xu,bO=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",EO=yh&&/mac/.test(bO),Tw=typeof performance<"u"&&performance.now?()=>0|performance.now():()=>Date.now(),SO=Tw();function eo(){return Tw()-SO}function ww(){const t=new Date,e=t.getDate(),i=t.getMonth()+1;return`${t.getFullYear()}-${i<10?"0"+i:i}-${e<10?"0"+e:e}`}function Lw(){const t=new Date;return`[${C_((t.getUTCHours()-(t.getTimezoneOffset()/60|0))%24)}:${C_(t.getUTCMinutes())}:${C_(t.getUTCSeconds())}:${C_(t.getUTCMilliseconds(),3)}]`}function C_(t,e=2){let i=Math.pow(10,e-1),n=String(t);for(;i>1;)t<i&&(n="0"+n),i/=10;return n}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fg={};function bp(t){if(t!==Fg)throw new Error("Bad secret")}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AO(t,e){if(!wO(t)||e+1!==t.length)throw new TypeError(`
    ############################## ERROR ##############################

    It looks like you are trying to call a template tag function (fn\`...\`)
    using the normal function syntax (fn(...)), which is not supported.

    The functions in the safevalues library are not designed to be called
    like normal functions, and doing so invalidates the security guarantees
    that safevalues provides.

    If you are stuck and not sure how to proceed, please reach out to us
    instead through:
     - https://github.com/google/safevalues/issues

    ############################## ERROR ##############################`)}function qf(t){return Object.isFrozen(t)&&Object.isFrozen(t.raw)}function M_(t){return t.toString().indexOf("`")===-1}var yS=M_(t=>t``)||M_(t=>t`\0`)||M_(t=>t`\n`)||M_(t=>t`\u0000`),TO=qf``&&qf`\0`&&qf`\n`&&qf`\u0000`;function wO(t){return!(!Array.isArray(t)||!Array.isArray(t.raw))&&t.length===t.raw.length&&!(!yS&&t===t.raw)&&!!(yS&&!TO||qf(t))}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wy,LO="google#safe",CO=LO,MO=globalThis.trustedTypes,vS=MO;function NO(){let t=null;if(!vS)return t;try{const e=i=>i;t=vS.createPolicy(CO,{createHTML:e,createScript:e,createScriptURL:e})}catch(e){throw e}return t}function h0(){return Wy===void 0&&(Wy=NO()),Wy}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N_(t){return{valueOf:t}.valueOf()}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cw=class{constructor(t,e){bp(t),this.privateDoNotAccessOrElseWrappedHtml=e}toString(){return this.privateDoNotAccessOrElseWrappedHtml+""}},RO=Cw;function OO(t){return new RO(Fg,t)}function Mw(t){const e=t,i=h0();return OO(i?i.createHTML(e):e)}function IO(t){return t instanceof Cw}function d0(t){if(IO(t))return t.privateDoNotAccessOrElseWrappedHtml;{let e="";throw e="Unexpected type when unwrapping SafeHtml",new Error(e)}}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nw=class{constructor(t,e){bp(t),this.privateDoNotAccessOrElseWrappedResourceUrl=e}toString(){return this.privateDoNotAccessOrElseWrappedResourceUrl+""}},PO=Nw;function zO(t){return new PO(Fg,t)}function DO(t){const e=t,i=h0();return zO(i?i.createScriptURL(e):e)}function kO(t){return t instanceof Nw}function Bc(t){if(kO(t))return t.privateDoNotAccessOrElseWrappedResourceUrl;{let e="";throw e="Unexpected type when unwrapping TrustedResourceUrl",new Error(e)}}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zm,xS,Rw=class{constructor(t,e){bp(t),this.privateDoNotAccessOrElseWrappedScript=e}toString(){return this.privateDoNotAccessOrElseWrappedScript+""}},FO=Rw;function BO(t){return new FO(Fg,t)}function c0(t){const e=t,i=h0();return BO(i?i.createScript(e):e)}function UO(t){return t instanceof Rw}function Ow(t){if(UO(t))return t.privateDoNotAccessOrElseWrappedScript;{let e="";throw e="Unexpected type when unwrapping SafeScript",new Error(e)}}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(t,e){e.appendChild(t);let i=new XMLSerializer().serializeToString(e);return i=i.slice(i.indexOf(">")+1,i.lastIndexOf("</")),Mw(i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bS(t){try{return new URL(t,window.document.baseURI)}catch{return new URL("about:invalid")}}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HO(t){let e;try{e=new URL(t)}catch{return"https:"}return e.protocol}(function(t){t[t.STYLE_ELEMENT=0]="STYLE_ELEMENT",t[t.STYLE_ATTRIBUTE=1]="STYLE_ATTRIBUTE",t[t.HTML_ATTRIBUTE=2]="HTML_ATTRIBUTE"})(zm||(zm={})),function(t){t[t.AT_KEYWORD=0]="AT_KEYWORD",t[t.CDC=1]="CDC",t[t.CDO=2]="CDO",t[t.CLOSE_CURLY=3]="CLOSE_CURLY",t[t.CLOSE_PAREN=4]="CLOSE_PAREN",t[t.CLOSE_SQUARE=5]="CLOSE_SQUARE",t[t.COLON=6]="COLON",t[t.COMMA=7]="COMMA",t[t.DELIM=8]="DELIM",t[t.DIMENSION=9]="DIMENSION",t[t.EOF=10]="EOF",t[t.FUNCTION=11]="FUNCTION",t[t.HASH=12]="HASH",t[t.IDENT=13]="IDENT",t[t.NUMBER=14]="NUMBER",t[t.OPEN_CURLY=15]="OPEN_CURLY",t[t.OPEN_PAREN=16]="OPEN_PAREN",t[t.OPEN_SQUARE=17]="OPEN_SQUARE",t[t.PERCENTAGE=18]="PERCENTAGE",t[t.SEMICOLON=19]="SEMICOLON",t[t.STRING=20]="STRING",t[t.WHITESPACE=21]="WHITESPACE"}(xS||(xS={}));var VO=["data:","http:","https:","mailto:","ftp:"],YO=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;function XO(t){const e=!YO.test(t);return e&&console.error(`A URL with content '${t}' was sanitized away.`),e}function ZO(t){if(!XO(t))return t}function Bg(t){return ZO(t)}function WO(t){const e=HO(t);return e!==void 0&&VO.indexOf(e.toLowerCase())!==-1?t:"about:invalid#zClosurez"}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qO="display:inline-block;clip-path:inset(0);overflow:hidden;vertical-align:top;text-decoration:inherit",QO=`:host{${qO}}`;/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KO(t,e){return t.createContextualFragment(d0(e))}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jO(t,e){if(e.defaultView)throw new Error("createInertFragment called with non-inert document");const i=e.createRange();return i.selectNode(e.body),KO(i,Mw(t))}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(t){const e=t.nodeName;return typeof e=="string"?e:"FORM"}function SS(t){return t.nodeType===3}function AS(t){const e=t.nodeType;return e===1||typeof e!="number"}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xn,Pl=class{constructor(t,e,i,n,s){this.allowedElements=t,this.elementPolicies=e,this.allowedGlobalAttributes=i,this.globalAttributePolicies=n,this.globallyAllowedAttributePrefixes=s}isAllowedElement(t){return t!=="FORM"&&(this.allowedElements.has(t)||this.elementPolicies.has(t))}getAttributePolicy(t,e){const i=this.elementPolicies.get(e);return i!=null&&i.has(t)?i.get(t):this.allowedGlobalAttributes.has(t)?{policyAction:Xn.KEEP}:this.globalAttributePolicies.get(t)||(this.globallyAllowedAttributePrefixes&&[...this.globallyAllowedAttributePrefixes].some(s=>t.indexOf(s)===0)?{policyAction:Xn.KEEP}:{policyAction:Xn.DROP})}};(function(t){t[t.DROP=0]="DROP",t[t.KEEP=1]="KEEP",t[t.KEEP_AND_SANITIZE_URL=2]="KEEP_AND_SANITIZE_URL",t[t.KEEP_AND_NORMALIZE=3]="KEEP_AND_NORMALIZE",t[t.KEEP_AND_SANITIZE_STYLE=4]="KEEP_AND_SANITIZE_STYLE",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY=5]="KEEP_AND_USE_RESOURCE_URL_POLICY",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET=6]="KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET"})(Xn||(Xn={}));var JO=new Set(["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"]);function $O(t){return!JO.has(t.toUpperCase())&&/^[a-z][-_.a-z0-9]*-[-_.a-z0-9]*$/i.test(t)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tI=["ARTICLE","SECTION","NAV","ASIDE","H1","H2","H3","H4","H5","H6","HEADER","FOOTER","ADDRESS","P","HR","PRE","BLOCKQUOTE","OL","UL","LH","LI","DL","DT","DD","FIGURE","FIGCAPTION","MAIN","DIV","EM","STRONG","SMALL","S","CITE","Q","DFN","ABBR","RUBY","RB","RT","RTC","RP","DATA","TIME","CODE","VAR","SAMP","KBD","SUB","SUP","I","B","U","MARK","BDI","BDO","SPAN","BR","WBR","NOBR","INS","DEL","PICTURE","PARAM","TRACK","MAP","TABLE","CAPTION","COLGROUP","COL","TBODY","THEAD","TFOOT","TR","TD","TH","SELECT","DATALIST","OPTGROUP","OPTION","OUTPUT","PROGRESS","METER","FIELDSET","LEGEND","DETAILS","SUMMARY","MENU","DIALOG","SLOT","CANVAS","FONT","CENTER","ACRONYM","BASEFONT","BIG","DIR","HGROUP","STRIKE","TT"],eI=[["A",new Map([["href",{policyAction:Xn.KEEP_AND_SANITIZE_URL}]])],["AREA",new Map([["href",{policyAction:Xn.KEEP_AND_SANITIZE_URL}]])],["LINK",new Map([["href",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY,conditions:new Map([["rel",new Set(["alternate","author","bookmark","canonical","cite","help","icon","license","next","prefetch","dns-prefetch","prerender","preconnect","preload","prev","search","subresource"])]])}]])],["SOURCE",new Map([["src",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["IMG",new Map([["src",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["VIDEO",new Map([["src",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY}]])],["AUDIO",new Map([["src",{policyAction:Xn.KEEP_AND_USE_RESOURCE_URL_POLICY}]])]],iI=["title","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-current","aria-disabled","aria-dropeffect","aria-expanded","aria-haspopup","aria-hidden","aria-invalid","aria-label","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","alt","align","autocapitalize","autocomplete","autocorrect","autofocus","autoplay","bgcolor","border","cellpadding","cellspacing","checked","cite","color","cols","colspan","controls","controlslist","datetime","disabled","download","draggable","enctype","face","formenctype","frameborder","height","hreflang","hidden","ismap","label","lang","loop","max","maxlength","media","minlength","min","multiple","muted","nonce","open","placeholder","poster","preload","rel","required","reversed","role","rows","rowspan","selected","shape","size","sizes","slot","span","spellcheck","start","step","summary","translate","type","valign","value","width","wrap","itemscope","itemtype","itemid","itemprop","itemref"],nI=[["dir",{policyAction:Xn.KEEP_AND_NORMALIZE,conditions:N_(()=>new Map([["dir",new Set(["auto","ltr","rtl"])]]))}],["async",{policyAction:Xn.KEEP_AND_NORMALIZE,conditions:N_(()=>new Map([["async",new Set(["async"])]]))}],["loading",{policyAction:Xn.KEEP_AND_NORMALIZE,conditions:N_(()=>new Map([["loading",new Set(["eager","lazy"])]]))}],["target",{policyAction:Xn.KEEP_AND_NORMALIZE,conditions:N_(()=>new Map([["target",new Set(["_self","_blank"])]]))}]],sI=new Pl(new Set(tI),new Map(eI),new Set(iI),new Map(nI),void 0),rI=class{constructor(t,e,i,n,s,r){this.sanitizerTable=t,this.styleElementSanitizer=i,this.styleAttributeSanitizer=n,this.resourceUrlPolicy=s,this.openShadow=r,this.changes=[],bp(e)}sanitizeAssertUnchanged(t){this.changes=[];const e=this.sanitize(t);if(this.changes.length!==0)throw new Error(`Unexpected change to HTML value as a result of sanitization. Input: "${t}", sanitized output: "${e}"
List of changes:${this.changes.join(`
`)}`);return e}sanitize(t){const e=document.implementation.createHTMLDocument("");return GO(this.sanitizeToFragmentInternal(t,e),e.body)}sanitizeToFragment(t){const e=document.implementation.createHTMLDocument("");return this.styleElementSanitizer&&this.styleAttributeSanitizer?this.sanitizeWithCssToFragment(t,e):this.sanitizeToFragmentInternal(t,e)}sanitizeWithCssToFragment(t,e){const i=document.createElement("safevalues-with-css"),n=this.openShadow?"open":"closed",s=i.attachShadow({mode:n}),r=this.sanitizeToFragmentInternal(t,e),a=document.createElement("style");a.textContent=QO,a.id="safevalues-internal-style",s.appendChild(a),s.appendChild(r);const u=e.createDocumentFragment();return u.appendChild(i),u}sanitizeToFragmentInternal(t,e){const i=jO(t,e),n=document.createTreeWalker(i,5,u=>this.nodeFilter(u));let s=n.nextNode();const r=e.createDocumentFragment();let a=r;for(;s!==null;){let u;if(SS(s))if(this.styleElementSanitizer&&a.nodeName==="STYLE"){const h=this.styleElementSanitizer(s.data);u=this.createTextNode(h)}else u=this.sanitizeTextNode(s);else{if(!AS(s)){let h="";throw h="Node is not of type text or element",new Error(h)}u=this.sanitizeElementNode(s,e)}if(a.appendChild(u),s=n.firstChild(),s)a=u;else for(;!(s=n.nextSibling())&&(s=n.parentNode());)a=a.parentNode}return r}createTextNode(t){return document.createTextNode(t)}sanitizeTextNode(t){return this.createTextNode(t.data)}sanitizeElementNode(t,e){const i=ES(t),n=e.createElement(i),s=t.attributes;for(const{name:r,value:a}of s){const u=this.sanitizerTable.getAttributePolicy(r,i);if(this.satisfiesAllConditions(u.conditions,s))switch(u.policyAction){case Xn.KEEP:ou(n,r,a);break;case Xn.KEEP_AND_SANITIZE_URL:const h=WO(a);h!==a&&this.recordChange(`Url in attribute ${r} was modified during sanitization. Original url:"${a}" was sanitized to: "${h}"`),ou(n,r,h);break;case Xn.KEEP_AND_NORMALIZE:ou(n,r,a.toLowerCase());break;case Xn.KEEP_AND_SANITIZE_STYLE:this.styleAttributeSanitizer?ou(n,r,this.styleAttributeSanitizer(a)):ou(n,r,a);break;case Xn.KEEP_AND_USE_RESOURCE_URL_POLICY:if(this.resourceUrlPolicy){const c={type:zm.HTML_ATTRIBUTE,attributeName:r,elementName:i},g=bS(a),_=this.resourceUrlPolicy(g,c);_&&ou(n,r,_.toString())}else ou(n,r,a);break;case Xn.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET:if(this.resourceUrlPolicy){const c={type:zm.HTML_ATTRIBUTE,attributeName:r,elementName:i},g=oI(a),_={parts:[]};for(const m of g.parts){const v=bS(m.url),b=this.resourceUrlPolicy(v,c);b&&_.parts.push({url:b.toString(),descriptor:m.descriptor})}ou(n,r,aI(_))}else ou(n,r,a);break;case Xn.DROP:this.recordChange(`Attribute: ${r} was dropped`);break;default:lI(u.policyAction,"Unhandled AttributePolicyAction case")}else this.recordChange(`Not all conditions satisfied for attribute: ${r}.`)}return n}nodeFilter(t){if(SS(t))return 1;if(!AS(t))return 2;const e=ES(t);return e===null?(this.recordChange(`Node name was null for node: ${t}`),2):this.sanitizerTable.isAllowedElement(e)?1:(this.recordChange(`Element: ${e} was dropped`),2)}recordChange(t){this.changes.push(t)}satisfiesAllConditions(t,e){var i;if(!t)return!0;for(const[n,s]of t){const r=(i=e.getNamedItem(n))===null||i===void 0?void 0:i.value;if(r&&!s.has(r))return!1}return!0}};function ou(t,e,i){t.setAttribute(e,i)}function oI(t){const e=[];for(const i of t.split(",")){const[n,s]=i.trim().split(/\s+/,2);e.push({url:n,descriptor:s})}return{parts:e}}function aI(t){return t.parts.map(e=>{const{url:i,descriptor:n}=e;return`${i}${n?` ${n}`:""}`}).join(" , ")}function lI(t,e=`unexpected value ${t}!`){throw new Error(e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var uI=class{constructor(){this.calledBuild=!1,this.sanitizerTable=sI}onlyAllowElements(t){const e=new Set,i=new Map;for(let n of t){if(n=n.toUpperCase(),!this.sanitizerTable.isAllowedElement(n))throw new Error(`Element: ${n}, is not allowed by html5_contract.textpb`);const s=this.sanitizerTable.elementPolicies.get(n);s!==void 0?i.set(n,s):e.add(n)}return this.sanitizerTable=new Pl(e,i,this.sanitizerTable.allowedGlobalAttributes,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowCustomElement(t,e){const i=new Set(this.sanitizerTable.allowedElements),n=new Map(this.sanitizerTable.elementPolicies);if(!$O(t=t.toUpperCase()))throw new Error(`Element: ${t} is not a custom element`);if(e){const s=new Map;for(const r of e)s.set(r.toLowerCase(),{policyAction:Xn.KEEP});n.set(t,s)}else i.add(t);return this.sanitizerTable=new Pl(i,n,this.sanitizerTable.allowedGlobalAttributes,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}onlyAllowAttributes(t){const e=new Set,i=new Map,n=new Map;for(const s of t)this.sanitizerTable.allowedGlobalAttributes.has(s)&&e.add(s),this.sanitizerTable.globalAttributePolicies.has(s)&&i.set(s,this.sanitizerTable.globalAttributePolicies.get(s));for(const[s,r]of this.sanitizerTable.elementPolicies.entries()){const a=new Map;for(const[u,h]of r.entries())t.has(u)&&a.set(u,h);n.set(s,a)}return this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,n,e,i,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowDataAttributes(t){if(t===void 0){const i=new Set(this.sanitizerTable.globallyAllowedAttributePrefixes);return i.add("data-"),this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,this.sanitizerTable.allowedGlobalAttributes,this.sanitizerTable.globalAttributePolicies,i),this}const e=new Set(this.sanitizerTable.allowedGlobalAttributes);for(const i of t){if(i.indexOf("data-")!==0)throw new Error(`data attribute: ${i} does not begin with the prefix "data-"`);e.add(i)}return this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,e,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowStyleAttributes(){const t=new Map(this.sanitizerTable.globalAttributePolicies);return t.set("style",{policyAction:Xn.KEEP_AND_SANITIZE_STYLE}),this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,this.sanitizerTable.allowedGlobalAttributes,t,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowClassAttributes(){const t=new Set(this.sanitizerTable.allowedGlobalAttributes);return t.add("class"),this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,t,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowIdAttributes(){const t=new Set(this.sanitizerTable.allowedGlobalAttributes);return t.add("id"),this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,t,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}allowIdReferenceAttributes(){const t=new Set(this.sanitizerTable.allowedGlobalAttributes);return t.add("aria-activedescendant").add("aria-controls").add("aria-labelledby").add("aria-owns").add("for").add("list"),this.sanitizerTable=new Pl(this.sanitizerTable.allowedElements,this.sanitizerTable.elementPolicies,t,this.sanitizerTable.globalAttributePolicies,this.sanitizerTable.globallyAllowedAttributePrefixes),this}withResourceUrlPolicy(t){return this.resourceUrlPolicy=t,this}},hI=class extends uI{build(){if(this.calledBuild)throw new Error("this sanitizer has already called build");return this.calledBuild=!0,new rI(this.sanitizerTable,Fg,void 0,void 0,this.resourceUrlPolicy)}};/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dI(t){const e=Ow(t).toString(),i=new Blob([e],{type:"text/javascript"});return DO(URL.createObjectURL(i))}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(t,...e){if(e.some(i=>i!==""))throw new Error("safeScript only allows empty string expressions to enable inline comments.");return AO(t,e.length),c0(t.join(""))}function cI(t){return c0(t.map(Ow).join(""))}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(t,e){const i=Bg(e);i!==void 0&&(t.href=i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fI(t,e){const i=Bg(e);i!==void 0&&(t.href=i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gI(t,e){t.href=Bc(e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _I(t,e){const i=Bg(e);i!==void 0&&(t.formAction=i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mI(t,e){t.src=Bc(e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pI(t,e){const i=Bg(e);i!==void 0&&(t.action=i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yI(t,e){t.src=Bc(e).toString()}function vI(t,e){t.srcdoc=d0(e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xI(t,e){const i=Bg(e);i!==void 0&&(t.formAction=i)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bI(t,e){t.data=Bc(e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(t){return SI("script",t)}function SI(t,e=document){var i;const n=(i=e.querySelector)===null||i===void 0?void 0:i.call(e,`${t}[nonce]`);return n==null?"":n.nonce||n.getAttribute("nonce")||""}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AI(t){const e=EI(t.ownerDocument);e&&t.setAttribute("nonce",e)}function TI(t,e,i){t.src=Bc(e),AI(t)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pw(t,e){LI(t)&&wI(t),t.innerHTML=d0(e)}function wI(t){let e="";const i=t.tagName;if(/^(script|style)$/i.test(i))throw e=i.toLowerCase()==="script"?"Use setScriptTextContent with a SafeScript.":"Use setStyleTextContent with a SafeStyleSheet.",new Error(e)}function LI(t){return t.nodeType===1}function CI(t,e,i){if(t.namespaceURI!=="http://www.w3.org/1999/xhtml")throw new Error(`Cannot set attribute '${e}' on '${t.tagName}'.Element is not in the HTML namespace`);switch(e=e.toLowerCase(),`${t.tagName} ${e}`){case"A href":return void Iw(t,i);case"AREA href":return void fI(t,i);case"BASE href":return void gI(t,i);case"BUTTON formaction":return void _I(t,i);case"EMBED src":return void mI(t,i);case"FORM action":return void pI(t,i);case"IFRAME src":return void yI(t,i);case"IFRAME srcdoc":return void vI(t,i);case"IFRAME sandbox":throw new Error("Can't set 'sandbox' on iframe tags. Use setIframeSrcWithIntent or setIframeSrcdocWithIntent instead");case"INPUT formaction":return void xI(t,i);case"LINK href":throw new Error("Can't set 'href' attribute on link tags. Use setLinkHrefAndRel instead");case"LINK rel":throw new Error("Can't set 'rel' attribute on link tags. Use setLinkHrefAndRel instead");case"OBJECT data":return void bI(t,i);case"SCRIPT src":return void TI(t,i);default:if(/^on./.test(e))throw new Error(`Attribute "${e}" looks like an event handler attribute. Please use a safe alternative like addEventListener instead.`);t.setAttribute(e,i)}}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MI(t,e){return new Worker(Bc(t),e)}/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mu(t){!xO&&console.warn(Lw()+" "+t)}function NI(t,e){e.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(i.prototype,n)||Object.create(null))})})}var Ci=()=>{},Dm=()=>!1,f0=()=>!0,km=()=>null,ll=t=>t;function zw(t,e,i){const n=t.getObjectList(e.isNode);for(let s=0;s<e._indexes.length;++s){const r=e._indexes[s];i(n.get(r),s,e)}}function Dw(t,e,i){const n=new Array(e.size),s=t.getObjectList(e.isNode);for(let r=0;r<e._indexes.length;++r){const a=e._indexes[r],u=s.get(a);n[r]=i(u,r,e)}return n}function kw(t,e,i){i=i||f0;const n=e.isNode,s=t.acquireIndexList(n),r=t.getObjectList(n),a=t.getListFactory(n);for(let u=0;u<e._indexes.length;++u){const h=e._indexes[u],c=r.get(h);c&&i(c,u,e)&&s.push(h)}return a(s.sliceAndReset())}function Fw(t,e,i){const n=t.getObjectList(e.isNode);for(let s=0;s<e._indexes.length;++s){const r=e._indexes[s];if(!i(n.get(r),s,e))return!1}return!0}function Bw(t,e,i){const n=t.getObjectList(e.isNode);for(let s=0;s<e._indexes.length;++s){const r=e._indexes[s];if(i(n.get(r),s,e))return!0}return!1}function Uw(t,e,i){const n=t.getObjectList(e.isNode);for(let s=0;s<e._indexes.length;++s){const r=e._indexes[s],a=n.get(r);if(i(a,s,e))return a}}function Gw(t,e,i,n){const s=t.getListFactory(e.isNode);if(!i)return{valid:e,invalid:s()};const r=t.acquireIndexList(e.isNode),a=t.acquireIndexList(e.isNode),u=t.getObjectList(e.isNode);for(let h=0;h<e._indexes.length;h++){const c=e._indexes[h],g=u.get(c);g!==void 0&&(i(g,n)?r:a).pushUnchecked(c)}return{valid:s(r.sliceAndReset()),invalid:s(a.sliceAndReset())}}function Hw(t,e,i,n){const s=t.getObjectList(e.isNode);let r=n;for(let a=0;a<e._indexes.length;++a){const u=e._indexes[a];r=i(r,s.get(u),a)}return r}function Vw(t,e){const i=e.isNode,n=t.topology.getDeduper(i),s=t.acquireIndexList(i),r=t.getListFactory(i);for(let a=0;a<e._indexes.length;a++){const u=e._indexes[a];n.get(u)===0&&(n.set(u,1),s.push(u))}return r(s.sliceAndReset())}function Yw(t,e,i){const n=e.isNode,s=i.topology.getDeduper(n),r=i.acquireIndexList(n),a=i.getListFactory(n);for(let u=0;u<e._indexes.length;u++){const h=e._indexes[u];s.set(h,1)}for(let u=0;u<t._indexes.length;u++){const h=t._indexes[u];s.get(h)===0&&r.push(h)}return a(r.sliceAndReset())}function Xw(t,e){const i=e.isNode,n=t.storage.fetch(i),s=n.getFlexArray("excluded"),r=n.getMaxIndex(),a=t.topology.getDeduper(i),u=t.acquireIndexList(i),h=t.getListFactory(i);for(let c=0;c<e._indexes.length;c++)a.set(e._indexes[c],1);for(let c=1;c<=r;++c)a.get(c)===0&&s.get(c)===0&&u.push(c);return h(u.sliceAndReset())}function Zw(t,e,i){const n=t.getListFactory(e.isNode),s=new Uint32Array(e._indexes.length+i._indexes.length);return s.set(e._indexes),s.set(i._indexes,e._indexes.length),n(s)}function Ww(t,e){return t.getObjectList(e.isNode).getMultiple(e._indexes)}function Ep(t,e){const i=t.getStorage(e.isNode);if(e.isList){const n=new Array(e.size);for(let s=0;s<e._indexes.length;++s)n[s]=i.getId(e._indexes[s]);return n}return i.getId(e._index)}function qw(t,e){return t.topology.getExtremity(!0,e)}function Qw(t,e){return t.topology.getExtremity(!1,e)}function Kw(t,e,i){return t.getObjectList(e.isNode).get(e._indexes[i])}function jw(t,e,i){const n=t.getListFactory(e.isNode),s=t.getObjectList(e.isNode),r=e._indexes.slice();return r.sort((a,u)=>{const h=s.get(a),c=s.get(u);return i(h,c)}),n(r)}var RI=[];function Jw(t){typeof t=="object"&&t!==null||(t={});const e=typeof t.data=="function"?t.data:ll;return{attributes:Array.isArray(t.attributes)?t.attributes:t.attributes||RI,data:e}}function Sp(t,e){for(const i of t){const n=e;Object.keys(n).forEach(s=>{const r=n[s];i.prototype[s]=function(a,u){return mu(`Deprecated method "${s}"; please use "${r}" instead.`),this[r](a,u)}})}}function TS(t){const e=t.getFlexArray("removed"),i=t.getFlexArray("excluded"),n=t.getFlexArray("virtual");return{all:s=>e.get(s)===0,visible:s=>i.get(s)===0,excluded:s=>i.get(s)===1,raw:s=>n.get(s)===0&&e.get(s)===0,_all:s=>!0}}function wS(t,e,i){return{all:R_(i.all,t,e),visible:R_(i.visible,t,e),raw:R_(i.raw,t,e),_all:R_(i._all,t,e)}}function R_(t,e,i){let n=null;return{getList(){if(!n){const s=e(),r=i();r.reset();for(let a=1;a<=s;++a)t(a)&&r.push(a);n=r.sliceAndReset()}return n},invalidList(){n=null}}}function OI(t){if(t===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof t!="string"&&(typeof t!="number"||!isFinite(t)))throw new Error(`${t} is not a valid id, expected string or number`);return t}var LS=new Uint32Array(1),vh=class{constructor(t,e){this.size=1,this.isNode=!1,this.isList=!1,this._index=t,this._ogma=e}get _indexes(){return LS[0]=this._index,LS}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,i){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,i)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]}isInView(t){return this._ogma.modules.locate.isElementInView(this,t)}hasParallelEdges(){return this._ogma.modules.graph.hasParallelEdges(this)}getParallelEdges(t){return this._ogma.modules.graph.getParallelEdges(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:t,edges:e}=this.fastGetAdjacentElements();return{nodes:t.dedupe(),edges:e.filter(i=>i!==this).dedupe()}}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this._ogma.modules.graph.edgeList(new Uint32Array([this._index]))}getId(){return Ep(this._ogma.modules.graph,this)}getSource(){return qw(this._ogma.modules.graph,this)}getTarget(){return Qw(this._ogma.modules.graph,this)}getExtremities(){return this._ogma.modules.graph.nodeList(new Uint32Array([this.getSource()._index,this.getTarget()._index]))}setSource(t){this._ogma.modules.graph.setSource(this,t)}setTarget(t){this._ogma.modules.graph.setTarget(this,t)}slice(){return this.toList()}toJSON(t={}){const{attributes:e,data:i}=Jw(t);return{id:this.getId(),source:this.getSource().getId(),target:this.getTarget().getId(),attributes:this.getAttributes(e),data:i(ps(this.getData()))}}get(t){return t===0?this:void 0}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1,ignoreCurvature:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t,e)}setData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)[0]}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdge(this)}getSubEdges(){return this._ogma.modules.transformations.getSubEdges(this)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Sp([vh],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var Ed=class{constructor(t,e){this.isList=!0,this.isNode=!1,this._indexes=t,this._ogma=e}get size(){return this._indexes.length}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,i){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,i)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}getParallelEdges(t){return this._ogma.modules.graph.getParallelEdges(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:t,edges:e}=this.fastGetAdjacentElements();return{nodes:t.dedupe(),edges:e.subtract(this).dedupe()}}isVisible(){return this.isExcluded().map(t=>!t)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(t=>this._ogma.modules.transformations.isElementVirtual(t))}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this}toArray(){return Ww(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.edgeList(this._indexes.slice())}getId(){return Ep(this._ogma.modules.graph,this)}getSource(){return qw(this._ogma.modules.graph,this)}getTarget(){return Qw(this._ogma.modules.graph,this)}getExtremities(){return this.getSource().concat(this.getTarget())}get(t){return Kw(this._ogma.modules.graph,this,t)}forEach(t){zw(this._ogma.modules.graph,this,t)}map(t){return Dw(this._ogma.modules.graph,this,t)}find(t){return Uw(this._ogma.modules.graph,this,t)}some(t){return Bw(this._ogma.modules.graph,this,t)}every(t){return Fw(this._ogma.modules.graph,this,t)}[Symbol.iterator](){let t=-1;return{next:()=>({value:this.get(++t),done:t>=this.size})}}filter(t){return kw(this._ogma.modules.graph,this,t)}reduce(t,e){return Hw(this._ogma.modules.graph,this,t,e)}concat(t){return Zw(this._ogma.modules.graph,this,t)}dedupe(){return Vw(this._ogma.modules.graph,this)}subtract(t){return Yw(this,t,this._ogma.modules.graph)}slice(t,e){return this._ogma.modules.graph.edgeList(this._indexes.slice(t,e))}indexOf(t){return t instanceof vh?this._indexes.indexOf(t._index):-1}includes(t){return this.indexOf(t)!==-1}sort(t){return jw(this._ogma.modules.graph,this,t)}inverse(){return Xw(this._ogma.modules.graph,this)}toJSON(t={}){return this.map(e=>e.toJSON(t))}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1,ignoreCurvature:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t,e)}setData(t,e){if(arguments.length<2&&(e=t,t=null),typeof e!="function"&&!Ir(e))throw new Error(`invalid argument ${e}; expected array or function`);return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this}fillData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this.map(e=>this._ogma.modules.classes.hasSingleElementClass(t,e))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdges(this)}getSubEdges(){return this.map(this._ogma.modules.transformations.getSubEdges)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Sp([Ed],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var Dl="geo.latitude",kl="geo.longitude",CS="geo.prevLat",qy="geo.prevLng",$w=85.0511287798,II=6378137,Fm=1,PI='Map data &copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap contributors</a>',sd={latitudePath:"latitude",longitudePath:"longitude",maxZoomLevel:22,minZoomLevel:0,wrapCoordinates:!0,tileUrlTemplate:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",tileUrlSubdomains:"abc",attribution:null,attributionOptions:void 0,backgroundColor:"silver",opacity:1,duration:0,disableNodeDragging:!0,tileBuffer:1,sizeRatio:1,tiles:{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",subdomains:"abc",tms:!1,wms:!1},crs:void 0},zI={maxBoundsViscosity:1,worldCopyJump:!0,zoomControl:!1,attributionControl:!1},DI=(()=>{let t=0;return typeof requestAnimationFrame<"u"?requestAnimationFrame:function(e){const i=Date.now(),n=Math.min(16,Math.max(0,16-(i-t))),s=t=i+n;return setTimeout(()=>e(s),n)}})(),t2=50,kI=typeof cancelAnimationFrame<"u"?cancelAnimationFrame:function(t){return clearTimeout(t)};function g0(t,e){return DI(i=>{t.call(e,i)})}function e2(t){t&&kI(t)}var Qy,xd,_0,i2,FI={},n2=FI,Am={},s2={},Qv=t=>null;if(typeof global=="object"&&(Am=global),typeof window=="object"&&(s2=window),typeof lg=="object"&&typeof lg.require=="function"){const t=lg.require.bind(lg);Qv=e=>{try{return t(e)}catch{return null}}}else typeof Am.require=="function"&&(Qv=t=>{const e=Am.require;try{return e(t)}catch{return null}});function Oa(t,{throwOnError:e}={}){let i=null;if(!i&&t&&(i=n2[t]),!i&&t&&(i=Qv(t)),!i&&t&&(i=s2[t]),!i&&t&&(i=Am[t]),!i&&e){const n=[`unable to find module "${t}"; make sure one of these statements is true:`,`- Ogma.libraries['${t}'] is set to the right library`,`- require('${t}') returns the right library`,`- window['${t}'] is set to the right library`].join(`
`);throw new Error(n)}return i}var sl,r2=(sl=class{constructor(){this.method=null,this.url=null,this.status=0,this.readyState=0,this.headers={},this.responseText=null,this.response=null,sl.onCreate&&sl.onCreate(this)}open(e,i){this.method=e,this.url=i,sl.onSend&&sl.onSend(this)}respond(e,i,n){this.readyState=4,this.status=e,this.headers=i,this.responseText=n,this.response=n,this.onreadystatechange()}send(){this.readyState=4}},sl.onCreate=Ci,sl.onSend=Ci,sl),rl,o2=(rl=class{constructor(){this.onload=Ci,rl.onCreate&&rl.onCreate(this)}readAsDataURL(e){this._blob=e,rl.onRead&&rl.onRead(this)}load(e){this.result=typeof e=="function"?e(this._blob):e,this.onload&&this.onload()}},rl.onCreate=Ci,rl.onRead=Ci,rl);function bu(){return xd||{createElementNS:()=>null,createElement:()=>null,implementation:{createDocument(){throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')}}}}Qy=Oa("@xmldom/xmldom"),xd=xu?document:Qy?new Qy.DOMImplementation().createDocument():null,_0=typeof XMLHttpRequest<"u"?XMLHttpRequest:r2,i2=typeof FileReader<"u"?FileReader:o2;var BI=class{observe(){}unobserve(){}disconnect(){}},UI=typeof ResizeObserver>"u"?BI:ResizeObserver,a2=t=>new UI(t);function l2(t,e){if(document&&document.defaultView){let i=t.style[e];if((!i||i==="auto")&&bu().defaultView){const n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return i==="auto"?null:i?i.toString():null}return null}var u2=class{constructor(){this.onmousewheel=Ci,this.__dummy=!0,this.style={},this.clientWidth=0,this.clientHeight=0,this.childNodes=[],this.style={width:"0px",height:"0px",top:void 0,left:void 0,position:"",backgroundColor:void 0}}get offsetWidth(){return parseFloat(this.style.width||"0")}get offsetHeight(){return parseFloat(this.style.height||"0")}get firstChild(){return null}get parentNode(){return null}get classList(){return{length:0,value:"",add(){},remove(){},contains:t=>!1,item:null}}get innerHTML(){return""}set innerHTML(t){}appendChild(t){return this.childNodes.push(t),t}removeChild(){}addEventListener(){}removeEventListener(){}insertBefore(){}contains(t){return!1}};function Bm(){return new u2}var Do=yh?()=>window.devicePixelRatio:()=>1;function h2(t){const e=";base64,";let i,n,s;if(t.indexOf(e)===-1)return i=t.split(","),n=i[0].split(":")[1],s=decodeURIComponent(i[1]),bg(s,n);i=t.split(e),n=i[0].split(":")[1],s=window.atob(i[1]);const r=s.length,a=new Uint8Array(r);for(let u=0;u<r;++u)a[u]=s.charCodeAt(u);return bg([a],n)}var d2=class{constructor(t,e){this.data=t,this.type=e}};function bg(t,e){return typeof Blob<"u"?new Blob(t,{type:e}):new d2(t,e)}function GI(t){return typeof Blob<"u"&&t instanceof Blob||t instanceof d2}function HI(t,e,i="text/plain"){return e==="blob"?t:e==="dataURL"?h2(t):bg([t],i||"text/xml")}function Ah(t,e,i="text",n="text/plain"){if(!vp)return t;let s=null,r=null,a=null;window.Blob?(s=HI(t,i,n),r=URL.createObjectURL(s)):a="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(t);const u=document.createElement("a");return Iw(u,r||a||""),u.setAttribute("download",e),document.body.appendChild(u),u.click(),document.body.removeChild(u),r&&setTimeout(()=>window.URL.revokeObjectURL(r),0),t}function Um(t,e,i,n=Do()){if(bd(t,e+"px",i+"px"),t.tagName==="IMG"||t.tagName==="CANVAS"){const s=t;s.width=e*n,s.height=i*n}}function m0(t,e){Bl(e,(i,n)=>{i!==void 0&&t.setAttribute(n,i)})}var p0="http://www.w3.org/2000/svg",Kv="http://www.w3.org/2000/xmlns/",c2="http://www.w3.org/1999/xlink",VI=1;function un(t,e){const i=xd.createElementNS(p0,t);return i.style||(i.style={}),e&&m0(i,e),i}function jv(t){const e=xd.createElement("div");if(e.innerHTML=t.trim().replace(/\s+/g," "),!e.firstChild||e.firstChild.nodeType!==VI)throw new Error(`Failed to create element from: "${t}". Expected an HTML string`);return e.firstChild}function y0(t){if(xd)return xd.createTextNode(t)}function f2(t){return typeof Image>"u"?Promise.resolve(null):new Promise(e=>{const i=new Image;i.src=t,i.onload=()=>e(i),i.onerror=()=>e(null)})}function g2(t){if(t.indexOf("http://")===0||t.indexOf("https://")===0)return t;const e=window.location.origin;if(window.location.protocol==="blob:")return t;const i=window.location.pathname,n=i.lastIndexOf("/");return n===-1?e+"/"+t:e+i.substring(0,n)+"/"+t}function Uc(t){return new Promise((e,i)=>{const n=new _0;n.open("GET",g2(t),!0),n.onreadystatechange=function(){if(n.readyState===4){const s=n.status;s===200?e(n.responseText):i(s!==0?new Error(`cannot retrieve file at url "${t}"; the server responded with status code ${s}.`):new Error(`cannot send XMLHttpRequest to url "${t}"; if you're using the local file protocol this is most likely the cause.`))}},n.onerror=function(){i(new Error(`cannot retrieve file at url "${t}"; the XMLHttpRequest failed.`))},n.send()})}function _2(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Gm(t,e){t.style.cursor=e,t.style.cursor!==e&&(t.style.cursor=`-webkit-${e}`)}function m2(t){return new Promise((e,i)=>{const n=new _0;n.responseType="blob",n.open("GET",g2(t),!0),n.onreadystatechange=()=>{if(n.readyState===4){if(n.status===200)return e(n.response);i(n.status)}},n.onerror=s=>i(s),n.send()})}function p2(t){return m2(t).then(e=>new Promise((i,n)=>{const s=new i2;s.onerror=n,s.onload=()=>i(s.result),s.readAsDataURL(e)}))}function mc(t,e=!0){const i=e?"&#13;":`
`;return(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,i).replace(/[\r\n]/g,i)}var v0={0:"left",1:"middle",2:"right"};function y2(t){if(t.baseURI)return t.baseURI;const e=t.getElementsByTagName("base");return e.length>0?e[0].href:t.URL||(t.location?t.location.href:"")}function v2(t,e,i,n){return new Promise(s=>{let r=e;const a=Date.now(),u=(i-e)*Math.min(1,1/(n/16));(function h(){Date.now()-a<n?(r=Math.min(1,Math.max(0,r+u)),t.style.opacity=r.toString(),g0(h)):s()})()})}function bd(t,e,i){t.style.width=e,t.style.height=i}var x0=new hI().allowClassAttributes().allowDataAttributes().allowIdAttributes().allowStyleAttributes().build();function fh(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Ia(t,e,i){return Math.max(e,Math.min(i,t))}function Jv(t,e,i){return t+(e-t)*i}function _n(t,e,i){return t*(1-i)+e*i}function pc(t){if(!t.length)return-1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i){const s=t[i];s>e&&(e=s)}return e}function cu(t){if(!t.length)return 1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i){const s=t[i];s<e&&(e=s)}return e}var x2=(t,e)=>Math.log(t)/Math.log(e),Hm=t=>t<-Math.PI?t+2*Math.PI:t>Math.PI?t-2*Math.PI:t,YI=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let n=0;n<this._n&&n<32;n++){const s=e[n],r=t+s,a=Math.abs(t)<Math.abs(s)?t-(r-s):s-(r-t);a&&(e[i++]=a),t=r}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e,i,n,s=this._n,r=0;if(s>0){for(r=t[--s];s>0&&(e=r,i=t[--s],r=e+i,n=i-(r-e),!n););s>0&&(n<0&&t[s-1]<0||n>0&&t[s-1]>0)&&(i=2*n,e=r+i,i==e-r&&(r=e))}return r}};function*XI(t){for(const e of t)yield*e}function b2(t){return Array.from(XI(t))}var as=1e-6,sn=Math.PI,Na=sn/2,MS=sn/4,ul=2*sn,au=180/sn,aa=sn/180,Os=Math.abs,ZI=Math.atan,Cc=Math.atan2,ms=Math.cos,os=Math.sin,WI=Math.sign||function(t){return t>0?1:t<0?-1:0},Ug=Math.sqrt;function E2(t){return t>1?0:t<-1?sn:Math.acos(t)}function Mc(t){return t>1?Na:t<-1?-Na:Math.asin(t)}function Qf(){}function Vm(t,e){t&&RS.hasOwnProperty(t.type)&&RS[t.type](t,e)}var NS={Feature:function(t,e){Vm(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,s=i.length;++n<s;)Vm(i[n].geometry,e)}},RS={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){$v(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)$v(i[n],e,0)},Polygon:function(t,e){OS(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)OS(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,s=i.length;++n<s;)Vm(i[n],e)}};function $v(t,e,i){var n,s=-1,r=t.length-i;for(e.lineStart();++s<r;)n=t[s],e.point(n[0],n[1],n[2]);e.lineEnd()}function OS(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)$v(t[i],e,1);e.polygonEnd()}function qI(t,e){t&&NS.hasOwnProperty(t.type)?NS[t.type](t,e):Vm(t,e)}function tx(t){return[Cc(t[1],t[0]),Mc(t[2])]}function Nc(t){var e=t[0],i=t[1],n=ms(i);return[n*ms(e),n*os(e),os(i)]}function O_(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ym(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ky(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function I_(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ex(t){var e=Ug(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ix(t,e){function i(n,s){return n=t(n,s),e(n[0],n[1])}return t.invert&&e.invert&&(i.invert=function(n,s){return(n=e.invert(n,s))&&t.invert(n[0],n[1])}),i}function nx(t,e){return Os(t)>sn&&(t-=Math.round(t/ul)*ul),[t,e]}function QI(t,e,i){return(t%=ul)?e||i?ix(PS(t),zS(e,i)):PS(t):e||i?zS(e,i):nx}function IS(t){return function(e,i){return Os(e+=t)>sn&&(e-=Math.round(e/ul)*ul),[e,i]}}function PS(t){var e=IS(t);return e.invert=IS(-t),e}function zS(t,e){var i=ms(t),n=os(t),s=ms(e),r=os(e);function a(u,h){var c=ms(h),g=ms(u)*c,_=os(u)*c,m=os(h),v=m*i+g*n;return[Cc(_*s-v*r,g*i-m*n),Mc(v*s+_*r)]}return a.invert=function(u,h){var c=ms(h),g=ms(u)*c,_=os(u)*c,m=os(h),v=m*s-_*r;return[Cc(_*s+m*r,g*i+v*n),Mc(v*i-g*n)]},a}function KI(t,e,i,n,s,r){if(i){var a=ms(e),u=os(e),h=n*i;s==null?(s=e+n*ul,r=e-h/2):(s=DS(a,s),r=DS(a,r),(n>0?s<r:s>r)&&(s+=n*ul));for(var c,g=s;n>0?g>r:g<r;g-=h)c=tx([a,-u*ms(g),-u*os(g)]),t.point(c[0],c[1])}}function DS(t,e){(e=Nc(e))[0]-=t,ex(e);var i=E2(-e[1]);return((-e[2]<0?-i:i)+ul-as)%ul}function S2(){var t,e=[];return{point:function(i,n,s){t.push([i,n,s])},lineStart:function(){e.push(t=[])},lineEnd:Qf,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Tm(t,e){return Os(t[0]-e[0])<as&&Os(t[1]-e[1])<as}function P_(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function A2(t,e,i,n,s){var r,a,u=[],h=[];if(t.forEach(function(b){if(!((x=b.length-1)<=0)){var x,M,N=b[0],O=b[x];if(Tm(N,O)){if(!N[2]&&!O[2]){for(s.lineStart(),r=0;r<x;++r)s.point((N=b[r])[0],N[1]);return void s.lineEnd()}O[0]+=2*as}u.push(M=new P_(N,b,null,!0)),h.push(M.o=new P_(N,null,M,!1)),u.push(M=new P_(O,b,null,!1)),h.push(M.o=new P_(O,null,M,!0))}}),u.length){for(h.sort(e),kS(u),kS(h),r=0,a=h.length;r<a;++r)h[r].e=i=!i;for(var c,g,_=u[0];;){for(var m=_,v=!0;m.v;)if((m=m.n)===_)return;c=m.z,s.lineStart();do{if(m.v=m.o.v=!0,m.e){if(v)for(r=0,a=c.length;r<a;++r)s.point((g=c[r])[0],g[1]);else n(m.x,m.n.x,1,s);m=m.n}else{if(v)for(c=m.p.z,r=c.length-1;r>=0;--r)s.point((g=c[r])[0],g[1]);else n(m.x,m.p.x,-1,s);m=m.p}c=(m=m.o).z,v=!v}while(!m.v);s.lineEnd()}}}function kS(t){if(e=t.length){for(var e,i,n=0,s=t[0];++n<e;)s.n=i=t[n],i.p=s,s=i;s.n=i=t[0],i.p=s}}function jy(t){return Os(t[0])<=sn?t[0]:WI(t[0])*((Os(t[0])+sn)%ul-sn)}function jI(t,e){var i=jy(e),n=e[1],s=os(n),r=[os(i),-ms(i),0],a=0,u=0,h=new YI;s===1?n=Na+as:s===-1&&(n=-Na-as);for(var c=0,g=t.length;c<g;++c)if(m=(_=t[c]).length)for(var _,m,v=_[m-1],b=jy(v),x=v[1]/2+MS,M=os(x),N=ms(x),O=0;O<m;++O,b=P,M=U,N=V,v=R){var R=_[O],P=jy(R),F=R[1]/2+MS,U=os(F),V=ms(F),Y=P-b,K=Y>=0?1:-1,tt=K*Y,j=tt>sn,lt=M*U;if(h.add(Cc(lt*K*os(tt),N*V+lt*ms(tt))),a+=j?Y+K*ul:Y,j^b>=i^P>=i){var pt=Ym(Nc(v),Nc(R));ex(pt);var ft=Ym(r,pt);ex(ft);var ht=(j^Y>=0?-1:1)*Mc(ft[2]);(n>ht||n===ht&&(pt[0]||pt[1]))&&(u+=j^Y>=0?1:-1)}}return(a<-1e-6||a<as&&h<-1e-12)^1&u}function T2(t,e,i,n){return function(s){var r,a,u,h=e(s),c=S2(),g=e(c),_=!1,m={point:v,lineStart:x,lineEnd:M,polygonStart:function(){m.point=N,m.lineStart=O,m.lineEnd=R,a=[],r=[]},polygonEnd:function(){m.point=v,m.lineStart=x,m.lineEnd=M,a=b2(a);var P=jI(r,n);a.length?(_||(s.polygonStart(),_=!0),A2(a,$I,P,i,s)):P&&(_||(s.polygonStart(),_=!0),s.lineStart(),i(null,null,1,s),s.lineEnd()),_&&(s.polygonEnd(),_=!1),a=r=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function v(P,F){t(P,F)&&s.point(P,F)}function b(P,F){h.point(P,F)}function x(){m.point=b,h.lineStart()}function M(){m.point=v,h.lineEnd()}function N(P,F){u.push([P,F]),g.point(P,F)}function O(){g.lineStart(),u=[]}function R(){N(u[0][0],u[0][1]),g.lineEnd();var P,F,U,V,Y=g.clean(),K=c.result(),tt=K.length;if(u.pop(),r.push(u),u=null,tt)if(1&Y){if((F=(U=K[0]).length-1)>0){for(_||(s.polygonStart(),_=!0),s.lineStart(),P=0;P<F;++P)s.point((V=U[P])[0],V[1]);s.lineEnd()}}else tt>1&&2&Y&&K.push(K.pop().concat(K.shift())),a.push(K.filter(JI))}return m}}function JI(t){return t.length>1}function $I(t,e){return((t=t.x)[0]<0?t[1]-Na-as:Na-t[1])-((e=e.x)[0]<0?e[1]-Na-as:Na-e[1])}nx.invert=nx;var FS=T2(function(){return!0},tP,iP,[-sn,-Na]);function tP(t){var e,i=NaN,n=NaN,s=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,a){var u=r>0?sn:-sn,h=Os(r-i);Os(h-sn)<as?(t.point(i,n=(n+a)/2>0?Na:-Na),t.point(s,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(r,n),e=0):s!==u&&h>=sn&&(Os(i-s)<as&&(i-=s*as),Os(r-u)<as&&(r-=u*as),n=eP(i,n,r,a),t.point(s,n),t.lineEnd(),t.lineStart(),t.point(u,n),e=0),t.point(i=r,n=a),s=u},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function eP(t,e,i,n){var s,r,a=os(t-i);return Os(a)>as?ZI((os(e)*(r=ms(n))*os(i)-os(n)*(s=ms(e))*os(t))/(s*r*a)):(e+n)/2}function iP(t,e,i,n){var s;if(t==null)s=i*Na,n.point(-sn,s),n.point(0,s),n.point(sn,s),n.point(sn,0),n.point(sn,-s),n.point(0,-s),n.point(-sn,-s),n.point(-sn,0),n.point(-sn,s);else if(Os(t[0]-e[0])>as){var r=t[0]<e[0]?sn:-sn;s=i*r/2,n.point(-r,s),n.point(0,s),n.point(r,s)}else n.point(e[0],e[1])}function nP(t){var e=ms(t),i=2*aa,n=e>0,s=Os(e)>as;function r(h,c){return ms(h)*ms(c)>e}function a(h,c,g){var _=[1,0,0],m=Ym(Nc(h),Nc(c)),v=O_(m,m),b=m[0],x=v-b*b;if(!x)return!g&&h;var M=e*v/x,N=-e*b/x,O=Ym(_,m),R=I_(_,M);Ky(R,I_(m,N));var P=O,F=O_(R,P),U=O_(P,P),V=F*F-U*(O_(R,R)-1);if(!(V<0)){var Y=Ug(V),K=I_(P,(-F-Y)/U);if(Ky(K,R),K=tx(K),!g)return K;var tt,j=h[0],lt=c[0],pt=h[1],ft=c[1];lt<j&&(tt=j,j=lt,lt=tt);var ht=lt-j,W=Os(ht-sn)<as;if(!W&&ft<pt&&(tt=pt,pt=ft,ft=tt),W||ht<as?W?pt+ft>0^K[1]<(Os(K[0]-j)<as?pt:ft):pt<=K[1]&&K[1]<=ft:ht>sn^(j<=K[0]&&K[0]<=lt)){var st=I_(P,(-F+Y)/U);return Ky(st,R),[K,tx(st)]}}}function u(h,c){var g=n?t:sn-t,_=0;return h<-g?_|=1:h>g&&(_|=2),c<-g?_|=4:c>g&&(_|=8),_}return T2(r,function(c){var g,_,m,v,b;return{lineStart:function(){v=m=!1,b=1},point:function(x,M){var N,O=[x,M],R=r(x,M),P=n?R?0:u(x,M):R?u(x+(x<0?sn:-sn),M):0;if(!g&&(v=m=R)&&c.lineStart(),R!==m&&(!(N=a(g,O))||Tm(g,N)||Tm(O,N))&&(O[2]=1),R!==m)b=0,R?(c.lineStart(),N=a(O,g),c.point(N[0],N[1])):(N=a(g,O),c.point(N[0],N[1],2),c.lineEnd()),g=N;else if(s&&g&&n^R){var F;P&_||!(F=a(O,g,!0))||(b=0,n?(c.lineStart(),c.point(F[0][0],F[0][1]),c.point(F[1][0],F[1][1]),c.lineEnd()):(c.point(F[1][0],F[1][1]),c.lineEnd(),c.lineStart(),c.point(F[0][0],F[0][1],3)))}!R||g&&Tm(g,O)||c.point(O[0],O[1]),g=O,m=R,_=P},lineEnd:function(){m&&c.lineEnd(),g=null},clean:function(){return b|(v&&m)<<1}}},function(c,g,_,m){KI(m,t,i,_,c,g)},n?[0,-t]:[-sn,t-sn])}function sP(t,e,i,n,s,r){var a,u=t[0],h=t[1],c=0,g=1,_=e[0]-u,m=e[1]-h;if(a=i-u,_||!(a>0)){if(a/=_,_<0){if(a<c)return;a<g&&(g=a)}else if(_>0){if(a>g)return;a>c&&(c=a)}if(a=s-u,_||!(a<0)){if(a/=_,_<0){if(a>g)return;a>c&&(c=a)}else if(_>0){if(a<c)return;a<g&&(g=a)}if(a=n-h,m||!(a>0)){if(a/=m,m<0){if(a<c)return;a<g&&(g=a)}else if(m>0){if(a>g)return;a>c&&(c=a)}if(a=r-h,m||!(a<0)){if(a/=m,m<0){if(a>g)return;a>c&&(c=a)}else if(m>0){if(a<c)return;a<g&&(g=a)}return c>0&&(t[0]=u+c*_,t[1]=h+c*m),g<1&&(e[0]=u+g*_,e[1]=h+g*m),!0}}}}}var z_=1e9,D_=-1e9;function rP(t,e,i,n){function s(c,g){return t<=c&&c<=i&&e<=g&&g<=n}function r(c,g,_,m){var v=0,b=0;if(c==null||(v=a(c,_))!==(b=a(g,_))||h(c,g)<0^_>0)do m.point(v===0||v===3?t:i,v>1?n:e);while((v=(v+_+4)%4)!==b);else m.point(g[0],g[1])}function a(c,g){return Os(c[0]-t)<as?g>0?0:3:Os(c[0]-i)<as?g>0?2:1:Os(c[1]-e)<as?g>0?1:0:g>0?3:2}function u(c,g){return h(c.x,g.x)}function h(c,g){var _=a(c,1),m=a(g,1);return _!==m?_-m:_===0?g[1]-c[1]:_===1?c[0]-g[0]:_===2?c[1]-g[1]:g[0]-c[0]}return function(c){var g,_,m,v,b,x,M,N,O,R,P,F=c,U=S2(),V={point:Y,lineStart:function(){V.point=K,_&&_.push(m=[]),R=!0,O=!1,M=N=NaN},lineEnd:function(){g&&(K(v,b),x&&O&&U.rejoin(),g.push(U.result())),V.point=Y,O&&F.lineEnd()},polygonStart:function(){F=U,g=[],_=[],P=!0},polygonEnd:function(){var j=function(){for(var ht=0,W=0,st=_.length;W<st;++W)for(var _t,Vt,X=_[W],et=1,Dt=X.length,Mt=X[0],At=Mt[0],Xt=Mt[1];et<Dt;++et)_t=At,Vt=Xt,At=(Mt=X[et])[0],Xt=Mt[1],Vt<=n?Xt>n&&(At-_t)*(n-Vt)>(Xt-Vt)*(t-_t)&&++ht:Xt<=n&&(At-_t)*(n-Vt)<(Xt-Vt)*(t-_t)&&--ht;return ht}(),lt=P&&j,pt=(g=b2(g)).length;(lt||pt)&&(c.polygonStart(),lt&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),pt&&A2(g,u,j,r,c),c.polygonEnd()),F=c,g=_=m=null}};function Y(tt,j){s(tt,j)&&F.point(tt,j)}function K(tt,j){var lt=s(tt,j);if(_&&m.push([tt,j]),R)v=tt,b=j,x=lt,R=!1,lt&&(F.lineStart(),F.point(tt,j));else if(lt&&O)F.point(tt,j);else{var pt=[M=Math.max(D_,Math.min(z_,M)),N=Math.max(D_,Math.min(z_,N))],ft=[tt=Math.max(D_,Math.min(z_,tt)),j=Math.max(D_,Math.min(z_,j))];sP(pt,ft,t,e,i,n)?(O||(F.lineStart(),F.point(pt[0],pt[1])),F.point(ft[0],ft[1]),lt||F.lineEnd(),P=!1):lt&&(F.lineStart(),F.point(tt,j),P=!1)}M=tt,N=j,O=lt}return V}}var BS=t=>t,Rc=1/0,Xm=Rc,Eg=-Rc,Zm=Eg,oP={point:aP,lineStart:Qf,lineEnd:Qf,polygonStart:Qf,polygonEnd:Qf,result:function(){var t=[[Rc,Xm],[Eg,Zm]];return Eg=Zm=-(Xm=Rc=1/0),t}};function aP(t,e){t<Rc&&(Rc=t),t>Eg&&(Eg=t),e<Xm&&(Xm=e),e>Zm&&(Zm=e)}var US=oP;function b0(t){return function(e){var i=new sx;for(var n in t)i[n]=t[n];return i.stream=e,i}}function sx(){}function E0(t,e,i){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),qI(i,t.stream(US)),e(US.result()),n!=null&&t.clipExtent(n),t}function w2(t,e,i){return E0(t,function(n){var s=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=Math.min(s/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),u=+e[0][0]+(s-a*(n[1][0]+n[0][0]))/2,h=+e[0][1]+(r-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([u,h])},i)}function lP(t,e,i){return w2(t,[[0,0],e],i)}function uP(t,e,i){return E0(t,function(n){var s=+e,r=s/(n[1][0]-n[0][0]),a=(s-r*(n[1][0]+n[0][0]))/2,u=-r*n[0][1];t.scale(150*r).translate([a,u])},i)}function hP(t,e,i){return E0(t,function(n){var s=+e,r=s/(n[1][1]-n[0][1]),a=-r*n[0][0],u=(s-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([a,u])},i)}sx.prototype={constructor:sx,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var GS=16,dP=ms(30*aa);function HS(t,e){return+e?fP(t,e):cP(t)}function cP(t){return b0({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function fP(t,e){function i(n,s,r,a,u,h,c,g,_,m,v,b,x,M){var N=c-n,O=g-s,R=N*N+O*O;if(R>4*e&&x--){var P=a+m,F=u+v,U=h+b,V=Ug(P*P+F*F+U*U),Y=Mc(U/=V),K=Os(Os(U)-1)<as||Os(r-_)<as?(r+_)/2:Cc(F,P),tt=t(K,Y),j=tt[0],lt=tt[1],pt=j-n,ft=lt-s,ht=O*pt-N*ft;(ht*ht/R>e||Os((N*pt+O*ft)/R-.5)>.3||a*m+u*v+h*b<dP)&&(i(n,s,r,a,u,h,j,lt,K,P/=V,F/=V,U,x,M),M.point(j,lt),i(j,lt,K,P,F,U,c,g,_,m,v,b,x,M))}}return function(n){var s,r,a,u,h,c,g,_,m,v,b,x,M={point:N,lineStart:O,lineEnd:P,polygonStart:function(){n.polygonStart(),M.lineStart=F},polygonEnd:function(){n.polygonEnd(),M.lineStart=O}};function N(Y,K){Y=t(Y,K),n.point(Y[0],Y[1])}function O(){_=NaN,M.point=R,n.lineStart()}function R(Y,K){var tt=Nc([Y,K]),j=t(Y,K);i(_,m,g,v,b,x,_=j[0],m=j[1],g=Y,v=tt[0],b=tt[1],x=tt[2],GS,n),n.point(_,m)}function P(){M.point=N,n.lineEnd()}function F(){O(),M.point=U,M.lineEnd=V}function U(Y,K){R(s=Y,K),r=_,a=m,u=v,h=b,c=x,M.point=R}function V(){i(_,m,g,v,b,x,r,a,s,u,h,c,GS,n),M.lineEnd=P,P()}return M}}var gP=b0({point:function(t,e){this.stream.point(t*aa,e*aa)}});function _P(t){return b0({point:function(e,i){var n=t(e,i);return this.stream.point(n[0],n[1])}})}function mP(t,e,i,n,s){function r(a,u){return[e+t*(a*=n),i-t*(u*=s)]}return r.invert=function(a,u){return[(a-e)/t*n,(i-u)/t*s]},r}function VS(t,e,i,n,s,r){if(!r)return mP(t,e,i,n,s);var a=ms(r),u=os(r),h=a*t,c=u*t,g=a/t,_=u/t,m=(u*i-a*e)/t,v=(u*e+a*i)/t;function b(x,M){return[h*(x*=n)-c*(M*=s)+e,i-c*x-h*M]}return b.invert=function(x,M){return[n*(g*x-_*M+m),s*(v-_*x-g*M)]},b}function pP(t){return yP(function(){return t})()}function yP(t){var e,i,n,s,r,a,u,h,c,g,_=150,m=480,v=250,b=0,x=0,M=0,N=0,O=0,R=0,P=1,F=1,U=null,V=FS,Y=null,K=BS,tt=.5;function j(ht){return h(ht[0]*aa,ht[1]*aa)}function lt(ht){return(ht=h.invert(ht[0],ht[1]))&&[ht[0]*au,ht[1]*au]}function pt(){var ht=VS(_,0,0,P,F,R).apply(null,e(b,x)),W=VS(_,m-ht[0],v-ht[1],P,F,R);return i=QI(M,N,O),u=ix(e,W),h=ix(i,u),a=HS(u,tt),ft()}function ft(){return c=g=null,j}return j.stream=function(ht){return c&&g===ht?c:c=gP(_P(i)(V(a(K(g=ht)))))},j.preclip=function(ht){return arguments.length?(V=ht,U=void 0,ft()):V},j.postclip=function(ht){return arguments.length?(K=ht,Y=n=s=r=null,ft()):K},j.clipAngle=function(ht){return arguments.length?(V=+ht?nP(U=ht*aa):(U=null,FS),ft()):U*au},j.clipExtent=function(ht){return arguments.length?(K=ht==null?(Y=n=s=r=null,BS):rP(Y=+ht[0][0],n=+ht[0][1],s=+ht[1][0],r=+ht[1][1]),ft()):Y==null?null:[[Y,n],[s,r]]},j.scale=function(ht){return arguments.length?(_=+ht,pt()):_},j.translate=function(ht){return arguments.length?(m=+ht[0],v=+ht[1],pt()):[m,v]},j.center=function(ht){return arguments.length?(b=ht[0]%360*aa,x=ht[1]%360*aa,pt()):[b*au,x*au]},j.rotate=function(ht){return arguments.length?(M=ht[0]%360*aa,N=ht[1]%360*aa,O=ht.length>2?ht[2]%360*aa:0,pt()):[M*au,N*au,O*au]},j.angle=function(ht){return arguments.length?(R=ht%360*aa,pt()):R*au},j.reflectX=function(ht){return arguments.length?(P=ht?-1:1,pt()):P<0},j.reflectY=function(ht){return arguments.length?(F=ht?-1:1,pt()):F<0},j.precision=function(ht){return arguments.length?(a=HS(u,tt=ht*ht),ft()):Ug(tt)},j.fitExtent=function(ht,W){return w2(j,ht,W)},j.fitSize=function(ht,W){return lP(j,ht,W)},j.fitWidth=function(ht,W){return uP(j,ht,W)},j.fitHeight=function(ht,W){return hP(j,ht,W)},function(){return e=t.apply(this,arguments),j.invert=e.invert&&lt,pt()}}function vP(t){return function(e,i){var n=ms(e),s=ms(i),r=t(n*s);return r===1/0?[2,0]:[r*s*os(e),r*os(i)]}}function xP(t){return function(e,i){var n=Ug(e*e+i*i),s=t(n),r=os(s),a=ms(s);return[Cc(e*r,n*a),Mc(n&&i*r/n)]}}var L2=vP(function(t){return(t=E2(t))&&t/os(t)});function bP(){return pP(L2).scale(79.4188).clipAngle(179.999)}function YS(t,e){t&&e!==void 0&&isFinite(e)&&t.setOpacity&&t.setOpacity(e)}function XS(){return yh||typeof global<"u"&&!global.process}function Jy(t){return Math.log2(t)+Fm}function EP(t){return 2**(t-Fm)}function ZS(t){return t!=null&&!isNaN(t)}function C2(t,e){return N2(t,e,"longitude")}function M2(t,e){return N2(t,e,"latitude")}function N2(t,e,i){if(isNaN(e))throw new TypeError(`node ${t}: ${e} is not a valid ${i}`)}L2.invert=xP(function(t){return t});var SP=t=>Math.pow(2,Math.ceil(Math.log2(t)));function AP(t,e){return e==null&&t.url===sd.tiles.url?PI:null}function TP(t={},e){const{tileUrlSubdomains:i,tileUrlTemplate:n,attribution:s,attributionOptions:r,latitudePath:a,longitudePath:u,sizeRatio:h,tiles:c}=t;if(n!=null&&typeof n!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a URL string");if(i!=null&&typeof i!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a string");if(c!=null){if(!(Hs(c)||c instanceof e.Layer))throw new TypeError("Geo mode: tiles must be a object or L.Layer instance");const g=c;if(g.url!=null&&typeof g.url!="string")throw new TypeError("Geo mode: tiles.url must be a string");if(g.subdomains!=null&&typeof g.subdomains!="string")throw new TypeError("Geo mode: tiles.subdomains must be a string");if(g.tms&&typeof g.tms!="boolean")throw new TypeError("Geo mode: tiles.tms must be a boolean");if(g.wms&&typeof g.wms!="boolean")throw new TypeError("Geo mode: tiles.wms must be a boolean")}if(s!=null&&typeof s!="string")throw new TypeError("Geo mode: Map attribution must be a string");if(r!=null&&!Hs(r))throw new TypeError("Geo mode: attributionOptions must to be a BrandOptions object");if(a!=null&&typeof a!="string"&&!Array.isArray(a))throw new TypeError("Geo mode: Latitude path must be a valid property path: a string or an array of strings.");if(u!=null&&typeof u!="string"&&!Array.isArray(u))throw new TypeError("Geo mode: Longitude path must be a valid property path: a string or an array of strings.");if(h!=null&&(!isFinite(h)||h<=0))throw new TypeError("Geo mode: sizeRatio must be a positive number.")}function wP(t,e={}){if(e.tiles===void 0||e.tileUrlTemplate||e.tileUrlSubdomains){const i=sd.tiles;return{...e.tiles||{},...sd.tiles,url:e.tileUrlTemplate||i.url,subdomains:e.tileUrlSubdomains||i.subdomains}}return Hs(e.tiles)?{...t.tiles,...e.tiles}:e.tiles}function LP(t,e){return t.attribution!==e.attribution||t.tiles!==e.tiles}var CP=bu().createElement("div");function MP(t){const e=bu().createElement("div");e.className="ogma-geo-container",bd(e,"100%","100%");const i=t||CP;return i.insertBefore(e,i.firstChild),e}function NP(t){const e=[[1/0,1/0],[-1/0,-1/0]];return t.getGeoCoordinates().reduce((i,{latitude:n,longitude:s})=>{const[r,a]=i;return r[0]=Math.min(r[0],n),r[1]=Math.min(r[1],s),a[0]=Math.max(a[0],n),a[1]=Math.max(a[1],s),i},e)}function RP(t,e,i,n){const s=e._indexes;t.getNodeAttribute(Dl).setMultiple(s,i),t.getNodeAttribute(kl).setMultiple(s,n)}function OP(t,e,i){const{longitudePath:n,latitudePath:s,wrapCoordinates:r}=i,[a,u]=t.getAttributes(!0,[Dl,kl]),h=e._indexes,c=e.getId(),g=h.length,_=e.getData(s),m=e.getData(n);for(let v=0;v<g;v++){let b=m[v],x=_[v];const M=h[v],N=c[v];x!=null&&b!=null&&(C2(N,b),M2(N,x),r&&(b%=180,x=Ia(+x,-85.0511287798,$w)),u.set(M,b),a.set(M,x))}}function IP(t,{longitudePath:e,latitudePath:i,wrapCoordinates:n},s){const r=t.getData(e),a=t.getData(i);return r!=null&&a!=null&&(!(!n&&!s)||Math.abs(a)<=$w&&Math.abs(r)<=180)}function k_(t,e,i,n){PP(t,!0,e,i,n)}function PP(t,e,i,n,s){const r=t.getAttribute(e,n),a=t.getAttribute(e,s),u=i._indexes;a.setMultiple(u,r.getMultiple(u))}function zP(t){return t.reduce((e,{nodes:i,newValues:n})=>{if(!i)return e;const s=i.filter((r,a)=>n[a]!=null);return e?e.concat(s):s},null)}function DP(t,e){return t.getAttributes(["text.minVisibleSize","text.size","text.scale","radius"]).forEach(({text:i,radius:n},s)=>{e[t.get(s).getId()]={"text.minVisibleSize":i.minVisibleSize,"text.size":i.size,"text.scale":i.scale,minVisibleSize:i.minVisibleSize,size:Math.max(1,Number(n))}}),e}function WS(t,e){return t.getAttributes(["text.minVisibleSize","text.size","text.scale","minVisibleSize","width"]).forEach(({text:i,minVisibleSize:n,width:s},r)=>{e[t.get(r).getId()]={"text.minVisibleSize":i.minVisibleSize,"text.size":i.size,"text.scale":i.scale,minVisibleSize:n,size:Math.max(1,Number(s))}}),e}function kP(t,e,i){if(!e||!Object.keys(e).length)return Promise.resolve();const n=t.getId().filter(s=>e[s]).map(s=>{if(!e[s])return 0;const r=Number(e[s]["text.minVisibleSize"]),a=Number(e[s].minVisibleSize),u=Number(e[s]["text.size"]),h=Number(e[s]["text.scale"]),c=Number(e[s].size)*h*i;return c<=a||c<=r?0:u});return t.setAttribute("text.size",n)}function FP(t,e){const i=t.getId().map(n=>{const s=e[n]||{};return Number(s["text.size"])});return t.setAttribute("text.size",i)}var BP=t=>bP().rotate([-t.longitude,-t.latitude]).scale(II),qS=new Uint32Array(1),al=class{constructor(t,e){this.size=1,this.isNode=!0,this.isList=!1,this._index=t,this._ogma=e}get _indexes(){return qS[0]=this._index,qS}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,i){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,i)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this._ogma.modules.camera.graphToScreenCoordinates(this.getPosition())}isInScreen(){const t=this.getPositionOnScreen(),e=this._ogma.modules.camera;return t.x>=0&&t.x<=e.width&&t.y>=0&&t.y<=e.height}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}isInView(t){return this._ogma.modules.locate.isElementInView(this,t)}getAdjacentNodes(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)}getAdjacentEdges(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)}getAdjacentElements(t){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,t).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,t).dedupe()}}getDegree(t){return this._ogma.modules.graph.getDegree(this,t)[0]}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}getConnectedComponent(t){return this._ogma.modules.graph.getConnectedComponentByNode(this,t)[0]}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this._ogma.nodeList(new Uint32Array([+this._index]))}getId(){return Ep(this._ogma.modules.graph,this)}slice(){return this.toList()}toJSON(t={}){const{attributes:e,data:i}=Jw(t),n=this.getAttributes(e);return{id:this.getId(),attributes:n,data:i(ps(this.getData()))}}get(t){return t===0?this:void 0}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t)}setData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)[0]}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getGeoCoordinates(){const t=this._ogma.modules.graph,e=t.getNodeAttribute(Dl).get(this._index),i=t.getNodeAttribute(kl).get(this._index);return{latitude:ZS(e)?e:void 0,longitude:ZS(i)?i:void 0}}setGeoCoordinates(t){return this.toList().setGeoCoordinates([t]).then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNode(this)}getSubNodes(){return this._ogma.modules.transformations.getSubNodes(this)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};Sp([al],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var wu=class{constructor(t,e){this.isList=!0,this.isNode=!0,this._indexes=t,this._ogma=e}get size(){return this._indexes.length}setAttributes(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)}setAttribute(t,e,i){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,i)}getAttributes(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)}getAttribute(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)}resetAttributes(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this.getPosition().map(t=>this._ogma.modules.camera.graphToScreenCoordinates(t))}replaceOriginalAttributes(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)}getPreviousAttributes(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)}getPreviousAttribute(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)}getAdjacentNodes(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)}getAdjacentEdges(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)}getAdjacentElements(t){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,t).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,t).dedupe()}}getDegree(t){return this._ogma.modules.graph.getDegree(this,t)}getConnectedComponents(t){return this._ogma.modules.graph.getConnectedComponents(this,t)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}isVisible(){return this.isExcluded().map(t=>!t)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(t=>this._ogma.modules.transformations.isElementVirtual(t))}setExcluded(t){return this._ogma.modules.graph.setExcluded(this,t)}setVisible(t){return this.setExcluded(!t)}toList(){return this}toArray(){return Ww(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.nodeList(this._indexes.slice())}getId(){return Ep(this._ogma.modules.graph,this)}get(t){return Kw(this._ogma.modules.graph,this,t)}forEach(t){zw(this._ogma.modules.graph,this,t)}find(t){return Uw(this._ogma.modules.graph,this,t)}some(t){return Bw(this._ogma.modules.graph,this,t)}every(t){return Fw(this._ogma.modules.graph,this,t)}map(t){return Dw(this._ogma.modules.graph,this,t)}[Symbol.iterator](){let t=-1;return{next:()=>({value:this.get(++t),done:t>=this.size})}}filter(t){return kw(this._ogma.modules.graph,this,t)}reduce(t,e){return Hw(this._ogma.modules.graph,this,t,e)}concat(t){return Zw(this._ogma.modules.graph,this,t)}dedupe(){return Vw(this._ogma.modules.graph,this)}subtract(t){return Yw(this,t,this._ogma.modules.graph)}slice(t,e){return this._ogma.modules.graph.nodeList(this._indexes.slice(t,e))}indexOf(t){return t instanceof al?this._indexes.indexOf(t._index):-1}includes(t){return this.indexOf(t)!==-1}inverse(){return Xw(this._ogma.modules.graph,this)}sort(t){return jw(this._ogma.modules.graph,this,t)}toJSON(t={}){return this.map(e=>e.toJSON(t))}setSelected(t){this._ogma.modules.selection.setActive(this,t)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(t){return this._ogma.modules.locate.locateElements(this,t)}getBoundingBox({includeTexts:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,t,t)}setData(t,e){if(arguments.length<2&&(e=t,t=null),typeof e!="function"&&!Ir(e))throw new Error(`invalid argument ${e}; expected array or function`);return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this}fillData(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this}getData(t){return this._ogma.modules.data.getProperty(this,t||null)}addClass(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)}addClasses(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)}removeClass(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)}removeClasses(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)}hasClass(t){return this.map(e=>this._ogma.modules.classes.hasSingleElementClass(t,e))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getGeoCoordinates(){const t=this._ogma.modules.graph,e=new Array(this._indexes.length),i=t.getNodeAttribute(Dl).getMultiple(this._indexes),n=t.getNodeAttribute(kl).getMultiple(this._indexes);for(let s=0,r=this._indexes.length;s<r;s++)e[s]={latitude:i[s],longitude:n[s]};return e}setGeoCoordinates(t){const e=this._ogma.modules.geo,i=this.getId(),n=this._indexes,s=new Array(n.length),r=new Array(n.length);if(t===null&&(t=new Array(n.length).fill(null)),t.length!==n.length)throw new RangeError("You must provide coordinates for each node in the NodeList");for(let h=0,c=n.length;h<c;h++){let{latitude:g,longitude:_}=t[h]||{latitude:void 0,longitude:void 0};const m=i[h];g==null&&_==null?g=_=void 0:(M2(m,g),C2(m,_)),s[h]=g,r[h]=_}this.setData(e.latitudePath,s),this.setData(e.longitudePath,r);const{dom:a,graph:u}=this._ogma.modules;return RP(u,this,s,r),this._ogma.modules.geo.isEnabled()?a.afterNextFrame().then(()=>a.afterNextFrame()).then(()=>this):a.afterNextFrame().then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNodes(this)}getSubNodes(){return this.map(this._ogma.modules.transformations.getSubNodes)}pulse(t){return this._ogma.modules.pulses.pulse(this,t)}};function UP(t,e,i,n,s){return Gg(t,e,i,!0,[n],s)}function GP(t,e,i,n,s){return Gg(t,e,i,!1,[n],s)}function HP(t,e,i,n,s){return Gg(t,e,i,!0,n,s)}function VP(t,e,i,n,s){return Gg(t,e,i,!1,n,s)}async function Gg(t,e,i,n,s,r={}){Array.isArray(s)||s instanceof(n?wu:Ed)||(s=[s]);const{virtual:a=!1}=r;!a&&e.isRefreshing()&&await new Promise(b=>{i.once("idle",b)});const u={elementsToRemove:t.getElements(n,s)};t.fireEvent("requestElementsToDelete",u);let{elementsToRemove:h}=u;if(!h.size)return Promise.resolve();h=h.dedupe();const c=t.storage.fetch(n),g=c.getFlexArray("removed");if(h=h.filter(b=>g.get(b._index)===0),n){const b=h.getAdjacentEdges({filter:"all"});Gg(t,e,i,!1,b,r)}const _=h._indexes,m=t.getCacheLists(n),v={virtual:a,[n?"nodes":"edges"]:h};if(t.fireEvent(n?"beforeRemoveNodes":"beforeRemoveEdges",v),m.visible.invalidList(),m.all.invalidList(),m.raw.invalidList(),t.setExcluded(h,!0),g.setMultiple(_,1),!n)for(let b=0;b<_.length;++b)t.topology.removeFromAdjacencyList(_[b]);return c.removeElements(_),t.fireEvent(n?"removeNodes":"removeEdges",v),t.fireEvent(n?"afterRemoveNodes":"afterRemoveEdges",v),Promise.resolve()}Sp([wu],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var YP=class{addNodes(t,e){return this.modules.graph.addNodes(t,e)}addEdges(t,e){return this.modules.graph.addEdges(t,e)}addNode(t,e){return this.modules.graph.addNode(t,e)}addEdge(t,e){return this.modules.graph.addEdge(t,e)}removeNodes(t,e){return HP(this.modules.graph,this.modules.transformations,this.modules.events,t,e)}removeEdges(t,e){return VP(this.modules.graph,this.modules.transformations,this.modules.events,t,e)}removeNode(t,e){return UP(this.modules.graph,this.modules.transformations,this.modules.events,t,e)}removeEdge(t,e){return GP(this.modules.graph,this.modules.transformations,this.modules.events,t,e)}getNodes(t){return this.modules.graph.getNodes(t)}getEdges(t){return this.modules.graph.getEdges(t)}getNode(t){return this.modules.graph.getNode(t)}getEdge(t){return this.modules.graph.getEdge(t)}clearGraph(){this.modules.graph.clear()}setGraph(t,e){return this.modules.graph.clear(),this.addGraph(t,e)}addGraph(t,e){const i=this.modules.graph.getNodes().size===0,n=this.modules.graph.addGraph(t,e);return i?this.modules.locate.locateGraph({padding:30,ignoreZoomLimits:!0,duration:0}).then(()=>n):n}createNodeList(){return this.getNodes([])}createEdgeList(){return this.getEdges([])}getConnectedComponents(t={}){return this.modules.graph.getConnectedComponents(this.getNodes(t.filter),t)}getConnectedComponentByNode(t,e){const i=this.modules.graph.getNode(t);if(i===void 0)throw new Error(`getComponentByNode: cannot find node ${t}`);return this.modules.graph.getConnectedComponentByNode(i,e)[0]}},S0={};function R2(t,e,i,n,s,r){let a=0;for(let u=0;u<n;u++)for(let h=0;h<n;h++){const c=r[u],g=r[h];if(c!==g){const _=t[c][g]*s,m=1/(_*_);if(m){const v=e[c]-e[g],b=i[c]-i[g];a+=m*Math.pow(_-Math.sqrt(v*v+b*b),2)}}}return a}function O2(t,e,i,n,s,r,a){let u=0;if(s===-1)return 0;for(let h=0;h<n;h++)for(let c=0;c<n;c++){const g=a[h],_=a[c];if(g!==_&&(g===s||_===s)){const m=t[g][_]*r,v=1/(m*m);if(v){const b=e[g]-e[_],x=i[g]-i[_];u+=v*Math.pow(m-Math.sqrt(b*b+x*x),2)}}}return u}function rx(t,e,i,n,s,r,a,u){a=a||0;let h=0,c=0;for(let g=0;g<n;g++)for(let _=0;_<n;_++){const m=u[g],v=u[_];if(m!==v){const b=t[m][v]*r,x=1/(b*b);if(x){const M=e[m]-e[v],N=i[m]-i[v],O=x*Math.pow(b-Math.sqrt(M*M+N*N),2);h+=O,m!==s&&v!==s||(c+=O)}}}return(1-a)*h+a*c}function ox(t,e,i,n,s,r,a,u,h){a=a||0;const c=e,g=i;(s=s===void 0?-1:s)===-1&&(a=0);const _=e[s],m=i[s];for(let v=0;v<n;v++){const b=u[v],x=h(t[s][v]),M=a/(x*x);if(x===0)continue;let N=0,O=0,R=0;const P=e[b],F=i[b];for(let V=0;V<n;V++){const Y=u[V];if(Y!==b){const K=t[b][Y]*r,tt=1/(K*K),j=e[Y],lt=i[Y];if(tt!==0){const pt=P-j,ft=F-lt,ht=pt*pt+ft*ft,W=ht<1e-12?0:1/Math.sqrt(ht);O+=(1-a)*tt*(j+K*(P-j)*W),R+=(1-a)*tt*(lt+K*(F-lt)*W)}N+=tt}}const U=(1-a)*N+M;if(U!==0){const V=P-_,Y=F-m;let K=V*V+Y*Y;K=K<1e-12?0:1/Math.sqrt(K);const tt=x===0?0:M*(x*K);c[b]=(O+tt*e[b])/U,g[b]=(R+tt*i[b])/U}}return{x:c,y:g}}function XP(t,e,i,n,s,r,a,u){a=a||0;const h=e,c=i;let g;(s=s===void 0?-1:s)===-1&&(a=0);for(let _=0;_<n;_++){const m=u[_];let v=0,b=0,x=0;const M=e[m],N=i[m];for(let O=0;O<n;O++){const R=u[O];let P=0;if(R!==m){let F=0;const U=t[m][R]*r,V=1/(U*U);m!==s&&R!==s||(F=V);const Y=(1-a)*V+a*F;if(v+=Y,V!==0){const K=e[R],tt=i[R],j=M-K,lt=N-tt,pt=j*j+lt*lt;pt>1e-6&&(P=1/Math.sqrt(pt)),b+=Y*(K+U*(M-K)*P),x+=Y*(tt+U*(N-tt)*P)}}}g=v,g!==0&&(h[m]=b/g,c[m]=x/g)}return{x:h,y:c}}function Ap(t=(s,r)=>s-r,e=[],i={},n=s=>s){let s=e.length;function r(u){for(;;){const h=2*u+1,c=h+1;let g=u;if(h<s&&t(e[h],e[g])<0&&(g=h),c<s&&t(e[c],e[g])<0&&(g=c),g===u)return u;const _=e[g];e[g]=e[u],e[u]=_,i[n(e[g])]=g,i[n(_)]=u,u=g}}return{get keys(){return i},get size(){return s},heapify:r,pop(){if(s<=0)return;if(s===1)return s--,e[0];const u=e[0];return e[0]=e[s-1],s--,r(0),u},decreaseKey(u,h){for(h!==void 0&&(e[u]=h,i[n(h)]=u);u>0;){const c=u-1>>1;if(!(t(e[c],e[u])>0))break;{const g=e[u];e[u]=e[c],e[c]=g,i[n(e[u])]=u,i[n(g)]=c,u=c}}return u},min:()=>e[0],remove(u){return this.decreaseKey(u,Number.NEGATIVE_INFINITY),this.pop()},push(u){s++;let h=s-1;for(e[h]=u;h>0;){const c=h-1>>1;if(!(t(e[c],e[h])>0))break;{const g=e[h];e[h]=e[c],e[c]=g,i[n(e[h])]=h,i[n(g)]=c,h=c}}return h},empty:()=>s<=0,toArray:()=>e.slice(0,s)}}function A0({sources:t,targets:e,weights:i,source:n,target:s,undirected:r=!1,indexes:a,N:u}){if(!(u=a?a.length:u)||!isFinite(u)||u===0)throw new Error("Invalid number of nodes "+u);const h=new Float32Array(u),c=new Int32Array(u),g={},_=Number.POSITIVE_INFINITY;if(!i){i=[];for(let x=0;x<u;x++)i[x]=1}if(!a){a=new Uint32Array(u);for(let x=0;x<u;x++)a[x]=x+1}for(let x=0;x<u;x++)h[x]=_,c[x]=-1,g[a[x]]=x;h[g[n]]=0;let m=!1;for(let x=1;x<=u;x++){for(let M=0;M<i.length;M++){const N=t[M],O=e[M],R=g[N],P=g[O];if(R!==void 0&&P!==void 0){const F=i[M];let U=h[R]+F;h[R]!==_&&U<h[P]&&(h[P]=U,c[P]=N,m=!0),r&&(U=h[P]+F,h[P]!==_&&U<h[R]&&(h[R]=U,c[R]=O,m=!0))}}if(!m)break}if(m)for(let x=0;x<i.length;x++){const M=t[x],N=e[x],O=g[M],R=g[N];if(O!==void 0&&R!==void 0){const P=i[x];if(h[O]+P<h[R])return null}}let v=null,b=null;if(s!==void 0){const x=g[s];if(x!==void 0&&h[x]!==_){v=[];for(let M=s;M!==-1;M=c[g[M]])v.push(M);v=v.reverse(),b=h[x]}}return{distances:h,path:v,pathLength:b}}function T0(t,e,i,n,s,r,a){n=n||t.map((M,N)=>N+1);const u=n.length,h=new Float32Array(u),c=new Int32Array(u),g=new Uint32Array(u),_=Number.POSITIVE_INFINITY,m={};if(u===0)return{distances:h,path:null,pathLength:null};if(!s){s={};for(let M=0;M<u;M++)s[n[M]]=M}for(let M=0;M<u;M++)h[M]=_,c[M]=-1,g[M]=m[M]=M;const v=Ap((M,N)=>h[M]-h[N],g,m);for(h[s[e]]=0,v.decreaseKey(m[s[e]]);v.size!==0;){const M=v.pop(),N=h[M],O=t[M];if(N===_)break;for(let R=0,P=O.nodes.length;R<P;R++){const F=O.nodes[R],U=r?1:a?a(n[M],F):O.weights?O.weights[R]:1,V=s[F];if(V===void 0)continue;const Y=N+U;Y<h[V]&&(h[V]=Y,c[V]=M,v.decreaseKey(m[V]))}}let b=null,x=null;if(i!==void 0){const M=s[i];if(h[M]!==_){b=[];for(let N=M;N!==-1;N=c[N])b.push(n[N]);b.reverse(),x=h[i]}}return{distances:h,path:b,pathLength:x}}function ax({sources:t,targets:e,weights:i,indexes:n,adjacency:s,undirected:r,ignoreWeights:a}){const u=Number.POSITIVE_INFINITY,h=n?n.length:s.length;if(!n){n=new Uint32Array(h);for(let x=0;x<h;x++)n[x]=x+1}const c=new Array(h),g={};for(let x=0;x<h;x++){c[x]=new Float32Array(h);for(let M=0;M<h;M++)c[x][M]=x===M?0:u;g[n[x]]=x}const _=h,m=i.length;t=t.slice(),e=e.slice(),i=i.slice();for(let x=0;x<h;x++)t[m+x]=_,e[m+x]=n[x],i[m+x]=0,a&&(i[x]=1);const v=A0({sources:t,targets:e,weights:i,undirected:r,N:h+1,source:_});if(v===null)throw new Error("Graph has negative weight loops");const b=v.distances;for(let x=0;x<i.length;x++){const M=g[t[x]],N=g[e[x]];M!==void 0&&N!==void 0&&(i[x]=i[x]+b[M]-b[N])}t=t.slice(0,m),e=e.slice(0,m),i=i.slice(0,m);for(let x=0;x<h;x++){const M=n[x],{distances:N}=T0(s,M,void 0,n,g,!!a);for(let O=0;O<h;O++)c[x][O]=x===O?0:N[O]}return c}kg(S0,{CyclesFinder:()=>j2,Quadtree:()=>X2,bellmanFord:()=>A0,betweenness:()=>$2,circlePack:()=>B2,circleSpread:()=>gz,constrainedStress:()=>rx,convexhull:()=>cz,detectCyclesDirected:()=>Q2,detectCyclesUndirected:()=>rD,detectCyclesUndirectedDFS:()=>oD,dijkstra:()=>T0,distanceStress:()=>O2,fisheye:()=>U2,johnson:()=>ax,kruskal:()=>J2,largestEmptyCircle:()=>P2,minDisk:()=>Vg,minHeap:()=>Ap,removeRadialOverlap:()=>ux,stressMinimizationStep:()=>ox,stressMinimizationStepGeneral:()=>XP,weightedStress:()=>R2});var pu=11102230246251565e-32,jr=134217729,ZP=(3+8*pu)*pu;function $y(t,e,i,n,s){let r,a,u,h,c=e[0],g=n[0],_=0,m=0;g>c==g>-c?(r=c,c=e[++_]):(r=g,g=n[++m]);let v=0;if(_<t&&m<i)for(g>c==g>-c?(a=c+r,u=r-(a-c),c=e[++_]):(a=g+r,u=r-(a-g),g=n[++m]),r=a,u!==0&&(s[v++]=u);_<t&&m<i;)g>c==g>-c?(a=r+c,h=a-r,u=r-(a-h)+(c-h),c=e[++_]):(a=r+g,h=a-r,u=r-(a-h)+(g-h),g=n[++m]),r=a,u!==0&&(s[v++]=u);for(;_<t;)a=r+c,h=a-r,u=r-(a-h)+(c-h),c=e[++_],r=a,u!==0&&(s[v++]=u);for(;m<i;)a=r+g,h=a-r,u=r-(a-h)+(g-h),g=n[++m],r=a,u!==0&&(s[v++]=u);return r===0&&v!==0||(s[v++]=r),v}function WP(t,e){let i=e[0];for(let n=1;n<t;n++)i+=e[n];return i}function Hg(t){return new Float64Array(t)}var qP=(3+16*pu)*pu,QP=(2+12*pu)*pu,KP=(9+64*pu)*pu*pu,nc=Hg(4),QS=Hg(8),KS=Hg(12),jS=Hg(16),po=Hg(4);function jP(t,e,i,n,s,r,a){let u,h,c,g,_,m,v,b,x,M,N,O,R,P,F,U,V,Y;const K=t-s,tt=i-s,j=e-r,lt=n-r;P=K*lt,m=jr*K,v=m-(m-K),b=K-v,m=jr*lt,x=m-(m-lt),M=lt-x,F=b*M-(P-v*x-b*x-v*M),U=j*tt,m=jr*j,v=m-(m-j),b=j-v,m=jr*tt,x=m-(m-tt),M=tt-x,V=b*M-(U-v*x-b*x-v*M),N=F-V,_=F-N,nc[0]=F-(N+_)+(_-V),O=P+N,_=O-P,R=P-(O-_)+(N-_),N=R-U,_=R-N,nc[1]=R-(N+_)+(_-U),Y=O+N,_=Y-O,nc[2]=O-(Y-_)+(N-_),nc[3]=Y;let pt=WP(4,nc),ft=QP*a;if(pt>=ft||-pt>=ft||(_=t-K,u=t-(K+_)+(_-s),_=i-tt,c=i-(tt+_)+(_-s),_=e-j,h=e-(j+_)+(_-r),_=n-lt,g=n-(lt+_)+(_-r),u===0&&h===0&&c===0&&g===0)||(ft=KP*a+ZP*Math.abs(pt),pt+=K*g+lt*u-(j*c+tt*h),pt>=ft||-pt>=ft))return pt;P=u*lt,m=jr*u,v=m-(m-u),b=u-v,m=jr*lt,x=m-(m-lt),M=lt-x,F=b*M-(P-v*x-b*x-v*M),U=h*tt,m=jr*h,v=m-(m-h),b=h-v,m=jr*tt,x=m-(m-tt),M=tt-x,V=b*M-(U-v*x-b*x-v*M),N=F-V,_=F-N,po[0]=F-(N+_)+(_-V),O=P+N,_=O-P,R=P-(O-_)+(N-_),N=R-U,_=R-N,po[1]=R-(N+_)+(_-U),Y=O+N,_=Y-O,po[2]=O-(Y-_)+(N-_),po[3]=Y;const ht=$y(4,nc,4,po,QS);P=K*g,m=jr*K,v=m-(m-K),b=K-v,m=jr*g,x=m-(m-g),M=g-x,F=b*M-(P-v*x-b*x-v*M),U=j*c,m=jr*j,v=m-(m-j),b=j-v,m=jr*c,x=m-(m-c),M=c-x,V=b*M-(U-v*x-b*x-v*M),N=F-V,_=F-N,po[0]=F-(N+_)+(_-V),O=P+N,_=O-P,R=P-(O-_)+(N-_),N=R-U,_=R-N,po[1]=R-(N+_)+(_-U),Y=O+N,_=Y-O,po[2]=O-(Y-_)+(N-_),po[3]=Y;const W=$y(ht,QS,4,po,KS);P=u*g,m=jr*u,v=m-(m-u),b=u-v,m=jr*g,x=m-(m-g),M=g-x,F=b*M-(P-v*x-b*x-v*M),U=h*c,m=jr*h,v=m-(m-h),b=h-v,m=jr*c,x=m-(m-c),M=c-x,V=b*M-(U-v*x-b*x-v*M),N=F-V,_=F-N,po[0]=F-(N+_)+(_-V),O=P+N,_=O-P,R=P-(O-_)+(N-_),N=R-U,_=R-N,po[1]=R-(N+_)+(_-U),Y=O+N,_=Y-O,po[2]=O-(Y-_)+(N-_),po[3]=Y;const st=$y(W,KS,4,po,jS);return jS[st-1]}function F_(t,e,i,n,s,r){const a=(e-r)*(i-s),u=(t-s)*(n-r),h=a-u,c=Math.abs(a+u);return Math.abs(h)>=qP*c?h:-jP(t,e,i,n,s,r,c)}var JS=Math.pow(2,-52),B_=new Uint32Array(512),w0=class I2{static from(e,i=iz,n=nz){const s=e.length,r=new Float64Array(2*s);for(let a=0;a<s;a++){const u=e[a];r[2*a]=i(u),r[2*a+1]=n(u)}return new I2(r)}constructor(e){const i=e.length>>1;if(i>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*i-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){const{coords:e,_hullPrev:i,_hullNext:n,_hullTri:s,_hullHash:r}=this,a=e.length>>1;let u=1/0,h=1/0,c=-1/0,g=-1/0;for(let K=0;K<a;K++){const tt=e[2*K],j=e[2*K+1];tt<u&&(u=tt),j<h&&(h=j),tt>c&&(c=tt),j>g&&(g=j),this._ids[K]=K}const _=(u+c)/2,m=(h+g)/2;let v,b,x;for(let K=0,tt=1/0;K<a;K++){const j=tv(_,m,e[2*K],e[2*K+1]);j<tt&&(v=K,tt=j)}const M=e[2*v],N=e[2*v+1];for(let K=0,tt=1/0;K<a;K++){if(K===v)continue;const j=tv(M,N,e[2*K],e[2*K+1]);j<tt&&j>0&&(b=K,tt=j)}let O=e[2*b],R=e[2*b+1],P=1/0;for(let K=0;K<a;K++){if(K===v||K===b)continue;const tt=tz(M,N,O,R,e[2*K],e[2*K+1]);tt<P&&(x=K,P=tt)}let F=e[2*x],U=e[2*x+1];if(P===1/0){for(let j=0;j<a;j++)this._dists[j]=e[2*j]-e[0]||e[2*j+1]-e[1];yc(this._ids,this._dists,0,a-1);const K=new Uint32Array(a);let tt=0;for(let j=0,lt=-1/0;j<a;j++){const pt=this._ids[j],ft=this._dists[pt];ft>lt&&(K[tt++]=pt,lt=ft)}return this.hull=K.subarray(0,tt),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(F_(M,N,O,R,F,U)<0){const K=b,tt=O,j=R;b=x,O=F,R=U,x=K,F=tt,U=j}const V=ez(M,N,O,R,F,U);this._cx=V.x,this._cy=V.y;for(let K=0;K<a;K++)this._dists[K]=tv(e[2*K],e[2*K+1],V.x,V.y);yc(this._ids,this._dists,0,a-1),this._hullStart=v;let Y=3;n[v]=i[x]=b,n[b]=i[v]=x,n[x]=i[b]=v,s[v]=0,s[b]=1,s[x]=2,r.fill(-1),r[this._hashKey(M,N)]=v,r[this._hashKey(O,R)]=b,r[this._hashKey(F,U)]=x,this.trianglesLen=0,this._addTriangle(v,b,x,-1,-1,-1);for(let K,tt,j=0;j<this._ids.length;j++){const lt=this._ids[j],pt=e[2*lt],ft=e[2*lt+1];if(j>0&&Math.abs(pt-K)<=JS&&Math.abs(ft-tt)<=JS||(K=pt,tt=ft,lt===v||lt===b||lt===x))continue;let ht=0;for(let X=0,et=this._hashKey(pt,ft);X<this._hashSize&&(ht=r[(et+X)%this._hashSize],ht===-1||ht===n[ht]);X++);ht=i[ht];let W,st=ht;for(;W=n[st],F_(pt,ft,e[2*st],e[2*st+1],e[2*W],e[2*W+1])>=0;)if(st=W,st===ht){st=-1;break}if(st===-1)continue;let _t=this._addTriangle(st,lt,n[st],-1,-1,s[st]);s[lt]=this._legalize(_t+2),s[st]=_t,Y++;let Vt=n[st];for(;W=n[Vt],F_(pt,ft,e[2*Vt],e[2*Vt+1],e[2*W],e[2*W+1])<0;)_t=this._addTriangle(Vt,lt,W,s[lt],-1,s[Vt]),s[lt]=this._legalize(_t+2),n[Vt]=Vt,Y--,Vt=W;if(st===ht)for(;W=i[st],F_(pt,ft,e[2*W],e[2*W+1],e[2*st],e[2*st+1])<0;)_t=this._addTriangle(W,lt,st,-1,s[st],s[W]),this._legalize(_t+2),s[W]=_t,n[st]=st,Y--,st=W;this._hullStart=i[lt]=st,n[st]=i[Vt]=lt,n[lt]=Vt,r[this._hashKey(pt,ft)]=lt,r[this._hashKey(e[2*st],e[2*st+1])]=st}this.hull=new Uint32Array(Y);for(let K=0,tt=this._hullStart;K<Y;K++)this.hull[K]=tt,tt=n[tt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,i){return Math.floor(JP(e-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:i,_halfedges:n,coords:s}=this;let r=0,a=0;for(;;){const u=n[e],h=e-e%3;if(a=h+(e+2)%3,u===-1){if(r===0)break;e=B_[--r];continue}const c=u-u%3,g=h+(e+1)%3,_=c+(u+2)%3,m=i[a],v=i[e],b=i[g],x=i[_];if($P(s[2*m],s[2*m+1],s[2*v],s[2*v+1],s[2*b],s[2*b+1],s[2*x],s[2*x+1])){i[e]=x,i[u]=m;const M=n[_];if(M===-1){let O=this._hullStart;do{if(this._hullTri[O]===_){this._hullTri[O]=e;break}O=this._hullPrev[O]}while(O!==this._hullStart)}this._link(e,M),this._link(u,n[a]),this._link(a,_);const N=c+(u+1)%3;r<B_.length&&(B_[r++]=N)}else{if(r===0)break;e=B_[--r]}}return a}_link(e,i){this._halfedges[e]=i,i!==-1&&(this._halfedges[i]=e)}_addTriangle(e,i,n,s,r,a){const u=this.trianglesLen;return this._triangles[u]=e,this._triangles[u+1]=i,this._triangles[u+2]=n,this._link(u,s),this._link(u+1,r),this._link(u+2,a),this.trianglesLen+=3,u}};function JP(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}function tv(t,e,i,n){const s=t-i,r=e-n;return s*s+r*r}function $P(t,e,i,n,s,r,a,u){const h=t-a,c=e-u,g=i-a,_=n-u,m=s-a,v=r-u,b=g*g+_*_,x=m*m+v*v;return h*(_*x-b*v)-c*(g*x-b*m)+(h*h+c*c)*(g*v-_*m)<0}function tz(t,e,i,n,s,r){const a=i-t,u=n-e,h=s-t,c=r-e,g=a*a+u*u,_=h*h+c*c,m=.5/(a*c-u*h),v=(c*g-u*_)*m,b=(a*_-h*g)*m;return v*v+b*b}function ez(t,e,i,n,s,r){const a=i-t,u=n-e,h=s-t,c=r-e,g=a*a+u*u,_=h*h+c*c,m=.5/(a*c-u*h);return{x:t+(c*g-u*_)*m,y:e+(a*_-h*g)*m}}function yc(t,e,i,n){if(n-i<=20)for(let s=i+1;s<=n;s++){const r=t[s],a=e[r];let u=s-1;for(;u>=i&&e[t[u]]>a;)t[u+1]=t[u--];t[u+1]=r}else{let s=i+1,r=n;Nf(t,i+n>>1,s),e[t[i]]>e[t[n]]&&Nf(t,i,n),e[t[s]]>e[t[n]]&&Nf(t,s,n),e[t[i]]>e[t[s]]&&Nf(t,i,s);const a=t[s],u=e[a];for(;;){do s++;while(e[t[s]]<u);do r--;while(e[t[r]]>u);if(r<s)break;Nf(t,s,r)}t[i+1]=t[r],t[r]=a,n-s+1>=r-i?(yc(t,e,s,n),yc(t,e,i,r-1)):(yc(t,e,i,r-1),yc(t,e,s,n))}}function Nf(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function iz(t){return t[0]}function nz(t){return t[1]}function P2(t,e=1,i=0,n,s){if(!n||!s){const _=t.map(v=>[v.x,v.y]),m=w0.from(_,v=>v[0],v=>v[1]);n=vg(m.triangles,_),s=vg(m.hull,_)}if(!s)return[];const r=i*i,a=[],u={};for(let _=0;_<n.length;_+=3)if(sz(s,L0(n[_],n[_+1],n[_+2]))){const m=oz(n[_],n[_+1],n[_+2]);m>r&&(a.push(_),u[_]=m)}if(a.length===0)return[];a.sort((_,m)=>u[_]-u[m]);let h=a[0],c=u[h];const g=[];for(let _=0;_<a.length;_++){const m=a[_],v=u[m];v>c&&v>r&&(h=m,c=v,g.push(h),g.length>e&&g.shift())}return g.map(_=>rz(n[_],n[_+1],n[_+2]))}function sz(t,e){const i=t.length,n=t[i-1],[s,r]=e;let[a,u]=n,h=!1;for(let c=0;c<i;c++){const g=t[c],[_,m]=g;m>r!=u>r&&s<(a-_)*(r-m)/(u-m)+_&&(h=!h),a=_,u=m}return h}function rz(t,e,i){const n=L0(t,e,i);let s=0;for(let r=0;r<3;r++){const a=arguments[r],u=a[0]-n[0],h=a[1]-n[1],c=Math.sqrt(u*u+h*h);c>s&&(s=c)}return[n[0],n[1],s]}function oz(t,e,i){const[n,s]=L0(t,e,i),[r,a]=t,u=n-r,h=s-a;return u*u+h*h}function L0(t,e,i){const n=[(t[0]+e[0])/2,(t[1]+e[1])/2],s=[(e[0]+i[0])/2,(e[1]+i[1])/2],r=-1/((e[1]-t[1])/(e[0]-t[0])),a=-1/((i[1]-e[1])/(i[0]-e[0])),u=n[1]-r*n[0],h=(u-(s[1]-a*s[0]))/(a-r);return[h,r*h+u]}function Vg(t,e,i,n){let s;if(n)s=n;else{s=new Uint32Array(t.length);for(let R=0,P=t.length;R<P;R++)s[R]=R}let r=t[s[0]],a=r,u=e[s[0]],h=u;for(let R=1;R<s.length;R++){const P=s[R],F=t[P],U=e[P];F<r&&(r=F),F>a&&(a=F),U<u&&(u=U),U>h&&(h=U)}const c=(r+a)/2,g=(u+h)/2;for(let R=0;R<s.length;R++){const P=s[R];t[P]-=c,e[P]-=g}function _(R,P,F,U,V,Y){const K=F-Y+1e-9*Math.max(F,Y,1),tt=U-R,j=V-P;return K>0&&K*K>tt*tt+j*j}function m(R,P,F,U,V,Y,K){for(let tt=0;tt<U.length;++tt){const j=U[tt];if(!_(R,P,F,V[j],Y[j],K[j]))return!1}return!0}function v(R,P,F,U,V,Y){const K=U-R,tt=V-P,j=Y-F,lt=Math.sqrt(K*K+tt*tt);return[(R+U+K/lt*j)/2,(P+V+tt/lt*j)/2,(lt+F+Y)/2]}function b(R,P,F,U,V,Y,K,tt,j){const lt=(R+U+K)/3,pt=(P+V+tt)/3,ft=R-lt,ht=P-pt,W=U-lt,st=V-pt,_t=K-lt,Vt=tt-pt,X=ft-W,et=ft-_t,Dt=ht-st,Mt=ht-Vt,At=Y-F,Xt=j-F,jt=ft*ft+ht*ht-F*F,Ge=jt-W*W-st*st+Y*Y,Se=jt-_t*_t-Vt*Vt+j*j,Lt=et*Dt-X*Mt,Gt=(Dt*Se-Mt*Ge)/(2*Lt)-ft,ie=(Mt*At-Dt*Xt)/Lt,kt=(et*Ge-X*Se)/(2*Lt)-ht,$t=(X*Xt-et*At)/Lt,ne=ie*ie+$t*$t-1,ee=2*(F+Gt*ie+kt*$t),se=Gt*Gt+kt*kt-F*F,ve=-(Math.abs(ne)>1e-6?(ee+Math.sqrt(ee*ee-4*ne*se))/(2*ne):se/ee);return[lt+ft+Gt+ie*ve,pt+ht+kt+$t*ve,ve]}function x(R,P,F,U){switch(R.length){case 1:const V=R[0];return function(ft,ht,W){return[ft,ht,W]}(P[V],F[V],U[V]);case 2:const[Y,K]=R;return v(P[Y],F[Y],U[Y],P[K],F[K],U[K]);case 3:const[tt,j,lt]=R;return b(P[tt],F[tt],U[tt],P[j],F[j],U[j],P[lt],F[lt],U[lt]);default:return null}}function M(R,P,F,U,V,Y){const K=F-Y,tt=U-R,j=V-P;return K<0||K*K<tt*tt+j*j}function N(R,P,F,U,V){const Y=F[P],K=U[P],tt=V[P];if(m(Y,K,tt,R,F,U,V))return[P];for(let j=0;j<R.length;++j){const lt=R[j],pt=F[lt],ft=U[lt],ht=V[lt];if(M(Y,K,tt,pt,ft,ht)){const[W,st,_t]=v(pt,ft,ht,Y,K,tt);if(m(W,st,_t,R,F,U,V))return[R[j],P]}}for(let j=0;j<R.length-1;++j)for(let lt=j+1;lt<R.length;++lt){const pt=R[j],ft=R[lt],ht=F[pt],W=U[pt],st=V[pt],_t=F[ft],Vt=U[ft],X=V[ft],et=v(ht,W,st,_t,Vt,X);if(M(et[0],et[1],et[2],Y,K,tt)){const Dt=v(ht,W,st,Y,K,tt);if(M(Dt[0],Dt[1],Dt[2],_t,Vt,X)){const Mt=v(_t,Vt,X,Y,K,tt);if(M(Mt[0],Mt[1],Mt[2],ht,W,st)){const At=b(ht,W,st,_t,Vt,X,Y,K,tt);if(m(At[0],At[1],At[2],R,F,U,V))return[pt,ft,P]}}}}throw new Error}s=function(P){for(let F=P.length-1;F>=0;F--){let U=Math.floor(Math.random()*(F+1));U=Math.max(Math.min(U,F),0);const V=P[F];P[F]=P[U],P[U]=V}return P}(s),i=i||new Array(t.length).fill(0);const O=function(P,F,U,V,Y){let K=null,tt=[],j=0;for(;j<F;){const lt=P[j];K&&_(K[0],K[1],K[2],U[lt],V[lt],Y[lt])?j++:(tt=N(tt,lt,U,V,Y),K=x(tt,U,V,Y),j=0)}return K}(s,s.length,t,e,i);O[0]+=c,O[1]+=g;for(let R=0;R<s.length;R++){const P=s[R];t[P]+=c,e[P]+=g}return O}var z2=[1/0,1/0,-1/0,-1/0];function Wm(t,e,i,n,s,r={x:0,y:0}){const a=Math.cos(s),u=Math.sin(s),h=t-i,c=e-n;return r.x=a*h-u*c+i,r.y=u*h+a*c+n,r}function az(t,e,i=0,n={x:0,y:0}){return n.x=t.x+i*Math.sin(e),n.y=t.y+i*Math.cos(e),n}var Gs=(t,e,i,n)=>Math.hypot(t-i,e-n);function wm(t,e,i,n){const s=t-i,r=e-n;return s*s+r*r}function D2(t){const e=Math.sqrt(t.x*t.x+t.y*t.y);return t.x/=e,t.y/=e,t}function lx(t){return 180*t/Math.PI}function lz(t){return t*Math.PI/180}function k2(t,e){return t.minX-=e,t.minY-=e,t.maxX+=e,t.maxY+=e,t.width===void 0&&(t.width=t.maxX-t.minX),t.height===void 0&&(t.height=t.maxY-t.minY),t.width+=2*e,t.height+=2*e,t}function C0(t,e,i,n,s,r){const a=n-t,u=s-e,h=Math.sqrt(a*a+u*u);if(h>i+r||h<Math.abs(i-r))return null;const c=(i*i-r*r+h*h)/(2*h),g=t+a*c/h,_=e+u*c/h,m=Math.sqrt(i*i-c*c),v=m/h*-u,b=a*(m/h);return[[g+v,_+b],[g-v,_-b]]}function M0(t,e,i,n,s,r){if(t-s>=0&&i-s<0)return 1;if(t-s<0&&i-s>=0)return-1;if(t-s==0&&i-s==0)return e-n>=0||n-r>=0?e-n:n-e;const a=(t-s)*(n-r)-(i-s)*(e-r);return a<0?1:a>0?-1:(t-s)*(t-s)+(e-r)*(e-r)-((i-s)*(i-s)+(n-r)*(n-r))}function uz([t,e,i],n,s){const r=Math.abs(t-n),a=Math.abs(e-s);return r+a<=i||!(r>i||a>i)&&Math.sqrt(r*r+a*a)<i+1e-12}function hz(t,e,i,n){const s=t[0]-e,r=t[1]-i,a=t[2]-n;return s*s+r*r<a*a+1e-6}function N0(t,e,i,n,s,r,a){const u=t-Math.max(n,Math.min(r,t)),h=e-Math.max(s,Math.min(a,e));return u*u+h*h<i*i}function F2(t,e,i,n,s,r,a,u={x:0,y:0}){const h=u||{x:0,y:0};let c,g,_,m;if(i===t){const N=t-s,O=a*a-N*N;if(O<0)return null;const R=Math.sqrt(O);c=t,_=t,g=r+R,m=r-R}else{const N=(n-e)/(i-t),O=e-N*t,R=O-r,P=N*N+1,F=2*(N*R-s),U=F*F-4*P*(s*s+R*R-a*a);if(U<0)return null;const V=-F,Y=Math.sqrt(U),K=2*P;c=(V+Y)/K,_=(V-Y)/K,g=N*c+O,m=N*_+O}const v=t-c,b=e-g,x=t-_,M=e-m;return v*v+b*b<x*x+M*M?(h.x=c,h.y=g):(h.x=_,h.y=m),h}function ux({X:t,Y:e,sizes:i,indexes:n,R:s,center:r,gap:a=0,epsilon:u=.001,maxLoops:h=5,inPlace:c=!0}){const g=n.length,_=r[0],m=r[1];let v=g;c||(t=t.slice(),e=e.slice());const b=C0,x=M0,M=n.slice().sort((tt,j)=>x(t[tt],e[tt],t[j],e[j],_,m)),N=M[g-1],O=t[N],R=e[N];let P=!1;for(let tt=0;tt<v-1;tt++){let j=tt%g,lt=(tt+1)%g;tt===-1&&(j=g-1,lt=0),j=M[j],lt=M[lt];const pt=t[j],ft=e[j];let ht=t[lt],W=e[lt];const st=i[j]+i[lt]+a;let _t=x(pt,ft,ht,W,_,m);if(_t===-1&&P&&(_t=1),!(st>s)){if(_t===1||st-Gs(pt,ft,ht,W)>u){const Vt=b(_,m,s,pt,ft,st);if(Vt){const X=Vt[0];P=ht>_&&X[0]<_,ht=t[lt]=X[0],W=e[lt]=X[1]}}else P=!1;if(tt%g==g-2){const Vt=M[g-1],X=M[0];if(e[Vt]>m&&e[X]>m&&t[Vt]-i[Vt]<t[X]+i[Vt]){let et=0;for(v=Math.min(g*h,v+g);e[M[Vt]]>m&&e[M[0]]>m&&t[M[Vt]]<t[M[0]]&&++et<g;){const Dt=M.pop();Dt&&M.unshift(Dt)}}}}}const F=O-_,U=R-m,V=t[N]-_,Y=e[N]-m,K=F===V?0:Math.abs(Math.acos((F*V+U*Y)/(Math.sqrt(F*F+U*U)*Math.sqrt(V*V+Y*Y))));if(K!==0){const tt=Math.sin(-K),j=Math.cos(-K);let lt;for(let pt=0;pt<g;pt++){lt=M[pt];const ft=t[lt]-_,ht=e[lt]-m;t[lt]=ft*j-ht*tt+_,e[lt]=ft*tt+ht*j+m}}return{X:t,Y:e}}function $S(t,e,i,n,s,r){const a={},u=i[t];let h=u,c=0;const g=u*s;for(const _ in e){const m=e[_];let v=0,b=0;for(let O=0,R=m.length;O<R;O++){const P=i[m[O]];b=Math.max(b,P),v+=2*P+n}const x=v/(2*Math.PI),M=b+h,N=r?c+Math.max(r,M):c*s;c=Math.max(M,c,x,g,N),a[_]=c,h=b}return a[0]=0,a[Number.POSITIVE_INFINITY]=c,a}function dz(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])}function tA(t){const e=t.length,i=[0,1];let n=2;for(let s=2;s<e;s++){for(;n>1&&dz(t[i[n-2]],t[i[n-1]],t[s])<=0;)--n;i[n++]=s}return i.slice(0,n)}function cz(t){const e=t.length;if(e<3)return null;const i=new Array(e),n=new Array(e);for(let _=0;_<e;_++)i[_]=[+t[_][0],+t[_][1],_];i.sort((_,m)=>_[0]-m[0]||_[1]-m[1]);for(let _=0;_<e;_++)n[_]=[i[_][0],-i[_][1]];const s=tA(i),r=tA(n),a=r[r.length-1],u=s[s.length-1],h=r[0]===s[0],c=a===u?1:0,g=[];for(let _=s.length-1;_>=0;--_)g.push(t[i[s[_]][2]]);for(let _=+h;_<r.length-c;_++)g.push(t[i[r[_]][2]]);return g}var eA=t=>--t*t*t+1,iA=(t,e,i)=>{const n=t-i[0],s=e-i[1];return n*n+s*s},fz=(t,e)=>{let i=1/0,n=-1/0;for(let s=0;s<t.length;s++){const r=t[s],a=e?e[r]:r;i=Math.min(a,i),n=Math.max(a,n)}return{min:i,max:n}};function gz({X:t,Y:e,R:i,center:n,maxSteps:s=1e3,padding:r=5,epsilon:a=1e-9,damping:u=2,pinned:h=-1,indexes:c,onUpdate:g,pushSmallerOut:_=!0}){const m=c?c.length:t.length;let v=c;if(v===void 0){v=new Uint32Array(m);for(let P=0;P<m;P++)v[P]=P}else v=c;if(h!==-1)n=[t[h],e[h]];else if(!n){let P=0,F=0;for(let U=0;U<m;U++)P+=t[v[U]],F+=e[v[U]];n=[P/m,F/m]}const{min:b,max:x}=fz(v,i);function M(P,F){let U=0;for(let tt=0;tt<m-1;tt++)for(let j=tt+1;j<m;j++){if(tt===j)continue;const lt=v[tt],pt=v[j],ft=t[lt],ht=e[lt],W=i[lt],st=t[pt],_t=e[pt],Vt=i[pt],X=st-ft,et=_t-ht,Dt=W+Vt+r,Mt=X*X+et*et;if(Mt<Dt*Dt-P){const At=(Dt-Math.sqrt(Mt))*F,Xt=1/Mt,jt=X*Xt*At,Ge=et*Xt*At,Se=jt*jt+Ge*Ge;if(pt!==h){const Lt=W/b;U+=Se*Lt,t[pt]+=jt*Lt,e[pt]+=Ge*Lt}if(lt!==h){const Lt=Vt/b;U+=Se*Lt,t[lt]-=jt*Lt,e[lt]-=Ge*Lt}}}const V=P*u*(1-F),Y=n[0],K=n[1];for(let tt=0;tt<m;tt++){const j=v[tt];if(j!==h){const lt=t[j],pt=e[j],ft=i[j],ht=_?V*(ft/x):V,W=(lt-Y)*ht,st=(pt-K)*ht;U+=W*W+st*st,t[j]-=W,e[j]-=st}}return U}v.sort((P,F)=>i[F]*iA(t[F],e[F],n)-i[P]*iA(t[P],e[P],n));let N=0,O=0;const R=eA(1/m);for(let P=0;P<s&&(N=M(R,eA((P+1)/s)),g&&setTimeout(()=>g(t,e)),!(Math.abs(N-O)<a));P++)O=N;return{X:t,Y:e}}var U_=t=>({data:t,next:null,prev:null});function B2(t,e=0,i=0){const n=t.length;if(n===0)return t;const s=t[0];if(s.x=e,s.y=i,n===1)return t;const r=t[1];if(s.x=e-r.radius,r.x=e+s.radius,r.y=i,n===2)return t;const a=t[2];nA(r,s,a);let u=U_(s),h=U_(r),c=U_(a);u.next=c.prev=h,h.next=u.prev=c,c.next=h.prev=u;t:for(let g=3;g<n;g++){c=U_(t[g]),nA(u.data,h.data,t[g]);let _=h.next,m=u.prev,v=h.data.radius,b=u.data.radius;do if(v<=b){if(sA(_.data,c.data)){h=_,u.next=h,h.prev=u,--g;continue t}v+=_.data.radius,_=_.next}else{if(sA(m.data,c.data)){u=m,u.next=h,h.prev=u,--g;continue t}b+=m.data.radius,m=m.prev}while(_!==m.next);c.prev=u,c.next=h,u.next=h.prev=h=c;let x=rA(u);for(;(c=c.next)!==h;){const M=rA(c);M<x&&(u=c,x=M)}h=u.next}return t}function nA(t,e,i){const n=t.x-e.x;let s,r;const a=t.y-e.y,u=n*n+a*a;let h,c;u?(r=e.radius+i.radius,r*=r,c=t.radius+i.radius,c*=c,r>c?(s=(u+c-r)/(2*u),h=Math.sqrt(Math.max(0,c/u-s*s)),i.x=t.x-s*n-h*a,i.y=t.y-s*a+h*n):(s=(u+r-c)/(2*u),h=Math.sqrt(Math.max(0,r/u-s*s)),i.x=e.x+s*n-h*a,i.y=e.y+s*a+h*n)):(i.x=e.x+i.radius,i.y=e.y)}var _z=1e-6;function sA(t,e){const i=t.radius+e.radius-_z,n=e.x-t.x,s=e.y-t.y;return i>0&&i*i>n*n+s*s}function rA(t){const e=t.data,i=t.next.data,n=e.radius+i.radius,s=(e.x*i.radius+i.x*e.radius)/n,r=(e.y*i.radius+i.y*e.radius)/n;return s*s+r*r}function mz(t,e,i,n,s){const r=t.get(e),a=t.get(i),u=s.get(r._index)||r.getAttributes(["x","y","r"]),h=s.get(a._index)||a.getAttributes(["x","y","r"]),c=Number(h.radius),g=Number(u.radius),_=Gs(u.x,u.y,h.x,h.y),m=_;return n.push({source:e,target:i,weight:m}),_<=g+c+20?1:0}function pz(t){return t%3==2?t-2:t+1}function yz(t,e,i){const n=[],{triangles:s,halfedges:r}=t;for(let a=0;a<s.length;a++)a>r[a]&&mz(e,s[a],s[pz(a)],n,i);return n}var vz=(t,e)=>t.weight-e.weight;function xz(t,e){const i=new Set,n=new Array(t.length),s=[];for(const a of e)n[a.source]||(n[a.source]=[]),n[a.source].push(a),n[a.target]||(n[a.target]=[]),n[a.target].push(a);i.add(0);const r=Ap(vz,n[0]);for(;r.size!==0;){const a=r.pop(),u=i.has(a.source)?i.has(a.target)?null:a.target:a.source;if(u){const h=a.source===u?a.target:a.source,c=u;s.push({source:h,target:c,weight:a.weight}),i.add(u);for(const g of n[u])r.push(g)}}return s}function oA(t,e,i){let n=t.x-e.x,s=t.y-e.y;const r=Math.sqrt(n*n+s*s);n/=r,s/=r;const a=i*n,u=i*s;t.x+=a,t.y+=u}function bz(t,e,i,n,s){const r=new Set;let a={x:0,y:0},u=-1;const h=s.map((c,g)=>(t===i.get(g)&&(u=g,a={index:g,...c}),{x:c.x,y:c.y,r:c.radius,index:g}));if(i.size<3)return h.map((c,g)=>{if(g===u)return c;const _=c.x-a.x,m=c.y-a.y,v=Math.sqrt(_*_+m*m),b=e*_/v,x=e*m/v;return{x:c.x+b,y:c.y+x,radius:c.r}});for(const c of n){const g=h[c.target],_=h[c.source],m=1;_.index===u||r.has(c.source)||(oA(_,a,m*e),r.add(c.source)),g.index===u||r.has(c.target)||(oA(g,a,m*e),r.add(c.target))}return h.map(c=>({x:c.x,y:c.y}))}function U2(t,e,i,n){n||(n=t.getAttributes(["x","y","radius"]));const s=w0.from(n||t.getPosition(),h=>h.x,h=>h.y),r=new Map;for(let h=0;h<t.size;h++)r.set(t._indexes[h],n[h]);const a=yz(s,t,r),u=xz(t.toArray(),a);return bz(e,i,t,u,n)}var Ez=16,Sz=class{constructor(t=Int32Array,e=Ez,i=8){this._BIG_LIST=new Uint8Array([-1])[0],this._ArrayType=t,this._capacity=e,this._MAX_LIST_SIZE=i,this._freeIndex=-1,this.clear()}clear(){this._buffer=new this._ArrayType(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._idToIndex={},this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(t){let e;return this._freeIndex===-1?e=this._nextIndex++:(e=this._freeIndex,this._freeIndex=-1),this._idToIndex[t]=e,e>=this._capacity&&this._expand(e+1),this._sizes[e]=0,e}getItems(t){const e=this._idToIndex[t];if(e===void 0)return;const i=this._sizes[e],n=this._MAX_LIST_SIZE*e;if(i<=this._MAX_LIST_SIZE){this._constList.length=i;for(let s=0,r=i;s<r;++s)this._constList[s]=this._buffer[n+s];return this._constList}if(i===this._BIG_LIST){let s=this._buffer[n];return this._bigLists[s]}}removeEntry(t){const e=this._idToIndex[t];if(this._sizes[e]===this._BIG_LIST){const i=this._MAX_LIST_SIZE*e,n=this._buffer[i];this._bigLists[n].length=0}this._sizes[e]=0,this._freeIndex=e}size(t){const e=this._idToIndex[t];let i=this._sizes[e];return i<=this._MAX_LIST_SIZE?i:this._bigLists[this._buffer[e*this._MAX_LIST_SIZE]].length}sizes(t){const e=this._sizes,i=this._bigLists,n=this._buffer,s=this._MAX_LIST_SIZE,r=t.length,a=new Array(r);for(let u=0;u<r;u++){const h=this._idToIndex[t[u]],c=e[h];a[u]=c<=s?c:i[n[h*s]].length}return a}addTo(t,e){const i=this._idToIndex[t],n=this._sizes[i],s=i*this._MAX_LIST_SIZE;if(n<this._MAX_LIST_SIZE)this._buffer[s+n]=e,this._sizes[i]=n+1;else if(n===this._BIG_LIST){let r=this._buffer[s];this._bigLists[r].push(e)}else{let r=new Array(this._MAX_LIST_SIZE);for(let a=0;a<this._MAX_LIST_SIZE;++a)r[a]=this._buffer[s+a];r.push(e),this._bigLists.push(r),this._sizes[i]=this._BIG_LIST,this._buffer[s]=this._bigLists.length-1}}removeFrom(t,e){this.removeFromAndGetSize(t,e)}removeFromAndGetSize(t,e){const i=this._idToIndex[t];let n=this._sizes[i],s=this._MAX_LIST_SIZE*i;if(n<=this._MAX_LIST_SIZE){for(let r=s,a=s+n;r<a;++r)if(this._buffer[r]===e)return n-=1,this._buffer[r]=this._buffer[a-1],this._sizes[i]=n,n}else if(n===this._BIG_LIST){let r=this._buffer[s],a=this._bigLists[r],u=a.indexOf(e);if(u!==-1)return a.splice(u,1),a.length}}reserve(t){this._capacity<t&&this._expand(t)}_expand(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=aA(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=aA(this._sizes,this._capacity)}has(t){const e=this._idToIndex[t];return!(e===void 0||e>=this._capacity)&&this._sizes[e]!==0}get averageSize(){let t=0;for(let e=0;e<this._capacity;e++)t+=this._sizes[e];return t/this._capacity}};function aA(t,e){let i=new t.constructor(e);return i.set(t),i}var Rf,lA,Of,sc,If,rd=[0,1],Lm=[0,2];for(Of=4;Of<65535;Of<<=2)for(Rf=0,lA=rd.length;Rf<lA;Rf++)rd.push(rd[Rf]|Of),Lm.push((rd[Rf]|Of)<<1);function nl(t,e){return(Lm[255&e]|rd[255&t])+65536*(Lm[e>>8&255]|rd[t>>8&255])+4294967296*(Lm[e>>16&255]|rd[t>>16&255])}function uA(t,e=[0,0]){if(t>0xffffffffffff)throw"Only morton codes up to 48 bits are supported.";if(!sc){sc={},If={};for(var i=0;i<256;i++)sc[nl(i,0)]=i,If[nl(0,i)]=i}var n=sc[21845&t],s=If[43690&t];return t>65535&&(n|=sc[21845&(t/=65536)]<<8,s|=If[43690&t]<<8,t>65535&&(n|=sc[21845&(t/=65536)]<<16,s|=If[43690&t]<<16)),e[0]=n,e[1]=s,e}nl.code=function(e,i,n){if(e>24)throw"Morton codes are only supported up to Z=24";var s=1<<24-e;return nl(i*s,n*s)},nl.range=function(e,i,n){if(e>24)throw"Morton ranges are only supported up to Z=24";var s=1<<24-e,r=nl(i*s,n*s);return[r,r+s*s-1]},nl.reverse=uA,nl.decode=function(e,i){var n=uA(i),s=1<<24-e;return[n[0]/s,n[1]/s]},nl.min=function(e,i){var n=1431655765&e,s=1431655765&i,r=2863311530&e,a=2863311530&i;return Math.min(n,s)+Math.min(r,a)};var Az=1e-6,Tz=1e-12;function G2(){for(var t=arguments,e=t.length-1,i=e,n=[],s=0;s<=e&&Math.abs(t[s])<=Tz;s++)e--;switch(e){case 1:wz(t[i],t[i-1],n);break;case 2:Lz(t[i],t[i-1],t[i-2],n);break;case 3:Cz(t[i],t[i-1],t[i-2],t[i-3],n)}return n}function wz(t,e,i=[]){return e!==0&&i.push(-t/e),i}function Lz(t,e,i,n=[]){var s=e/i,r=s*s-4*(t/i);if(r>0){var a=Math.sqrt(r);n.push(.5*(-s+a)),n.push(.5*(-s-a))}else r===0&&n.push(.5*-s);return n}function Cz(t,e,i,n,s=[]){var r,a,u=i/n,h=e/n,c=(3*h-u*u)/3,g=(2*u*u*u-9*h*u+27*(t/n))/27,_=u/3,m=g*g/4+c*c*c/27,v=g/2;if(Math.abs(m)<=Az&&(m=0),m>0){var b=Math.sqrt(m);a=(r=-v+b)>=0?Math.pow(r,1/3):-Math.pow(-r,1/3),(r=-v-b)>=0?a+=Math.pow(r,1/3):a-=Math.pow(-r,1/3),s.push(a-_)}else if(m<0){var x=Math.sqrt(-c/3),M=Math.atan2(Math.sqrt(-m),-v)/3,N=Math.cos(M),O=Math.sin(M),R=Math.sqrt(3);s.push(2*x*N-_),s.push(-x*(N+R*O)-_),s.push(-x*(N-R*O)-_)}else r=v>=0?-Math.pow(v,1/3):Math.pow(-v,1/3),s.push(2*r-_),s.push(-r-_);return s}function sh(t,e,i,n,s,r,a,u,h,c,g){for(var _,m,v=Math.min(a,h),b=Math.min(u,c),x=Math.max(a,h),M=Math.max(u,c),N=G2((_=u-c)*(t+-2*i+s)+(m=h-a)*(e+-2*n+r),_*(-2*t+2*i)+m*(-2*e+2*n),_*t+m*e+(a*c-h*u)),O=0;O<N.length;O++){var R=N[O];if(0<=R&&R<=1){var P=t+(i-t)*R,F=e+(n-e)*R,U=P+(i+(s-i)*R-P)*R,V=F+(n+(r-n)*R-F)*R;if(a===h){if(b<=V&&V<=M){if(!g)return 1;g.push(U,V)}}else if(u===c){if(v<=U&&U<=x){if(!g)return 1;g.push(U,V)}}else if(U>=v&&V>=b&&U<=x&&V<=M){if(!g)return 1;g.push(U,V)}}}return g?g.length/2:0}function H2(t,e,i,n,s,r,a,u,h,c,g){return g?(sh(t,e,i,n,s,r,a,u,h,u,g),sh(t,e,i,n,s,r,h,u,h,c,g),sh(t,e,i,n,s,r,a,c,h,c,g),sh(t,e,i,n,s,r,a,u,a,c,g),g.length/2):a<=t&&h>=t&&u<=e&&c>=e||a<=s&&h>=s&&u<=r&&c>=r||sh(t,e,i,n,s,r,a,u,h,u)||sh(t,e,i,n,s,r,h,u,h,c)||sh(t,e,i,n,s,r,a,c,h,c)||sh(t,e,i,n,s,r,a,u,a,c)?1:0}function rh(t,e,i,n,s,r,a,u,h,c,g,_,m){for(var v,b,x=Math.min(h,g),M=Math.min(c,_),N=Math.max(h,g),O=Math.max(c,_),R=G2((v=c-_)*(-1*t+3*i+-3*s+a)+(b=g-h)*(-1*e+3*n+-3*r+u),v*(3*t+-6*i+3*s)+b*(3*e+-6*n+3*r),v*(-3*t+3*i)+b*(-3*e+3*n),v*t+b*e+(h*_-g*c)),P=0;P<R.length;P++){var F=R[P];if(0<=F&&F<=1){var U=t+(i-t)*F,V=e+(n-e)*F,Y=i+(s-i)*F,K=n+(r-n)*F,tt=U+(Y-U)*F,j=V+(K-V)*F,lt=tt+(Y+(s+(a-s)*F-Y)*F-tt)*F,pt=j+(K+(r+(u-r)*F-K)*F-j)*F;if(h===g){if(M<=pt&&pt<=O){if(!m)return 1;m.push(lt,pt)}}else if(c===_){if(x<=lt&&lt<=N){if(!m)return 1;m.push(lt,pt)}}else if(lt>=x&&pt>=M&&lt<=N&&pt<=O){if(!m)return 1;m.push(lt,pt)}}}return m?m.length/2:0}function hx(t,e,i,n,s,r,a,u,h,c,g,_,m){return m?(rh(t,e,i,n,s,r,a,u,h,c,g,c,m),rh(t,e,i,n,s,r,a,u,g,c,g,_,m),rh(t,e,i,n,s,r,a,u,h,_,g,_,m),rh(t,e,i,n,s,r,a,u,h,c,h,_,m),m.length/2):h<=t&&g>=t&&c<=e&&_>=e||h<=a&&g>=a&&c<=u&&_>=u||rh(t,e,i,n,s,r,a,u,h,c,g,c)||rh(t,e,i,n,s,r,a,u,g,c,g,_)||rh(t,e,i,n,s,r,a,u,h,_,g,_)||rh(t,e,i,n,s,r,a,u,h,c,h,_)?1:0}var hA=typeof Map>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(e){return!!this._values[e]}set(e,i){e in this._values||this._size++,this._values[e]=i}get(e){return this._values[e]}delete(e){e in this._values&&(delete this._values[e],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Map,Mz=typeof Set>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(e){return!!this._values[e]}add(e){e in this._values||this._size++,this._values[e]=!0}delete(e){e in this._values&&(delete this._values[e],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Set,V2=class{constructor(){this._intersects=null,this._getBounds=null}setBoundsGetter(t){return this._getBounds=t,this}setIntersector(t){return this._intersects=t,this}},Nz=65536,Rz=16,Oz=16,Iz=class extends V2{constructor(t,e,i=Oz,n=Nz,s=Int32Array,r=Rz){super(),this._occupied=0,this._idToCode=new hA,this._codeCache=[0,0,0],this.code=(a,u,h)=>h|nl(a,u)<<this._bitsForZoom,this.decode=(a,u)=>(nl.reverse(a>>this._bitsForZoom,u),u[2]=a&this._zoomMask,u),this._intersects=t,this._getBounds=e,this._cells=new Sz(s),this._offset=n,this._maxLevels=r,this._mortonMax=(1<<this._maxLevels)-1,this._bitsForZoom=Math.log2(this._maxLevels),this._zoomMask=(1<<this._bitsForZoom)-1,this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._min=-n,this._max=n,this._resolution=this._mortonMax/(this._max-this._min),this._minCellSize=i*this._resolution,this._bounds=new Array(4*this._maxLevels);for(let a=0;a<this._maxLevels;a++)this._bounds[4*a]=1/0,this._bounds[4*a+1]=1/0,this._bounds[4*a+2]=-1/0,this._bounds[4*a+3]=-1/0}setMinCellSize(t){return this._minCellSize=t,this}setOffset(t){return this._offset=t,this._min=-t,this._max=t,this._resolution=this._mortonMax/(this._max-this._min),this}insert(t,e,i,n,s){e===void 0&&([e,i,n,s]=this._getBounds(t));const r=Math.max(n-e,s-i);let a,u=this._minCellSize;for(a=0;u<r&&a<this._maxLevels-1;a++)u*=2;const h=this._resolution,c=this._min,g=h*(.5*(n+e)-c)/u|0,_=h*(.5*(s+i)-c)/u|0,m=this.code(g,_,a);this._cells.has(m)||this._cells.addEntry(m),this._cells.addTo(m,t),this._objectsAtLevel[a]++,this._occupied|=1<<a;const v=4*a,b=this._bounds;return g<b[v]&&(b[v]=g),_<b[v+1]&&(b[v+1]=_),g>b[v+2]&&(b[v+2]=g),_>b[v+3]&&(b[v+3]=_),this._idToCode.set(t,m),m}has(t){return this._idToCode.has(t)}update(t,e,i,n,s){return this.remove(t),this.insert(t,e,i,n,s)}remove(t){const e=this._idToCode.get(t);this.decode(e,this._codeCache);const i=this._codeCache[2];return--this._objectsAtLevel[i]==0&&(this._occupied&=~(1<<i),this._bounds[4*i]=1/0,this._bounds[4*i+1]=1/0,this._bounds[4*i+2]=-1/0,this._bounds[4*i+3]=-1/0),this._cells.removeFrom(e,t),this._idToCode.delete(t),this}query(t,e,i,n){const s=this._cells,r=this._bounds,a=this._intersects,u=this._min,h=this._resolution;let c=this._minCellSize,g=this._occupied;const _=[];for(let m=0;m<this._maxLevels&&g!==0;c*=2,g>>=1,m++){if(!(1&g))continue;const v=1/c,b=4*m,x=Math.max(r[b],h*(t-u)*v-1|0),M=Math.max(r[b+1],h*(e-u)*v-1|0),N=Math.min(r[b+2],h*(i-u)*v+1|0),O=Math.min(r[b+3],h*(n-u)*v+1|0);for(let R=x;R<=N;R++)for(let P=M;P<=O;P++){const F=this.code(R,P,m),U=s.getItems(F);if(U!==void 0)for(let V=0;V<U.length;V++){const Y=U[V];a(Y,t,e,i,n)&&_.push(Y)}}}return _}traverse(t,e,i,n,s){const r=this._cells,a=this._bounds,u=this._intersects,h=this._min,c=this._resolution;let g=this._minCellSize,_=this._occupied;const m=[];for(let v=0;v<this._maxLevels&&_!==0;g*=2,_>>=1,v++){if(!(1&_))continue;const b=1/g,x=4*v,M=Math.max(a[x],c*(t-h)*b-1|0),N=Math.max(a[x+1],c*(e-h)*b-1|0),O=Math.min(a[x+2],c*(i-h)*b+1|0),R=Math.min(a[x+3],c*(n-h)*b+1|0);for(let P=M;P<=O;P++)for(let F=N;F<=R;F++){const U=this.code(P,F,v),V=r.getItems(U);if(V!==void 0)for(let Y=0;Y<V.length;Y++){const K=V[Y];if(u(K,t,e,i,n)&&(m.push(K),s(K)))return m}}}return m}collisions(t,e=this._getBounds){if(typeof e!="function")throw new Error("getBounds function is required to get the object bounds");const i=Array.from(this._idToCode.keys()),n=this._min,s=this._resolution,r=this._cells,a=new hA,u=[];for(let h=0;h<i.length;h++){let c=0,g=this._minCellSize,_=this._occupied;const m=i[h];let[v,b,x,M]=e(m);const N=Math.max(x-v,M-b);for(c=0;g<N;c++)g*=2,_>>=1;v=s*(v-n),b=s*(b-n),x=s*(x-n),M=s*(M-n);for(let O=c;O<this._maxLevels&&_!==0;g*=2,_>>=1,O++){if(!(1&_))continue;const R=1/g,P=b*R-1|0,F=x*R+1|0,U=M*R+1|0;for(let V=v*R-1|0;V<=F;V++)for(let Y=P;Y<=U;Y++){const K=this.code(V,Y,O);if(a.get(K)===h)continue;a.set(K,h);const tt=r.getItems(K);if(tt!==void 0)for(let j=0;j<tt.length;j++){const lt=tt[j],[pt,ft,ht,W]=this._getBounds(lt);lt!==m&&t(m,pt,ft,ht,W)&&u.push(m,lt)}}}}return Pz(u)}clear(){this._occupied=0,this._cells.clear(),this._idToCode.clear(),this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._bounds=new Array(4*this._maxLevels);for(let t=0;t<this._maxLevels;t++)this._bounds[4*t]=1/0,this._bounds[4*t+1]=1/0,this._bounds[4*t+2]=-1/0,this._bounds[4*t+3]=-1/0;return this}keyToBBox(t){const[e,i,n]=this.decode(t,[0,0,0]),s=this._minCellSize*(1<<n),r=this._min,a=this._resolution;return[e*s/a+r,i*s/a+r,(e+1)*s/a+r,(i+1)*s/a+r]}keys(){return Object.keys(this._cells._idToIndex)}get averageCellOccupancy(){return this._cells.averageSize}get size(){return this._idToCode.size}getBoxes(){return Array.from(this._idToCode.keys()).map(t=>this._getBounds(t))}};function Pz(t){const e=new Mz,i=[];for(let n=0;n<t.length;n+=2){const s=t[n],r=t[n+1],a=s<r?s*r+(r-s-1)*(r-s-1)/4:s*r+(s-r-1)*(s-r-1)/4;e.has(a)||(e.add(a),i.push(s,r))}return i}function zz(t,e,i,n,s,r,a,u){return t>s&&t<a&&e>r&&e<u||i>s&&i<a&&n>r&&n<u}function hu(t,e,i,n,s,r,a,u){return n>=r&&e<=u&&i>=s&&t<=a}var lu=(t,e,i,n,s,r)=>({minX:t,minY:e,maxX:i,maxY:n,leaf:!0,level:r,parent:s,objects:[],final:!1,children:null});function Y2(t){const{minX:e,minY:i,maxX:n,maxY:s}=t;return[e,i,n,s]}function Kf(t,e,i,n,s,r,a,u){return t>=s&&i<=a&&e>=r&&n<=u}var Dz=0,kz=1,Fz=2,Bz=3;function G_(t,e,i,n,s,r,a,u){const h=(r+u)/2,c=(e+n)/2;return(t+i)/2<=(s+a)/2?c<=h?Dz:kz:c<=h?Bz:Fz}var Uz=t=>t,dc=class extends V2{constructor(t=Uz,e=10,i,n=0){super(),this._nodeCapacity=10,this._root=null,this._objects={},this._size=0,this._rootLevel=0,this._maxLevel=30,this._idToCell={},this._nodeCapacity=e,this._root=null,this._getBounds=t,this._rootLevel=n,this._maxLevel=n+30,this._idToCell={},i&&(this._root=lu(i[0],i[1],i[2],i[3],null,n))}get size(){return this._size}get root(){return this._root}clear(){return this._root=null,this._objects={},this._size=0,this._idToCell={},this._rootLevel=0,this._maxLevel=this._rootLevel+30,this}insert(t,e,i,n,s,r=this._root){if(e||([e,i,n,s]=this._getBounds(t)),this._objects[t])return;if(this._objects[t]=!0,this._size++,!this._root){const v=Math.max(Math.abs(n-e),Math.abs(s-i));return this._root=lu(e,i,e+v,i+v,null,this._rootLevel),this._idToCell[t]=[this._root],this._root.objects=[t],t}let a,u=[r],h=!1;const c=this._nodeCapacity,g=this._idToCell,_=this._maxLevel;let m;for(;m=u.pop();){a=m;const{minX:v,minY:b,maxX:x,maxY:M}=a;hu(e,i,n,s,v,b,x,M)&&(a.leaf?a.objects&&(a.objects.length<c||a.final)?(a.objects.push(t),g[t]?g[t].push(a):g[t]=[a],h=!0,(a.level>=_||Math.abs(x-v)<=Math.abs(n-e)||Math.abs(M-b)<=Math.abs(s-i))&&(a.final=!0)):(this.splitNode(a),u.push(a)):u.push.apply(u,a.children))}if(!Kf(e,i,n,s,(r=this._root).minX,r.minY,r.maxX,r.maxY)){let v=this._rootLevel;for(;!Kf(e,i,n,s,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){r=this._root;const{minX:b,minY:x,maxX:M,maxY:N}=r;let O=b,R=x,P=M,F=N;const U=Math.abs(M-b),V=Math.abs(N-x);if(V===0&&U===0)break;const Y=Math.max(U,V);e<b?(O-=Y,i<x?R-=Y:F+=Y):(P+=Y,i<x?R-=Y:F+=Y);const K=lu(O,R,P,F,null,--v);this.splitNode(K),K.children[G_(b,x,M,N,O,R,P,F)]=r,this._root=r.parent=K}for(u=[this._root],this._root.level=this._rootLevel;m=u.shift();)if(a=m,!a.leaf)for(let b=0;b<4;b++){const x=a.children[b];x.level=a.level+1,u.push(x)}r=this._root;for(let b=0;b<4;b++){const x=r.children[b];x&&x.leaf&&x.objects&&(x.objects.push(t),g[t]?g[t].push(x):g[t]=[x])}}return h?t:void 0}removeById(t){if(!this._objects[t])return t;this._size--;const e=this._idToCell[t];for(let i=0;i<e.length;i++){const n=e[i].objects||[];for(let s=0,r=n.length;s<r;s++)if(n[s]===t){n.splice(s,1);break}}return delete this._objects[t],delete this._idToCell[t],t}remove(t){const[e,i,n,s]=this._getBounds(t),r=[this._root];let a,u;const h=[];for(;a=r.pop();)if(hu(e,i,n,s,a.minX,a.minY,a.maxX,a.maxY))if(a.leaf){const c=a.objects||[];for(let g=0,_=c.length;g<_;g++)if(c[g]===t){c.splice(g,1),_===1&&h.push(a);break}}else r.push.apply(r,a.children);if(delete this._idToCell[t],delete this._objects[t],this._size--,h.length)for(;u=h.pop();){let c=u.parent,g=!0;for(;c&&g;){if(!c.leaf){for(let _=0;_<4;_++)if(a=c.children[_],!a.leaf||a.objects&&a.objects.length!==0){g=!1;break}g&&(c.leaf=!0,c.children=[],c.objects=[])}c=c.parent}}return t}splitNode(t){const{minX:e,minY:i,maxX:n,maxY:s}=t,r=(e+n)/2,a=(i+s)/2,u=t.level+1,h=this._idToCell,c=this._maxLevel,g=[lu(e,i,r,a,t,u),lu(e,a,r,s,t,u),lu(r,a,n,s,t,u),lu(r,i,n,a,t,u)];if(t.objects!==null){const _=t.objects,m=this._getBounds;for(let v=0,b=_.length;v<b;v++){const x=_[v],M=m(x);let N=h[x];for(let O=0;O<4;O++){const R=g[O],{minX:P,minY:F,maxX:U,maxY:V}=R;hu(M[0],M[1],M[2],M[3],P,F,U,V)&&(R.objects&&R.objects.push(x),(R.level>=c||Math.abs(U-P)<=Math.abs(M[2]-M[0])||Math.abs(V-F)<=Math.abs(M[3]-M[1]))&&(R.final=!0),N?N.push(R):N=[R])}N&&N.splice(N.indexOf(t),1)}}t.children=g,t.objects=null,t.leaf=!1}point(t,e,i){let n=[];const s=[this._root];let r,a,u;const h=this._getBounds;for(;r=s.pop();)if(t>=r.minX&&t<=r.maxX&&e>=r.minY&&e<=r.maxY){if(r.leaf){i&&r.objects&&(n=r.objects);const c=r.objects||[];for(let g=0,_=c.length;g<_;g++)u=c[g],a=h(u),t>=a[0]&&t<=a[2]&&e>=a[1]&&e<=a[3]&&n.push(u);break}s.push.apply(s,r.children)}return n.length?n:null}neigbours(t,e){let i,n=[];const s=[this._root];for(;i=s.pop();)if(t>=i.minX&&t<=i.maxX&&e>=i.minY&&e<=i.maxY){if(i.leaf){n=i.objects;break}s.push.apply(s,i.children)}return n}query(t,e,i,n){const s=[],r=[this._root];let a,u,h;const c=this._getBounds,g={},_=this._intersects;let m;for(;a=r.pop();)if(hu(t,e,i,n,a.minX,a.minY,a.maxX,a.maxY))if(a.leaf){const v=a.objects||[];for(let b=0,x=v.length;b<x;b++)h=v[b],g[h]||(u=c(h),hu(t,e,i,n,u[0],u[1],u[2],u[3])&&(_&&!_(h,t,e,i,n)||s.push(h)),g[h]=!0)}else m=G_(t,e,i,n,a.minX,a.minY,a.maxX,a.maxY),r.push(a.children[(m+3)%4],a.children[(m+2)%4],a.children[(m+1)%4],a.children[m]);return s}traverse(t,e,i,n,s){const r=[],a=[this._root];let u,h,c;const g=this._getBounds,_={},m=this._intersects;let v;for(;u=a.pop();)if(hu(t,e,i,n,u.minX,u.minY,u.maxX,u.maxY))if(u.leaf){const b=u.objects||[];for(let x=0,M=b.length;x<M;x++)if(c=b[x],!_[c]){if(h=g(c),hu(t,e,i,n,h[0],h[1],h[2],h[3])&&(!m||m(c,t,e,i,n))&&(r.push(c),s(c)))return r;_[c]=!0}}else v=G_(t,e,i,n,u.minX,u.minY,u.maxX,u.maxY),a.push(u.children[(v+3)%4],u.children[(v+2)%4],u.children[(v+1)%4],u.children[v]);return r}getOverlaps(){const t=[this._root];let e,i,n;const s=[],r=this._getBounds,a={};for(;e=t.pop();)if(e.leaf){const u=e.objects||[],h=u.length;for(let c=0;c<h;c++)for(let g=0;g<h;g++)if(i=u[c],n=u[g],c!==g&&!a[i+":"+n]&&!a[n+":"+i]){a[i+":"+n]=!0;const _=r(i),m=r(n);hu(_[0],_[1],_[2],_[3],m[0],m[1],m[2],m[3])&&s.push(i,n)}}else t.push.apply(t,e.children);return s}cover(t,e,i,n){if(this._root===null)return this._root=lu(t,e,i,n,null,0),this;let s=this._root;if(!Kf(t,e,i,n,s.minX,s.minY,s.maxX,s.maxY)){let r=this._rootLevel;for(;!Kf(t,e,i,n,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){s=this._root;const{minX:c,minY:g,maxX:_,maxY:m}=s;let v=c,b=g,x=_,M=m;const N=Math.abs(_-c),O=Math.abs(m-g);if(O===0&&N===0)break;const R=Math.max(N,O);t<c?(v-=R,e<g?b-=R:M+=R):(x+=R,e<g?b-=R:M+=R);const P=lu(v,b,x,M,null,--r);this.splitNode(P),P.children[G_(c,g,_,m,v,b,x,M)]=s,this._root=s.parent=P}const a=[this._root];let u,h;for(this._root.level=this._rootLevel;u=a.shift();)if(h=u,!h.leaf)for(let c=0;c<4;c++){const g=h.children[c];g.level=h.level+1,a.push(g)}}return this}getAll(){return Object.keys(this._objects).map(t=>Number(t))}forEach(t,e){const i=[this._root];let n;for(;n=i.pop();)if(n.leaf&&n.objects)for(let s=0,r=n.objects.length;s<r;s++)t.call(e,n.objects[s]);else i.push.apply(i,n.children);return this}getLeafs(){const t=[this._root],e=[];let i;for(;i=t.pop();)i.leaf?e.push(i):t.push.apply(t,i.children);return e}traverseFromRoot(t,e){const i=[this._root];let n;for(;n=i.pop();)t.call(e,n,n.objects)||n.leaf||i.push.apply(i,n.children);return this}update(t,e,i,n,s){return this.remove(t),this.insert(t,e,i,n,s),this}getNodeBounds(t){return Y2(t)}};dc.flatAccessor=(t,e)=>i=>{const n=e*i;return t.slice(n,n+e)},dc.inside=Kf,dc.intersects=zz,dc.overlaps=hu,dc.getNodeBBox=Y2;var X2=dc;function Gz(t){const e=+this._x.call(null,t),i=+this._y.call(null,t);return Z2(this.cover(e,i),e,i,t)}function Z2(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var s,r,a,u,h,c,g,_,m,v=t._root,b={data:n},x=t._x0,M=t._y0,N=t._x1,O=t._y1;if(!v)return t._root=b,t;for(;v.length;)if((c=e>=(r=(x+N)/2))?x=r:N=r,(g=i>=(a=(M+O)/2))?M=a:O=a,s=v,!(v=v[_=g<<1|c]))return s[_]=b,t;if(u=+t._x.call(null,v.data),h=+t._y.call(null,v.data),e===u&&i===h)return b.next=v,s?s[_]=b:t._root=b,t;do s=s?s[_]=new Array(4):t._root=new Array(4),(c=e>=(r=(x+N)/2))?x=r:N=r,(g=i>=(a=(M+O)/2))?M=a:O=a;while((_=g<<1|c)==(m=(h>=a)<<1|u>=r));return s[m]=v,s[_]=b,t}function Hz(t){var e,i,n,s,r=t.length,a=new Array(r),u=new Array(r),h=1/0,c=1/0,g=-1/0,_=-1/0;for(i=0;i<r;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(s=+this._y.call(null,e))||(a[i]=n,u[i]=s,n<h&&(h=n),n>g&&(g=n),s<c&&(c=s),s>_&&(_=s));if(h>g||c>_)return this;for(this.cover(h,c).cover(g,_),i=0;i<r;++i)Z2(this,a[i],u[i],t[i]);return this}function Vz(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,s=this._x1,r=this._y1;if(isNaN(i))s=(i=Math.floor(t))+1,r=(n=Math.floor(e))+1;else{for(var a,u,h=s-i||1,c=this._root;i>t||t>=s||n>e||e>=r;)switch(u=(e<n)<<1|t<i,(a=new Array(4))[u]=c,c=a,h*=2,u){case 0:s=i+h,r=n+h;break;case 1:i=s-h,r=n+h;break;case 2:s=i+h,n=r-h;break;case 3:i=s-h,n=r-h}this._root&&this._root.length&&(this._root=c)}return this._x0=i,this._y0=n,this._x1=s,this._y1=r,this}function Yz(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Xz(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Eo(t,e,i,n,s){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=s}function Zz(t,e,i){var n,s,r,a,u,h,c,g=this._x0,_=this._y0,m=this._x1,v=this._y1,b=[],x=this._root;for(x&&b.push(new Eo(x,g,_,m,v)),i==null?i=1/0:(g=t-i,_=e-i,m=t+i,v=e+i,i*=i);h=b.pop();)if(!(!(x=h.node)||(s=h.x0)>m||(r=h.y0)>v||(a=h.x1)<g||(u=h.y1)<_))if(x.length){var M=(s+a)/2,N=(r+u)/2;b.push(new Eo(x[3],M,N,a,u),new Eo(x[2],s,N,M,u),new Eo(x[1],M,r,a,N),new Eo(x[0],s,r,M,N)),(c=(e>=N)<<1|t>=M)&&(h=b[b.length-1],b[b.length-1]=b[b.length-1-c],b[b.length-1-c]=h)}else{var O=t-+this._x.call(null,x.data),R=e-+this._y.call(null,x.data),P=O*O+R*R;if(P<i){var F=Math.sqrt(i=P);g=t-F,_=e-F,m=t+F,v=e+F,n=x.data}}return n}function Wz(t){if(isNaN(r=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,i,n,s,r,a,u,h,c,g,_,m,v=this._root,b=this._x0,x=this._y0,M=this._x1,N=this._y1;if(!v)return this;if(v.length)for(;;){if((c=r>=(u=(b+M)/2))?b=u:M=u,(g=a>=(h=(x+N)/2))?x=h:N=h,e=v,!(v=v[_=g<<1|c]))return this;if(!v.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(i=e,m=_)}for(;v.data!==t;)if(n=v,!(v=v.next))return this;return(s=v.next)&&delete v.next,n?(s?n.next=s:delete n.next,this):e?(s?e[_]=s:delete e[_],(v=e[0]||e[1]||e[2]||e[3])&&v===(e[3]||e[2]||e[1]||e[0])&&!v.length&&(i?i[m]=v:this._root=v),this):(this._root=s,this)}function qz(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function Qz(){return this._root}function Kz(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function jz(t){var e,i,n,s,r,a,u=[],h=this._root;for(h&&u.push(new Eo(h,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(h=e.node,n=e.x0,s=e.y0,r=e.x1,a=e.y1)&&h.length){var c=(n+r)/2,g=(s+a)/2;(i=h[3])&&u.push(new Eo(i,c,g,r,a)),(i=h[2])&&u.push(new Eo(i,n,g,c,a)),(i=h[1])&&u.push(new Eo(i,c,s,r,g)),(i=h[0])&&u.push(new Eo(i,n,s,c,g))}return this}function Jz(t){var e,i=[],n=[];for(this._root&&i.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var s=e.node;if(s.length){var r,a=e.x0,u=e.y0,h=e.x1,c=e.y1,g=(a+h)/2,_=(u+c)/2;(r=s[0])&&i.push(new Eo(r,a,u,g,_)),(r=s[1])&&i.push(new Eo(r,g,u,h,_)),(r=s[2])&&i.push(new Eo(r,a,_,g,c)),(r=s[3])&&i.push(new Eo(r,g,_,h,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function $z(t){return t[0]}function tD(t){return arguments.length?(this._x=t,this):this._x}function eD(t){return t[1]}function iD(t){return arguments.length?(this._y=t,this):this._y}function W2(t,e,i){var n=new R0(e??$z,i??eD,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function R0(t,e,i,n,s,r){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=s,this._y1=r,this._root=void 0}function dA(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var yo=W2.prototype=R0.prototype;yo.copy=function(){var t,e,i=new R0(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=dA(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var s=0;s<4;++s)(e=n.source[s])&&(e.length?t.push({source:e,target:n.target[s]=new Array(4)}):n.target[s]=dA(e));return i},yo.add=Gz,yo.addAll=Hz,yo.cover=Vz,yo.data=Yz,yo.extent=Xz,yo.find=Zz,yo.remove=Wz,yo.removeAll=qz,yo.root=Qz,yo.size=Kz,yo.visit=jz,yo.visitAfter=Jz,yo.x=tD,yo.y=iD;var Pf=function(t,e,i,n,s){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=s},nD=function(t){const e=[];let i,n,s,r,a,u,h,c=this._root;for(c&&e.push(new Pf(c,this._x0,this._y0,this._x1,this._y1));(i=e.pop())&&(h=t(c=i.node,s=i.x0,r=i.y0,a=i.x1,u=i.y1),h!=="break");)if(!h&&c.length){const g=(s+a)/2,_=(r+u)/2;(n=c[3])&&e.push(new Pf(n,g,_,a,u)),(n=c[2])&&e.push(new Pf(n,s,_,g,u)),(n=c[1])&&e.push(new Pf(n,g,r,a,_)),(n=c[0])&&e.push(new Pf(n,s,r,g,_))}return this};function O0(t,e,i,n,s){const r=new Array(t.length);for(let a=0;a<e.length;a++){const u=n[e[a]],h=n[i[a]];r[u]=r[u]||[],r[u].push(h),s&&(r[h]=r[h]||[],r[h].push(u))}return r}function Sg(t,e){return t[e]===-1?e:Sg(t,t[e])}function sD(t,e,i){const n=Sg(t,e),s=Sg(t,i);t[n]=s}function rD(t,e,i,n=!1){const s=new Int32Array(t.length),r={};for(let a=0;a<t.length;a++)s[a]=-1,r[t[a]]=a;for(let a=0;a<e.length;a++){const u=r[e[a]],h=r[i[a]];if(n&&u===h)return!0;const c=Sg(s,u),g=Sg(s,h);if(c===g)return!0;sD(s,c,g)}return!1}function q2(t,e,i,n,s,r,a,u){if(n[t]=s,i[t])return!0;if(e[t])return!1;e[t]=1,i[t]=1;const h=r[t];if(h){for(const c of h)if(q2(c,e,i,n,t,r,a,u))return a.push(u[c]),!0}return i[t]=0,!1}function Q2(t,e,i){const n=t.length,s=new Uint8Array(n),r=new Uint8Array(n),a=new Int32Array(n),u={};for(let c=0;c<n;c++)u[t[c]]=c;const h=O0(t,e,i,u,!1);for(let c=0;c<n;c++){const g=[];if(q2(c,s,r,a,-1,h,g,t)&&g.length>1){const _=g[0];for(let m=1;m<g.length;m++)if(g[m]===_){g.length=m;break}return g.push(_),g.reverse()}}return!1}function K2(t,e,i,n,s,r,a){e[t]=1,n[t]=i;const u=s[t];if(u){for(const h of u)if(e[h]){if(h!==i)return n[h]=t,r.push(a[h]),!0}else if(K2(h,e,t,n,s,r,a))return r.push(a[h]),!0}return!1}function oD(t,e,i){const n=t.length,s=new Uint8Array(n),r=new Int32Array(n),a={};for(let h=0;h<n;h++)a[t[h]]=h,r[h]=-1;const u=O0(t,e,i,a,!0);for(let h=0;h<e.length;h++){const c=a[e[h]],g=a[i[h]];u[c]=u[c]||[],u[c].push(g)}for(let h=0;h<n;h++){const c=h,g=[];if(!s[c]&&K2(c,s,-1,r,u,g,t))return!0}return!1}W2.prototype.visit2=nD;var j2=class{constructor(t,e,i){this.cycles=[],this.visitedLength=0,this.visitedStack=[],this.stack=[],this.idToIndex={},this.removed={},this.nodes=t,this.visited=new Uint8Array(this.nodes.length);for(let n=0;n<t.length;n++)this.idToIndex[t[n]]=n;this.adjacency=O0(t,e,i,this.idToIndex)}getCycles(){this.visited=new Uint8Array(this.nodes.length),this.visitedStack=[];for(let t=0;t<this.nodes.length;t++)for(this.backtrack(t,t);this.visitedLength!==0;){const e=this.visitedStack.pop();e!==void 0&&this.visited[e]&&(this.visited[e]=0,this.visitedLength--)}return this.cycles}backtrack(t,e){let i=!1;this.stack.push(e),this.visited[e]||(this.visited[e]=1,this.visitedLength++),this.visitedStack.push(e);const n=this.adjacency[e]||[];for(const s of n)if(this.removed[e]=this.removed[e]||{},!this.removed[e][s]){if(s<t)this.removed[e][s]=!0;else if(s===t){i=!0;const r=[];for(let a=0,u=!1;a<this.stack.length;a++){const h=this.stack[a];t===h&&(u=!0),u&&r.push(this.nodes[h])}this.cycles.push(r)}else if(!this.visited[s]){const r=this.backtrack(t,s);i=i||r}}if(i){let s;do s=this.visitedStack.pop(),this.visited[s]&&(this.visited[s]=0,this.visitedLength--);while(s!==e)}return this.stack.pop(),i}};function aD(){return{index:{},parent:[],count:0}}function lD(t,e){t.index[e]===void 0&&(t.count+=1,t.index[e]=t.parent.push(-t.count))}function cA(t,e){let i=t.index[e];if(i===void 0)return-1;for(;i>=0;)e=i,i=t.parent[i];return e}function uD(t,e,i){t.parent[i]=e,t.count-=1}function hD(t){return t.count<=1}function J2(t,e,i,n,s){s&&e.sort((u,h)=>s(u)-s(h));const r=[],a=aD();t.forEach(u=>lD(a,u));for(let u=0;u<e.length&&!hD(a);u++){const h=cA(a,i(e[u])),c=cA(a,n(e[u]));h!==c&&h>0&&c>0&&(uD(a,h,c),r.push(e[u]))}return r}function $2({adjacency:t,directed:e=!1,normalized:i=!0}){const n=[],s=[],r={},a={},u={},h={};let c;const g=new Array(t.length),_={},m={},v={};for(let O=0;O<t.length;O++){const R=t[O];v[R.id]=R.adj,_[R.id]=!0,m[R.id]=O,e||R.adj.forEach(P=>{_[P]=!0})}const b=Object.keys(_).map(O=>+O);for(let O=0;O<b.length;O++)g[O]=0;for(let O=0;O<b.length;O++)c=b[O],N(c),M();const x=i?b.length>2?1/((b.length-1)*(b.length-2)):0:e?0:.5;if(x)for(let O=0;O<g.length;O++)g[O]*=x;return g;function M(){for(let O=0;O<b.length;O++)h[b[O]]=0;for(;s.length;){const O=s.pop(),R=(1+h[O])/u[O],P=r[O];for(let F=0;F<P.length;++F){const U=P[F];h[U]+=u[U]*R}O!==c&&(g[m[O]]+=h[O])}}function N(O){for(let R=0;R<b.length;R++){const P=b[R];r[P]=[],a[P]=-1,u[P]=0}for(a[O]=0,u[O]=1,n.push(O);n.length;){const R=n.shift();s.push(R),v[R].forEach(P=>{a[P]===-1&&(a[P]=a[R]+1,n.push(P)),a[P]===a[R]+1&&(u[P]+=u[R],r[P].push(R))})}}}var tL=class{constructor(t){this._heap=[],this._size=0,this._keyToValue=t,this._keyToIndex=new Int32Array(t.length),this._keyToIndex.fill(-1)}add(t){let e=this._keyToIndex[t];e===-1&&(e=this._size++,this._heap[e]=t),this._keyToIndex[t]=this._bubble(e)}removeMin(){if(this._size===0)return NaN;const t=this._heap[0];return this._heap[0]=this._heap[--this._size],this._bubble(0),t}isEmpty(){return this._size===0}has(t){return this._keyToIndex[t]!==-1}_bubble(t){const e=this._indexToValue(t),i=this._getParentIndex(t),n=this._indexToValue(i);let s=t;if(t!==0&&n>e)s=this._swap(t,i);else{const r=this._getLeftChildIndex(t),a=this._getRightChildIndex(t),u=this._indexToValue(r),h=this._indexToValue(a),c=Math.min(e,u,h);c===e||(s=c===u?this._swap(t,r):this._swap(t,a))}return s===t?t:this._bubble(s)}_indexToValue(t){return t>=this._size?1/0:this._keyToValue[this._heap[t]]}_getParentIndex(t){return(t-1)/2|0}_getLeftChildIndex(t){return 2*t+1}_getRightChildIndex(t){return 2*t+2}_swap(t,e){const i=this._heap[t],n=this._heap[e];return this._heap[t]=n,this._heap[e]=i,this._keyToIndex[i]=e,this._keyToIndex[n]=t,e}},eL=yh&&!!window.PointerEvent,Tp="pointerdown",wp="pointermove",Lp="pointerup",Yg="pointercancel",Oc={},qm=0,iL=t=>t.pointerType==="mouse",nL=t=>t.pointerType!=="mouse";function dD(){if(xu&&qm===0&&eL){const t=document.documentElement;t.addEventListener(Tp,sL,!0),t.addEventListener(wp,rL,!0),t.addEventListener(Lp,Qm,!0),t.addEventListener(Yg,Qm,!0)}qm++}function cD(){if(qm--,xu&&qm===0){const t=document.documentElement;t.removeEventListener(Tp,sL,!0),t.removeEventListener(wp,rL,!0),t.removeEventListener(Lp,Qm,!0),t.removeEventListener(Yg,Qm,!0)}}function sL(t){Oc[t.pointerId]=t}function rL(t){Oc[t.pointerId]&&(Oc[t.pointerId]=t)}function Qm(t){delete Oc[t.pointerId]}function Cp(t,e){t.touches=[];for(const i in Oc)t.touches.push(Oc[i]);t.changedTouches=[t],e(t)}function fD(t,e,i){const n=s=>{iL(s)||(nL(s)&&s.preventDefault(),Cp(s,i))};return t(e,Tp,n,!1),n}function gD(t,e,i){const n=s=>{nL(s)&&s.preventDefault(),Cp(s,i)};return t(e,Yg,n,!1),n}function _D(t,e,i){const n=s=>{iL(s)&&s.buttons===0||Cp(s,i)};return t(e,wp,n,!1),n}function mD(t,e,i){const n=s=>Cp(s,i);return t(e,Lp,n,!1),t(e,Yg,n,!1),n}function fA(t,e,i,n){return i==="touchstart"?t(e,Tp,n,!1):i==="touchmove"?t(e,wp,n,!1):i==="touchend"?(t(e,Lp,n,!1),t(e,Yg,n,!1)):void 0}var li=class{constructor(t){this._ogma=t}_setModules(t){this._modules=t}onMounted(){}onReady(t){}destroy(t){}},pD=["graphics","legend","brand"],ev=300,iv=300,yD=200,vD=class extends li{constructor(){super(...arguments),this._width=ev,this._height=iv,this._resizeObserver=a2(()=>this._resize()),this._layers={},this._focus=!1,this._container=null,this._isFullScreen=!1,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],this._onNextFramePromises=[],this._refreshUntil=0,this._currentTime=eo(),this._timeouts=[],this._isDestroyed=!1,this._onDetachDom=[],this._isRealBrowser=vp,this._isDocumentReady=xp,this._inFrame=!1,this._mustRefresh=!1,this._nextFrame=null,this._onWindowFocus=()=>this.refresh(),this._onFullscreenChange=()=>{this._isFullScreen=hg()},this._resize=t=>{if(!this._container&&!t)return;const e=this._width,i=this._height;let n=0,s=0;if(this._container){const r=this._modules.settings.get("minimumWidth"),a=this._modules.settings.get("minimumHeight"),u=this._container.clientWidth||1,h=this._container.clientHeight||1;n=Math.max(r,t?t.width:u),s=Math.max(a,t?t.height:h)}else t&&(n=t.width,s=t.height);n===e&&s===i||(this._width=n,this._height=s,Bl(this._layers,({element:r,automaticResize:a})=>{a&&Um(r,n,s)}),this._modules.events.fire("resize",{prevWidth:e,prevHeight:i,width:n,height:s,difWidth:n-e,difHeight:s-i}))}}onMounted(){this._modules.settings.register("minimumWidth",ev,()=>this._resize(),!1),this._modules.settings.register("minimumHeight",iv,()=>this._resize(),!1),this._modules.events.register(["beforeNewFrame","frame","afterNewFrame","setContainer","resize"]),this._onDetachDom=[],dD(),this.addWindowEventListener("focus",this._onWindowFocus)}onReady(t){var e,i;t.container&&this.setContainer(t.container),(e=t.options)!=null&&e.width||(i=t.options)!=null&&i.height?this._resize({width:t.options.width||ev,height:t.options.height||iv}):this._resize()}addWindowEventListener(t,e,i){return this._isRealBrowser&&this.addElementEventListener(window,t,e,i),this}addDirectWindowEventListener(t,e,i){this._isRealBrowser&&window.addEventListener(t,e,i)}removeDirectWindowEventListener(t,e){this._isRealBrowser&&window.removeEventListener(t,e)}addDocumentEventListener(t,e,i){return this._isDocumentReady&&this.addElementEventListener(document.documentElement,t,e,i),e}removeDocumentEventListener(t,e){this._isDocumentReady&&document.documentElement.removeEventListener(t,e)}addMediaListener(t,e){if(this._isDocumentReady&&typeof window.matchMedia=="function"){const i=window.matchMedia(t);i.addListener(e),this._onDetachDom.push(()=>i.removeListener(e))}}addElementEventListener(t,e,i,n){return this._isDestroyed||(t.addEventListener(e,i,n),this._onDetachDom.push(()=>t.removeEventListener(e,i,n))),i}detachFromDom(){this._onDetachDom.forEach(t=>t()),this._onDetachDom=[],this._emptyContainer()}setTimeout(t,e=0){const i=setTimeout(()=>{this._timeouts.splice(this._timeouts.indexOf(i),1),t()},e);return this._timeouts.push(i),i}clearTimeout(t){return t&&(clearTimeout(t),this._timeouts.splice(this._timeouts.indexOf(t),1)),null}clearAllTimeouts(){this._timeouts.forEach(clearTimeout),this._timeouts=[]}stopFrames(){this._isDestroyed=!0,this._nextFrame&&(e2(this._nextFrame),this._nextFrame=null)}isDestroyed(){return this._isDestroyed}getDimensions(){return{width:this._width,height:this._height}}setDimensions(t){this._resize(t)}setLayer(t,e,{automaticResize:i=!1}={}){e?(e._ogmaLayer=t,i&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",Um(e,this._width,this._height,Do())),this._layers[t]={element:e,automaticResize:i}):e===null&&delete this._layers[t],this._updateContainerContent()}setContainer(t){let e;if(typeof t=="string"){if(e=document.getElementById(t),!e)throw new Error(`unable to find DOM element with id "${t}"`)}else e=t;if(e===this._container)return;e===null&&this._emptyContainer();const i=this._container;this._isFullScreen=!1,this._container&&this._resizeObserver.unobserve(this._container),this._container=e,this._container&&(["fullscreenchange","webkitfullscreenchange"].forEach(n=>{this.addElementEventListener(this._container,n,this._onFullscreenChange)}),this._resizeObserver.observe(this._container)),this._resize(),this._updateContainerContent(),this._modules.events.fire("setContainer",{element:e,prevElement:i})}getContainer(){return this._container}appendElement(t){this._container!==null&&this._container.appendChild(t)}focus(){this._focus=!0}blur(){this._focus=!1}hasFocus(){return this._focus}forceResize(){this._resize()}_beforeOrAfterNextFrame(t){const e=t===1?this._onNextFramePromises:t===2?this._afterNextFramePromises:this._beforeNextFramePromises,i=new Promise(n=>{e.push(()=>(n(void 0),i))});return this._refresh(),i}beforeNextFrame(){return this._beforeOrAfterNextFrame(0)}onNextFrame(){return this._beforeOrAfterNextFrame(1)}afterNextFrame(){return this._beforeOrAfterNextFrame(2)}refresh(t){t&&(this._refreshUntil=Math.max(this._refreshUntil,t)),this._refresh()}_emptyContainer(){if(this._container){const t=[];for(let e=0;e<this._container.childNodes.length;++e){const i=this._container.childNodes[e];i._ogmaLayer&&t.push(i)}for(let e=0;e<t.length;++e)this._container.removeChild(t[e])}}_fillContainer(){if(this._container){const t=l2(this._container,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&(this._container.style.position="relative");const e=this._container.firstChild;pD.forEach(i=>{const n=this._layers[i];n&&n.element&&this._container&&this._container.insertBefore(n.element,e)})}}_updateContainerContent(){this._emptyContainer(),this._fillContainer()}_refresh(){this._inFrame?this._mustRefresh=!0:this._nextFrame||this._isDestroyed||(this._nextFrame=g0(()=>this._playFrame()))}_playFrame(){const t=eo(),e={elapsed:t-this._currentTime},i=this._modules.events,n=vw([this._beforeNextFramePromises,()=>i.fire("beforeNewFrame",e),()=>i.fire("frame",e),this._onNextFramePromises,()=>i.fire("afterNewFrame",e),this._afterNextFramePromises,()=>{this._inFrame=!1,(this._mustRefresh||t<this._refreshUntil+17)&&(this._mustRefresh=!1,this._refresh())}]);this._inFrame=!0,this._nextFrame=null,this._mustRefresh=!1,this._currentTime=t,this._beforeNextFramePromises=[],this._onNextFramePromises=[],this._afterNextFramePromises=[],n.reduce((s,r)=>s.then(()=>{if(!this._isDestroyed)return r()}),Promise.resolve())}isPlayingFrame(){return this._inFrame||!!this._nextFrame}setFullScreen(t){let e=Promise.resolve();return t!==this._isFullScreen?(this._container&&(e=t?xD(this._container):bD()),e.then(()=>new Promise(i=>{this.setTimeout(()=>{this._isFullScreen=hg(),i(void 0)},yD)}))):e}isFullScreen(){return hg()}debounceBeforeFrame(t){let e=!1,i=[];const n=()=>{const s=i;e=!1,i=[],t(),s.forEach(r=>r())};return()=>new Promise(s=>{i.push(s),e||(e=!0,this.beforeNextFrame().then(n))})}destroy(){this._resizeObserver.disconnect(),cD(),this.detachFromDom(),this.clearAllTimeouts(),this.stopFrames()}};function hg(){return typeof document<"u"&&!!(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}function xD(t){return hg()?Promise.resolve():t.requestFullscreen?t.requestFullscreen():t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?Promise.resolve(t.webkitRequestFullScreen()):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():Promise.resolve()}function bD(){return hg()?typeof document>"u"?Promise.resolve():document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?Promise.resolve(document.webkitCancelFullScreen()):document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():Promise.resolve():Promise.resolve()}var ED=class extends li{constructor(){super(...arguments),this._nodeChanges=[],this._edgeChanges=[],this._shouldTriggerEvents=!1}onMounted(){this._nodeDataList=this._modules.graph.createAttribute(!0,{name:"data",storage:"any"},!1),this._edgeDataList=this._modules.graph.createAttribute(!1,{name:"data",storage:"any"},!1),this._nodeList=this._modules.graph.getNodeAttribute("object"),this._edgeList=this._modules.graph.getEdgeAttribute("object"),this._modules.events.register(["setData","updateNodeData","updateEdgeData"]),this._modules.events.on("addNodes",({nodes:t,objects:e})=>this._onAddElements(t,e)).on("addEdges",({edges:t,objects:e})=>this._onAddElements(t,e)).on("beforeNewFrame",()=>{this._shouldTriggerEvents&&(this._shouldTriggerEvents=!1,this._triggerEvents())})}_onAddElements(t,e){const{isNode:i,size:n,_indexes:s}=t,r=this[i?"_nodeDataList":"_edgeDataList"];for(let a=0;a<n;++a)r.set(s[a],e[a].data)}setProperty(t,e,i,{dispatch:n=!1,virtual:s=!1}={}){this._setDataProperty(t.isNode,t._indexes,e,i,n,s),this._modules.events.fire("setData",{elements:t,virtual:s})}getProperty(t,e){return this._getDataProperty(t.isNode,t._indexes,e)}_setDataProperty(t,e,i,n,s,r){s&&typeof n=="function"&&(s=!1);const a=gA(i),u=typeof n=="function",h=t?this._nodeList:this._edgeList,c=t?this._nodeDataList:this._edgeDataList,g=SD(t?this._nodeChanges:this._edgeChanges,a);for(let _=0;_<e.length;++_){const m=e[_];let v=c.get(m);const b=h.get(m),x=s?n[_]:n;let M,N;if(a===null)M=v,N=u?x(b):x,c.set(m,N);else{v==null&&(v={},c.set(m,v));const O=a.length;for(let R=0;R<O;R++){const P=a[R];let F=v[P];R<O-1?(F==null&&(F={},v[P]=F),v=F):(M=F,N=u?x(b):x,v[P]=N)}}g.indexes.push(m),g.previousValues.push(M),g.newValues.push(N),g.virtual=r}this._scheduleEvents()}_getDataProperty(t,e,i,n){const s=gA(i);n||(n=new Array(e.length));const r=t?this._nodeDataList:this._edgeDataList;for(let a=0;a<e.length;++a){const u=e[a];let h,c=r.get(u);if(s!==null&&s.length)if(c==null)h=void 0;else{const g=s.length;for(let _=0;_<g&&c;++_)h=c=c[s[_]]}else h=c;n[a]=h}return n}_scheduleEvents(){this._shouldTriggerEvents=!0,this._modules.dom.refresh()}_triggerEvents(){const t=this._prepareEvtPayload(!0),e=this._prepareEvtPayload(!1);this._modules.events.fire("updateNodeData",t),this._modules.events.fire("updateEdgeData",e)}_prepareEvtPayload(t){const e=t?this._modules.graph.nodeList:this._modules.graph.edgeList,i=t?"_nodeChanges":"_edgeChanges";let n=[];const s=this[i];this[i]=[];const r=[];for(let a=0;a<s.length;++a){const{indexes:u,property:h,newValues:c,previousValues:g,virtual:_}=s[a];n=n.concat(u||[]),t?r.push({property:h,newValues:c,previousValues:g,virtual:_,nodes:e(u)}):r.push({property:h,newValues:c,previousValues:g,virtual:_,edges:e(u)})}return t?{nodes:e(n).dedupe(),isNode:t,changes:r}:{edges:e(n).dedupe(),isNode:t,changes:r}}};function SD(t,e){for(let n=0;n<t.length;++n){const s=t[n],r=s.property;if(e===null&&r===null)return s;if(e&&r&&r.length===e.length){let a=!0;for(let u=0;u<r.length;++u)if(r[u]!==e[u]){a=!1;break}if(a)return s}}const i={property:e&&e.slice(),indexes:[],previousValues:[],newValues:[],nodes:null,virtual:!1,edges:null};return t.push(i),i}function gA(t){return typeof t=="string"?t.split("."):Ir(t)?t:null}var oh=()=>(t,e)=>t[e],ah=()=>(t,e,i)=>{t[e]=i},_A={1:nv(1),2:nv(2),4:nv(4),8:oh(),16:oh(),32:oh(),int8:oh(),int16:oh(),int32:oh(),float:oh(),any:oh()},mA={1:sv(1),2:sv(2),4:sv(4),8:ah(),16:ah(),32:ah(),int8:ah(),int16:ah(),int32:ah(),float:ah(),any:ah()};function nv(t){const e=8/t,i=(1<<t)-1;return(n,s)=>n[s/e|0]>>s%e*t&i}function sv(t){const e=8/t,i=Math.pow(2,t)-1;return(n,s,r)=>{const a=s%e*t,u=s/e|0,h=r<<a,c=255-(i-r<<a);n[u]=n[u]&c|h}}function AD(t,e){return t===void 0&&e!=="any"&&e!=="resource"?0:t}var TD={get(t){return this._getArrayElt(this._buffer,t)},set(t,e){this._setArrayElt(this._buffer,t,e)}},wD={get(t){return this._byIndex[this._getArrayElt(this._buffer,t)]},set(t,e){let i=this._byName[e];i===void 0&&(i=this._nextIndex++,this._byIndex.push(e),this._getElementBitSize()>this._elementSize&&this.increaseElementSize(),this._byName[e]=i),this._setArrayElt(this._buffer,t,i)}},LD=0,Km=class{constructor(t){this._id=LD++,this._initialized=!1;const e=t.name,i=t.storage,n=t.size||0,s=AD(t.default,i),r=Math.max(8,pA(n+1)),a=i==="resource"?1:i;this._name=e,this._storage=i,this._getArrayElt=_A[a],this._setArrayElt=mA[a],this._elementSize=a,this._nbElements=r,this._fallback=null,this._byName=void 0,this._byIndex=void 0,this._nextIndex=void 0,this._defaultValue=s,this._BASE_VALUE=i==="any"?void 0:0,this._methods=TD,this._initialized=!1,this._buffer=null,i==="resource"&&(this._methods=wD,this._byName=Object.create(null),this._byIndex=[],this._nextIndex=1,this._byName[s]=0,this._byIndex.push(s))}getValues(){return Object.keys(this._byName||{})}getName(){return this._name||""}setDefaultValue(t){this._defaultValue=t,this._storage==="resource"&&(this._byName[t]=0,this._byIndex[0]=t)}get(t){return this._get(t)}set(t,e){this._set(t,e)}_get(t){return this._defaultValue}_set(t,e){e!==this._defaultValue&&(this._initialize(),this._set(t,e))}setFallback(t){this._fallback=t,this.get=this._getWithFallback}_getWithFallback(t){const e=this._get(t);return e===void 0&&this._fallback?this._fallback.get(t):e}_initialize(){this._initialized=!0,this._buffer=rv(this._nbElements,this._elementSize),this._get=this._methods.get,this._set=this._methods.set,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(0)}grow(t){const e=pA(t+1);if(!(e<=this._nbElements)){if(this._initialized)if(this._elementSize==="any")for(let i=this._nbElements;i<e;++i)this._buffer.push(this._defaultValue);else{const i=rv(e,this._elementSize);i.set(this._buffer),this._buffer=i,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(this._nbElements)}this._nbElements=e}}increaseElementSize(){const t=this._elementSize;if(typeof t!="number"||t===32)throw new Error("FlexArray: cannot increase element size");const e=2*t,i=_A[e],n=mA[e];if(this._initialized){const s=this._nbElements,r=this._getArrayElt,a=this._buffer,u=rv(s,e);if(t>=8)u.set(a);else for(let h=0;h<s;++h)n(u,h,r(a,h));this._buffer=u}this._elementSize=e,this._getArrayElt=i,this._setArrayElt=n}buffer(){if(!this._buffer)throw new Error("FlexArray: buffer not instantiated");return this._buffer}elementBitSize(){return this._elementSize}capacity(){return this._nbElements}byteSize(){return this._nbElements*this._elementSize/8}isInitialized(){return this._initialized||this._fallback&&this._fallback.isInitialized()}getMultiple(t,e){const i=t.length;e===void 0&&(e=new Array(i));for(let n=0,s=i;n<s;++n)e[n]=this.get(t[n]);return e}fill(t,e){for(let i=0,n=t.length;i<n;++i)this.set(t[i],e)}setMultiple(t,e,i){if(i||!Array.isArray(e)&&!ArrayBuffer.isView(e))for(let n=0,s=t.length;n<s;++n)this.set(t[n],e);else for(let n=0,s=t.length;n<s;++n)this.set(t[n],e[n])}reset(){return this._initialized&&this._reset(0),this}_reset(t){const e=this._storage==="resource"?0:this._defaultValue;if(this._buffer)if(typeof this._elementSize!="number"||this._elementSize>=8)this._buffer.fill(e,t);else{const i=8/this._elementSize;let n=0;for(let s=0;s<i;++s)n<<=this._elementSize,n+=e;if(t===void 0)this._buffer.fill(n);else{const s=t+(8-t%8);for(let r=t;r<s;++r)this._setArrayElt(this._buffer,r,e);this._buffer.fill(n,s/8)}}}_getElementBitSize(){if(this._nextIndex)return Math.pow(2,Math.ceil(Math.log2(Math.log2(this._nextIndex))))}};function pA(t){let e=2;for(;e<t;)e*=2;return e}function rv(t,e){return e==="any"?new Array(t):e==="float"?new Float32Array(t):e==="int8"?new Int8Array(t):e==="int16"?new Int16Array(t):e==="int32"?new Int32Array(t):e===32?new Uint32Array(t):e===16?new Uint16Array(t):new Uint8Array(Math.ceil(t/8*e))}var yA=4,oL=class{constructor(){this._buffer=new Uint32Array(yA),this._capacity=yA,this._size=0,this._busy=!1}isBusy(){return this._busy}markBusy(){return this._busy=!0,this}sliceAndReset(){this._busy=!1;const t=this.slice(0,this._size);return this.reset(),t}reset(){return this._size=0,this}reserve(t){return t>this._capacity&&this._setCapacity(fh(t)),this}_setCapacity(t){const e=new Uint32Array(t);e.set(this._buffer),this._buffer=e,this._capacity=t}push(t){return this._size===this._capacity&&this._setCapacity(2*this._capacity),this._buffer[this._size++]=t,this}pushUnchecked(t){return this._buffer[this._size++]=t,this}slice(t=0,e=this._size){return this._buffer.slice(t,e)}getBuffer(){return this._buffer}getLength(){return this._size}getCapacity(){return this._capacity}setLength(t){return this._size=t,this}isEmpty(){return this._size===0}},vA=class{constructor(t){this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._flexArrays=[],this._defaultValues=[],this._flexArraysByName={},this._indexLists=[],this._name=t?"node":"edge",this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._idFlexArray=new Km({storage:"int32"}),this._idFlexArray.get=e=>this._indexToId[e],this._idFlexArray.getMultiple=e=>{const i=new Array(e.length);for(let n=0;n<e.length;++n)i[n]=this._indexToId[e[n]];return i},this._flexArraysByName.id=this._idFlexArray}addElements(t){const e=[];for(let i=0,n=t.length;i<n;++i){const s=t[i];let r=this._idToIndex[s];r===void 0&&(r=this._getNextIndex(),this._idToIndex[s]=r,this._indexToId[r]=s),e.push(r)}for(const i of this._flexArrays)i.grow(this._nextIndex);for(const i of this._indexLists)i.reserve(this._nextIndex);return new Uint32Array(e)}removeElements(t){for(let e=0,i=t.length;e<i;++e){const n=t[e],s=this._indexToId[n];s!==void 0&&(delete this._idToIndex[s],this._removeIndex(n))}}clear(){this._idToIndex=Object.create(null),this._indexToId=[void 0],this._nextIndex=1,this._freeIndexes=[];for(const t of this._flexArrays)t.reset();for(const t of this._indexLists)t.reset()}has(t){return this._indexToId[t]!==void 0}getIndex(t,e=!1){const i=this._idToIndex[t];if(i===void 0&&e)throw new Error(`${this._name} id "${t}" not found`);return i}createFlexArray(t,e){const{name:i}=t;if(i&&e&&this._flexArraysByName[i])throw new Error(`${this._name} flexArray "${i}" already exists`);let n=t.default;n===void 0&&t.storage!=="any"&&t.storage!=="resource"&&(n=0);const s=this._nextIndex,r={storage:t.storage,size:s,name:i,default:n};let a;return a=(n===void 0&&t.storage!=="any"&&t.storage,new Km(r)),this._flexArrays.push(a),this._defaultValues.push(t.default),i&&e&&(this._flexArraysByName[i]=a),a}getFlexArray(t){return this._flexArraysByName[t]}getAllFlexArrays(){return this._flexArraysByName}createIndexList(){const t=new oL;return t.reserve(this._nextIndex),this._indexLists.push(t),t}getId(t){return this._indexToId[t]}getMaxIndex(){return this._nextIndex-1}_removeIndex(t){this._indexesToBeFreed.push(t)}_getNextIndex(){let t=this._freeIndexes.pop();return t===void 0&&(t=this._nextIndex++),t}freeIndexes(){for(const t of this._indexesToBeFreed)this._indexToId[t]=void 0,this._freeIndexes.push(t);for(let t=0;t<this._flexArrays.length;++t){const e=this._flexArrays[t],i=this._defaultValues[t];for(const n of this._indexesToBeFreed)e.set(n,i)}this._indexesToBeFreed=[]}};function xA(t,e,i={},n={}){const s=Ag(t,e,[i],n);return t.fireEvent("postAddElements",{nodes:e?s:void 0,edges:e?void 0:s,virtual:n&&n.virtual}),s.get(0)}function CD(t,{nodes:e=[],edges:i=[]},n={}){if(t.fireEvent("preAddGraph",{name:"preAddGraph"}),!n.batchSize)return Promise.all([Ag(t,!0,e,n),Ag(t,!1,i,n)]).then(([r,a])=>(t.fireEvent("postAddElements",{nodes:r,edges:a,virtual:n&&n.virtual}),t.fireEvent("postAddGraph",{name:"postAddGraph"}),t.fireEvent("addGraph",{nodes:r,edges:a}),{nodes:r,edges:a}));let s;return jm(t,!0,e,n).then(r=>(s=r,jm(t,!1,i,n))).then(r=>({nodes:s,edges:r})).then(r=>(t.fireEvent("postAddGraph",{name:"postAddGraph"}),t.fireEvent("addGraph",{name:"addGraph"}),r))}function jm(t,e,i,n={}){if(n.batchSize){const s=[];for(let u=0;u<i.length;u+=n.batchSize)s.push(i.slice(u,u+n.batchSize));const r=(u,h)=>{let c;return u.then(g=>(c=g,t.getDom().afterNextFrame())).then(()=>Ag(t,e,h,n)).then(g=>c.concat(g))},a=e?t.nodeList():t.edgeList();return s.reduce(r,Promise.resolve(a)).then(u=>(t.fireEvent("postAddElements",{nodes:e?u:void 0,edges:e?void 0:u,virtual:n&&n.virtual}),u))}return Promise.resolve(Ag(t,e,i,n)).then(s=>(t.fireEvent("postAddElements",{nodes:e?s:void 0,edges:e?void 0:s,virtual:n&&n.virtual}),s))}function Ag(t,e,i,n){const{virtual:s=!1}=n;t.fireEvent("preAddElements",{name:"preAddElements",objects:i,virtual:s,isNode:e});const r=!!n.ignoreInvalid,a=t.storage.fetch(e),u=[],h=[],c=[],g=[],_=new Set;for(const F of i){if(typeof F!="object"||F===null||Array.isArray(F)){if(r)continue;throw new Error(`${F} is not a valid ${e?"node":"edge"}`)}const U=OI(F.id);if(!a.getIndex(U,!1)&&!_.has(U)){if(!e){const V=F,Y=t.getExtremityIndex(U,V.source,0,r),K=t.getExtremityIndex(U,V.target,1,r);if(r&&(!Y||!K))continue;c.push(Y),g.push(K)}h.push(U),u.push(F),_.add(U)}}const m=a.addElements(h);e?t.topology.allocateNodes(m):t.topology.allocateEdges(m,c,g);const v=a.getFlexArray("object"),b=a.getFlexArray("excluded"),x=a.getFlexArray("removed"),M=a.getFlexArray("virtual"),N=e?t.node:t.edge,O=e?t.nodeList:t.edgeList,R=t.getCacheLists(e),P=O(m);for(let F=0;F<m.length;F++){const U=m[F];v.set(U,N(U))}return b.setMultiple(m,0),x.setMultiple(m,0),M.setMultiple(m,s?1:0),R.visible.invalidList(),R.all.invalidList(),R._all.invalidList(),s||R.raw.invalidList(),P.size!==0&&(e?t.fireEvent("addNodes",{virtual:s,objects:u,nodes:P}):t.fireEvent("addEdges",{virtual:s,objects:u,edges:P})),P}var bA=(t,e)=>(t+e)*(t+e+1)/2+e;function zf(t,e){const i=t<e?t:e;return 67108864*i+(t+e-i)}var MD=8,dx=class{constructor(){this._BIG_LIST=255,this._MAX_LIST_SIZE=8,this._capacity=MD,this._buffer=new Uint32Array(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(t){return t===void 0&&(t=this._nextIndex++),t>=this._capacity&&this._reserve(t+1),this._sizes[t]=0,t}get(t){const e=this._sizes[t],i=this._MAX_LIST_SIZE*t;if(e<=this._MAX_LIST_SIZE){this._constList.length=e;for(let n=0,s=e;n<s;++n)this._constList[n]=this._buffer[i+n];return this._constList}if(e===this._BIG_LIST){const n=this._buffer[i];return this._bigLists[n]}throw new Error(`Table: ${t} out of bounds (${e})`)}size(t){const e=this._sizes[t];return e<=this._MAX_LIST_SIZE?e:this._bigLists[this._buffer[t*this._MAX_LIST_SIZE]].length}sizes(t){const e=this._sizes,i=this._bigLists,n=this._buffer,s=this._MAX_LIST_SIZE,r=t.length,a=new Array(r);for(let u=0;u<r;u++){const h=t[u],c=e[h];a[u]=c<=s?c:i[n[h*s]].length}return a}addTo(t,e){const i=this._sizes[t],n=t*this._MAX_LIST_SIZE;if(i<this._MAX_LIST_SIZE)this._buffer[n+i]=e,this._sizes[t]=i+1;else if(i===this._BIG_LIST){const s=this._buffer[n];this._bigLists[s].push(e)}else{const s=new Array(this._MAX_LIST_SIZE);for(let r=0;r<this._MAX_LIST_SIZE;++r)s[r]=this._buffer[n+r];s.push(e),this._bigLists.push(s),this._sizes[t]=this._BIG_LIST,this._buffer[n]=this._bigLists.length-1}return this}removeFrom(t,e){return this.removeFromAndGetSize(t,e),this}removeFromAndGetSize(t,e){const i=this._MAX_LIST_SIZE*t;let n=this._sizes[t];if(n<=this._MAX_LIST_SIZE){for(let s=i,r=i+n;s<r;++s)if(this._buffer[s]===e)return n-=1,this._buffer[s]=this._buffer[r-1],this._sizes[t]=n,n}else if(n===this._BIG_LIST){const s=this._buffer[i],r=this._bigLists[s],a=r.indexOf(e);if(a!==-1)return r.splice(a,1),r.length}throw new Error('topology: Table: "removeFrom" failed, should not happen')}reserve(t){return this._capacity<t&&this._reserve(t),this}_reserve(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=EA(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=EA(this._sizes,this._capacity)}};function EA(t,e){const i=new t.constructor(e);return i.set(t),i}var ND=1,RD=2,OD=3,ID=4,PD=5,zD=6,cx="_visible",fx="_data",dg="_hovered",gx="_hoverExtremityHighlighted",ss="_selected",_x="_selectionExtremityHighlighted",Cm="_dragged",aL="_rewirable",od="_export",lL="_faded",uL="_transparent",DD="_visual_groups",Xg=-1,H_="in",V_="out",ov="both",SA=[ss,Cm,_x,dg,gx,aL,od,lL,uL,DD],hL=2,dL=3,kD=3,FD=4,cL=-1,BD=["hover","zoom","panning","rotation","gesture","drag","selection","tooltip","user","interactions","resizing","rewiring","connectNodes","lasso"],rc=void 0,UD=class{constructor(t){this._neighborTable=new dx,this._parallelTable=new dx,this._parallelEdgesIndex=[],this._hasParallelEdges=new Set,this._fakeDeduper={get:()=>0,set:Ci,reset(){return this}},this._fakeInvertedDeduper={get:()=>1,set:Ci,reset(){return this}},this._graph=t,this.nodeDeduper=t.createNodeAttribute({storage:1},!1),this.edgeDeduper=t.createEdgeAttribute({storage:1},!1),this._sourceList=t.getEdgeAttribute("source"),this._targetList=t.getEdgeAttribute("target")}getAdjacentDirections(t){return this._neighborTable.get(t)}getEdgeIndexesInDirection(t){return this._parallelTable.get(t)}allocateNodes(t){this._neighborTable.reserve(t.length);for(let e=0;e<t.length;++e)this._neighborTable.addEntry(t[e])}allocateEdges(t,e,i){this._parallelTable.reserve(Math.floor(t.length/2));for(let n=0;n<t.length;n++){const s=t[n],r=e[n],a=i[n];this._sourceList.set(s,r),this._targetList.set(s,a),this.addToAdjacencyList(s)}}getExtremity(t,e){const i=t?this._sourceList:this._targetList;if(e.isList){const n=this._graph.acquireIndexList(!0);for(let s=0;s<e._indexes.length;s++)n.push(i.get(e._indexes[s]));return this._graph.nodeList(n.sliceAndReset())}return this._graph.getObjectList(!0).get(i.get(e._index))}setExtremities(t,e,i){for(let n=0;n<t.length;++n)this.removeFromAdjacencyList(t[n]);e!==null&&this._sourceList.setMultiple(t,e),i!==null&&this._targetList.setMultiple(t,i);for(let n=0;n<t.length;++n)this.addToAdjacencyList(t[n])}addToAdjacencyList(t){const e=this._sourceList.get(t),i=this._targetList.get(t),n=zf(e,i);let s=this._parallelEdgesIndex[n];if(s===rc)s=this._parallelTable.addEntry(),this._parallelEdgesIndex[n]=s,this._neighborTable.addTo(e,s),e!==i&&this._neighborTable.addTo(i,s);else{this._hasParallelEdges.add(t);const r=this._parallelTable.get(+s);if(r)for(const a of r)this._hasParallelEdges.add(a)}this._parallelTable.addTo(s,t)}hasParallelEdges(t){return this._hasParallelEdges.has(t)}removeFromAdjacencyList(t){const e=this._sourceList.get(t),i=this._targetList.get(t),n=zf(e,i),s=this._parallelEdgesIndex[n];s!==rc&&this._parallelTable.removeFromAndGetSize(s,t)===0&&(this._neighborTable.removeFrom(e,s),e!==i&&this._neighborTable.removeFrom(i,s),this._parallelEdgesIndex[n]=rc,this._hasParallelEdges.delete(t))}getParallelEdges(t,e={}){const i=e.filter||"visible",n=this._graph.acquireIndexList(!1),s=this._graph.getFilter(!1,i);for(let r=0;r<t._indexes.length;r++){const a=t._indexes[r],u=zf(this._sourceList.get(a),this._targetList.get(a)),h=this._parallelEdgesIndex[u];if(h!==rc){const c=this._parallelTable.get(+h);if(c)for(const g of c)s(g)&&n.push(g)}}return this._graph.edgeList(n.sliceAndReset())}fastGetNodesAdjacentElements(t){const e=this._graph.acquireIndexList(!0),i=this._graph.acquireIndexList(!1),n=this._sourceList,s=this._targetList;for(let r=0;r<t.length;r++){const a=t[r],u=this._neighborTable.get(a);for(const h of u){const c=this._parallelTable.get(h),g=c[0],_=n.get(g),m=s.get(g);if(_!==0&&m!==0){e.push(_+m-a);for(const v of c)i.push(v)}}}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(i.sliceAndReset())}}fastGetEdgesAdjacentElements(t){const e=this._graph.acquireIndexList(!0),i=this._graph.acquireIndexList(!1),n=this._sourceList,s=this._targetList;for(let r=0;r<t.length;r++){const a=t[r],u=n.get(a),h=s.get(a),c=zf(u,h),g=this._parallelEdgesIndex[c];if(g!==rc){const _=this._parallelTable.get(+g);if(_)for(const m of _)i.push(m)}e.push(u),e.push(h)}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(i.sliceAndReset())}}getDeduper(t){return(t?this.nodeDeduper:this.edgeDeduper).reset()}collectAdjacentEdges(t,e,i,n=!1,s=!1){const r=e===H_,a=!(e===V_||r||s),u=this._graph.acquireIndexList(!1),h=this._graph.getFilter(!1,i),c=n?this.getDeduper(!1):this._fakeDeduper;let g=this._fakeInvertedDeduper;const _=this._sourceList,m=this._targetList;if(s){g=this.getDeduper(!0);for(let v=0;v<t.length;v++)g.set(t[v],1)}for(let v=0;v<t.length;v++){const b=t[v],x=this._neighborTable.get(b);for(const M of x){const N=this._parallelTable.get(M);if(a)for(const O of N)h(O)&&c.get(O)===0&&(u.push(O),c.set(O,1));else for(const O of N){const R=_.get(O),P=m.get(O),F=R+P-b;r!==(P===b)&&R!==P||!h(O)||c.get(O)!==0||g.get(F)!==1||(u.push(O),c.set(O,1))}}}return u.sliceAndReset()}collectAdjacentNodes(t,e,i,n=!1,s,r){const a=e!==H_,u=e!==V_,h=this._graph.acquireIndexList(!0),c=this._graph.getFilter(!1,i),g=n?this.getDeduper(!0):this._fakeDeduper,_=this._sourceList,m=this._targetList;if(s)for(let v=0;v<s.length;v++){const b=s[v];h.push(b),g.set(b,1)}if(r)for(let v=0;v<r.length;v++){const b=r[v];g.set(b,1)}for(let v=0;v<t.length;v++){const b=t[v],x=this._neighborTable.get(b);for(const M of x){const N=this._parallelTable.get(M);for(const O of N)if(c(O)){const R=_.get(O),P=m.get(O),F=R+P-b;if((u&&b===P||a&&b===R)&&g.get(F)===0){h.push(F),g.set(F,1);break}}}}return h.sliceAndReset()}getAdjacentElements(t,e,i={}){const n=i.direction||ov,s=i.filter||"visible",r=i.policy||"union",a=!!i.bothExtremities;if(t){const u=r==="include-sources"?e:null,h=r==="exclude-sources"?e:null;return this.collectAdjacentNodes(e,n,s,!0,u,h)}return this.collectAdjacentEdges(e,n,s,!0,a)}getEdgesBetweenTwoNodes(t,e){const i=zf(t,e),n=this._parallelEdgesIndex[i];if(n===rc)return new Uint32Array;const s=this._parallelTable.get(+n);return new Uint32Array(s)}getConnectedComponents(t,{filter:e="visible",returnIds:i=!1,internalIndexes:n=!1}={}){const s=this._graph,r=[],a={},u=s.acquireIndexList(!0);let h;typeof e=="string"?h=s.getFilter(!0,e):(h=e,e="visible");for(let _=0;_<t.length;_++){const m=t[_];h(m)&&u.push(m)}const c=u.sliceAndReset(),g={filter:e};for(let _=0;_<c.length;_++){const m=c[_];if(!a[m]){const v=[m],b=[];for(;v.length!==0;){const x=v.pop();!a[x]&&h(x)&&(v.push.apply(v,this.getAdjacentElements(!0,new Uint32Array([x]),g)),a[x]=!0,b.push(x))}b.length>0&&r.push(b)}}if(i){const _=s.getNodeAttribute("id");for(let m=0;m<r.length;m++)r[m]=_.getMultiple(r[m])}else if(!n)for(let _=0;_<r.length;_++)r[_]=s.nodeList(new Uint32Array(r[_]));return r}getAdjacencyList({directed:t,ids:e,weight:i,nodes:n}){const s=t?V_:ov,r=new Array(n.length),a=this._graph;for(let b=0;b<n.length;++b)r[b]=this.collectAdjacentEdges(new Uint32Array([n[b]]),s,"all");const u=a.getEdgeAttribute("source"),h=a.getEdgeAttribute("target"),c=a.getEdgeAttribute("width"),g=a.getNodeAttribute("id"),_=[],m=typeof i=="number",v=typeof i!="function"&&!m&&!!i;for(let b=0;b<r.length;b++){const x=r[b],M=n[b],N=x.length,O=e?new Array(N):new Uint32Array(N),R=new Array(N);for(let F=0;F<N;F++){const U=x[F],V=u.get(U),Y=h.get(U);let K=t||M===V?Y:V;if(e&&(K=g.get(K)),O[F]=K,i){if(m&&(R[F]=i),typeof i=="function"){const tt=a.getNode(V),j=a.getNode(Y);R[F]=i(tt,j)}v&&(R[F]=c.get(U)||1)}}const P={nodes:O,id:e?g.get(M):M,...i&&{weights:R}};_.push(P)}return _}degrees(t,e){if(e!==H_&&e!==V_)return this._neighborTable.sizes(t);const i=new Array(t.length),n=e===H_;for(let s=0,r=t.length;s<r;s++)i[s]=this._degree(t[s],n);return i}_degree(t,e){const i=this._neighborTable.get(t),n=this._sourceList,s=this._targetList;let r=0;for(let a=0;a<i.length;++a){const u=this._parallelTable.get(i[a]);for(let h=0;h<u.length;++h){const c=u[h],g=n.get(c),_=s.get(c);if(e&&_===t||!e&&g===t){r+=1;break}}}return r}getDegree(t,e){const{direction:i,filter:n}=this._getDegreeOptions(e),s=new Array(t.length),r=new Uint32Array(1);for(let a=0;a<t.length;++a)r[0]=t[a],s[a]=this.collectAdjacentNodes(r,i,n).length;return s}_getDegreeOptions(t){const e={direction:ov,filter:"visible"};return typeof t=="string"?e.direction=t:t&&(typeof t.direction=="string"&&(e.direction=t.direction),typeof t.filter=="string"&&(e.filter=t.filter)),e}},GD=class extends li{constructor(){super(...arguments),this.storage={nodes:new vA(!0),edges:new vA(!1),fetch(t){return t?this.nodes:this.edges}},this._promisesToResolve=[],this._nodeIndexLists=[],this._edgeIndexLists=[],this._onNewFrame=()=>{this.storage.nodes.freeIndexes(),this.storage.edges.freeIndexes()}}onMounted(){this._modules.events.register(["preAddElements","postAddElements","addNodes","addEdges","preAddGraph","postAddGraph","addGraph","excludedStateChange","clearGraph","afterRemoveNodes","beforeRemoveNodes","requestElementsToDelete","removeNodes","beforeRemoveEdges","afterRemoveEdges","removeEdges"]),[{name:"excluded",storage:1,default:1},{name:"removed",storage:1,default:1},{name:"virtual",storage:1,default:0}].forEach(t=>{this.createNodeAttribute(t,!0),this.createEdgeAttribute(t,!0)}),this.node=this._ogma.node,this.edge=this._ogma.edge,this.nodeList=this._ogma.nodeList,this.edgeList=this._ogma.edgeList,this._nodes=this.createAttribute(!0,{name:"object",storage:"any"},!0),this._edges=this.createAttribute(!1,{name:"object",storage:"any"},!0),this.createAttribute(!1,{name:"source",storage:32},!0),this.createAttribute(!1,{name:"target",storage:32},!0),this._nodeFilters=TS(this.storage.nodes),this._edgeFilters=TS(this.storage.edges),this._initialize(),this._modules.events.on("frame",this._onNewFrame)}onReady(t){if(t.graph){const{nodes:e,edges:i}=t.graph;e&&this.addNodes(e),i&&this.addEdges(i)}}createIndexList(t){return this.storage.fetch(t).createIndexList()}getDom(){return this._modules.dom}acquireIndexList(t){const e=t?this._nodeIndexLists:this._edgeIndexLists;let i=e.find(n=>!n.isBusy());return i||(i=this.createIndexList(t),e.push(i)),i.markBusy(),i}getObjectList(t){return t?this._nodes:this._edges}getListFactory(t){return t?this.nodeList:this.edgeList}getStorage(t){return t?this.storage.nodes:this.storage.edges}getFilter(t,e){const i=t?this._nodeFilters:this._edgeFilters;return i[e]||i.visible}fireEvent(t,e){this._modules.events.fire(t,e)}getCacheLists(t){return t?this._nodeCacheLists:this._edgeCacheLists}_resolvePromises(){const t=this._promisesToResolve;this._promisesToResolve=[],t.forEach(e=>e())}_initialize(){this._nodeCacheLists=wS(()=>this.getNodeMaxIndex(),()=>this.acquireIndexList(!0),this._nodeFilters),this._edgeCacheLists=wS(()=>this.getEdgeMaxIndex(),()=>this.acquireIndexList(!1),this._edgeFilters),this.topology=new UD(this),this._resolvePromises()}getNodeMaxIndex(){return this.storage.nodes.getMaxIndex()}getEdgeMaxIndex(){return this.storage.edges.getMaxIndex()}isExcluded(t){return this.storage.fetch(t.isNode).getFlexArray("excluded").getMultiple(t._indexes)}setExcluded(t,e){const i=e?1:0,n=t.isNode,s=this.storage.fetch(n),r=s.getFlexArray("excluded"),a=s.getFlexArray("removed"),u=this.acquireIndexList(n),h=this.getListFactory(n);for(let g=0;g<t._indexes.length;g++){const _=t._indexes[g],m=r.get(_),v=a.get(_);i!==m&&v===0&&u.push(_)}const c=u.sliceAndReset();if(c.length){this.getCacheLists(t.isNode).visible.invalidList();const g=h(c);r.setMultiple(c,i),this._modules.events.fire("excludedStateChange",{elements:g,value:e})}}addNode(t,e){return xA(this,!0,t,e)}addEdge(t,e){return xA(this,!1,t,e)}addNodes(t,e){return jm(this,!0,t,e)}addEdges(t,e){return jm(this,!1,t,e)}addGraph(t,e){return CD(this,t,e)}getExtremityIndex(t,e,i,n){if(e instanceof al)return e._index;{const s=this.storage.nodes.getIndex(e);if(!s&&!n)throw new Error(`addEdge(s): invalid ${i===0?"source":"target"} for edge "${t}"; node "${e}" does not exist`);return s}}getNodes(t){return this.getElements(!0,t)}getEdges(t){return this.getElements(!1,t)}getElements(t,e){const i=t?this.nodeList:this.edgeList,n=t?wu:Ed,s=t?al:vh;if(e&&typeof e!="string"){const r=this.acquireIndexList(t),a=this.storage.fetch(t);if(e instanceof s)r.push(e._index);else if(Ir(e)){const u=e;for(const h of u)if(h instanceof s)r.push(h._index);else{const c=a.getIndex(h);c&&r.push(c)}}else if(e instanceof n){const u=this.getFilter(t,"all"),h=e;for(let c=0;c<h._indexes.length;c++){const g=h._indexes[c];u(g)&&r.push(g)}}return i(r.sliceAndReset())}{const r=e||"visible",a=this.getCacheLists(t)[r];if(!a)throw new Error(`getNodes/getEdges: unexpected argument "${r}"`);return i(a.getList())}}getNode(t){return this._getElement(!0,t)}getEdge(t){return this._getElement(!1,t)}_getElement(t,e){if(e instanceof(t?al:vh))return e;const i=this.getStorage(t),n=this.getObjectList(t),s=i.getIndex(e);return s?n.get(s):void 0}clear(){this._modules.events.fire("clearGraph",{nodes:this.getNodes("all"),edges:this.getEdges("all")}),this.storage.nodes.clear(),this.storage.edges.clear(),this._initialize()}createAttribute(t,e,i=!1){return this.storage.fetch(t).createFlexArray(e,i)}createNodeAttribute(t,e){return this.createAttribute(!0,t,e)}createEdgeAttribute(t,e){return this.createAttribute(!1,t,e)}getAttribute(t,e){return this.storage.fetch(t).getFlexArray(e)}getAttributes(t,e){return e.map(i=>this.getAttribute(t,i))}getNodeAttribute(t){return this.storage.nodes.getFlexArray(t)}getNodeAttributes(t){return this.getAttributes(!0,t)}getEdgeAttribute(t){return this.storage.edges.getFlexArray(t)}getEdgeAttributes(t){return this.getAttributes(!1,t)}getAllNodeAttributes(){return this.storage.nodes.getAllFlexArrays()}getAllEdgeAttributes(){return this.storage.edges.getAllFlexArrays()}setSource(t,e){const i=this.getNode(e);i&&this.topology.setExtremities(t._indexes,i._indexes,null)}setTarget(t,e){const i=this.getNode(e);i&&this.topology.setExtremities(t._indexes,null,i._indexes)}getParallelEdges(t,e={}){return this.topology.getParallelEdges(t,e)}hasParallelEdges(t){return this.topology.hasParallelEdges(t._index)}getEdgesBetweenTwoNodes(t,e){return this.edgeList(this.topology.getEdgesBetweenTwoNodes(t._index,e._index))}getAdjacentDirections(t){return this.topology.getAdjacentDirections(t)}getEdgeIndexesInDirection(t){return this.topology.getEdgeIndexesInDirection(t)}fastGetNodesAdjacentElements(t){const e=this._ogma.getNodes();let i=!1;if(e.size===t.size){const n=new Set(t._indexes);for(let s=0;s<e.size;s++)n.delete(e._indexes[s]);i=n.size===0}return i?{nodes:e,edges:this._ogma.getEdges()}:this.topology.fastGetNodesAdjacentElements(t._indexes)}fastGetEdgesAdjacentElements(t){const e=this._ogma.getEdges();let i=!1;if(e.size===t.size){const n=new Set(t._indexes);for(let s=0;s<e.size;s++)n.delete(e._indexes[s]);i=n.size===0}return i?{nodes:this._ogma.getNodes(),edges:e}:this.topology.fastGetEdgesAdjacentElements(t._indexes)}getAdjacentNodes(t,e){return this.nodeList(this.topology.getAdjacentElements(!0,t._indexes,e))}getAdjacentEdges(t,e){return this.edgeList(this.topology.getAdjacentElements(!1,t._indexes,e))}getDegree(t,e){return this.topology.getDegree(t._indexes,e)}degrees(t,e){return this.topology.degrees(t,e)}getAdjacencyList({directed:t=!1,internalIndexes:e=!1,weight:i=1,nodes:n,indexes:s}={}){return this.topology.getAdjacencyList({directed:t,weight:i,ids:!e,nodes:s||this.getNodes(n)._indexes})}getConnectedComponents(t,e){return this.topology.getConnectedComponents(t._indexes,e)}getConnectedComponentByNode(t,e){return this.topology.getConnectedComponents(t._indexes,e)}},I0=512,P0=128,fL=Math.round(Math.log2(I0)),z0=Math.round(Math.log2(P0)),HD=fL+z0,vc=255,VD=32767,gL=65535,Y_=16384,mx=15,xc=3,Jm=15,Mm=32,dh=128,px=8,yx=1/16,vx=Math.round(Math.sqrt(Jm+1)),xx=dh*vx,to=16,xh=1,el=256,YD=128,XD=128,$m=1.5,_L=1,Ic=56,ZD=16,WD=2*Ic+ZD,Nm=6,mL=3,pL=3,Po=41,Mp=5,tp=5,yL=.9721,Tg=24,qD=1.4142,QD=/^rgba?\((\d+),?\s*(\d+),?\s*(\d+),?\s*((\d+)?\.?\d+)*\)$/;function D0(t,e=[0,0,0,0]){const i=QD.exec(t);return i?(e[0]=parseInt(i[1])/255,e[1]=parseInt(i[2])/255,e[2]=parseInt(i[3])/255,e[3]=i[4]===void 0?1:parseFloat(i[4]),e):null}function Rm(t){return t<16?"0"+t.toString(16):t.toString(16)}function vL([t,e,i,n=1]){return`rgba(${256*t|0},${256*e|0},${256*i|0},${n})`}function k0(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(i,n,s,r)=>n+n+s+s+r+r);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1]:null}var av=["AliceBlue","#F0F8FF","AntiqueWhite","#FAEBD7","Aqua","#00FFFF","Aquamarine","#7FFFD4","Azure","#F0FFFF","Beige","#F5F5DC","Bisque","#FFE4C4","Black","#000000","BlanchedAlmond","#FFEBCD","Blue","#0000FF","BlueViolet","#8A2BE2","Brown","#A52A2A","BurlyWood","#DEB887","CadetBlue","#5F9EA0","Chartreuse","#7FFF00","Chocolate","#D2691E","Coral","#FF7F50","CornflowerBlue","#6495ED","Cornsilk","#FFF8DC","Crimson","#DC143C","Cyan","#00FFFF","DarkBlue","#00008B","DarkCyan","#008B8B","DarkGoldenRod","#B8860B","DarkGray","#A9A9A9","DarkGrey","#A9A9A9","DarkGreen","#006400","DarkKhaki","#BDB76B","DarkMagenta","#8B008B","DarkOliveGreen","#556B2F","DarkOrange","#FF8C00","DarkOrchid","#9932CC","DarkRed","#8B0000","DarkSalmon","#E9967A","DarkSeaGreen","#8FBC8F","DarkSlateBlue","#483D8B","DarkSlateGray","#2F4F4F","DarkSlateGrey","#2F4F4F","DarkTurquoise","#00CED1","DarkViolet","#9400D3","DeepPink","#FF1493","DeepSkyBlue","#00BFFF","DimGray","#696969","DimGrey","#696969","DodgerBlue","#1E90FF","FireBrick","#B22222","FloralWhite","#FFFAF0","ForestGreen","#228B22","Fuchsia","#FF00FF","Gainsboro","#DCDCDC","GhostWhite","#F8F8FF","Gold","#FFD700","GoldenRod","#DAA520","Gray","#808080","Grey","#808080","Green","#008000","GreenYellow","#ADFF2F","HoneyDew","#F0FFF0","HotPink","#FF69B4","IndianRed","#CD5C5C","Indigo","#4B0082","Ivory","#FFFFF0","Khaki","#F0E68C","Lavender","#E6E6FA","LavenderBlush","#FFF0F5","LawnGreen","#7CFC00","LemonChiffon","#FFFACD","LightBlue","#ADD8E6","LightCoral","#F08080","LightCyan","#E0FFFF","LightGoldenRodYellow","#FAFAD2","LightGray","#D3D3D3","LightGrey","#D3D3D3","LightGreen","#90EE90","LightPink","#FFB6C1","LightSalmon","#FFA07A","LightSeaGreen","#20B2AA","LightSkyBlue","#87CEFA","LightSlateGray","#778899","LightSlateGrey","#778899","LightSteelBlue","#B0C4DE","LightYellow","#FFFFE0","Lime","#00FF00","LimeGreen","#32CD32","Linen","#FAF0E6","Magenta","#FF00FF","Maroon","#800000","MediumAquaMarine","#66CDAA","MediumBlue","#0000CD","MediumOrchid","#BA55D3","MediumPurple","#9370DB","MediumSeaGreen","#3CB371","MediumSlateBlue","#7B68EE","MediumSpringGreen","#00FA9A","MediumTurquoise","#48D1CC","MediumVioletRed","#C71585","MidnightBlue","#191970","MintCream","#F5FFFA","MistyRose","#FFE4E1","Moccasin","#FFE4B5","NavajoWhite","#FFDEAD","Navy","#000080","OldLace","#FDF5E6","Olive","#808000","OliveDrab","#6B8E23","Orange","#FFA500","OrangeRed","#FF4500","Orchid","#DA70D6","PaleGoldenRod","#EEE8AA","PaleGreen","#98FB98","PaleTurquoise","#AFEEEE","PaleVioletRed","#DB7093","PapayaWhip","#FFEFD5","PeachPuff","#FFDAB9","Peru","#CD853F","Pink","#FFC0CB","Plum","#DDA0DD","PowderBlue","#B0E0E6","Purple","#800080","RebeccaPurple","#663399","Red","#FF0000","RosyBrown","#BC8F8F","RoyalBlue","#4169E1","SaddleBrown","#8B4513","Salmon","#FA8072","SandyBrown","#F4A460","SeaGreen","#2E8B57","SeaShell","#FFF5EE","Sienna","#A0522D","Silver","#C0C0C0","SkyBlue","#87CEEB","SlateBlue","#6A5ACD","SlateGray","#708090","SlateGrey","#708090","Snow","#FFFAFA","SpringGreen","#00FF7F","SteelBlue","#4682B4","Tan","#D2B48C","Teal","#008080","Thistle","#D8BFD8","Tomato","#FF6347","Turquoise","#40E0D0","Violet","#EE82EE","Wheat","#F5DEB3","White","#FFFFFF","WhiteSmoke","#F5F5F5","Yellow","#FFFF00","YellowGreen","#9ACD32"],Df=[0,0,0,0],wg=new Map;wg.set(null,[0,0,0,0]),wg.set("transparent",[0,0,0,0]);for(let t=0;t<av.length;t+=2){const e=av[t].toLowerCase(),i=av[t+1];wg.set(e,k0(i))}var io=t=>{let e=wg.get(t);if(e===void 0){const i=t+"",n=i.charAt(0)==="#"?k0(i):D0(i);wg.set(t,n),e=n}return e},bx=t=>{const e=io(t);if(!e)return null;const[i,n,s]=e;return`#${Rm(255*i)}${Rm(255*n)}${Rm(255*s)}`},cc=t=>{let e=1,i=t;return i&&D0(t,Df)&&(i=`rgb(${255*+Df[0]},${255*+Df[1]},${255*+Df[2]})`,e=parseFloat(Df[3].toString())),{color:i,opacity:e}},Zg=class{on(t,e){if(typeof t!="string")throw new TypeError("Event name must be string");if(typeof e!="function")throw new TypeError("Event handler must be function");const i=this._events=this._events||{};return(i[t]=i[t]||[]).push(e),this}off(t,e){if(typeof t!="string")throw new TypeError("Event name must be string");const i=this._events=this._events||{},n=i[t];if(Ir(n))if(typeof e!="function")i[t]=null;else{const s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length===0&&(i[t]=null)}return this}fire(t,...e){if(typeof t!="string")throw new TypeError("Event name must be string");const i=(this._events=this._events||{})[t];if(Ir(i)){const n=e;for(let s=0;s<i.length;s++){const r=i[s];r&&r.apply(this,n)}}return this}once(t,e){const i=this,n=function(...s){e.apply(i,s),i.off(t,n)};return n.handler=e,this.on(t,n)}hasListener(t,e){if(!t||!e)return!1;const i=(this._events=this._events||{})[t];if(Ir(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];if(r===e||r.handler===e)return!0}return!1}clearEvents(){this._events={}}getListeners(t){return(this._events=this._events||{})[t]}};function xL(t){if(t.keys)return Array.from(t.keys());const e=[];return t.forEach((i,n)=>e.push(n)),e}function bL(t){if(t.values)return Array.from(t.values());const e=[];return t.forEach(i=>e.push(i)),e}var EL=class{constructor(){this._map=new Map}reset(){this._map.clear()}set(t,e,i){this._map.set(bA(t,e),i)}get(t,e){return this._map.get(bA(t,e))}},KD=class{constructor({elementSize:t,sideElementSize:e,nbSideElementsPerMainElement:i,id:n,depth:s,elementType:r,animated:a,stencilUsage:u}){this._nbCellsAllocated=0,this._nbCellsFreed=0,this._isFullyAllocated=!1,this._isFullyFreed=!1,this._mustUpdate=!0,this._capacity=I0,this.version=0,this._id=n,this.depth=s,this.type=r,this.animated=a,this.stencilUsage=u,this.elementSize=t,this._nbSideElementsPerMainElement=i,this._totalSideElementsSize=i*e,this._byteCapacity=this._capacity*this.elementSize,this._byteArray=new Uint8Array(this._byteCapacity),this._dataView=new DataView(this._byteArray.buffer),this._sideByteCapacity=this._capacity*this._totalSideElementsSize,this._sideByteArray=new Uint8Array(this._sideByteCapacity),this._sideDataView=new DataView(this._sideByteArray.buffer)}update(){this._mustUpdate&&(this.version+=1,this._mustUpdate=!1,this._isFullyAllocated&&this._nbCellsFreed===this._nbCellsAllocated&&(this._isFullyFreed=!0))}allocate(t){let e=-1;return!this._isFullyAllocated&&this._nbCellsAllocated+t<=this._capacity?(e=this._nbCellsAllocated,this._nbCellsAllocated+=t,this._mustUpdate=!0):this._isFullyAllocated=!0,e}free(t,e){for(let i=0;i<e;i++){const n=(t+i)*this.elementSize;this._dataView.setUint16(n,0)}this._mustUpdate=!0,this._nbCellsFreed+=e}triggerUpdate(){this._mustUpdate=!0}isEmpty(){return this._nbCellsFreed===this._nbCellsAllocated}isFullyFreed(){return this._isFullyFreed}getId(){return this._id}getDataView(){return this._dataView}getByteArray(){return this._byteArray}getSize(){return this._nbCellsAllocated}getNbSideElementsPerMainElement(){return this._nbSideElementsPerMainElement}hasSideData(){return this._nbSideElementsPerMainElement>0}getSideDataView(){return this._sideDataView}getSideByteArray(){return this._sideByteArray}getTotalSideElementsSize(){return this._totalSideElementsSize}},AA=8,jD=class{constructor(){this.version=0,this.version=0,this._blockInfo={buffer:null,offset:0,size:0,address:0},this._init_()}reset(){this._init_()}_init_(){this._buffersByDepth=new Array(100),this._buffersById=[],this._buffersByAscendingDepth=[],this._buffersByDescendingDepth=[],this._mustUpdate=!0}_fillBlockInfo(t,e,i,n){return this._blockInfo.buffer=t,this._blockInfo.offset=e,this._blockInfo.size=i,this._blockInfo.address=n,this._blockInfo}_createBuffer(t,e,i,n,s){const r=e?WD:Ic,a=this._buffersById.length,u=new KD({elementSize:r,sideElementSize:Nm,nbSideElementsPerMainElement:n,id:a,depth:i,elementType:t,animated:e,stencilUsage:s});return this._buffersById.push(u),u}getBlockInfo(t){return this._fillBlockInfo(this._buffersById[t>>HD],(t>>z0)%I0,t%P0,t)}allocateBlock(t,e,i,n,s,r,a){const u=$D(r,AA);this._mustUpdate=!0;let h=null,c=-1;if(t){const _=this.getBlockInfo(t),m=_.buffer,v=_.offset,b=_.size,x=_.size===s,M=m.depth===n,N=m.type===e,O=m.animated===i,R=m.getNbSideElementsPerMainElement()===u,P=m.stencilUsage===a;x&&M&&N&&O&&R&&P?(m.triggerUpdate(),h=m,c=v):m.free(v,b)}if(c===-1){const _=+i,m=u/AA,v=this._buffersByDepth[n]||Array(2);this._buffersByDepth[n]=v;const b=v[_]||[];v[_]=b;const x=b[e]||Array(16);b[e]=x;const M=x[m]||Array(4);x[m]=M;const N=M[a]||[];M[a]=N;const O=N[N.length-1];O&&(h=O,c=O.allocate(s)),c===-1&&(h=this._createBuffer(e,i,n,u,a),c=h.allocate(s),N.push(h))}const g=JD(h.getId(),c,s);return this._fillBlockInfo(h,c,s,g)}freeBlock(t){if(t){this._mustUpdate=!0;const e=this.getBlockInfo(t);e.buffer.free(e.offset,e.size)}return 0}_sortBuffersByDepth(){const t=[];for(let e=0;e<this._buffersByDepth.length;e++){const i=this._buffersByDepth[e];if(i)for(let n=0;n<i.length;n++){const s=i[n];if(s)for(let r=0;r<s.length;r++){const a=s[r];if(a)for(let u=0;u<a.length;u++){const h=a[u];if(h)for(let c=0;c<h.length;c++){const g=h[c];if(g)for(let _=0;_<g.length;_++){const m=g[_];m.update(),m.isFullyFreed()?(this._buffersById[m.getId()]=void 0,g.splice(_,1),_-=1):t.push(m)}}}}}}this._buffersByAscendingDepth=t,this._buffersByDescendingDepth=t.slice().reverse()}update(){this._mustUpdate&&(this._sortBuffersByDepth(),this.version+=1,this._mustUpdate=!1)}getBuffers(){return this._buffersById}getBuffersByAscendingDepth(){return this._buffersByAscendingDepth}getBuffersByDescendingDepth(){return this._buffersByDescendingDepth}};function JD(t,e,i){return((t<<fL)+e<<z0)+i}function $D(t,e){let i=0;for(;i<t;)i+=e;return i}var ol=1,fd=2,ep=3,no=1,ph=2,ad=3,Wg=4,gd=5,_d=6,bh=7,Pa=1,Np=2,F0=3,B0=4,id=5,ld=6,Tc=1,SL=2,AL=3;function TA(){return{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:no,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,bentEnable:!1,bentVertical:!1}}function wA(t={}){return t.pieceId=0,t.shape="",t.x1=0,t.y1=0,t.x2=0,t.y2=0,t.rectWidthOrSourceRadiusScaled=0,t.rectWidthOrSourceRadiusFixed=0,t.rectHeightOrTargetRadiusScaled=0,t.rectHeightOrTargetRadiusFixed=0,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern=t.pattern||{type:no,attributes:{}},t.pattern.type=no,t.opacity=1,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1,t.isSelfLoop=!1,t.isText=!1,t.adjustTextAngle=!1,t.isBadge=!1,t.bentEnable=!1,t.bentVertical=!1,t}function tk(t={}){return t.duration=0,t.beginTime=-1,t.easing="linear",t}function U0(){return{valid:!1,id:void 0,end:TA(),start:TA(),animation:{duration:0,beginTime:-1,easing:"linear"}}}function TL(t,e,i,n){t.width=e*n,t.height=i*n,bd(t,`${e}px`,`${i}px`)}function ek(t){return 1/(1+Math.exp(-t))}var ik=class{constructor(){this._capacity=P0,this._id=0,this.size=0,this.depth=0,this.animated=!1,this.stencilUsage=Tc,this.type=ol,this._list=Array(this._capacity);for(let t=0;t<this._capacity;++t)this._list[t]=U0()}reset(t,e,i,n){return this.type=t,this.animated=e,this.depth=i,n!==void 0&&(this._id=n),this.stencilUsage=Tc,this.size=0,this}next(){if(this.size>=this._capacity)throw new Error("internal error: block.next() was called on a full block");return this._list[this.size++]}nextAndReset(){const t=this.next();return t.end=wA(t.end),t.start=wA(t.start),t.animation=tk(t.animation),t}forEach(t){this._list.forEach(t)}getElement(t){return this._list[t]}getCurrentElement(){return this._list[this.size-1]}getElements(){return this._list}getId(){return this._id}setGlobalAnimation(t,e,i){for(let n=0;n<this.size;++n){const s=this._list[n].animation;s.duration=t,s.beginTime=e,s.easing=i}}},nk=class{constructor(){this._version=0,this._initialize()}reset(){this._initialize()}_initialize(){this._mustUpdate=!0,this.maxCoord=0,this.maxScaledSize=0,this.maxMinVisibleSize=0,this.maxSymbolicSize=0,this.maxDashLength=0,this.maxGapLength=0,this.maxPatternScale=0}set({maxCoord:t,maxScaledSize:e,maxMinVisibleSize:i,maxSymbolicSize:n,maxDashLength:s,maxGapLength:r,maxPatternScale:a}){const u=this.maxCoord<t||this.maxScaledSize<e||this.maxMinVisibleSize<i||this.maxSymbolicSize<n||this.maxDashLength<s||this.maxGapLength<r||this.maxPatternScale<a;return u&&(this.maxCoord=t,this.maxScaledSize=e,this.maxMinVisibleSize=i,this.maxSymbolicSize=n,this.maxDashLength=s,this.maxGapLength=r,this.maxPatternScale=a,this._mustUpdate=!0),u}update(){return this._mustUpdate&&(this._version+=1,this._mustUpdate=!1),this}getVersion(){return this._version}},sk={linear:[0,1,0,0],quadraticIn:[0,0,1,0,0,0,0,0],quadraticOut:[0,2,-1,0,0,0,0,0],quadraticInOut:[0,0,2,0,-1,4,-2,0],cubicIn:[0,0,0,1],cubicOut:[0,3,-3,1],cubicInOut:[0,0,0,4,-3,12,-12,4]},rk=class{constructor(){this._linearEasing=[0,1,0,0,0,1,0,0],this._nameToPolygon={},this._polygonToName={},this.add(sk)}add(t){Object.keys(t).forEach(e=>{const i=t[e].slice();i.length<8&&(i[4]=i[0],i[5]=i[1],i[6]=i[2],i[7]=i[3]);const n=Zv(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);this._nameToPolygon[e]=i,this._polygonToName[n]=e})}getCoefficients(t){return this._nameToPolygon[t]||this._linearEasing}getName(t,e,i,n,s,r,a,u){const h=Zv(t,e,i,n,s,r,a,u);return this._polygonToName[h]||"linear"}},G0=new rk;function Rp(t){return typeof t=="number"&&isFinite(t)}var ok=t=>{if(t===0)return 0;if(isNaN(t))return 32256;if(!isFinite(t))return t>0?31744:64512;const e=t<0?32768:0;if((t=Math.abs(t))<6103515625e-14)return e|Math.round(4096*t);if(t>65504)return 31744|e;let i=Math.floor(Math.log2(t)),n=Math.round(1024*(t/Math.pow(2,i)-1));return n===1024&&(n=0,i++),e|i+15<<10|n},LA=t=>{const e=32768&t?-1:1,i=t>>10&31,n=1023&t;return i===0?n===0?0*e:e*Math.pow(2,-14)*(n/1024):i===31?n?NaN:e*(1/0):e*Math.pow(2,i-15)*(1+n/1024)},ak=0,lk=1,uk=2,hk=3,dk=4,ck=5,fk=6,gk=7,_k=8,mk=9,Op=10,pk=0,wL=1,LL=2,H0=30,CL=0,yk=1,vk=2,V0=3,xk=4,bk=5,Y0=6,Ip=1e-6,Ra=Math.PI,cg=2*Math.PI,ML=Ra*(5/4),NL=Ra*(7/4),RL=Ra*(3/4),OL=Ra*(1/4),CA=1.1,MA=.07,Ek=1,NA=1,RA=.17,Sk=1,Ak=-Ra/2,Tk=Ra/2,wk={plain:{dash:0,gap:0},dashed:{dash:3,gap:1},dotted:{dash:1,gap:3}},Lk={right:0,top:-Math.PI/2,left:Math.PI,bottom:Math.PI/2,center:0},Ck={right:Math.PI,top:-Math.PI/2,left:0,bottom:Math.PI/2,center:0},oc=8,Mk=class{constructor(t,e,i,n,s){this._littleEndian=mp(),this._maxScaledSize=0,this._maxMinVisibleSize=0,this._maxSymbolicSize=0,this._maxDashLength=0,this._maxGapLength=0,this._maxPatternScale=0,this._actualScaledSizeToBytes=VD,this._actualMinVisibleSizeToBytes=mx,this._actualSymbolicSizeToBytes=vc,this._actualDashLengthToBytes=xc,this._actualGapLengthToBytes=xc,this._actualPatternScaleToBytes=vc,this._genericObject=U0(),this._shapeManager=e,this._patternManager=t,this._textManager=i,this._bufferOffsetToId=n,this._colorParser=s}resizeBoundaries(t,e,i,n,s,r){this._maxScaledSize=t,this._maxMinVisibleSize=e,this._maxSymbolicSize=i,this._maxDashLength=n,this._maxGapLength=s,this._maxPatternScale=r,this._actualScaledSizeToBytes=gL/t,this._actualMinVisibleSizeToBytes=mx/e,this._actualSymbolicSizeToBytes=vc/i,this._actualDashLengthToBytes=xc/n,this._actualGapLengthToBytes=xc/s,this._actualPatternScaleToBytes=vc/r}storeGenericObject(t,e,i){const n=this._shapeManager.getIdFromName(i.shape),s=i.pieceId,r=this._dashLengthToBytes(i.dashLength),a=this._gapLengthToBytes(i.gapLength),u=+i.hasHead,h=+i.hasTail,c=+i.isBodyTriangle,g=+i.isSelfLoop,_=this._patternScaleToBytes(i.patternScale),m=this._offsetAngleToBytes(i.offsetAngle),v=+i.isText,b=+i.adjustTextAngle,x=+i.isBadge,M=+i.bentEnable,N=+i.bentVertical,O=this._opacityToBytes(i.opacity),R=this._minVisibleSizeToBytes(i.globalMinVisibleSize),P=this._minVisibleSizeToBytes(i.strokeMinVisibleSize),F=this._minVisibleSizeToBytes(i.patternMinVisibleSize),U=this._symbolicSizeToBytes(i.symbolicSize),V=this._curvatureToBytes(i.curvature),Y=i.pattern.attributes.colors;Y&&(i.pattern.attributes.colors=Y.split(";").map($t=>X_(this._colorToBytes($t.trim()))).join(";"));const K=this._patternManager.getIdFromDefinition(i.pattern),tt=this._colorToBytes(i.fillColor),j=this._colorToBytes(i.strokeColor),lt=this._colorToBytes(i.patternColor),{x1:pt,y1:ft,x2:ht,y2:W}=i,st=this._fixedSizeToBytes(i.rectWidthOrSourceRadiusFixed),_t=this._fixedSizeToBytes(i.rectHeightOrTargetRadiusFixed),Vt=this._scaledSizeToBytes(i.thicknessOrFontSizeScaled),X=this._fixedSizeToBytes(i.thicknessOrFontSizeFixed),et=this._scaledSizeToBytes(i.strokeWidthScaled),Dt=this._fixedSizeToBytes(i.strokeWidthFixed),Mt=this._scaledSizeToBytes(i.offsetScaled),At=this._fixedSizeToBytes(i.offsetFixed),Xt=this._fixedSizeToBytes(i.pattern.attributes.paddingTop||0),jt=this._fixedSizeToBytes(i.pattern.attributes.paddingLeft||0),Ge=n+(s<<4)+(r<<8)+(a<<10)+(u<<12)+(h<<13)+(c<<14)+(g<<15),Se=_+(m<<8)+(v<<11)+(b<<12)+(x<<13)+(M<<14)+(N<<15),Lt=O+(R<<4)+(P<<8)+(F<<12),Gt=U+(V<<8),ie=i.rectWidthOrSourceRadiusScaled/this._maxScaledSize*Y_,kt=i.rectHeightOrTargetRadiusScaled/this._maxScaledSize*Y_;this._setUint16(t,e+0,Ge),this._setUint16(t,e+2,Se),this._setUint16(t,e+4,Lt),this._setUint16(t,e+6,Gt),this._setUint16(t,e+8,K),this._setUint16(t,e+10,tt),this._setUint16(t,e+12,j),this._setUint16(t,e+14,lt),this._setFloat32(t,e+16,pt),this._setFloat32(t,e+20,ft),this._setFloat32(t,e+24,ht),this._setFloat32(t,e+28,W),this._setFloat16(t,e+32,ie),this._setUint16(t,e+34,st),this._setFloat16(t,e+36,kt),this._setUint16(t,e+38,_t),this._setUint16(t,e+40,Vt),this._setUint16(t,e+42,X),this._setUint16(t,e+44,et),this._setUint16(t,e+46,Dt),this._setUint16(t,e+48,Mt),this._setInt16(t,e+50,At),this._setInt16(t,e+52,Xt),this._setInt16(t,e+54,jt)}_setUint16(t,e,i){t.setUint16(e,i,this._littleEndian)}_setFloat16(t,e,i){t.setUint16(e,ok(i),this._littleEndian)}_setInt16(t,e,i){t.setUint16(e,this._signedToUnsignedInt16(i),this._littleEndian)}_setFloat32(t,e,i){t.setFloat32(e,i,this._littleEndian)}_colorToBytes(t){const e=this._colorParser(t);return Math.round(15*e[0])+(Math.round(15*e[1])<<4)+(Math.round(15*e[2])<<8)+(Math.round(15*e[3])<<12)}_scaledSizeToBytes(t){return Math.ceil(Math.min(t,this._maxScaledSize)*this._actualScaledSizeToBytes)}_fixedSizeToBytes(t){return t}_minVisibleSizeToBytes(t){return Math.round(Math.min(t,this._maxMinVisibleSize)*this._actualMinVisibleSizeToBytes)}_symbolicSizeToBytes(t){return Math.round(Math.min(t,this._maxSymbolicSize)*this._actualSymbolicSizeToBytes)}_dashLengthToBytes(t){return Math.round(Math.min(t,this._maxDashLength)*this._actualDashLengthToBytes)}_gapLengthToBytes(t){return Math.round(Math.min(t,this._maxGapLength)*this._actualGapLengthToBytes)}_patternScaleToBytes(t){return Math.round(Math.min(t,this._maxPatternScale)*this._actualPatternScaleToBytes)}_offsetAngleToBytes(t){return Math.round((t+cg)%cg*(8/cg))}_opacityToBytes(t){return Math.round(15*Math.min(t,1))}_curvatureToBytes(t){return this._signedToUnsignedByte(t)}_signedToUnsignedByte(t){return Ia(t,-128,127)+128}_signedToUnsignedInt16(t){return Ia(t,-32768,32767)+32768}storeAnimationInformation(t,e,{beginTime:i,duration:n},s){this._setAnimationBeginTime(t,e,i),this._setAnimationDuration(t,e,n),this._setAnimationEasing(t,e,s)}_setAnimationBeginTime(t,e,i){this._setFloat32(t,e,i)}_setAnimationDuration(t,e,i){this._setFloat32(t,e+4,i)}_setAnimationEasing(t,e,i){this._setUint16(t,e+8,(i[0]+128<<8)+(i[4]+128)),this._setUint16(t,e+10,(i[1]+128<<8)+(i[5]+128)),this._setUint16(t,e+12,(i[2]+128<<8)+(i[6]+128)),this._setUint16(t,e+14,(i[3]+128<<8)+(i[7]+128))}extractGenericElement(t,e,i){const n=t.type,s=t.animated,r=t.getDataView(),a=e*t.elementSize,u=this._genericObject;if(u.valid=!1,r.getUint16(a)&&(u.valid=!0,this._extractGenericObject(u.end,r,a,i),s&&(this._extractGenericObject(u.start,r,a+Ic,i),this._extractAnimationInformation(u.animation,r,a+2*Ic)),u.id=this._bufferOffsetToId.get(t.getId(),e),n===fd)){const h=t.getSideDataView(),c=e*t.getTotalSideElementsSize(),g=c+t.getTotalSideElementsSize();u.end.pattern=this._textManager.extractTextFromDataView(h,c,g)}return u}_extractGenericObject(t,e,i,{bytesToActualCoord:n,bytesToActualScaledSize:s,bytesToActualMinVisibleSize:r,bytesToActualPatternScale:a,bytesToActualSymbolicSize:u,bytesToActualDashLength:h,bytesToActualGapLength:c}){const g=e,_=i,m=this._littleEndian,v=g.getUint16(_,m),b=ns(v,0,4),x=ns(v,4,8),M=ns(v,8,10),N=ns(v,10,12),O=ns(v,12,13),R=ns(v,13,14),P=ns(v,14,15),F=ns(v,15,16),U=g.getUint16(_+2,m),V=ns(U,0,8),Y=ns(U,8,11),K=ns(U,11,12),tt=ns(U,12,13),j=ns(U,13,14),lt=ns(U,14,15),pt=ns(U,15,16),ft=g.getUint16(_+4,m),ht=ns(ft,0,4),W=ns(ft,4,8),st=ns(ft,8,12),_t=ns(ft,12,16),Vt=g.getUint16(_+6,m),X=ns(Vt,0,8),et=ns(Vt,8,16),Dt=g.getUint16(_+8,m),Mt=g.getUint16(_+10,m),At=g.getUint16(_+12,m),Xt=g.getUint16(_+14,m),jt=g.getFloat32(_+16,m),Ge=g.getFloat32(_+20,m),Se=g.getFloat32(_+24,m),Lt=g.getFloat32(_+28,m),Gt=g.getUint16(_+32,m),ie=g.getUint16(_+34,m),kt=g.getUint16(_+36,m),$t=g.getUint16(_+38,m),ne=g.getUint16(_+40,m),ee=g.getUint16(_+42,m),se=g.getUint16(_+44,m),ve=g.getUint16(_+46,m),Oe=g.getUint16(_+48,m),ke=lv(g.getUint16(_+50,m)),Xe=lv(g.getUint16(_+52,m)),Be=lv(g.getUint16(_+54,m));t.pieceId=x,t.shape=this._shapeManager.getNameFromId(b),t.x1=Ol(jt,n),t.y1=Ol(Ge,n),t.x2=Ol(Se,n),t.y2=Ol(Lt,n),t.rectWidthOrSourceRadiusScaled=LA(Gt)*this._maxScaledSize/Y_,t.rectWidthOrSourceRadiusFixed=ie,t.rectHeightOrTargetRadiusScaled=LA(kt)*this._maxScaledSize/Y_,t.rectHeightOrTargetRadiusFixed=$t,t.thicknessOrFontSizeScaled=Ol(ne,s),t.thicknessOrFontSizeFixed=ee,t.strokeWidthScaled=Ol(se,s),t.strokeWidthFixed=ve,t.offsetScaled=Ol(Oe,s),t.offsetFixed=ke,t.pattern=this._patternManager.getDefinitionFromId(Dt),t.pattern.attributes.paddingTop=Xe,t.pattern.attributes.paddingLeft=Be,t.opacity=ht/15,t.fillColor=X_(Mt),t.strokeColor=X_(At),t.patternColor=X_(Xt),t.globalMinVisibleSize=Ol(W,r),t.strokeMinVisibleSize=Ol(st,r),t.patternMinVisibleSize=Ol(_t,r),t.offsetAngle=Y*(2*Math.PI/8),t.patternScale=V*a,t.symbolicSize=X*u,t.curvature=Nk(et),t.dashLength=M*h,t.gapLength=N*c,t.hasHead=!!O,t.hasTail=!!R,t.isBodyTriangle=!!P,t.isSelfLoop=!!F,t.isText=!!K,t.adjustTextAngle=!!tt,t.isBadge=!!j,t.bentEnable=!!lt,t.bentVertical=!!pt}_extractAnimationInformation(t,e,i){const n=this._littleEndian,s=e.getFloat32(i,n),r=e.getFloat32(i+4,n),a=e.getUint16(i+8,n),u=e.getUint16(i+10,n),h=e.getUint16(i+12,n),c=e.getUint16(i+14,n),g=(a>>8)-128,_=(u>>8)-128,m=(h>>8)-128,v=(c>>8)-128,b=a%256-128,x=u%256-128,M=h%256-128,N=c%256-128;t.beginTime=s,t.duration=r,t.easing=G0.getName(g,_,m,v,b,x,M,N)}};function ns(t,e,i){return t%(1<<i)>>e}function Nk(t){return t-128}function lv(t){return t-32768}function Ol(t,e){return t*e}var OA=new Array(65535);function X_(t){let e=OA[t];if(!e){const i=ns(t,0,4)/15,n=ns(t,4,8)/15,s=ns(t,8,12)/15,r=ns(t,12,16)/15;e=`rgba(${255*i|0}, ${255*n|0}, ${255*s|0}, ${r})`,i+n+s+r===0&&(e=null),OA[t]=e}return e}var Rk={[ph]:"image",[Wg]:"piechart",[ad]:"text",[gd]:"icon",[_d]:"badge"},Ok=class{constructor(){this._pixelRatio=1,this._nextPatternId=1,this._version=0,this._init_()}reset(){this._init_()}_init_(){this._mustUpdate=!0,this._nextPatternId=1,this._patterns=[null],this._patternsByHash={},this._pixelRatio=1,this._nullPattern={id:-1,type:no,attributes:{}}}_increaseNextId(){let t=this._nextPatternId++;for(t%256==255&&(t=this._nextPatternId++);this._patterns.length<=t;)this._patterns.push(void 0);return t}_createPattern({type:t,attributes:e}){const i={id:this._increaseNextId(),type:t,attributes:this._getAttributes(t,e)};return this._patterns[i.id]=i,this._mustUpdate=!0,i}_getAttributes(t,e){return t===ph?{image:e.image,scaled:e.scaled,duplicated:e.duplicated}:t===ad||t===gd||t===_d?{font:e.font,size:e.size,style:e.style,text:e.text,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,align:e.align||"center",offset:e.offset||0}:t===Wg&&e.colors?{colors:e.colors,colorArray:e.colors.split(";").map(i=>i.trim())}:{}}getPatternList(){return this._patterns.filter(t=>t)}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}setPixelRatio(t){t!==this._pixelRatio&&(this._pixelRatio=t,this._mustUpdate=!0)}getPixelRatio(){return this._pixelRatio}notifyUpdate(){this._mustUpdate=!0}getIdFromDefinition(t){const{type:e,attributes:i}=t,n=e===ad||e===gd||e===_d;let s=0;return e&&e!==no&&e!==bh&&(e!==ph||i.image)&&(!n||i.text&&i.font)&&(s=this._addPattern(t),e===ad&&i.style==="normal"&&(i.style="bold",this._addPattern(t))),s}_addPattern(t){const e=this._getPatternHash(t);let i=this._patternsByHash[e];return i||(this._nextPatternId>65500?mu("maximum number of pattern exceeded"):(i=this._createPattern(t).id,this._patternsByHash[e]=i)),i}_getPatternHash({type:t,attributes:e}){const i=[Rk[t]];return t===ph?i.push(e.scaled?"scaled":"non-scaled",e.duplicated?"duplicated":"non-duplicated",e.image.src||e.image.toDataURL()):t===ad?i.push(e.text,e.font,e.style,e.size,e.align||"center",e.offset||0):t===gd||t===_d?i.push(e.text,e.font,e.style,e.size,e.paddingLeft,e.paddingTop):i.push(e.colors),i.join("+")}getDefinitionFromId(t){if(t&&this._patterns[t]){const e=this._patterns[t];if(e)return e}return this._nullPattern}getVersion(){return this._version}};function IA(t){return t.map(({x:e,y:i,r:n=0})=>({x:e,y:i,r:n}))}var Ik=class{constructor(){this._version=0,this._mustUpdate=!0,this._byName={},this._byId=new Array(Jm+1)}register(t,{getDistanceFromStrokeVertically:e,getDistanceFromStrokeHorizontally:i,points:n,hole:s,isSimple:r}){if(this._byName[t])return;let a=r?1:px;const u=r?px-1:Jm;for(;this._byId[a];)a+=1;if(a>u)throw new Error("max number of shape exceeded");const h={id:a,name:t,getDistanceFromStrokeVertically:e,getDistanceFromStrokeHorizontally:i,points:IA(n.slice()),hole:s?IA(s.slice()):null,isSimple:!!r};return this._mustUpdate=!0,this._byId[a]=h,this._byName[t]=h,h}updateShape(t,e){const i=this._byName[t];i&&(delete this._byId[i.id],delete this._byName[t],this.register(t,e))}getIdFromName(t){return this._byName[t].id}getNameFromId(t){const e=this._byId[t];return e?e.name:""}getDefinitionFromName(t){return this._byName[t]}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}getVersion(){return this._version}getShapeList(){return this._byId.filter(t=>t)}},Ex=300,Sx=150,IL=class{constructor(){this.style={},this.width=Ex,this.height=Sx,this.__context=new PL,this.style={},this.width=Ex,this.height=Sx}get __dummy(){return!0}get parentNode(){return null}getContext(t){return t==="2d"?this.__context:null}toDataURL(t="png"){return`data:image/${t};base64,`}addEventListener(){}removeEventListener(){}getBoundingClientRect(){return{left:0,top:0,bottom:0,right:0,width:this.width,height:this.height}}},PL=class{constructor(){this._fontSize=10}set font(t){const e=t.match(/\d+/);e&&(this._fontSize=parseFloat(e[0]))}set fillStyle(t){}set textBaseline(t){}set textAlign(t){}set strokeStyle(t){}set lineWidth(t){}fill(){}stroke(){}clearRect(){}fillRect(){}strokeRect(){}beginPath(){}closePath(){}moveTo(){}lineTo(){}rect(){}arc(){}save(){}restore(){}clip(){}translate(){}rotate(){}fillText(){}setLineDash(){}quadraticCurveTo(){}bezierCurveTo(){}drawImage(){}measureText(t){return{width:t.length*Math.ceil(.625*this._fontSize)}}getImageData(){return{width:0,height:0,data:new Uint8ClampedArray(0)}}},Z_=Oa("canvas")||Oa("canvas-prebuilt");function Pr(t=Ex,e=Sx){if(xu){const n=document.createElement("canvas");return n.width=t,n.height=e,n}if(Z_){let n=null;return n="createCanvas"in Z_?Z_.createCanvas(t,e):new Z_(t,e),n.style={},n}const i=new IL;return i.width=t,i.height=e,i}function Ax(t,e,i=t.width,n=t.height){e.clearRect(0,0,i,n)}function Eh(t,e,i,n=""){t.font=`${n} ${i}px ${e}`}function zL(){return X0(Pr(),{},"webgl")!==null}var DL=t=>{const{canvas:e,width:i,height:n}={canvas:document.createElement("canvas"),width:window.innerWidth*devicePixelRatio,height:window.innerHeight*devicePixelRatio,...t};e.width=Math.ceil(i),e.height=Math.ceil(n),e.style.width=Math.ceil(i/devicePixelRatio)+"px",e.style.height=Math.ceil(n/devicePixelRatio)+"px";const s=e.getContext("webgl2",{antialias:!0});if(!s)throw new Error("WebGL 2.0 not supported");return s},kL=(t,e,i)=>{const n=DL();return n.canvas.addEventListener("webglcontextlost",i),{context:n,cleanUp:()=>{var s;n.canvas.removeEventListener("webglcontextlost",i),(s=n.getExtension("WEBGL_lose_context"))==null||s.loseContext()}}};function X0(t,e,i){let n=t.getContext(i,e);return n||(n=t.getContext("experimental-webgl",e)),n||null}function Z0(t,e){if(e<2)return t;const i=t.split(`
`),n=[];for(let s=0;s<i.length;++s){const r=i[s];if(r.length<e)n.push(r);else{const a=FL(i[s],e);for(let u=0;u<a.length;++u)n.push(a[u])}}return n.join(`
`)}function FL(t,e){const i=[""],n=t.split(" ");for(let s=0;s<n.length;s++){const r=i[i.length-1],a=n[s];r.length+1+a.length<=e&&r.length?i[i.length-1]+=(r.length>0?" ":"")+a:i.push(a)}return i}function BL(t,e){if(t===null)return null;const i=(t=t.toString()).split(`
`),n=[];let s=0;for(let r=0;r<i.length;r++){let a=i[r];if(!e||e<=1||a.length<e)n.push(a),s=Math.max(s,a.length);else{const u=FL(i[r],e);for(let h=0;h<u.length;h++)a=u[h],n.push(a),s=Math.max(s,a.length)}}return{data:n,maxLength:s,lines:n.length}}function UL(){const t=Oa("@mapbox/mapbox-gl-rtl-text")||Oa("mapbox-gl-rtl-text"),e=t?t.processBidirectionalText:yh?window.processBidirectionalText:null,i=t?t.applyArabicShaping:yh?window.applyArabicShaping:null;return{processBidirectionalText:e?s=>{if(s===null||s==null)return"";const r=[];let a=0,u="";const h=s.split(`
`);for(let c=0;c<h.length;c++){const g=h[c],_=h[c].length+a;_>0&&c<h.length-1&&r.push(_),u+=c>0?""+g:g,a+=g.length}return e(u,r).join(`
`)}:s=>s,applyArabicShaping:i?s=>s==null?null:typeof s=="number"?s.toString():i(s):s=>s==null?null:s.toString()}}var uv=mp(),W_=10,Pk=1<<17,zk=65536,Dk=256,PA=128,kk=25,GL=1e3,Tx=2,Fk=class{constructor(t){this._patternManager=t,this._canvas=Pr(),this._ctx=this._canvas.getContext("2d",{willReadFrequently:!0}),this._processBidirectionalText=UL().processBidirectionalText,this._cornerRadius=0,this._version=0,this._textPattern={id:0,type:bh,attributes:{text:"",font:"",size:0,style:"normal",align:"center"},dimensions:{width:0,height:0}},this._textDimensions={width:0,height:0},this._lineWidthList=new Array(64),this._init()}_init(){this._mustClear=!1,this._clear()}reset(){this._init()}clear(){this._mustClear=!0}_measureChar(t,e,i){return Eh(this._ctx,e,Tg,i),this._ctx.measureText(t).width/Tg}_getAtlas(t,e,i,n){const s=i===Xg?0:i,r=this._byFont[t]||(this._byFont[t]={none:void 0,bold:void 0,italic:void 0,normal:void 0}),a=r[n]||(r[n]={}),u=a[e]||(a[e]=new Array(50));return u[s]||(u[s]=new Array(256))}_getMeasurementAtlas(t,e){const i=this._widthAtlases[e];return i[t]||(i[t]=new Array(256))}measureText(t,e,i,n=1){if(!e||t===null)return this._textDimensions.width=0,this._textDimensions.height=0,this._textDimensions;const s=this._getMeasurementAtlas(e,i);let r=0,a=0,u=1;for(let h=0;h<t.length;++h){const c=t.charCodeAt(h);if(c===W_)a>r&&(r=a),a=0,u+=1;else{let g=s[c];g===void 0&&(g=this._measureChar(t[h],e,i),s[c]=g),a+=g}}return a>r&&(r=a),this._textDimensions.width=r*n,this._textDimensions.height=u*n,this._textDimensions}_getCharInfo(t,e,i,n,s,r){let a=t[e];if(!a){const u=String.fromCharCode(e);a={ratio:this._measureChar(u,i,n),patternId:0},a.patternId=this._patternManager.getIdFromDefinition({id:0,type:ad,attributes:{text:u,font:i,style:n,size:s,align:r}}),t[e]=a}return a}storeTextInDataView(t,e,i,n){let s=e;if(n&&n.type===bh){const{font:r,style:a,size:u,align:h}=n.attributes,c=h==="center",g=this._getAtlas(r,a,u,h);let _=0,m=1,v=0,b=0;const x=this._lineWidthList,M=this._processBidirectionalText(n.attributes.text);for(let P=0;P<M.length;++P){const F=M.charCodeAt(P);F===W_?(v>_&&(_=v),x[b]=v,b++,v=0,m++):v+=this._getCharInfo(g,F,r,a,u,h).ratio}x[b]=v,v>_&&(_=v),b=0;let N=-(c?x[b]:_)/2,O=(1-m)/2,R=0;for(let P=0;P<M.length;++P){const F=M.charCodeAt(P),U=g[F];if(F===W_)b+=1,N=-(c?x[b]:_)/2,O+=P===0?.5:1,R=0;else{const V=U.ratio,Y=U.patternId;N+=(V+R)/2,R=V;const K=(Ia(N*GL+zk,0,Pk-1)<<8)+Ia(O*Tx+PA,0,Dk-1);t.setUint16(s,Y,uv),t.setUint32(s+2,K,uv),s+=Nm}}}this._fillWithZeros(t,s,i)}extractTextFromDataView(t,e,i){const n=t,s=uv,r=n.getUint16(e,s),a=this._textPattern,u=this._patternManager.getDefinitionFromId(r),{font:h,style:c,size:g,align:_}=u.attributes,m=this._getAtlas(h,c,g,_),v=[];let b=0,x=0,M=0,N=null;for(let R=e;R<i;R+=Nm){const P=n.getUint16(R,s);if(!P)break;const F=(n.getUint8(R+2)-PA)/Tx,U=this._patternManager.getDefinitionFromId(P);if(!U||!U.attributes||!U.attributes.text)break;const V=U.attributes.text.charCodeAt(0),Y=m[V];N===null?N=F:F>N&&(b>x&&(x=b),b=0,M+=1,v.push(W_),N=F),v.push(V),Y&&(b+=Y.ratio)}b>x&&(x=b);const O=String.fromCharCode.apply(null,v);return a.attributes.style=c,a.attributes.font=h,a.attributes.size=g,a.attributes.align=_,a.attributes.text=this._processBidirectionalText(O),a.dimensions&&(a.dimensions.width=x,a.dimensions.height=M),a}_fillWithZeros(t,e,i){for(let n=e;n<i;n+=Nm)t.setUint16(n,0)}_clear(){this._byFont={},this._widthAtlases={normal:{},bold:{},italic:{}}}update(){this._mustClear&&(this._clear(),this._mustClear=!1)}getVersion(){return this._version}getCornerRadius(){return this._cornerRadius}setCornerRadius(t){t!==this._cornerRadius&&(this._cornerRadius=t,this._version++)}},W0=()=>({minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),So=class fc{constructor(e={}){const{xValues:i=[],yValues:n=[],scaledSizeValues:s=[],fixedSizeValues:r=[]}=e;this.minX=cu(i),this.minY=cu(n),this.maxX=pc(i),this.maxY=pc(n),this.minScaledSize=cu(s),this.maxScaledSize=pc(s),this.minFixedSize=cu(r),this.maxFixedSize=pc(r),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY}reset(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.minScaledSize=1/0,this.maxScaledSize=-1/0,this.minFixedSize=1/0,this.maxFixedSize=-1/0,this.width=0,this.height=0,this.cx=0,this.cy=0,this}addPoint(e,i,n,s){if(!isFinite(e)||!isFinite(i))return this;this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i),n!==void 0&&s!==void 0&&(s==="scaled"?(this.minScaledSize=Math.min(this.minScaledSize,n),this.maxScaledSize=Math.max(this.maxScaledSize,n)):(this.minFixedSize=Math.min(this.minFixedSize,n),this.maxFixedSize=Math.max(this.maxFixedSize,n)));const r=this.maxX-this.minX,a=this.maxY-this.minY;return this.cx=this.minX+r/2,this.cy=this.minY+a/2,this.width=r,this.height=a,this}computeForZoom(e){const i=Math.max(this.maxScaledSize,this.maxFixedSize/e);return fc.from({minX:this.minX-i/2,minY:this.minY-i/2,maxX:this.maxX+i/2,maxY:this.maxY+i/2,width:this.width+i,height:this.height+i})}static from({minX:e,minY:i,maxX:n,maxY:s,width:r,height:a}={}){const u=new fc;return e!=null&&(u.minX=e),i!=null&&(u.minY=i),n!=null&&(u.maxX=n),s!=null&&(u.maxY=s),n!=null&&e!=null&&(u.width=r||Math.abs(n-e),u.cx=(e+n)/2),s!=null&&i!=null&&(u.height=a||Math.abs(s-i),u.cy=(i+s)/2),u.maxScaledSize=u.minScaledSize=0,u}static fromValues(e,i,n){let s=1/0,r=1/0,a=-1/0,u=-1/0,h=-1/0;for(let g=0;g<e.length;g++){const _=e[g],m=i[g],v=n[g];_-v<s&&(s=_-v),m-v<r&&(r=m-v),_+v>a&&(a=_+v),m+v>u&&(u=m+v),v>h&&(h=v)}const c=fc.from({minX:s,minY:r,maxX:a,maxY:u});return c.maxScaledSize=h,c}pad(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,this.width+=2*e,this.height+=2*e,this}isValid(){return isFinite(this.width)&&isFinite(this.height)}extend(e){let i,n,s,r;return e instanceof fc?(i=e.minX,n=e.minY,s=e.maxX,r=e.maxY):Array.isArray(e)&&(i=e[0],n=e[1],s=e[2],r=e[3]),this.addPoint(i,n).addPoint(s,r)}bottomLeft(){return{x:this.minX,y:this.minY}}topRight(){return{x:this.maxX,y:this.maxY}}clone(){const e=new fc;return e.minX=this.minX,e.minY=this.minY,e.maxX=this.maxX,e.maxY=this.maxY,e.minScaledSize=this.minScaledSize,e.maxScaledSize=this.maxScaledSize,e.minFixedSize=this.minFixedSize,e.maxFixedSize=this.maxFixedSize,e.cx=this.cx,e.cy=this.cy,e.width=this.width,e.height=this.height,e}};function zA(t,e,i,n,s){const r=1-s;return r*r*r*t+3*s*r*r*e+3*s*s*r*i+s*s*s*n}function bc(t,e,i,n){const s=1-n;return s*s*t+2*s*n*e+n*n*i}var Bk=(t,e)=>2/(1+Math.exp(-Math.abs(t*e))),Uk=5,DA=5;function Pp(t,e,i,n,s,r){const a=r||{x1:0,y1:0,x2:0,y2:0},u=(n+n/DA*i)*DA,h=-s+Math.PI,c=-s+Math.PI/2;return a.x1=t+Math.cos(h)*u,a.y1=e+Math.sin(h)*u,a.x2=t+Math.cos(c)*u,a.y2=e+Math.sin(c)*u,a}function zp(t,e,i,n,s,r,a,u){const h=u||{x1:0,y1:0,x2:0,y2:0};if(r){const c=ek(s);if(a){const g=c*e+(1-c)*n;h.x1=t,h.y1=g,h.x2=i,h.y2=g}else{const g=c*t+(1-c)*i;h.x1=g,h.y1=e,h.x2=g,h.y2=n}}else h.x1=t,h.y1=e,h.x2=i,h.y2=n;return h}function Sd(t,e,i,n,s,r){const a=r||{x:0,y:0},u=(t+i)/2,h=(e+n)/2,c=t-i,g=e-n,_=Math.sqrt(c*c+g*g);if(_===0)return a.x=u,a.y=h,a;const m=g/_,v=-c/_,b=-_*s/Uk;return a.x=u+m*b,a.y=h+v*b,a}function Dp(t,e,i,n,s,r,a,u={x:0,y:0}){return u.x=(1-t)*(1-t)*e+2*(1-t)*t*r+t*t*n,u.y=(1-t)*(1-t)*i+2*(1-t)*t*a+t*t*s,u}function q0(t,e,i,n,s,r,a,u={x:0,y:0}){return u.x=(2*t-2)*e+(2*n-4*r)*t+2*r,u.y=(2*t-2)*i+(2*s-4*a)*t+2*a,D2(u)}function HL(t,e,i,n,s,r,a,u={x:0,y:0}){return q0(t,e,i,n,s,r,i,u),Wm(u.x,u.y,0,0,Math.PI/2,u),u}function VL(t,e,i,n,s,r,a,u,h,c=0,g=!1){const _=i-2*a+s,m=n-2*u+r,v=-((i-t)*m-(n-e)*_)/((2*a-2*i)*m-(2*u-2*n)*_);if(v<0||v>1)return!1;let b=h/2;g&&(b*=1-v),b+=c;const x=bc(i,a,s,v),M=bc(n,u,r,v);return Gs(x,M,t,e)<=b}function Gk(t,e){const i=t.getAttribute("curvature"),[n,s]=t.getExtremities().getAttributes(["x","y"]),r=Sd(n.x,n.y,s.x,s.y,i);return Dp(e,n.x,n.y,s.x,s.y,r.x,r.y)}function Hk(t,e){const i=t.getAttribute("curvature"),[n,s]=t.getExtremities().getAttributes(["x","y"]),r=Sd(n.x,n.y,s.x,s.y,i);return HL(e,n.x,n.y,s.x,s.y,r.x,r.y)}function Vk(t,e){const i=t.getAttribute("curvature"),[n,s]=t.getExtremities().getAttributes(["x","y"]),r=Sd(n.x,n.y,s.x,s.y,i);return q0(e,n.x,n.y,s.x,s.y,r.x,r.y)}function Lg(t,e,i,n,s,r,a,u,h,c={x:0,y:0}){const g=(1-t)*(1-t)*(1-t),_=3*t*(1-t)*(1-t),m=3*t*t*(1-t),v=t*t*t;return c.x=g*e+_*r+m*u+v*n,c.y=g*i+_*a+m*h+v*s,c}function wx(t,e,i,n,s,r,a,u,h,c,g,_){let m=.5,v=Gs(t,e,i,n)<Gs(t,e,s,r)?-.01:.01,b=100;const x=Lg(m,i,n,s,r,a,u,h,c);let M,N=Gs(t,e,x.x,x.y);const O=g/2+_;for(;b-- >0&&m>=0&&m<=1&&N>O&&(v>.001||v<-.001);)M=N,Lg(m,i,n,s,r,a,u,h,c,x),N=Gs(t,e,x.x,x.y),N>M?(v=-v/2,m+=v):m+v<0||m+v>1?(v/=2,N=M):m+=v;return N<O}function Q0(t,e,i,n,s,r,a=W0()){const u=t+.6666666666666666*(i-t),h=e+2/3*(n-e);return kp(t,e,u,h,u+1/3*(s-t),h+1/3*(r-e),s,r,a)}function kp(t,e,i,n,s,r,a,u,h=W0()){const{min:c,max:g,sqrt:_}=Math;let m,v,b,x,M;h.minX=c(t,a),h.maxX=g(t,a),h.minY=c(e,u),h.maxY=g(e,u);for(let N,O,R,P,F,U,V,Y=0;Y<2;++Y)if(Y===0?(v=t,b=i,x=s,M=a):(v=e,b=n,x=r,M=u),O=6*v-12*b+6*x,N=-3*v+9*b-9*x+3*M,R=3*b-3*v,O|=0,N|=0,R|=0,N!==0)F=O*O-4*R*N,F<0||(U=(-O+_(F))/(2*N),U>0&&U<1&&(m=hv(U,v,b,x,M),Y===0?(h.minX=c(h.minX,m),h.maxX=g(h.maxX,m)):(h.minY=c(h.minY,m),h.maxY=g(h.maxY,m))),V=(-O-_(F))/(2*N),V>0&&V<1&&(m=hv(V,v,b,x,M),Y===0?(h.minX=c(h.minX,m),h.maxX=g(h.maxX,m)):(h.minY=c(h.minY,m),h.maxY=g(h.maxY,m))));else{if(O===0)continue;P=-R/O,P>0&&P<1&&(m=hv(P,v,b,x,M),Y===0?(h.minX=c(h.minX,m),h.maxX=g(h.maxX,m)):(h.minY=c(h.minY,m),h.maxY=g(h.maxY,m)))}return h}function hv(t,e,i,n,s){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s}function Yk(t,e,i,n,s,r){const a=t-2*i+s,u=e-2*n+r,h=2*i-2*t,c=2*n-2*e,g=4*(a*a+u*u),_=4*(a*h+u*c),m=h*h+c*c,v=2*Math.sqrt(g+_+m),b=Math.sqrt(g),x=2*g*b,M=2*Math.sqrt(m),N=_/b;return(x*v+b*_*(v-M)+(4*m*g-_*_)*Math.log((2*b+N+v)/(N+M)))/(4*x)}var gu,yu=(gu=class extends Zg{constructor({bufferList:e,patternManager:i,boundariesManager:n,shapeManager:s,textManager:r,memoryManager:a}){super(),this._firstFrame=!0,this._width=0,this._height=0,this._pixelRatio=0,this._viewX=0,this._viewY=0,this._viewZoom=0,this._viewAngle=0,this._viewAngleCos=0,this._viewAngleSin=0,this._currentTime=0,this._scales={bytesToActualCoord:0,bytesToActualScaledSize:0,bytesToActualMinVisibleSize:0,bytesToActualSymbolicSize:0,bytesToActualDashLength:0,bytesToActualGapLength:0,bytesToActualPatternScale:0},this._shapesVersion=0,this._patternsVersion=0,this._boundariesVersion=0,this._textsVersion=0,this._backgroundRgba=[1,1,1,0],this._renderBackground=!1,this._hideImages=!1,this._genericObject=U0(),this._littleEndian=mp(),this._bufferList=e,this._shapeManager=s,this._patternManager=i,this._boundariesManager=n,this._textManager=r,this._memoryManager=a}static createInitData(){return null}static getName(){return null}static isAvailable(){return!0}static setEdgeArrowSizeRatio(e){gu.edgeArrowSizeRatio=e}static setMinEdgeTipSize(e){gu.minEdgeTipSize=e}getDomElement(){return null}_initCanvas(e){e.style.touchAction="none"}export(e){return Promise.resolve()}extractElement(e,i){return this._memoryManager.extractGenericElement(e,i,this._scales)}_compareDimensions(e,i,n){return(e!==this._width||i!==this._height||n!==this._pixelRatio)&&(this._width=e,this._height=i,this._pixelRatio=n,!0)}_compareView(e,i,n,s){return(e!==this._viewX||i!==this._viewY||n!==this._viewZoom||s!==this._viewAngle)&&(this._viewX=e,this._viewY=i,this._viewZoom=n,this._viewAngle=s,this._viewAngleCos=Math.cos(s),this._viewAngleSin=Math.sin(s),!0)}_compareCurrentTime(e){return e!==this._currentTime&&(this._currentTime=e,!0)}_compareBackgroundColor(e,i){return(e!==this._backgroundColor||i!==this._renderBackground)&&(this._renderBackground=i,this._backgroundColor=e,this._backgroundRgba=io(this._backgroundColor),!0)}_compareShapes(){return this._shapesVersion!==this._shapeManager.getVersion()&&(this._shapesVersion=this._shapeManager.getVersion(),!0)}_comparePatterns(){return this._patternsVersion!==this._patternManager.getVersion()&&(this._patternsVersion=this._patternManager.getVersion(),!0)}_compareBoundaries(){return this._boundariesVersion!==this._boundariesManager.getVersion()&&(this._boundariesVersion=this._boundariesManager.getVersion(),!0)}_compareTexts(){return this._textsVersion!==this._textManager.getVersion()&&(this._textsVersion=this._textManager.getVersion(),!0)}_compareIsDisplayableBuffer(e){return this._isBufferDisplayable!==e&&(this._isBufferDisplayable=e,!0)}_compareHideImages(e){return this._hideImages!==e&&(this._hideImages=e,!0)}renderFrame({x:e,y:i,zoom:n,angle:s,width:r,height:a,pixelRatio:u,backgroundColor:h,currentTime:c,isBufferDisplayable:g,hideImages:_,renderBackground:m}){const v=this._compareShapes(),b=this._comparePatterns(),x=this._compareBoundaries(),M=this._compareTexts(),N=this._compareDimensions(r,a,u),O=this._compareView(e,i,n,s),R=this._compareCurrentTime(c),P=this._compareBackgroundColor(h,m),F=this._compareIsDisplayableBuffer(g),U=this._compareHideImages(_);if(x){const V=this._boundariesManager,Y=this._scales;Y.bytesToActualCoord=1,Y.bytesToActualScaledSize=V.maxScaledSize/gL,Y.bytesToActualMinVisibleSize=V.maxMinVisibleSize/mx,Y.bytesToActualSymbolicSize=V.maxSymbolicSize/vc,Y.bytesToActualDashLength=V.maxDashLength/xc,Y.bytesToActualGapLength=V.maxGapLength/xc,Y.bytesToActualPatternScale=V.maxPatternScale/vc}this._firstFrame&&this._beforeFirstFrame(),this._render({shapesChanged:v,patternsChanged:b,boundariesChanged:x,textsChanged:M,dimensionsChanged:N,viewChanged:O,currentTimeChanged:R,backgroundColorChanged:P,isBufferDisplayableChanged:F,isHideImagesChanged:U}),this._firstFrame&&(this._afterFirstFrame(),this._firstFrame=!1)}_render(e){}_beforeFirstFrame(){}_afterFirstFrame(){}destroy(){}ensureAnimationsReady(){}getImageData(){return null}setViewportClipping(e){}},gu.edgeArrowSizeRatio=mL,gu.minEdgeTipSize=pL,gu);function YL(t,e,i,n,s,r,a,u=0,h=!1){const c=Gs(i,n,s,r),g=(a/2*(h?Gs(t,e,s,r)/c:1)+u)/c,_=(s-i)*g,m=(r-n)*g,v=i+m,b=n-_,x=t-v,M=e-b,N=i-m-v,O=n+_-b,R=s+m-v,P=r-_-b,F=x*N+M*O,U=x*R+M*P;return F>0&&F<N*N+O*O&&U>0&&U<R*R+P*P}function Xk(t,e,i,n,s=!1){if(s&&(q_(t,i)||q_(t,n)||q_(e,i)||q_(e,n)))return!1;let r=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y);const a=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(a===0)return!1;const u=r/a;r=(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y);const h=r/a;return!(u<=0||u>=1||h<=0||h>=1)}function q_(t,e){return t.x===e.x&&t.y===e.y}function Pc(t,e,i,n){return Math.atan2(n-e,i-t)}function Zk(t,e,i){const n=Pc(t.x,t.y,e.x,e.y)-Pc(i.x,i.y,e.x,e.y);return n<0?n+2*Math.PI:n}function Wk(t,e,i,n,s,r,a,u){const h=(u-r)*(i-t)-(a-s)*(n-e);if(h===0)return null;let c=e-r;return c=((a-s)*c-(u-r)*(t-s))/h,{x:t+c*(i-t),y:e+c*(n-e)}}function jf(t,e,i,n,s,r,a,u){const h=t-i,c=e-n,g=s-a,_=r-u,m=h*_-g*c,v=(c*(t-s)-h*(e-r))/m;if(v<0||v>1)return null;const b=(g*(r-e)+_*(t-s))/m;return b>=0&&b<=1?{x:t-b*h,y:e-b*c}:null}function XL(t,e,i,n,s,r,a,u){let h;const c=[];return h=jf(t,e,i,n,s,r,s,u),h&&c.push(h),h=jf(t,e,i,n,s,u,a,u),h&&c.push(h),h=jf(t,e,i,n,a,u,a,r),h&&c.push(h),h=jf(t,e,i,n,a,r,s,r),h&&c.push(h),c}function Ec(t,e,i,n,s,r,a,u){const h=((a-s)*(e-r)-(u-r)*(t-s))/((u-r)*(i-t)-(a-s)*(n-e)),c=((i-t)*(e-r)-(n-e)*(t-s))/((u-r)*(i-t)-(a-s)*(n-e));return h>=0&&h<=1&&c>=0&&c<=1}function K0(t,e,i,n,s,r,a,u){return t>=s&&e>=r&&t<=a&&e<=u||i>=s&&n>=r&&i<=a&&n<=u||!!Ec(t,e,i,n,s,r,s,u)||!!Ec(t,e,i,n,a,r,a,u)||!!Ec(t,e,i,n,s,r,a,r)||!!Ec(t,e,i,n,s,u,a,u)}function ZL(t,e,i){return Math.sqrt(j0(t.x,t.y,e.x,e.y,i.x,i.y))}function j0(t,e,i,n,s,r){const a=wm(i,n,s,r);if(a===0)return wm(t,e,i,n);let u=((t-i)*(s-i)+(e-n)*(r-n))/a;return u=Math.max(0,Math.min(1,u)),wm(t,e,i+u*(s-i),n+u*(r-n))}function WL(t,e,i,n,s,r){const a=s-i,u=r-n;if(a===0&&u===0)return{x:i,y:n};const h=((t-i)*a+(e-n)*u)/(a*a+u*u);return h<0?{x:i,y:n}:h>1?{x:s,y:r}:{x:i+h*a,y:n+h*u}}function qk(t,e,i,n,s,r){const a=s-i,u=r-n,h=((t-i)*a+(e-n)*u)/(a*a+u*u);return{x:i+a*h,y:n+u*h}}function Fp(t,e,i,n,s,r){const a=r||{x:0,y:0},u=(t+i)/2,h=(e+n)/2,c=t-i,g=e-n,_=Math.sqrt(c*c+g*g);if(_===0)return a.x=u,a.y=h,a;const m=g/_,v=-c/_,b=-_*s/Mp;return a.x=u+m*b,a.y=h+v*b,a}function J0(t,e,i,n,s,r){const a=r||{x1:0,y1:0,x2:0,y2:0},u=(n+n/tp*i)*tp,h=-s+Ra,c=Ra/2-s;return a.x1=t+Math.cos(h)*u,a.y1=e+Math.sin(h)*u,a.x2=t+Math.cos(c)*u,a.y2=e+Math.sin(c)*u,a}function Qk(t,e,i,n){const s=Math.abs(t.x-e.x-i.x+n.x)+Math.abs(t.y-e.y-i.y+n.y)<.01,r=9*(e.x-t.x)**2,a=(-243*t.x+189*e.x+51*i.x+3*n.x)**2/1e4,u=(-48*t.x+24*e.x+21*i.x+3*n.x)**2/625,h=(-147*t.x+21*e.x+99*i.x+27*n.x)**2/1e4,c=(-27*t.x-9*e.x+24*i.x+12*n.x)**2/625,g=9/16*(i.x+n.x-t.x-e.x)**2,_=9*(e.y-t.y)**2,m=(-243*t.y+189*e.y+51*i.y+3*n.y)**2/1e4,v=(-48*t.y+24*e.y+21*i.y+3*n.y)**2/625,b=(-147*t.y+21*e.y+99*i.y+27*n.y)**2/1e4,x=(-27*t.y-9*e.y+24*i.y+12*n.y)**2/625,M=9/16*(i.y+n.y-t.y-e.y)**2,N=Math.sqrt(r+_),O=Math.sqrt(a+m),R=Math.sqrt(u+v),P=Math.sqrt(h+b),F=Math.sqrt(c+x),U=Math.sqrt(g+M);if(s)return 5/2993760*(32134*N+212600*O-97050*R+544800*P-521100*F+427368*U);const V=(-12*t.x-24*e.x+9*i.x+27*n.x)**2/625,Y=(-27*t.x-99*e.x-21*i.x+147*n.x)**2/1e4,K=(-3*t.x-21*e.x-24*i.x+48*n.x)**2/625,tt=(-3*t.x-51*e.x-189*i.x+243*n.x)**2/1e4,j=9*(n.x-i.x)**2,lt=(-12*t.y-24*e.y+9*i.y+27*n.y)**2/625,pt=(-27*t.y-99*e.y-21*i.y+147*n.y)**2/1e4,ft=(-3*t.y-21*e.y-24*i.y+48*n.y)**2/625,ht=(-3*t.y-51*e.y-189*i.y+243*n.y)**2/1e4,W=9*(n.y-i.y)**2,st=Math.sqrt(V+lt),_t=Math.sqrt(Y+pt),Vt=Math.sqrt(K+ft),X=Math.sqrt(tt+ht);return 5/2993760*(16067*(N+Math.sqrt(j+W))+106300*(O+X)-48525*(R+Vt)+272400*(P+_t)-260550*(F+st)+427368*U)}var Kk={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},center:{x:0,y:0}},jk=[{name:"topLeft",dx:-1,dy:-1,cornerIndex:2},{name:"topRight",dx:1,dy:-1,cornerIndex:3},{name:"bottomLeft",dx:-1,dy:1,cornerIndex:1},{name:"bottomRight",dx:1,dy:1,cornerIndex:0}],du={x:0,y:0};function Jk(t,e,i,n,s,r,a,u,h,c,g,_){r=r||a.getNodes()._indexes;const m=h.getZoom(),v=a.getObjectList(!0),b=u.getFlexArrays().nodes.current;let x=1/0,M=0,N=-1/0;u.update();for(let O=0;O<r.length;++O){const R=r[O];if(b.excluded.get(R)||!b.detectable.get(R)||g.has(R))continue;const P=b.x.get(R),F=b.y.get(R),U=b.layer.get(R);if(U<N)continue;du.x=P,du.y=F;const V=h.graphToScreenCoordinates(du),Y=V.x,K=V.y,tt=b.shape.get(R),j=b.scalingMethod.get(R)==="scaled",lt=b.radius.get(R)*(j?m:1),pt=lt+s,ft=(t-Y)/pt,ht=(e-K)/pt;if(du.x=t,du.y=e,!(n&&qL(du,R,u,h,c)))if(c.checkShapeHit(tt,ft,ht)){const W=a.getAttribute(!0,"virtual").get(R)!==0;if(pt>x&&W)continue;x=pt}else{if(!i)continue;{const W=_(b.text.content.get(R)||null),st=b.textHidden.get(R),_t=b.text.minVisibleSize.get(R);if(st||!W||(j?2*lt:1/0)<_t)continue;const Vt=Z0(W,b.text.maxLineLength.get(R)),X=b.innerStroke.width.get(R),et=b.text.margin.get(R),Dt=b.text.padding.get(R),Mt=b.text.size.get(R),At=b.text.scale.get(R),Xt=b.text.scaling.get(R),jt=b.text.font.get(R),Ge=b.text.style.get(R),Se=b.text.position.get(R),Lt=c.measureText(Vt,jt,Ge,1),Gt=Xt?At*lt*2:Mt,ie=Lt.width*Gt/2+Dt,kt=Lt.height*Gt/2+Dt,$t=Kk[Se],ne=X+et+lt,ee=Y+(ne+ie)*$t.x,se=K+(ne+kt)*$t.y;if(t<=ee-ie||t>=ee+ie||e<=se-kt||e>=se+kt)continue}}M=R,N=U}return v.get(M)||null}function qL(t,e,i,n,s){const r=i.getFlexArrays().nodes.current,a=n.getZoom(),u=r.scalingMethod.get(e)==="scaled",h=r.radius.get(e)*(u?a:1),c=r.x.get(e),g=r.y.get(e),_=r.radius.get(e);for(let m=0;m<4;m++){const{name:v,cornerIndex:b}=jk[m],x=r.badges[v].stroke.width.get(e),M=r.badges[v].stroke.scalingMethod.get(e)==="scaled",N=r.badges[v].scale.get(e)*h+(M?a:1)*x,O=r.badges[v].minVisibleSize.get(e)/2,R=r.badges[v].positionScale.get(e);if(!r.badges[v].text.content.get(e)&&!r.badges[v].image.url.get(e)||N<O)continue;const P=n.graphToScreenCoordinates({x:c+_*R*n.getCornerCos(b),y:g+_*R*n.getCornerSin(b)}),{x:F,y:U}=P,V=(t.x-F)/N,Y=(t.y-U)/N;if(s.checkShapeHit("circle",V,Y))return v}}function $k(t,e,i,n,s,r,a,u,h,c,g){s=s||r.getEdges()._indexes;const _=r.getObjectList(!1),m=h.getFlexArrays(),v=m.edges.current,b=m.nodes.current,x=a.getZoom(),M=a.getAngle(),N=Math.cos(M),O=Math.sin(M),R=n/x;du.x=t,du.y=e;const P=a.screenToGraphCoordinates(du),F=P.x,U=P.y;let V=0;h.update();for(let Y=0;Y<s.length;++Y){const K=s[Y],tt=v.source.get(K),j=v.target.get(K),lt=v.excluded.get(K),pt=v.detectable.get(K),ft=u.has(tt),ht=u.has(j);if(lt||!pt||ft||ht)continue;const W=tt===j,st=v.curvature.get(K),_t=v.shape.body.get(K)==="triangle",Vt=v.scalingMethod.get(K)==="scaled",X=v.width.get(K)/(Vt?1:x),et=b.x.get(tt),Dt=b.y.get(tt),Mt=b.x.get(j),At=b.y.get(j);if(W){const Xt=b.scalingMethod.get(tt)==="scaled",jt=J0(et,Dt,st,b.radius.get(tt)/(Xt?1:x),0);if(!wx(F,U,et,Dt,et,Dt,jt.x1,jt.y1,jt.x2,jt.y2,X,R))continue}else if(c){const Xt=zp(et*N-Dt*O,Dt*N+et*O,Mt*N-At*O,At*N+Mt*O,st,c,g);if(!wx(F,U,et,Dt,Mt,At,Xt.x1*N+Xt.y1*O,Xt.y1*N-Xt.x1*O,Xt.x2*N+Xt.y2*O,Xt.y2*N-Xt.x2*O,X,R))continue}else if(st!==0){const Xt=Fp(et,Dt,Mt,At,st);if(!VL(F,U,et,Dt,Mt,At,Xt.x,Xt.y,X,R,_t))continue}else if(!YL(F,U,et,Dt,Mt,At,X,R,_t))continue;V=K}return _.get(V)||null}function tF(t){const e=t.getNodeAttribute("radius"),i=t.getEdgeAttribute("width"),n=t.getNodes(),s=t.getEdges();let r=0,a=0;for(let u=0;u<n._indexes.length;u++){const h=n._indexes[u],c=e.get(h);c>r&&(r=c)}for(let u=0;u<s._indexes.length;u++){const h=s._indexes[u],c=i.get(h);c>a&&(a=c)}return Math.max(2*r,a)}function eF(t){return t===null?"none":t==="webgl"?"WebGL":t==="svg"?"SVG":t==="canvas"?"Canvas":t}function QL(t,e,i,n){const s=(t-e)/i,r=s*s,a=r*s,u=G0.getCoefficients(n),h=s<.5?0:4;return Ia(u[h]+u[h+1]*s+u[h+2]*r+u[h+3]*a,0,1)}function Jf(t,e,i,n){if(t===e)return t;const[s,r,a,u]=io(t),[h,c,g,_]=io(e);return`rgba(${Math.round(255*_n(s,h,i))},${Math.round(255*_n(r,c,i))},${Math.round(255*_n(a,g,i))},${_n(u,_,n)})`}function iF(t,e){const[i,n,s,r]=io(t);return`rgba(${255*i},${255*n},${255*s},${r*e})`}var kA=1/Po,KL=class extends yu{constructor(t){super(t),this._cachePoints=[],this._nextCachePoint=0,this._tmp={x1:0,y1:0,x2:0,y2:0},this._ccp={x1:0,y1:0,x2:0,y2:0},this._pointCopies=Array(128),this._clipViewport=!0}_resetCachePoints(){this._nextCachePoint=0}_point(t,e){let i=this._cachePoints[this._nextCachePoint++];return i||(i={x:0,y:0},this._cachePoints.push(i)),i.x=t,i.y=e,i}setViewportClipping(t){this._clipViewport=t}_displayBuffer(t){const e=t.getSize(),i=t.animated;for(let n=0;n<e;++n){const s=this.extractElement(t,n);s.valid&&this._displayElement(s,i)}}_mixAttributes(t,e,i){const n=QL(this._currentTime,i.beginTime,i.duration,i.easing);return t.dashLength=_n(e.dashLength,t.dashLength,n),t.gapLength=_n(e.gapLength,t.gapLength,n),t.offsetAngle=_n(e.offsetAngle,t.offsetAngle,n),t.opacity=_n(e.opacity,t.opacity,n),t.globalMinVisibleSize=_n(e.globalMinVisibleSize,t.globalMinVisibleSize,n),t.strokeMinVisibleSize=_n(e.strokeMinVisibleSize,t.strokeMinVisibleSize,n),t.patternMinVisibleSize=_n(e.patternMinVisibleSize,t.patternMinVisibleSize,n),t.symbolicSize=_n(e.symbolicSize,t.symbolicSize,n),t.curvature=_n(e.curvature,t.curvature,n),t.fillColor=Jf(e.fillColor,t.fillColor,n,n),t.strokeColor=Jf(e.strokeColor,t.strokeColor,n,n),t.patternColor=Jf(e.patternColor,t.patternColor,n,n),t.x1=_n(e.x1,t.x1,n),t.y1=_n(e.y1,t.y1,n),t.x2=_n(e.x2,t.x2,n),t.y2=_n(e.y2,t.y2,n),t.rectWidthOrSourceRadiusScaled=_n(e.rectWidthOrSourceRadiusScaled,t.rectWidthOrSourceRadiusScaled,n),t.rectWidthOrSourceRadiusFixed=_n(e.rectWidthOrSourceRadiusFixed,t.rectWidthOrSourceRadiusFixed,n),t.rectHeightOrTargetRadiusScaled=_n(e.rectHeightOrTargetRadiusScaled,t.rectHeightOrTargetRadiusScaled,n),t.rectHeightOrTargetRadiusFixed=_n(e.rectHeightOrTargetRadiusFixed,t.rectHeightOrTargetRadiusFixed,n),t.thicknessOrFontSizeScaled=_n(e.thicknessOrFontSizeScaled,t.thicknessOrFontSizeScaled,n),t.thicknessOrFontSizeFixed=_n(e.thicknessOrFontSizeFixed,t.thicknessOrFontSizeFixed,n),t.strokeWidthScaled=_n(e.strokeWidthScaled,t.strokeWidthScaled,n),t.strokeWidthFixed=_n(e.strokeWidthFixed,t.strokeWidthFixed,n),t.offsetScaled=_n(e.offsetScaled,t.offsetScaled,n),t.offsetFixed=_n(e.offsetFixed,t.offsetFixed,n),t}_computeRenderInfo(t){const e=this._viewZoom,i=this._point(t.x1,t.y1),n=this._point(t.x2,t.y2);return{shape:this._shapeManager.getDefinitionFromName(t.shape),pieceId:t.pieceId,dashLength:t.dashLength,gapLength:t.gapLength,hasHead:t.hasHead,hasTail:t.hasTail,isBodyTriangle:t.isBodyTriangle,isSelfLoop:t.isSelfLoop,patternScale:t.patternScale,offsetAngle:Hm(t.offsetAngle),isText:t.isText,adjustTextAngle:t.adjustTextAngle,isBadge:t.isBadge,bentEnable:t.bentEnable,bentVertical:t.bentVertical,opacity:t.opacity,globalMinVisibleSize:t.globalMinVisibleSize,strokeMinVisibleSize:t.strokeMinVisibleSize,patternMinVisibleSize:t.patternMinVisibleSize,symbolicSize:t.symbolicSize===0?1/0:t.symbolicSize*e,curvature:t.curvature,pattern:t.pattern,fillColor:t.fillColor,strokeColor:t.strokeColor,patternColor:t.patternColor,pos1OnGraph:i,pos2OnGraph:n,pos1:this._graphToScreenCoordinates(i),pos2:this._graphToScreenCoordinates(n),rectWidthOrSourceRadius:t.rectWidthOrSourceRadiusScaled*e+t.rectWidthOrSourceRadiusFixed,rectHeightOrTargetRadius:t.rectHeightOrTargetRadiusScaled*e+t.rectHeightOrTargetRadiusFixed,thicknessOrFontSize:t.thicknessOrFontSizeScaled*e+t.thicknessOrFontSizeFixed,strokeWidth:t.strokeWidthScaled*e+t.strokeWidthFixed,offset:t.offsetScaled*e+t.offsetFixed}}_applyBackgroundBlending(t){t.opacity!==1&&(t.fillColor=this._blendColor(t.fillColor,t.opacity),t.strokeColor=this._blendColor(t.strokeColor,t.opacity),t.textColor=this._blendColor(t.textColor,t.opacity))}_pointArray(t){let e=this._pointCopies[t];if(!e){e=new Array(t),this._pointCopies[t]=e;for(let i=0;i<t;++i)e[i]={x:0,y:0,r:0}}return e}_scalePoints(t,e,i,n){const s=t.shape.points.length,r=this._pointArray(s);for(let h=0;h<s;++h){const c=t.shape.points[h],g=r[h];g.x=e.x+c.x*i,g.y=e.y+c.y*n,g.r=c.r*i}const a=t.pos2OnGraph.x-t.pos1OnGraph.x,u=t.pos2OnGraph.y-t.pos1OnGraph.y;if(a!==0||u!==0){const h=Math.sqrt(a*a+u*u),c=a/h,g=u/h;for(const _ of r){const m=_.x-e.x,v=_.y-e.y;_.x=e.x+c*m+g*v,_.y=e.y-g*m+c*v}}return r}_drawPoints(t,e=!1){t.length===1?this._drawCircle(t[0],t[0].r):this._drawPolygon(t,e)}_computeCenter(t){const e=Math.cos(t.offsetAngle),i=Math.sin(t.offsetAngle),n=(t.pos1.x+t.pos2.x)/2+e*t.offset,s=(t.pos1.y+t.pos2.y)/2+i*t.offset;return this._point(n,s)}_displayTextBox(t,e,i,n){const s=this._computeCenter(t),r=t.rectWidthOrSourceRadius/2,a=t.rectHeightOrTargetRadius/2;(e||n)&&this._drawRoundedRectangle(s,r,a,0,t.fillColor)}_displayNodeComponent(t,e,i,n){const s=this._computeCenter(t);if(t.pattern.type!==bh){const r=t.rectWidthOrSourceRadius/2,a=t.rectHeightOrTargetRadius/2,u=this._scalePoints(t,s,r,a);if((e||n)&&this._drawPoints(u,!0),e&&this._fill(t.fillColor),n){if(this._startClip(),t.pattern.type===Wg){let h=t.pattern.attributes.colorArray;t.opacity!==1&&(h=h.map(c=>this._blendColor(c,t.opacity))),this._displayPieChart(s,r,h)}else if(t.pattern.type===gd||t.pattern.type===_d){const c=Math.round(t.rectHeightOrTargetRadius*t.patternScale),g=t.pattern.attributes.text,_=this._blendColor(t.patternColor,t.opacity),m=t.pattern.attributes.font,v=t.pattern.attributes.style,b=t.pattern.attributes.align,x=t.rectWidthOrSourceRadius,M=t.pattern.attributes.paddingTop,N=t.pattern.attributes.paddingLeft;this._displayText(s,0,g,_,m,c,v,b,x,N,M,!0)}else if(t.pattern.type===ph){const h=t.pattern.attributes.image;if(h.isDummy||h.width&&h.height){const c=t.pattern.attributes.duplicated,g=c?1:t.patternScale,_=t.rectWidthOrSourceRadius*g,m=t.rectHeightOrTargetRadius*g,v=t.pattern.attributes.scaled,b=t.opacity;this._displayImage(s,_,m,h,v,c,b)}}this._endClip()}if(i){const h=t.strokeWidth/2,c=this._scalePoints(t,s,r+h,a+h);this._drawPoints(c),this._stroke(t.strokeColor,t.strokeWidth)}}else if(n){const a=t.thicknessOrFontSize,u=t.pattern.attributes.text,h=this._blendColor(t.patternColor,t.opacity),c=t.pattern.attributes.font,g=t.pattern.attributes.style,_=t.pattern.attributes.align,m=t.rectWidthOrSourceRadius;this._displayText(s,0,u,h,c,a,g,_,m,0,0,!1)}}_displayElement(t,e){if(!t.end||!t.end.shape||!t.end.pieceId||e&&(!t.start||!t.animation))return;this._resetCachePoints();const i=e?this._mixAttributes(t.end,t.start,t.animation):t.end,n=this._computeRenderInfo(i);if(n.symbolicSize<n.globalMinVisibleSize||n.opacity===0)return;this._applyBackgroundBlending(n);const s=!!(n.strokeColor&&n.strokeWidth>0&&n.symbolicSize>=n.strokeMinVisibleSize),r=n.pattern.type!==no&&n.symbolicSize>=n.patternMinVisibleSize,a=!!n.fillColor;if(n.pieceId===Pa)return this._displayNodeComponent(n,a,s,r);if(n.pieceId===ld)return this._displayTextBox(n,a,s,r);const u=n.pos2.x-n.pos1.x,h=n.pos2.y-n.pos1.y,c=Math.sqrt(u*u+h*h);let g,_=null,m=null;if(n.bentEnable&&!n.isSelfLoop)this._tmp.x1=n.pos1.x,this._tmp.y1=n.pos1.y,this._tmp.x2=n.pos2.x,this._tmp.y2=n.pos2.y,n.pos1.x=this._tmp.x1*this._viewAngleCos-this._tmp.y1*this._viewAngleSin,n.pos1.y=this._tmp.y1*this._viewAngleCos+this._tmp.x1*this._viewAngleSin,n.pos2.x=this._tmp.x2*this._viewAngleCos-this._tmp.y2*this._viewAngleSin,n.pos2.y=this._tmp.y2*this._viewAngleCos+this._tmp.x2*this._viewAngleSin,zp(n.pos1.x,n.pos1.y,n.pos2.x,n.pos2.y,n.curvature,n.bentEnable,n.bentVertical,this._ccp),n.pos1.x=this._tmp.x1,n.pos1.y=this._tmp.y1,n.pos2.x=this._tmp.x2,n.pos2.y=this._tmp.y2,this._tmp.x1=this._ccp.x1,this._tmp.y1=this._ccp.y1,this._tmp.x2=this._ccp.x2,this._tmp.y2=this._ccp.y2,this._ccp.x1=this._tmp.x1*this._viewAngleCos+this._tmp.y1*this._viewAngleSin,this._ccp.y1=this._tmp.y1*this._viewAngleCos-this._tmp.x1*this._viewAngleSin,this._ccp.x2=this._tmp.x2*this._viewAngleCos+this._tmp.y2*this._viewAngleSin,this._ccp.y2=this._tmp.y2*this._viewAngleCos-this._tmp.x2*this._viewAngleSin,_=this._point(this._ccp.x1,this._ccp.y1),m=this._point(this._ccp.x2,this._ccp.y2),g=Qk(n.pos1,_,m,n.pos2);else if(n.isSelfLoop){const v=n.pieceId===id||n.pieceId===id+ld?n.strokeWidth/2:n.rectWidthOrSourceRadius,{x1:b,y1:x,x2:M,y2:N}=this._getSelfLoopControlPoints(n.pos1,n.curvature,v);_=this._point(b,x),m=this._point(M,N),g=sF(n.pos1,_,m,n.pos2,1)}else n.curvature?(_=this._getQuadraticCurveControlPoint(n),g=nF(n.curvature,c,1)):g=c;if(n.pieceId===id||n.pieceId===id+ld){const v=n.strokeWidth,b=this._getPointOnLine(n.pos1,_,m,n.pos2,.5),x=this._getTangentOnLine(n.pos1,_,m,n.pos2,.5);if(n.rectWidthOrSourceRadius>=g-v&&!n.isSelfLoop){if(!n.adjustTextAngle)return;x.x=1,x.y=0}let M=-Math.atan2(x.y,x.x);const N=Hm(n.offsetAngle-M);(!n.isSelfLoop&&N<0||n.isSelfLoop&&n.offsetAngle<0)&&(x.x*=-1,x.y*=-1),(M>Math.PI/2||M<-Math.PI/2)&&(M+=Math.PI);const O=this._getOrthogonal(x),R=b.x+O.x*n.offset,P=b.y+O.y*n.offset;if(n.pieceId===id+ld){if(!n.fillColor)return;const F=n.rectWidthOrSourceRadius/2,U=n.rectHeightOrTargetRadius/2;this._drawRoundedRectangle(this._point(R,P),F,U,N+Math.PI/2,n.fillColor)}else{const F=this._point(R,P),U=M,V=n.thicknessOrFontSize,Y=n.pattern.attributes.text,K=this._blendColor(n.patternColor,n.opacity),tt=n.pattern.attributes.font,j=n.pattern.attributes.style,lt=n.pattern.attributes.align,pt=n.rectWidthOrSourceRadius;this._displayText(F,U,Y,K,tt,V,j,lt,pt,0,0,!1)}}else{const v=n.pieceId===F0,b=n.pieceId===B0,x=Math.cos(n.offsetAngle),M=Math.sin(n.offsetAngle);n.pos1.x+=x*n.offset,n.pos1.y+=M*n.offset,n.pos2.x+=x*n.offset,n.pos2.y+=M*n.offset;const N=n.shape.name==="line",O=n.thicknessOrFontSize,R=n.rectWidthOrSourceRadius,P=n.rectHeightOrTargetRadius,F=+n.hasHead,U=+n.hasTail,V=Math.max(yu.minEdgeTipSize,O*yu.edgeArrowSizeRatio),Y=F*Math.min(5*R,V),K=U*Math.min(5*P,V),tt=n.isSelfLoop?1/0:c-R-P,j=Math.min(0,tt-Y-K)/2,lt=O/2;let pt=R>lt?R-Math.sqrt(R*R-lt*lt):lt;const ft=Math.max(R+K+U*j,0)-(1-F)*pt;pt=R>lt?P-Math.sqrt(P*P-lt*lt):lt;const ht=Math.max(P+Y+F*j,0)-(1-U)*pt;if(v||b){const W=b?-1:1,st=(v?g-ht:ft)-W;let _t=null,Vt=null;if((n.bentEnable||n.isSelfLoop)&&_&&m){const X=this._getTFromLengthOnCubicCurve(n.pos1,_,m,n.pos2,(v?ht:ft)+1+n.strokeWidth/2,b);_t=this._getPointOnCubicCurve(n.pos1,_,m,n.pos2,X),Vt=this._getTangentOnCubicCurve(n.pos1,_,m,n.pos2,X)}else if(n.curvature&&_){const X=this._getTFromLengthOnQuadraticCurve(n.pos1,_,n.pos2,st-n.strokeWidth/2*W);_t=this._getPointOnQuadraticCurve(n.pos1,_,n.pos2,X),Vt=this._getTangentOnQuadraticCurve(n.pos1,_,n.pos2,X)}else{const X=st/g;_t=this._mixPoints(n.pos1,n.pos2,X),Vt=this._point(u/c,h/c)}if(Vt.x*=W,Vt.y*=W,a){if(n.shape.hole){const et=this._makeEdgeExtremityPoints(_t,Vt,V,n.shape.hole);this._drawPoints(et),this._startReverseClip()}const X=this._makeEdgeExtremityPoints(_t,Vt,V,n.shape.points);this._drawPoints(X),this._fill(n.fillColor),n.shape.hole&&this._endReverseClip()}if(s){if(n.shape.hole){const Dt=this._makeEdgeExtremityPoints(_t,Vt,V,n.shape.hole);this._drawPoints(Dt),this._stroke(n.strokeColor,n.strokeWidth)}const X=V+n.strokeWidth/2,et=this._makeEdgeExtremityPoints(_t,Vt,X,n.shape.points);this._drawPoints(et),this._stroke(n.strokeColor,n.strokeWidth)}}else{if(g-ft-ht<=0)return;if(N){const W=rF(g,O,ft,ht,n.dashLength,n.gapLength);s&&(this._drawLine(n.pos1,_,m,n.pos2),this._stroke(n.strokeColor,O+2*n.strokeWidth,W)),a&&(this._drawLine(n.pos1,_,m,n.pos2),this._stroke(n.fillColor,O,W))}else{const W=ft,st=g-ht;if(s){const _t=this._makeTriangleEdgeBody(n.pos1,_,m,n.pos2,W,st,O+n.strokeWidth/2,n.strokeWidth/2,g);this._drawPoints(_t),this._stroke(n.strokeColor,n.strokeWidth)}if(a){const _t=this._makeTriangleEdgeBody(n.pos1,_,m,n.pos2,W,st,O,0,g);this._drawPoints(_t),this._fill(n.fillColor)}}}}}_makeTriangleEdgeBody(t,e,i,n,s,r,a,u,h){return e?i?this._makeSelfLoopTriangleEdge(t,e,i,n,s,r,a,u,h):this._makeCurveTriangleEdge(t,e,n,s,r,a,u):this._makeStraightTriangleEdge(t,n,s,r,a,u)}_makeCurveTriangleEdge(t,e,i,n,s,r,a){const u=2*Po+2,h=this._pointArray(u),c=this._getTFromLengthOnQuadraticCurve(t,e,i,n),g=(this._getTFromLengthOnQuadraticCurve(t,e,i,s)-c)/Po,_=(a-r)/Po/2;let m=r/2,v=c;for(let b=0;b<=Po;++b){const x=this._getPointOnQuadraticCurve(t,e,i,v),M=this._getTangentOnQuadraticCurve(t,e,i,v),N=this._getOrthogonal(M),O=N.x*m,R=N.y*m,P=h[b],F=h[u-1-b];P.x=x.x+O,P.y=x.y+R,F.x=x.x-O,F.y=x.y-R,v+=g,m+=_}return h}_makeSelfLoopTriangleEdge(t,e,i,n,s,r,a,u,h){const c=2*Po+2,g=this._pointArray(c),_=this._getTFromLengthOnCubicCurve(t,e,i,n,s),m=(this._getTFromLengthOnCubicCurve(t,e,i,n,h-r,!1)-_)/Po,v=(u-a)/Po/2;let b=a/2,x=_;for(let M=0;M<=Po;++M){const N=this._getPointOnCubicCurve(t,e,i,n,x),O=this._getTangentOnCubicCurve(t,e,i,n,x),R=this._getOrthogonal(O),P=R.x*b,F=R.y*b,U=g[M],V=g[c-1-M];U.x=N.x+P,U.y=N.y+F,V.x=N.x-P,V.y=N.y-F,x+=m,b+=v}return g}_makeStraightTriangleEdge(t,e,i,n,s,r){const a=e.x-t.x,u=e.y-t.y,h=Math.sqrt(a*a+u*u),c=this._point(a/h,u/h),g=this._getOrthogonal(c),_=s/2,m=r/2,v=this._pointArray(4),b=v[0],x=v[1],M=v[2],N=v[3],O=t.x+c.x*i,R=t.y+c.y*i,P=t.x+c.x*n,F=t.y+c.y*n,U=g.x*_,V=g.y*_,Y=g.x*m,K=g.y*m;return b.x=O+U,b.y=R+V,x.x=O-U,x.y=R-V,M.x=P-Y,M.y=F-K,N.x=P+Y,N.y=F+K,v}_makeEdgeExtremityPoints(t,e,i,n){const s=this._pointArray(n.length),r=i/2,a=t.x+e.x*r,u=t.y+e.y*r,h=e.x,c=e.y;for(let g=0;g<n.length;++g){const _=n[g],m=s[g],v=(h*_.x-c*_.y)*r,b=(c*_.x+h*_.y)*r;m.x=a+v,m.y=u+b,m.r=_.r*r}return s}_drawLine(t,e,i,n){e?i?this._drawCubicCurve(t,e,i,n):this._drawQuadraticCurve(t,e,n):this._drawStraightLine(t,n)}_getSelfLoopControlPoints(t,e,i){return J0(t.x,t.y,e,i,this._viewAngle,this._tmp)}_getQuadraticCurveControlPoint(t){return Fp(t.pos1.x,t.pos1.y,t.pos2.x,t.pos2.y,t.curvature,this._point(0,0))}_graphToScreenCoordinates(t){const e=this._width/2,i=this._height/2,n=(t.x-this._viewX)*this._viewZoom,s=(t.y-this._viewY)*this._viewZoom,r=this._viewAngleCos,a=this._viewAngleSin,u=r*n+a*s+e,h=-a*n+r*s+i;return this._point(u,h)}_blendColor(t,e){return t&&this._backgroundColor?Jf(this._backgroundColor,t,e,1):t?iF(t,e):null}_getTangentOnLine(t,e,i,n,s){return e?i?this._getTangentOnCubicCurve(t,e,i,n,s):this._getTangentOnQuadraticCurve(t,e,n,s):this._getTangentOnStraightLine(t,n)}_getTangentOnStraightLine(t,e){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n);return this._point(i/s,n/s)}_getTangentOnQuadraticCurve(t,e,i,n){const s=1-n,r=s*e.x+n*i.x-(s*t.x+n*e.x),a=s*e.y+n*i.y-(s*t.y+n*e.y),u=Math.sqrt(r*r+a*a);return this._point(r/u,a/u)}_getTangentOnCubicCurve(t,e,i,n,s){const r=1-s,a=r*r,u=s*s,h=a*(e.x-t.x)+2*r*s*(i.x-e.x)+u*(n.x-i.x),c=a*(e.y-t.y)+2*r*s*(i.y-e.y)+u*(n.y-i.y),g=Math.sqrt(h*h+c*c);return this._point(h/g,c/g)}_mixPoints(t,e,i){const n=_n(t.x,e.x,i),s=_n(t.y,e.y,i);return this._point(n,s)}_getOrthogonal(t){return this._point(-t.y,t.x)}_getPointOnLine(t,e,i,n,s){return e?i?this._getPointOnCubicCurve(t,e,i,n,s):this._getPointOnQuadraticCurve(t,e,n,s):this._mixPoints(t,n,s)}_getPointOnQuadraticCurve(t,e,i,n){const s=bc(t.x,e.x,i.x,n),r=bc(t.y,e.y,i.y,n);return this._point(s,r)}_getPointOnCubicCurve(t,e,i,n,s){const r=zA(t.x,e.x,i.x,n.x,s),a=zA(t.y,e.y,i.y,n.y,s);return this._point(r,a)}_getTFromLengthOnCubicCurve(t,e,i,n,s,r=!0){if(!r)return 1-this._getTFromLengthOnCubicCurve(n,i,e,t,s,!0);let a=0,u=1,h=0;for(let c=0;c<10;c++){const g=(a+u)/2,_=g,m=this._getPointOnCubicCurve(t,e,i,n,_),v=Math.hypot(t.x-m.x,t.y-m.y);if(Math.abs(v-s)<.01)return g;v<s?(a=g,h=g):u=g}return h}_getTFromLengthOnQuadraticCurve(t,e,i,n){let s=t.x,r=t.y,a=0,u=0;for(let h=0;h<Po;++h){a+=kA;const c=bc(t.x,e.x,i.x,a),g=bc(t.y,e.y,i.y,a),_=c-s,m=g-r,v=Math.sqrt(_*_+m*m),b=u+v;if(b>n)return a-kA*((b-n)/v);u=b,s=c,r=g}return 1}};function nF(t,e,i){const n=Math.abs(t)/Mp+Ip,s=n*n,r=i-.5,a=r*r,u=1/(16*s),h=Math.sqrt(a+u),c=.5/n*Math.sqrt(s+.25);return Math.abs(2*n)*(r*h+.5*c+u*Math.log(Math.abs((r+h)/(-.5+c))))*e}function sF(t,e,i,n,s){const r=(t.x+e.x+i.x)/3,a=(t.y+e.y+i.y)/3,u=r-e.x,h=a-e.y,c=e.x-i.x,g=e.y-i.y,_=u*u+h*h,m=(c*c+g*g)/4,v=Math.sqrt(_-m);return 2*yL*v*3.14159265359*s}function rF(t,e,i,n,s,r){const a=[];if(i&&a.push(0,i),s&&r){const u=s*e,h=r*e,c=u+h,g=t-n-i-c;let _=0;for(;_<g;)a.push(u,h),_+=c;const m=t-n-i-_,v=Math.min(u,m),b=Math.max(m-v,0);a.push(v,b)}else a.push(t-n-i,0);return n&&a.push(0,n),a}var Sc=0,fg=1,gg=2,nd=3,FA=4,$0=0,Lx=1,oF={[Sc]:{min:"NEAREST",mag:"NEAREST",mipmap:!1},[fg]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[gg]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[nd]:{min:"LINEAR_MIPMAP_LINEAR",mag:"LINEAR",mipmap:!0}},aF={[$0]:"ALPHA",[Lx]:"RGBA"};function zc(t){return Math.ceil((t+2*xh)/to)*to}function lF(t,e,i,n,s){for(let r=0,a=t.length;r<a;++r){const u=t[r],h=u.x,c=u.y,g=h+n,_=c+s;let m=g<i&&_<i;if(m){for(let v=h;v<g;++v)if(e[v+c*i]===1){m=!1;break}}if(m){for(let v=c;v<_;++v)if(e[h+v*i]===1){m=!1;break}}if(m){for(let v=h;v<g;++v)for(let b=c;b<_;++b)e[v+b*i]=1;return t.splice(r,1),t.push({x:h,y:_},{x:g,y:c}),u}}return null}function BA(t,e,i,n,s,r,a){const u=4*t,h=e>>1<<7,c=e%2<<7;a[u]=i/to,a[u+1]=n/to,a[u+2]=h+s/to,a[u+3]=c+r/to}function uF(t,e,i,n,s,r,a){n|=0,s|=0,r|=0,a|=0,e|=0;for(let u=0;u<r;++u)for(let h=0;h<a;++h){const c=4*(n+u+(s+h)*e),g=4*(u+h*r);t[c]=i[g],t[c+1]=i[g+1],t[c+2]=i[g+2],t[c+3]=i[g+3]}}function hF(t,e){let i=0,n=4;for(let r=0;r<t.length;++r){const{width:a,height:u}=t[r],h=zc(a),c=zc(u);i+=h*c,n=Math.max(n,Math.max(h,c))}const s=fh(Math.max(n,Math.sqrt(i)));return Math.min(s,e)}function UA(t,e){return Math.floor((e-t)/2)}function GA(t,e,i,n,s,r,a){const{min:u,mag:h,mipmap:c}=oF[r],g=t[aF[a]];if(a===$0){const _=new Uint8Array(s*s);for(let m=0;m<_.length;++m)_[m]=n[4*m+3];n=_}t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,g,s,s,0,g,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[h]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[u]),c&&t.generateMipmap(t.TEXTURE_2D)}function jL(t,e,i,n,s){const r=new Uint8Array(i*i*4),a=Math.ceil(i/to),u=new Uint8Array(a*a),h=[{x:0,y:0}];for(let c=0;c<e.length;++c){const g=e[c],_=g.id,m=zc(g.width)/to,v=zc(g.height)/to,b=lF(h,u,a,m,v);if(b){const x=g.width,M=g.height,N=g.pixels,O=m*to,R=v*to,P=b.x*to+UA(x,O),F=b.y*to+UA(M,R);uF(r,i,N,P,F,x,M),BA(_,t,P,F,O,R,s)}else{if(i<n)return jL(t,e,2*i,n,s);mu(`exceeded max WebGL texture size of ${n}; some texts/icons/images won't be displayed`),BA(_,t,0,0,0,0,s)}}return{texture:r,size:i}}function dF(t,e,i,n){const{getDistanceFromStrokeVertically:s,getDistanceFromStrokeHorizontally:r}=t,a=e*(1-i)/2,u=(e-1)/2;for(let h=0;h<e;++h)for(let c=0;c<e;++c){const g=4*(c*e+h),_=(h-u)/a,m=(c-u)/a,v=Ia(s(_,m),-1,1),b=Ia(r(_,m),-1,1);cF(n,g,HA(v),HA(b))}}function HA(t){const e=(t+1)/2;return Math.floor(32768*e)}function cF(t,e,i,n){t[e]=i>>8,t[e+1]=i%256,t[e+2]=n>>8,t[e+3]=n%256}function JL(t,e){let i=-Math.PI/2;const n=2*Math.PI/t.length;for(const s of t){const r=i+n;e(s,i,r),i=r}}function $L(t,e,i,n,s){JL(e,(r,a,u)=>{t.beginPath(),t.moveTo(i,n),t.arc(i,n,s,a,u),t.fillStyle=r,t.fill()})}var fF=!Pr().__dummy,gF=class extends KL{constructor(t){super(t),this._canvas=Pr(),this._imgCanvas=Pr(),this._initCanvas(this._canvas),this._ctx=this._canvas.getContext("2d"),this._imgCtx=this._imgCanvas.getContext("2d")}static getName(){return"Canvas"}static isAvailable(){return fF}getDomElement(){return this._canvas}_render({dimensionsChanged:t}){t&&TL(this._canvas,this._width,this._height,this._pixelRatio);const e=this._ctx,i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;e.clearRect(0,0,i,n),this._backgroundColor&&this._renderBackground&&(e.fillStyle=this._backgroundColor,e.fillRect(0,0,i,n));const s=this._bufferList.getBuffersByAscendingDepth();for(const r of s)this._isBufferDisplayable(r)&&this._displayBuffer(r)}_drawRoundedRectangle(t,e,i,n,s){const r=this._ctx,a=this._pixelRatio,u=t.x*a,h=t.y*a;e*=a,i*=a;const c=this._textManager.getCornerRadius(),g=Math.min(c*a,i);e+=g/2,r.save(),r.translate(u,h),r.rotate(n),r.beginPath(),r.arc(e-g,i-g,g,0,Math.PI/2),r.arc(-e+g,i-g,g,Math.PI/2,Math.PI),r.arc(-e+g,-i+g,g,Math.PI,3*Math.PI/2),r.arc(e-g,-i+g,g,3*Math.PI/2,0),s&&(r.fillStyle=s,r.fill()),r.restore()}_drawCircle(t,e){const i=this._ctx,n=this._pixelRatio,s=t.x*n,r=t.y*n,a=e*n;i.beginPath(),i.arc(s,r,a,0,2*Math.PI)}_drawPolygon(t){const e=this._ctx,i=this._pixelRatio;e.beginPath();const n=t[0];e.moveTo(n.x*i,n.y*i);for(let s=1;s<t.length;++s){const r=t[s];e.lineTo(r.x*i,r.y*i)}e.closePath()}_drawStraightLine(t,e){const i=this._ctx,n=this._pixelRatio;i.beginPath(),i.moveTo(t.x*n,t.y*n),i.lineTo(e.x*n,e.y*n)}_drawQuadraticCurve(t,e,i){const n=this._ctx,s=this._pixelRatio;n.beginPath(),n.moveTo(t.x*s,t.y*s),n.quadraticCurveTo(e.x*s,e.y*s,i.x*s,i.y*s)}_drawCubicCurve(t,e,i,n){const s=this._ctx,r=this._pixelRatio;s.beginPath(),s.moveTo(t.x*r,t.y*r),s.bezierCurveTo(e.x*r,e.y*r,i.x*r,i.y*r,n.x*r,n.y*r)}_fill(t){const e=this._ctx;e.fillStyle=t,e.fill()}_stroke(t,e,i=[]){if(e===0)return;const n=this._ctx,s=this._pixelRatio;n.setLineDash(i.map(r=>r*this._pixelRatio)),n.lineWidth=e*s,n.strokeStyle=t,n.stroke()}_startClip(){this._ctx.save(),this._ctx.clip()}_endClip(){this._ctx.restore()}_startReverseClip(){this._ctx.save(),this._ctx.rect(0,0,this._canvas.width,this._canvas.height),this._ctx.clip("evenodd")}_endReverseClip(){this._ctx.restore()}_displayText(t,e,i,n,s,r,a,u,h,c,g){const _=this._ctx,m=this._pixelRatio,v=t.x*m,b=t.y*m,x=r*m,M=u==="center"?0:-h/2;if(g=g*this._viewZoom*m,c=c*this._viewZoom*m,_.save(),_.translate(v,b+m),_.rotate(-e),_.textBaseline="middle",_.textAlign=u,Eh(_,s,x,a),_.fillStyle=n,i.indexOf(`
`)!==-1){const N=i.split(`
`),O=N.length;let R=(1-O)/2*x;for(let P=0;P<O;++P)_.fillText(N[P],c+M,g+R),R+=x}else _.fillText(i,c+M,g);_.restore()}_displayImage(t,e,i,n,s,r,a){if(this._hideImages||"isDummy"in n)return;let u=n;a!==1&&(u=this._blendImageOnBackground(n,a));const h=this._ctx,c=this._pixelRatio,g=t.x*c,_=t.y*c,m=e*c,v=i*c,b=u.width*c,x=u.height*c;if(s)h.drawImage(u,g-m/2,_-v/2,m,v);else if(r){const M=g-m/2,N=_-v/2,O=g+m/2,R=_+v/2;let P=g-b/2,F=_-x/2;for(;P>M;)P-=b;for(;F>N;)F-=x;const U=F;for(;P<O;){for(;F<R;)h.drawImage(u,P,F,b,x),F+=x;P+=b,F=U}}else h.drawImage(u,g-b/2,_-x/2,b,x)}_displayPieChart(t,e,i){const n=this._ctx,s=this._pixelRatio,r=t.x*s,a=t.y*s,u=e*s*2,h=2*u;i.length===1&&(n.fillStyle=i[0],n.fillRect(r-u,a-u,h,h)),i.length>1&&$L(n,i,r,a,u)}_blendImageOnBackground(t,e){const i=this._backgroundRgba,n=`rgb(${Math.round(255*i[0])},${Math.round(255*i[1])},${Math.round(255*i[2])})`;return this._imgCanvas.width=t.width,this._imgCanvas.height=t.height,this._imgCtx.clearRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=1,this._imgCtx.fillStyle=n,this._imgCtx.fillRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=e,this._imgCtx.drawImage(t,0,0),this._imgCanvas}getImageData(){return this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height)}},tC=!1;try{tC=!!un("svg")}catch{}var kf="none",_F={left:"start",center:"middle",right:"end"},Ma="data-element-id",VA="data-text-component",mF="node-text",pF="edge-text",yF="badge-text";function ud(t){return Math.round(1e3*t)/1e3}function YA(t,e,i,n,s,r){const a=un("image");return a.setAttribute("width",ud(n)),a.setAttribute("height",ud(s)),a.setAttribute("x",ud(e)),a.setAttribute("y",ud(i)),a.setAttribute("href",t),r&&r.appendChild(a),a}function vF(t,e,i,n,s,r=1,a){const u=un("rect");return u.setAttribute("x",t),u.setAttribute("y",e),u.setAttribute("width",i),u.setAttribute("height",n),u.setAttribute("fill",s),u.setAttribute("fill-opacity",r),a&&a.appendChild(u),u}var xF=class extends KL{constructor(t){super(t),this._svg=un("svg"),this._defs=un("defs"),this._styles=un("g",{class:"styles"}),this._background=un("rect",{width:"100%",height:"100%",fill:"none",class:"ogma-svg-background"}),this._currentElementId="0",this._currentClipPathId=null,this._clipPathCounter=0,this._defs.appendChild(this._styles),this._svg.setAttribute("pointer-events","none"),this._svg.style.userSelect="none",this._svg.appendChild(this._defs),this._svg.appendChild(this._background),this._clear()}static getName(){return"SVG"}static isAvailable(){return tC}getDomElement(){return this._svg}_render({dimensionsChanged:t}){if(t&&m0(this._svg,{width:this._width,height:this._height}),this._backgroundColor&&this._renderBackground){const i=cc(this._backgroundColor);this._background.setAttribute("fill",i.color),this._background.setAttribute("fill-opacity",i.opacity)}const e=this._bufferList.getBuffersByAscendingDepth();this._clear(),this._svg.removeChild(this._container);for(let i=0;i<e.length;++i){const n=e[i];this._isBufferDisplayable(n)&&this._displayBuffer(n)}this._svg.appendChild(this._container)}_clear(){this._container&&this._svg.removeChild(this._container),this._container=un("g"),this._svg.appendChild(this._container),this._clipPaths&&this._defs.removeChild(this._clipPaths),this._clipPaths=un("g"),this._defs.appendChild(this._clipPaths),this._clipPaths.setAttribute("class","clip-paths"),this._filters&&this._defs.removeChild(this._filters),this._filters=un("g"),this._defs.appendChild(this._filters)}_displayElement(t,e){this._currentElementId=t.id>=0?`n${t.id}`:"e"+-t.id,super._displayElement(t,e)}_addBackgroundBlendingFilter(t){const e=io(this._backgroundColor),i=t,n=1-t,s=[i,0,0,0,e[0]*n,0,i,0,0,e[1]*n,0,0,i,0,e[2]*n,0,0,0,1,0].join(" "),r=`filter-${this._currentElementId}`,a=un("filter",{id:r}),u=un("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:s});return a.appendChild(u),this._filters.appendChild(a),r}_drawRoundedRectangle(t,e,i,n,s){const r=t.x,a=t.y,u=Math.min(this._textManager.getCornerRadius(),i);e+=u/2;const h=un("path"),c=`M ${r+e-u} ${a+i}     A ${u} ${u} 0 0 0 ${r+e} ${a+i-u}     L ${r+e} ${a-i+u}     A ${u} ${u} 0 0 0 ${r+e-u} ${a-i}     L ${r-e+u} ${a-i}     A ${u} ${u} 0 0 0 ${r-e} ${a-i+u}     L ${r-e} ${a+i-u}     A ${u} ${u} 0 0 0 ${r-e+u} ${a+i}     L ${r+e-u} ${a+i}`;h.setAttribute("d",c),h.setAttribute("fill",kf),h.setAttribute("transform",`rotate(${lx(n)} ${t.x} ${t.y})`),h.setAttribute(Ma,this._currentElementId),this._container.appendChild(h),this._element=h,s&&this._fill(s)}_drawCircle(t,e){const{x:i,y:n}=t,s=`M ${i-e}, ${n} a ${e},${e} 0 1,0 ${2*e},0 a ${e},${e} 0 1,0 -${2*e},0`,r=un("path");r.setAttribute("d",s),r.setAttribute("fill",kf),r.setAttribute(Ma,this._currentElementId),this._container.appendChild(r),this._element=r}_drawPolygon(t,e){const i=un("path");let n="";for(let s=0;s<t.length;s++){const{x:r,y:a}=t[s];n+=`${s===0?"M":"L"}${r},${a} `}n+="Z",i.setAttribute("d",n),i.setAttribute(Ma,this._currentElementId),i.setAttribute("fill",kf),e&&i.setAttribute(VA,!0),this._container.appendChild(i),this._element=i}_drawStraightLine(t,e){const i=un("path"),n=`M ${t.x},${t.y} L${e.x},${e.y}`;i.setAttribute("d",n),i.setAttribute(Ma,this._currentElementId),this._container.appendChild(i),this._element=i}_drawQuadraticCurve(t,e,i){const n=un("path"),s=`M ${t.x},${t.y} Q${e.x},${e.y} ${i.x},${i.y}`;n.setAttribute("d",s),n.setAttribute("fill",kf),n.setAttribute(Ma,this._currentElementId),this._container.appendChild(n),this._element=n}_drawCubicCurve(t,e,i,n){const s=un("path"),r=`M ${t.x},${t.y} C${e.x},${e.y} ${i.x},${i.y} ${n.x},${n.y}`;s.setAttribute("d",r),s.setAttribute("fill",kf),s.setAttribute(Ma,this._currentElementId),this._container.appendChild(s),this._element=s}_fill(t){const e=cc(t);this._element.setAttribute("fill",e.color),this._element.setAttribute("fill-opacity",e.opacity),this._currentClipPathId&&this._element.setAttribute("clip-path",`url(#${this._currentClipPathId})`)}_stroke(t,e,i=[]){if(e===0)return;const n=this._element;n.setAttribute("stroke-width",e);const s=cc(t);n.setAttribute("stroke",s.color),n.setAttribute("stroke-opacity",s.opacity),i.length>0&&n.setAttribute("stroke-dasharray",i.map(ud).toString())}_startClip(){const t=un("clipPath"),e=this._element.cloneNode(!1);this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)}_endClip(){this._currentClipPathId=null}_startReverseClip(){const t=un("clipPath"),e=this._element.cloneNode(!1),i=e.getAttribute("d");e.setAttribute("clip-rule","evenodd"),e.setAttribute("d",`${i} M 0 0 L ${this._width} 0 L ${this._width} ${this._height} L 0 ${this._height}`),this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)}_endReverseClip(){this._currentClipPathId=null}_displayText(t,e,i,n,s,r,a="normal",u,h,c,g,_){const m=un("g");m.setAttribute(Ma,this._currentElementId),m.setAttribute(VA,!0);let v=this._currentElementId[0]==="n"?mF:pF;_&&(v+=" "+yF),m.setAttribute("class",v);const b=cc(n),x=b.opacity,M=cc(b.color),N=t.x+c*this._viewZoom,O=t.y+1+g*this._viewZoom,R=ud(N);m.setAttribute("font-family",s),m.setAttribute("font-size",r),a==="bold"?m.setAttribute("font-weight",a):m.setAttribute("font-style",a),m.setAttribute("fill",M.color),m.setAttribute("fill-opacity",x),e&&m.setAttribute("transform",`rotate(${lx(-e)} ${N}, ${O})`),m.setAttribute("text-anchor",_F[u]||"middle"),m.setAttribute("dominant-baseline","middle");const P=i.split(`
`),F=P.length,U=ud(O-(F+1)/2*r),V=u==="center"?0:-h/2;for(let Y=0;Y<F;Y++){const K=un("text");K.appendChild(y0(P[Y])),K.setAttribute("x",R+V),K.setAttribute("y",U+(Y+1)*r),m.appendChild(K)}this._currentClipPathId&&m.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(m)}_displayImage(t,e,i,n,s,r,a){const u=t.x,h=t.y;if(this._hideImages||!("isDummy"in n)&&(!n.width||!n.height))return;const c=e,g=i;let _,m=n.width,v=n.height;if(s&&(m=c,v=g),r){const b=u-c/2,x=h-g/2,M=u+c/2,N=h+g/2;let O=u-m/2,R=h-v/2;for(_=un("g"),_.setAttribute(Ma,this._currentElementId);O>b;)O-=m;for(;R>x;)R-=v;const P=R;for(;O<M;){for(;R<N;)YA(n.src,O,R,m,v,_),R+=v;R=P,O+=m}}else _=YA(n.src,u-m/2,h-v/2,m,v),_.setAttribute(Ma,this._currentElementId);if(this._currentClipPathId&&_.setAttribute("clip-path",`url(#${this._currentClipPathId})`),a!==1){const b=this._addBackgroundBlendingFilter(a);_.setAttribute("filter",`url(#${b})`)}this._container.appendChild(_)}_displayPieChart(t,e,i){const n=2*e,s=2*n,r=t.x,a=t.y;let u;const h=un("g");h.setAttribute(Ma,this._currentElementId),i.length===1&&(u=vF(r-n,a-n,s,s,i[0],1,h)),i.length>1&&JL(i,(c,g,_)=>{const m=r+e*Math.cos(_),v=a+e*Math.sin(_),b=r+e*Math.cos(g),x=a+e*Math.sin(g),M=_-g<=Math.PI?0:1,N=`M ${m},${v} A ${e},${e} 0 ${M} 0 ${b},${x} L ${r},${a} L ${m},${v}`;u=un("path"),u.setAttribute("d",N),u.setAttribute("fill",c),u.setAttribute("stroke-width",0),h.appendChild(u)}),this._currentClipPathId&&h.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(h)}},bF=6,EF=class{constructor({gl:t,ext:e,staticProgram:i,animationProgram:n}){this._version=0,this._used=!1,this._dataBufferChanged=!1,this._gl=t,this._ext=e,this._staticProgram=i,this._animationProgram=n,this._glBuffer=this._gl.createBuffer()}setDataBuffer(t){this._dataBuffer!==t&&(this._program=t.animated?this._animationProgram:this._staticProgram,this._dataBuffer=t,this._dataBufferChanged=!0,t.hasSideData()&&!this._sideGlBuffer?this._sideGlBuffer=this._gl.createBuffer():!t.hasSideData()&&this._sideGlBuffer&&(this._gl.deleteBuffer(this._sideGlBuffer),delete this._sideGlBuffer))}setPrograms(t,e){this._staticProgram=t,this._animationProgram=e}markAsUnused(){return this._used=!1,this}getProgram(){return this._program}markAsUsed(){return this._used=!0,this}isUsed(){return this._used}draw(){const t=this._gl,e=this._dataBuffer.type,i=e===fd,n=i?this._dataBuffer.getNbSideElementsPerMainElement():1,s=e===ep?Po:1,r=this._dataBuffer.getSize(),a=this._dataBuffer.stencilUsage,u=this._dataBuffer.version,h=this._version!==u||this._dataBufferChanged;this._program.setupBaseAttributes({glBuffer:this._glBuffer,dataBuffer:h?this._dataBuffer.getByteArray():null,divisor:n}),this._program.setupTextAttributes({glBuffer:this._sideGlBuffer,dataBuffer:h&&i?this._dataBuffer.getSideByteArray():null,divisor:1}),this._program.setupStencil(a),h&&(this._version=u,this._dataBufferChanged=!1),this._ext.drawArraysInstancedANGLE(t.TRIANGLES,0,bF*s,r*n)}destroy(){this._gl.deleteBuffer(this._glBuffer),this._sideGlBuffer&&this._gl.deleteBuffer(this._sideGlBuffer)}},SF={byte:1,ubyte:1,short:2,ushort:2,ulong:4,float:4},AF={byte:"BYTE",ubyte:"UNSIGNED_BYTE",short:"SHORT",ushort:"UNSIGNED_SHORT",ulong:"UNSIGNED_LONG",float:"FLOAT"},XA=class{constructor({gl:t,ext:e,specialGlBuffers:i,metaData:n,programWrapper:s}){this._stencilUsage=Tc,this._gl=t,this._ext=e,this._specialGlBuffers=i,this._metaData=ps(n),this._programWrapper=s}_finishInit(){const t=this._gl,e=this._ext,i=this._programWrapper.getError();if(i)throw new Error(`WebGL compilation at step "${i.step}:
${i.message}"`);const n=this._programWrapper.getProgram();this._program=n,t.useProgram(n),this._metaData.attributes.forEach(a=>{a.location=t.getAttribLocation(this._program,a.name),a.byteSize=a.size*SF[a.type],a.glType=AF[a.type]}),this._specialAttributes=this._createSpecialAttributesFunctions();const s=[],r=[];for(const a of this._metaData.attributes)a.location!==-1&&(a.name.startsWith("a_text")?r.push(a):s.push(a));this._baseAttributes=dv(s,t,e),this._textAttributes=dv(r,t,e),this._setupUniforms=wF(this._metaData.uniforms,t,n)}_createSpecialAttributesFunctions(){return dv([{location:this._gl.getAttribLocation(this._program,this._metaData.vertexInfoAttribute),size:3,glType:"BYTE",byteSize:3,type:"byte",name:"special"}],this._gl,this._ext)}startPass(t){this._program||this._finishInit(),this._gl.useProgram(this._program),this._resetStencil(),this._setupUniforms(this._gl,t),this._specialAttributes.enable(this._gl),this._specialAttributes.setup(this._specialGlBuffers.vertexInfo,null,0)}_setupAttributes(t,{glBuffer:e,dataBuffer:i,divisor:n}){t.enabled&&!e?t.disable(this._gl):!t.enabled&&e&&t.enable(this._gl),e&&t.setup(e,i,n)}setupBaseAttributes(t){this._setupAttributes(this._baseAttributes,t)}setupTextAttributes(t){this._setupAttributes(this._textAttributes,t)}_resetStencil(){const t=this._gl;this._stencilUsage=Tc,t.disable(t.STENCIL_TEST)}setupStencil(t){if(t!==this._stencilUsage){const e=this._gl;t!==Tc?(e.enable(e.STENCIL_TEST),t===SL?(e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.stencilFunc(e.ALWAYS,1,1)):t===AL&&(e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(e.EQUAL,0,1))):e.disable(e.STENCIL_TEST),this._stencilUsage=t}}endPass(){const t=this._gl;this._specialAttributes.disable(t),this._baseAttributes.disable(t),this._textAttributes.disable(t)}};function TF(t,e,i){return(n,s,r)=>{let a=0,u=0;for(let h=0;h<t.length;h++)u+=t[h].byteSize;e.bindBuffer(e.ARRAY_BUFFER,n),s&&e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW);for(let h=0;h<t.length;h++){const{location:c,size:g,glType:_,byteSize:m}=t[h];e.vertexAttribPointer(c,g,e[_],!1,u,a),a+=m,i.vertexAttribDivisorANGLE(c,r)}}}function wF(t,e,i){const n={};for(let s=0;s<t.length;++s){const{id:r,name:a}=t[s],u=e.getUniformLocation(i,a);u&&(n[r]=u)}return(s,r)=>{for(let a=0;a<t.length;++a){const{id:u,type:h}=t[a],c=n[u],g=r[u];if(c)switch(h){case"int":case"sampler2D":s.uniform1i(c,g);break;case"float":s.uniform1f(c,g);break;case"vec2":s.uniform2f(c,g[0],g[1]);break;case"vec3":s.uniform3f(c,g[0],g[1],g[2]);break;case"vec4":s.uniform4f(c,g[0],g[1],g[2],g[3])}}}}function LF(t){return e=>{for(let i=0;i<t.length;i++){const n=t[i].location;e.enableVertexAttribArray(n)}}}function CF(t){return e=>{for(let i=0;i<t.length;++i){const n=t[i].location;e.disableVertexAttribArray(n)}}}function dv(t,e,i){const n=LF(t),s=CF(t);return{enable(r){n(r),this.enabled=!0},disable(r){s(r),this.enabled=!1},setup:TF(t,e,i),enabled:!1}}var cv=`#define D3D9_FIX 0
precision highp float;
precision mediump int;
uniform vec3 u_backgroundColor;
uniform sampler2D u_patternNearestTexture;
uniform sampler2D u_patternLinearTexture;
uniform sampler2D u_patternLinearSdfTexture;
uniform sampler2D u_patternMipmapTexture;
uniform sampler2D u_shapeTexture;
varying vec4 a;
varying vec4 b;
varying vec4 c;
varying vec2 d;
varying vec2 e;
varying vec4 f;
varying float g;
#if D3D9_FIX
#else
varying float l;
varying vec2 m;
varying vec2 n;
varying vec2 o;
varying float p;
varying float q;
varying vec2 r;
varying vec2 s;
varying float t;
varying float u;
#endif
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SDF_GAMMA = 0.0;
const float EPSILON = 0.000000001;
const float SDF_BUFFER = (256.0 - 64.0) / 256.0; 
vec4 af(in vec4 ag, in vec4 ah) {
float ai = ah.a;
float aj = ag.a + EPSILON;
float ak = min(ai + aj, 1.0);
float r = ai / ak;
return vec4(mix(ag.rgb, ah.rgb, r), ak);
}
float al(in float am, in float an) {
float ao = (am * 256.0 + an) * 256.0;
float ap = ao / 32768.0;
return ap * 2.0 - 1.0;
}
bool aq(float ar, float as) {
return abs(ar - as) < EPSILON;
}
float at(float au) {
float bh = 2.;
vec2 bi = abs(c.rg) - c.ba - vec2(bh) + vec2(au);
float bj = min(max(bi.x, bi.y), 0.0) + length(max(bi, 0.0)) - au;
return smoothstep(0.1, .5, (1. - bj) / 10.);
}
void main() {
#if D3D9_FIX
#else
float br = o.x;
float bs = o.y;
float bt = r.x;
float bu = r.y;
#endif
vec4 bx = texture2D(u_shapeTexture, d);
float by = al(bx.b, bx.a) * s.x;
float bz = al(bx.r, bx.g) * s.y;
float ch = float(f.z > EPSILON);
float ci = float(f.w > EPSILON);
float cj = 1. - smoothstep(
0.01,
0.25760,
distance(f.xy * f.z - vec2(0.0586), d * f.z)
);
cj = cj * 2.5 - 1.5;
cj *= 0.5;
cj *= s.x;
float ck = at(g) ;
vec4 cl = a;
vec4 cm = b;
if (u > -EPSILON) {
vec2 cq = e;
float dd =
step(m.x, cq.x) *
step(cq.x, n.x) *
step(m.y, cq.y) *
step(cq.y, n.y);
float de = dd;
vec4 dh;
if (aq(u, FILTER_NEAREST)) {
dh = texture2D(u_patternNearestTexture, cq);
} else if (aq(u, FILTER_LINEAR)) { 
dh = texture2D(u_patternLinearTexture, cq);
} else if (aq(u, FILTER_LINEAR_SDF)) { 
dh = texture2D(u_patternLinearSdfTexture, cq);
dh.a = smoothstep(SDF_BUFFER - t, SDF_BUFFER + t, dh.a);
} else if (aq(u, FILTER_MIPMAP)) { 
dh = texture2D(u_patternMipmapTexture, cq);
}
dh.rgb += c.rgb;
dh.a *= de;
cl = af(cl, dh);
}
float dw = (1. - ch) * min(by, bz)
+ ch * cj;
dw = (1. - ci) * dw + ci * ck;
float ek = clamp(dw, 0.0, 1.0);
float en = clamp(dw - l, 0.0, 1.0);
float eo = ek - en;
eo = 1.0 - clamp(dw - l, 0.0, 1.0);
cl.a *= en;
cm.a *= eo * step(EPSILON, l);
vec4 ew = af(cl, cm);
float ex = ek;
ew.rgb = mix(u_backgroundColor, ew.rgb, br);
if (q > EPSILON) {
float fk = fract(bu) * q;
float fl = clamp(min(fk, bt - fk), 0.0, 1.0);
ex *= fl;
}
if (p < 0.0 || p > 1.0 || ex < EPSILON) {
discard;
}
ew.a *= ex;
ew.rgb *= ew.a;
gl_FragColor = ew;
}
`,fv=`#define D3D9_FIX 0
#define ANIMATED 0
precision highp float;
precision mediump int;
attribute /*ushort*/ vec4 a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_final_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_final_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*ushort*/ vec4 a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_prev_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*float*/ vec2 a_animationBeginTime_animationDuration; 
attribute /*ushort*/ vec4 a_animationEasing; 
attribute /*ushort*/ vec3 a_text_charId_charOffsetXY; 
attribute vec3 a_vertexInfo;
uniform float u_viewWidth;
uniform float u_viewHeight;
uniform float u_viewX;
uniform float u_viewY;
uniform float u_viewAngle;
uniform float u_viewZoom;
uniform float u_currentTime;
uniform float u_pixelRatio;
uniform sampler2D u_patternInfoTexture;
varying vec4 a;
varying vec4 b;
varying vec4 c;
varying vec2 d;
varying vec2 e;
varying float g;
#if D3D9_FIX
#else
varying float l;
varying vec2 m;
varying vec2 n;
varying vec2 o;
varying float p;
varying float q;
varying vec2 r;
varying vec2 s;
varying float t;
varying float u;
#endif
varying vec4 f;
const float EPSILON = 0.000001;
const float INFINITY = 10000000.0;
const float PI = 3.14159265359;
const float P2_17 = 131072.0;
const float P2_16 = 65536.0;
const float P2_14 = 32768.0;
const float P2_12 = 4096.0;
const float P2_8 = 256.0;
const float P2_7 = 128.0;
const float P2_6 = 64.0;
const float P2_5 = 32.0;
const float P2_4 = 16.0;
const float P2_3 = 8.0;
const float P2_2 = 4.0;
const float P2_1 = 2.0;
const float MAX_FLOAT16_OFFSET = 16384.0;
const float MAX_FLOAT16 = 65535.0;
const float MAX_PROGRESS = 1.0;
uniform float BYTES_TO_COORD;
uniform float BYTES_TO_SCALED_SIZE;
uniform float BYTES_TO_MIN_VISIBLE_SIZE;
uniform float BYTES_TO_SYMBOLIC_SIZE;
uniform float BYTES_TO_CURVATURE;
uniform float BYTES_TO_DASH_LENGTH;
uniform float BYTES_TO_GAP_LENGTH;
uniform float BYTES_TO_PATTERN_SCALE;
uniform float PATTERN_POSITION_UNIT_SIZE;
uniform float PATTERN_INFO_TEXTURE_SIZE;
uniform float PATTERN_NEAREST_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_SDF_TEXTURE_SIZE;
uniform float PATTERN_MIPMAP_TEXTURE_SIZE;
uniform float ROUNDED_BOX_RADIUS;
const float BYTES_TO_OFFSET_ANGLE = 0.0;
const float BYTES_TO_COLOR = 0.0;
const float SDF_FONT_SIZE = 0.0;
const float SDF_GAMMA = 0.0;
const float CURVATURE_RATIO = 0.0;
const float PATTERN_PADDING = 0.0;
const float TEXT_WIDTH_MULTIPLIER = 0.0;
const float TEXT_HEIGHT_MULTIPLIER = 0.0;
const float SELF_LOOP_CURVATURE_RATIO = 0.0;
const float EDGE_ARROW_SIZE_RATIO = 0.0;
const float EDGE_MIN_TIP_SIZE = 0.0;
const float CURVE_SUBDIVISIONS = 0.0;
const float PIECE_NODE_COMPONENT = 0.0;
const float PIECE_TEXT_BOX = 0.0;
const float PIECE_EDGE_BODY = 0.0;
const float PIECE_EDGE_HEAD = 0.0;
const float PIECE_EDGE_TAIL = 0.0;
const float PIECE_EDGE_TEXT = 0.0;
const float MAX_TEXT_SIZE = 0.0;
const float BYTES_TO_TEXT_OFFSET_X = 0.0;
const float BYTES_TO_TEXT_OFFSET_Y = 0.0;
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SHAPE_TEXTURE_SIZE = 0.0;
const float SIMPLE_SHAPE_SAMPLING_SIZE = 0.0;
const float COMPLEX_SHAPE_SAMPLING_SIZE = 0.0;
const float SHAPE_SAMPLING_BUFFER_RATIO = 0.0;
const float MAX_SHAPES = 0.0;
const float FIRST_COMPLEX_SHAPE_ID = 0.0;
const float SELF_LOOP_TO_CIRCLE_APPROX = 0.0;
const float NB_SHAPES_BY_SIDE = SHAPE_TEXTURE_SIZE / COMPLEX_SHAPE_SAMPLING_SIZE;
const float SHAPE_FILL_PERCENT = 1.0 - SHAPE_SAMPLING_BUFFER_RATIO;
const float T_STEP_PER_CURVE_PIECE = 1.0 / CURVE_SUBDIVISIONS;
const float HEAD_TAIL_PX_ADJUST = 1.5;
const float SDF_SMOOTH_FACTOR = 2.0;
struct pv {
float pw;
float px;
float py;
float pz;
float qa;
float qb;
float qc;
float qd;
};
struct qe {
float qf;
float qg;
float qh;
float qi;
float qj;
float qk;
float ql;
};
struct qm {
float pw;
float px;
float py;
float pz;
float qa;
float qb;
float qc;
float qd;
float qf;
float qg;
float qh;
float qi;
float qj;
float qk;
float ql;
float dc;
float qn;
float qo;
float qp;
float qq;
float qr;
float qs;
vec4 cl;
vec4 cm;
vec4 dh;
float qt;
float qu;
float qv;
float qw;
float qx;
float qy;
float qz;
float ra;
float rb;
float rc;
float rd;
float re;
float rf;
float rg;
float rh;
float ri;
float rj;
float rk;
float rl;
};
struct rm {
float eu;
vec2 rn;
vec4 cl;
vec4 cm;
float dc;
float ro;
float rp;
float py;
float rq;
vec2 rr;
float rs;
vec2 cq;
vec2 rt;
vec2 ru;
float rv;
float rw;
vec4 dh;
vec2 bd;
float rx;
float or;
vec2 ry;
vec2 rz;
vec2 sa;
};
float sb(float nq, float sc, float sd) {
float se = mod(nq, pow(2.0, sd));
return floor(se / pow(2.0, sc));
}
pv sf(float nq) {
pv sg;
sg.pw = sb(nq, 0.0, 4.0);
sg.px = sb(nq, 4.0, 8.0);
sg.py = sb(nq, 8.0, 10.0);
sg.pz = sb(nq, 10.0, 12.0);
sg.qa = sb(nq, 12.0, 13.0);
sg.qb = sb(nq, 13.0, 14.0);
sg.qc = sb(nq, 14.0, 15.0);
sg.qd = sb(nq, 15.0, 16.0);
return sg;
}
qe sh(float nq) {
qe sg;
sg.qf = sb(nq, 0.0, 8.0);
sg.qg = sb(nq, 8.0, 11.0);
sg.qh = sb(nq, 11.0, 12.0);
sg.qi = sb(nq, 12.0, 13.0);
sg.qj = sb(nq, 13.0, 14.0);
sg.qk = sb(nq, 14.0, 15.0);
sg.ql = sb(nq, 15.0, 16.0);
return sg;
}
float si(float ll) {
float sj = mod(floor(ll / 32768.0), 2.0) == 1.0 ? -1.0 : 1.0; 
float sl = mod(floor(ll / 1024.0), 32.0); 
float sn = mod(ll, 1024.0); 
float sq = float(sl == 0.0 || sl == 31.0);
return (1. - sq)
* sj * pow(2.0, sl - 15.0) * (1.0 + sn / 1024.0);
}
vec4 sr(in float nq) {
return vec4(
sb(nq, 0.0, 4.0),
sb(nq, 4.0, 8.0),
sb(nq, 8.0, 12.0),
sb(nq, 12.0, 16.0)
);
}
vec2 ss(in float nq) {
return vec2(mod(nq, 256.0), floor(nq / 256.0));
}
vec2 st(in float nq) {
float su = floor(nq / P2_6);
float sv = nq - (su * P2_6);
return vec2(su, sv);
}
vec2 sw(in float nq) {
float sx = floor(nq / P2_7);
float sy = nq - (sx * P2_7);
return vec2(sx, sy);
}
vec2 sz(in vec2 ta, in float tb) {
float tc = cos(tb);
float td = sin(tb);
return vec2(tc * ta.x + td * ta.y, -td * ta.x + tc * ta.y);
}
vec4 te(in vec4 tf) {
return floor(tf / 256.0) - 128.0;
}
vec4 tg(in vec4 tf) {
return mod(tf, 256.0) - 128.0;
}
float th(float nq) {
return nq - 128.0;
}
vec2 th(vec2 nq) {
return nq - 128.0;
}
vec2 ti(vec2 tj) {
return vec2(-tj.y, tj.x);
}
vec2 tk(vec2 tl, vec2 ih, vec2 tm, float t) {
float tn = 1.0 - t;
return (tn * tn * tl) + (2.0 * tn * t * ih) + (t * t * tm);
}
vec2 to(vec2 tl, vec2 tp, vec2 tq, vec2 tm, float t) {
float tn = 1.0 - t;
float tr = tn * tn;
float ts = tr * tn;
float tt = t * t;
float tu = tt * t;
return (ts * tl) + (3.0 * tr * t * tp) + (3.0 * tn * tt * tq) + (tu * tm);
}
vec2 tv(vec2 tl, vec2 ih, vec2 tm, float t) {
float tn = (1.0 - t);
vec2 ta = (tn * ih + t * tm) - (tn * tl + t * ih);
return normalize(ta);
}
vec2 tw(vec2 tl, vec2 ih, vec2 tm, float t) {
return ti(tv(tl, ih, tm, t));
}
vec2 tx(vec2 tl, vec2 tp, vec2 tq, vec2 tm, float t) {
float tn = 1.0 - t;
float tr = tn * tn;
float tt = t * t;
vec2 ta = tr * (tp - tl) + 2.0 * tn * t * (tq - tp) + tt * (tm - tq);
return normalize(ta);
}
vec2 ty(vec2 tl, vec2 tp, vec2 tq, vec2 tm, float t) {
return ti(tx(tl, tp, tq, tm, t));
}
float uj(float qr, float uk, float t) {
float y = abs(qr) / CURVATURE_RATIO + EPSILON;
float qw = y * y;
float tn = t - 0.5;
float tr = tn * tn;
float ul = 1.0 / (16.0 * qw);
float um = sqrt(tr + ul);
float un = (0.5 / y) * sqrt(qw + 0.25);
float uo = (abs(2.0 * y)) * ((tn * um) + (0.5 * un) + (ul * log(abs((tn + um) / (-0.5 + un)))));
return uo * uk;
}
float uz(vec2 va, vec2 vb, vec2 vc, vec2 vd) {
bool vk = abs(va.x - vb.x - vc.x + vd.x) + abs(va.y - vb.y - vc.y + vd.y) < EPSILON;
float vl = 9.0 * pow(vb.x - va.x, 2.0); 
float vo = pow(-243.0 * va.x + 189.0 * vb.x + 51.0 * vc.x + 3.0 * vd.x, 2.0) / 10000.0; 
float vp = pow(-48.0 * va.x + 24.0 * vb.x + 21.0 * vc.x + 3.0 * vd.x, 2.0) / 625.0; 
float vq = pow(-147.0 * va.x + 21.0 * vb.x + 99.0 * vc.x + 27.0 * vd.x, 2.0) / 10000.0; 
float vr = pow(-27.0 * va.x - 9.0 * vb.x + 24.0 * vc.x + 12.0 * vd.x, 2.0) / 625.0; 
float vs = (9.0 / 16.0) * pow(vc.x + vd.x - va.x - vb.x, 2.0); 
float vt = 9.0 * pow(vb.y - va.y, 2.0); 
float vv = pow(-243.0 * va.y + 189.0 * vb.y + 51.0 * vc.y + 3.0 * vd.y, 2.0) / 10000.0; 
float vw = pow(-48.0 * va.y + 24.0 * vb.y + 21.0 * vc.y + 3.0 * vd.y, 2.0) / 625.0; 
float vx = pow(-147.0 * va.y + 21.0 * vb.y + 99.0 * vc.y + 27.0 * vd.y, 2.0) / 10000.0; 
float vy = pow(-27.0 * va.y - 9.0 * vb.y + 24.0 * vc.y + 12.0 * vd.y, 2.0) / 625.0; 
float vz = (9.0 / 16.0) * pow(vc.y + vd.y - va.y - vb.y, 2.0); 
float wa = sqrt(vl + vt); 
float wc = sqrt(vo + vv); 
float wd = sqrt(vp + vw); 
float we = sqrt(vq + vx); 
float wf = sqrt(vr + vy); 
float wg = sqrt(vs + vz); 
if(vk)
return (5.0 / 2993760.0) *
(32134.0 * wa +
212600.0 * wc -
97050.0 * wd +
544800.0 * we -
521100.0 * wf +
427368.0 * wg);
float wh = pow(-12.0 * va.x - 24.0 * vb.x + 9.0 * vc.x + 27.0 * vd.x, 2.0) / 625.0; 
float wi = pow(-27.0 * va.x - 99.0 * vb.x - 21.0 * vc.x + 147.0 * vd.x, 2.0) / 10000.0; 
float wj = pow(-3.0 * va.x - 21.0 * vb.x - 24.0 * vc.x + 48.0 * vd.x, 2.0) / 625.0; 
float wk = pow(-3.0 * va.x - 51.0 * vb.x - 189.0 * vc.x + 243.0 * vd.x, 2.0) / 10000.0; 
float wl = 9.0 * pow(vd.x - vc.x, 2.0); 
float wm = pow(-12.0 * va.y - 24.0 * vb.y + 9.0 * vc.y + 27.0 * vd.y, 2.0) / 625.0; 
float wn = pow(-27.0 * va.y - 99.0 * vb.y - 21.0 * vc.y + 147.0 * vd.y, 2.0) / 10000.0; 
float wo = pow(-3.0 * va.y - 21.0 * vb.y - 24.0 * vc.y + 48.0 * vd.y, 2.0) / 625.0; 
float wp = pow(-3.0 * va.y - 51.0 * vb.y - 189.0 * vc.y + 243.0 * vd.y, 2.0) / 10000.0; 
float wq = 9.0 * pow(vd.y - vc.y, 2.0); 
float wr = sqrt(wh + wm); 
float ws = sqrt(wi + wn); 
float wt = sqrt(wj + wo); 
float wu = sqrt(wk + wp); 
float wv = sqrt(wl + wq); 
return (5.0 / 2993760.0) *
(16067.0 * (wa + wv) +
106300.0 * (wc + wu) -
48525.0 * (wd + wt) +
272400.0 * (we + ws) -
260550.0 * (wf + wr) +
427368.0 * wg);
}
float ww(float nq) {
return nq - 32.0;
}
float wx(float nq) {
return nq - 512.0;
}
float wy(float nq) {
return nq - P2_14;
}
void wz() {
gl_Position = vec4(-10.0, -10.0, 1.0, 1.0);
}
vec4 xa(vec2 xb) {
return vec4(((vec2(xb.x, u_viewHeight - xb.y) / vec2(u_viewWidth, u_viewHeight)) * 2.0 - 1.0), 0.5, 1.0);
}
float xf(float ar, float as) {
return step(ar - EPSILON, as) * step(as, ar + EPSILON);
}
bool aq(float ar, float as) {
return abs(ar - as) < EPSILON;
}
bool xg(float nq) {
return nq > 0.5;
}
vec2 xh(vec2 xi) {
return sz((xi - vec2(u_viewX, u_viewY)) * u_viewZoom, u_viewAngle) + vec2(u_viewWidth, u_viewHeight) / 2.0;
}
float xj(float or) {
return max(EDGE_MIN_TIP_SIZE, or * EDGE_ARROW_SIZE_RATIO);
}
float xk(float xl, float xm) {
return xl * BYTES_TO_SCALED_SIZE * u_viewZoom + xm;
}
float xn(float xl, float xm) {
return xl * BYTES_TO_SCALED_SIZE * MAX_FLOAT16 / MAX_FLOAT16_OFFSET * u_viewZoom + xm;
}
float xt(float ro, float xr, float xs) {
float xu = xs - xr;
float a = 1.0 / xu;
float b = -xr / xu;
return ro * a + b;
}
struct xv {
vec2 vb;
vec2 vc;
};
xv xw(vec2 xx, float au, float qr) {
xv ns;
float xy = (au + au / SELF_LOOP_CURVATURE_RATIO * qr) * SELF_LOOP_CURVATURE_RATIO;
float xz = -u_viewAngle + PI;
float ya = -u_viewAngle + PI / 2.0;
ns.vb = xx + vec2(cos(xz), sin(xz)) * xy;
ns.vc = xx + vec2(cos(ya), sin(ya)) * xy;
return ns;
}
float yb(vec2 yc, vec2 yd, vec2 ye, vec2 yf, float yg) {
const int MAX_ITERATIONS = 10; 
const float EPSILON = 0.01; 
float yn = 0.0;
float cf = 1.0;
float yo = 0.0;
for (int yp = 0; yp < MAX_ITERATIONS; yp++) {
float yq = (yn + cf) * 0.5;
vec2 yr = to(yc, yd, ye, yf, yq);
float ys = distance(yc, yr);
if (abs(ys - yg) < EPSILON) {
return yq;
}
if (ys < yg) {
yn = yq;
yo = yq;
} else {
cf = yq;
}
}
return yo;
}
float yz(vec2 yc, vec2 yd, vec2 ye, vec2 yf, float yg, bool za) {
if (!za) {
return 1.0 - yb(yf, ye, yd, yc, yg);
}
return yb(yc, yd, ye, yf, yg);
}
qm zd(
vec4 ze,
vec4 zf,
vec4 zg,
vec4 zh,
vec4 zi,
vec4 zj,
vec3 zk
) {
qm a;
pv bx = sf(ze.x);
qe zl = sh(ze.y);
vec4 zm = sr(ze.z);
vec2 zn = ss(ze.w);
a.pw = bx.pw;
a.px = bx.px;
a.py = bx.py;
a.pz = bx.pz;
a.qa = bx.qa;
a.qb = bx.qb;
a.qc = bx.qc;
a.qd = bx.qd;
a.qf = zl.qf;
a.qg = zl.qg;
a.qh = zl.qh;
a.qi = zl.qi;
a.qj = zl.qj;
a.qk = zl.qk;
a.ql = zl.ql;
a.dc = zm.x;
a.qn = zm.y;
a.qo = zm.z;
a.qp = zm.w;
a.qq = zn.x;
a.qr = zn.y;
a.qs = zf.x;
a.cl = sr(zf.y);
a.cm = sr(zf.z);
a.dh = sr(zf.w);
a.qt = zg.x;
a.qu = zg.y;
a.qv = zg.z;
a.qw = zg.w;
a.qx = si(zh.x);
a.qy = zh.y;
a.qz = si(zh.z);
a.ra = zh.w;
a.rb = zi.x;
a.rc = zi.y;
a.rd = zi.z;
a.re = zi.w;
a.rf = zj.x;
a.rg = wy(zj.y);
a.rk = wy(zj.z);
a.rl = wy(zj.w);
a.rh = zk.x;
float x = zk.y;
float y = mod(x, P2_8);
if (zk.z > 0.0) x += zk.z * P2_16;
a.ri = ((x - y) / P2_8) - P2_16;
a.rj = (y - P2_7) * BYTES_TO_TEXT_OFFSET_Y;
return a;
}
bool aaq(const in qm a, out rm ns) {
float pw = a.pw;
float px = a.px;
float py = a.py * BYTES_TO_DASH_LENGTH;
float pz = a.pz * BYTES_TO_GAP_LENGTH;
float qa = a.qa;
float qb = a.qb;
float qc = a.qc;
float qd = a.qd;
float qf = a.qf * BYTES_TO_PATTERN_SCALE;
float qg = a.qg * BYTES_TO_OFFSET_ANGLE;
float qh = a.qh;
float qi = a.qi;
float qj = a.qj;
float qk = a.qk;
float ql = a.ql;
float dc = a.dc * BYTES_TO_COLOR;
float qn = a.qn * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float qo = a.qo * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float qp = a.qp * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float qq = a.qq * BYTES_TO_SYMBOLIC_SIZE * u_viewZoom + step(a.qq, EPSILON) * INFINITY;
float qr = th(a.qr);
float qs = a.qs;
vec4 cl = a.cl * BYTES_TO_COLOR;
vec4 cm = a.cm * BYTES_TO_COLOR;
vec4 dh = a.dh * BYTES_TO_COLOR;
vec2 aar = vec2(a.qt, a.qu) * BYTES_TO_COORD;
vec2 aas = vec2(a.qv, a.qw) * BYTES_TO_COORD;
vec2 yc = xh(aar);
vec2 yf = xh(aas);
float aat = xn(a.qx,a.qy);
float aau = xn(a.qz, a.ra);
float aav = xk(a.rb, a.rc);
float eu = xk(a.rd, a.re);
float zs = xk(a.rf, a.rg);
vec2 aaw = a_vertexInfo.xy;
vec2 aax = vec2(0.0, 0.0);
float aay = aat;
float aaz = aau;
float aba = aau * qf;
if (qh > EPSILON || dc< EPSILON) {
if (a.rh < EPSILON || dc< EPSILON) return false;
aba = aav;
qs = a.rh;
aat = aba * TEXT_WIDTH_MULTIPLIER * u_pixelRatio;
aau = aba * TEXT_HEIGHT_MULTIPLIER * u_pixelRatio;
}
bool abu = abs(qr) > EPSILON && xf(px, PIECE_EDGE_BODY) < EPSILON;
bool abv = abu && a_vertexInfo.z > EPSILON;
if (pw < EPSILON || px < EPSILON || qq < qn || abv) {
return false;
}
eu *= step(qo, qq);
float aci = 0.0;
float acj = 1.0;
float acf = 0.0;
float ach = 1.0;
float ack = 0.0;
float acu = 1.0;
float acw = 1.0;
float adg = 0.0;
float adh = 0.0;
vec2 bd;
vec2 ry;
vec2 rz;
vec2 sa;
float or;
float rx;
float ady = 0.0;
float adz = 1.0;
bool ci = xf(px, PIECE_TEXT_BOX) > EPSILON;
if (xf(px, PIECE_NODE_COMPONENT) > EPSILON || ci) {
bd = ceil((yc + yf) / 2.0);
if(length(aas - aar) > EPSILON){
ry = normalize(aas - aar) * vec2(1.,-1.);
}else{
ry = vec2(1.0, 0.0);
}
rz = ti(ry);
sa = rz;
or = aat;
rx = aau;
} else {
acw = 0.0;
float aep = distance(yc, yf);
vec2 aeq = normalize(yf - yc);
vec2 aer = (yc + yf) / 2.0;
vec2 aes = ti(aeq);
vec2 yd;
vec2 ye;
if (qk > EPSILON) {
vec2 aey = sz(yc, -u_viewAngle);
vec2 aez = sz(yf, -u_viewAngle);
float afc = 1. / (1. + exp(-qr));
if (ql > EPSILON) {
float afd = afc * aey.y + (1. - afc) * aez.y;
yd = vec2(aey.x, afd);
ye = vec2(aez.x, afd);
} else {
float afe = afc * aey.x + (1. - afc) * aez.x;
yd = vec2(afe, aey.y);
ye = vec2(afe, aez.y);
}
yd = sz(yd, u_viewAngle);
ye = sz(ye, u_viewAngle);
}
vec2 aff = aer + (aes * aep * -qr / CURVATURE_RATIO);
if (xf(px, PIECE_EDGE_TEXT) > 0.0
|| xf(px, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0
) {
ci = xf(px, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0;
float afg;
float afh = eu;
eu = 0.0;
if (qd > EPSILON) {
xv ih = xw(yc, afh / 2.0, qr);
bd = to(yc, ih.vb, ih.vc, yf, 0.5);
ry = tx(yc, ih.vb, ih.vc, yf, 0.5);
rz = ti(ry);
sa = rz;
afg = .5 * uz(yc, ih.vb, ih.vc, yf);
} else if (qk > EPSILON) {
bd = to(yc, yd, ye, yf, 0.5);
ry = tx(yc, yd, ye, yf, 0.5);
rz = ti(ry);
sa = rz;
afg = uz(yc, yd, ye, yf);
} else if (abs(qr) > EPSILON) {
bd = tk(yc, aff, yf, 0.5);
ry = tv(yc, aff, yf, 0.5);
rz = ti(ry);
sa = rz;
afg = uj(qr, aep, 1.0);
} else {
bd = aer;
ry = aeq;
rz = aes;
sa = aes;
afg = aep;
}
or = aat;
rx = aau;
if(aay > afg - afh && qd < EPSILON){
if(qi > EPSILON){
ry = vec2(1.0, 0.0);
rz = vec2(0.0, 1.0);
sa = vec2(0.0, 1.0);
} else {
ry = vec2(0,0);
rz = vec2(0.0, 0.0);
sa = vec2(0.0, 0.0);
}
} else {
float tb = -atan(ry.y, ry.x);
ady = tb;
qg -= tb;
if ((tb > PI / 2.0 || tb < -PI / 2.0)) {
qg += (1.0 - qd) * PI;
adz = -1.0;
ry *= -1.0;
rz *= -1.0;
sa *= -1.0;
}
}
} else {
float afo = aat;
float afp = aau;
float afq = xj(aav);
float afr = qa
* min(5. * afo, afq);
float afs = qb
* min(5. * afp, afq);
float aft = xf(px, PIECE_EDGE_HEAD);
float afu = xf(px, PIECE_EDGE_TAIL);
float afv = INFINITY * qd + aep - afo - afp;
float age = min(0., afv - afr - afs)/2.;
float agj = aav / 2.;
float agk =
afo > agj
? afo - sqrt(afo * afo - agj * agj)
: agj;
float agl = max( afo +
afs
+ qb * age,
0.) - (1. - qa) * agk;
agk =
afp > agj
? afp - sqrt(afp * afp - agj * agj)
: agj;
float agm = max( afp +
afr
+ qa * age
, 0.) - (1. - qb) * agk;
if(qk > EPSILON && qd < EPSILON) {
agl = afo + afs / 2.;
agm = afp + afr / 2.;
}
if (aft > EPSILON || afu > EPSILON) {
vec2 agr = aft * yf + afu * yc;
float zs = aft * agm + afu * agl + (HEAD_TAIL_PX_ADJUST - 0.5);
float ags = aft * afr + afu * afs;
vec2 agt;
if (qk > EPSILON && qd < EPSILON) {
float yg = aft > EPSILON ? agm : agl;
float t = yz(yc, yd, ye, yf, yg, afu > EPSILON);
agt = to(yc, yd, ye, yf, t);
ry = normalize(agt - to(yc, yd, ye, yf, t - 0.01));
if(afu > EPSILON) ry *= -1.;
bd = agt;
} else {
if (qd > EPSILON) {
xv ih = xw(yc, afo, qr);
float yg = aft * agm + afu * agl;
float t = yz(yc, ih.vb, ih.vc, yf, yg, afu > EPSILON);
agt = to(yc, ih.vb, ih.vc, yf, t);
} else {
float afg = uj(qr, aep, 1.0);
float t = (aft * (afg - agm) + afu * agl) / afg;
agt = tk(yc, aff, yf, t);
}
ry = normalize(agr - agt);
bd = agr - ry * (zs - ags / 2.0);
}
rz = ti(ry);
sa = rz;
or = ags;
rx = ags;
py = 0.0;
pz = 0.0;
} else {
float agx;
float agy;
float agz;
if(qk > EPSILON && qd < EPSILON) {
float aha = yz(yc, yd, ye, yf, agl, true);
float ahb = yz(yc, yd, ye, yf, agm, false);
float ahc = ahb - aha;
float ahd = a_vertexInfo.z;
float ahe = (aha + ahc * ahd * T_STEP_PER_CURVE_PIECE);
float tt = (aha + ahc * (ahd + 1.) * T_STEP_PER_CURVE_PIECE);
vec2 ahf = to(yc, yd, ye, yf, ahe);
vec2 ahg = to(yc, yd, ye, yf, tt);
bd = (ahf + ahg) / 2.0;
ry = normalize(ahg - ahf);
rz = ty(yc, yd, ye, yf, ahe);
sa = ty(yc, yd, ye, yf, tt);
or = distance(ahf, ahg);
agx = uz(yc, yd, ye, yf);
agy = agx * ahe;
agz = agx * tt;
} else {
if (abs(qr) < EPSILON) {
bd = aer;
ry = aeq;
rz = aes;
sa = rz;
or = aep;
agx = aep;
agy = 0.0;
agz = aep;
} else {
float ahd = a_vertexInfo.z;
float ahe = ahd * T_STEP_PER_CURVE_PIECE;
float tt = ahe + T_STEP_PER_CURVE_PIECE;
if (qd < EPSILON) {
vec2 ahf = tk(yc, aff, yf, ahe);
vec2 ahg = tk(yc, aff, yf, tt);
bd = (ahf + ahg) / 2.0;
ry = normalize(ahg - ahf);
rz = tw(yc, aff, yf, ahe);
sa = tw(yc, aff, yf, tt);
or = distance(ahf, ahg);
agx = uj(qr, aep, 1.0);
agy = uj(qr, aep, ahe);
agz = uj(qr, aep, tt);
} else {
xv ih = xw(yc, afo, qr);
vec2 yd = ih.vb;
vec2 ye = ih.vc;
vec2 ahf = to(yc, yd, ye, yf, ahe);
vec2 ahg = to(yc, yd, ye, yf, tt);
bd = (ahf + ahg) / 2.0;
ry = normalize(ahg - ahf);
rz = ty(yc, yd, ye, yf, ahe);
sa = ty(yc, yd, ye, yf, tt);
or = distance(ahf, ahg);
agx = uz(yc, yd, ye, yf);
agy = ahe * agx;
agz = tt * agx;
}
}
}
rx = aav;
if(qd > EPSILON) {
xv ih = xw(yc, afo, qr);
float ahk = yz(yc, ih.vb, ih.vc, yf, agl, true);
float ahb = yz(yc, ih.vb, ih.vc, yf, agm, false);
acf = ahk;
ach = ahb;
} else if(qk < EPSILON) {
acf = (agl - 1.0) / agx;
ach = MAX_PROGRESS - (agm - HEAD_TAIL_PX_ADJUST) / agx;
}
aci = agy / agx;
acj = agz / agx;
ack = agx;
if (aav < EPSILON)
cl.a = 0.; 
if (qc > 0.0 && afv > 5.0) {
float aho = (agx * rx) / (agx - agl);
float ahp = agx;
float qt = agl;
float qv = agx - agm;
float a = -aho / ahp;
float b = aho;
float qu = a * qt + b;
float qw = a * qv + b;
float ahq = qu / (qt - qv);
float bi = -ahq * qv;
rx = min(min(bi, afo), afp);;
adh = ahq * ahp + bi + 1.0;
}
}
}
}
vec2 cq = vec2(0.0, 0.0);
vec2 rt = vec2(EPSILON, EPSILON);
vec2 ru = vec2(-EPSILON, -EPSILON);
float rv = -1.0;
float rw = 0.0;
bool ahs = false;
vec2 aht = vec2(0,0);
vec2 ahu = vec2(0,0);
vec2 ahv = vec2(0,0);
if (qs > EPSILON && qq > qp) {
float ahy = floor(qs / PATTERN_INFO_TEXTURE_SIZE);
float ahz = qs - (ahy * PATTERN_INFO_TEXTURE_SIZE);
vec4 aia = texture2D(u_patternInfoTexture, vec2(ahz, ahy) / 255.0) * 255.0;
vec2 aib = sw(aia.z);
vec2 aic = sw(aia.w);
rv = aib.x * 2.0 + aic.x;
float aid = 0.0;
if (aq(rv, FILTER_NEAREST)) { 
aid = PATTERN_NEAREST_TEXTURE_SIZE;
} else if (aq(rv, FILTER_LINEAR)) { 
aid = PATTERN_LINEAR_TEXTURE_SIZE;
} else if (aq(rv, FILTER_LINEAR_SDF)) { 
aid = PATTERN_LINEAR_SDF_TEXTURE_SIZE;
ahs = true;
} else if (aq(rv, FILTER_MIPMAP)) { 
aid = PATTERN_MIPMAP_TEXTURE_SIZE;
}
float aig = 1.0 / aid;
vec2 aih = (vec2(aib.y, aic.y) * PATTERN_POSITION_UNIT_SIZE) * aig / 2.0;
ahu += (aia.xy * PATTERN_POSITION_UNIT_SIZE * aig) + aih;
aih -= PATTERN_PADDING * aig * 2.0;
vec2 aii = vec2(or / 2.0, rx / 2.0) * aig;
vec2 aij = vec2(eu, eu) * aig;
float ail = 1.0 * u_pixelRatio;
float aim = SDF_SMOOTH_FACTOR;
if (qf > EPSILON) {
if (ahs) { 
if (a.qj > EPSILON) {
aim = SDF_SMOOTH_FACTOR * u_pixelRatio / SDF_GAMMA;
aht = vec2(-a.rl,-a.rk);
}
rw = aim * SDF_GAMMA / aba / u_pixelRatio;
ail = SDF_FONT_SIZE / aba;
} else { 
ail = (aih.y / aii.y) / qf;
}
}
ahv = (aii + aij) * ail;
aih += PATTERN_PADDING * aig;
rt = ahu - aih;
ru = ahu + aih;
}
if (qh > EPSILON) {
aax.y = (a.rj) * aba;
acu = 0.0;
acw = 0.0;
aax.x = a.ri * aba * BYTES_TO_TEXT_OFFSET_X;
aax = sz(aax, ady);
aax *= adz;
}
vec2 air = vec2(cos(qg), sin(qg)) * zs;
vec2 ais = bd + air + aax;
float ait = eu * 2.0;
float aiu = or + acw * (ait + 1.0);
float aiv = rx + acu * (ait + 1.0);
vec2 aiw = ry * aiu / 2.0;
vec2 aix = rz * aiv / 2.0;
vec2 aiy = sa * aiv / 2.0;
float aiz = (acj - aci);
float aja = aaw.x / 2.0 + 0.5;
float ro = aci + aiz * aja;
float rs = adg + (adh - adg) * ro / 2.0;
float ajb = step(pw, FIRST_COMPLEX_SHAPE_ID - EPSILON);
float ajc = ajb * SIMPLE_SHAPE_SAMPLING_SIZE + (1.0 - ajb) * COMPLEX_SHAPE_SAMPLING_SIZE;
float ajd = ajc / COMPLEX_SHAPE_SAMPLING_SIZE;
float aje = ajd * SHAPE_SAMPLING_BUFFER_RATIO / 2.0;
float ajf = ajd * (1.0 - SHAPE_SAMPLING_BUFFER_RATIO);
vec2 ajm = vec2(
mod(pw, NB_SHAPES_BY_SIDE),
floor(pw / NB_SHAPES_BY_SIDE)
);
vec2 ajn = ajm + vec2(aje) +
vec2(aci * ajf, 0.0);
vec2 ajq = vec2(aiz, 1.0) * ajf;
vec2 rn = (ajn + ajq * (aaw / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE;
vec2 rr = vec2(aiu / aiz, aiv) / 2.0;
float ajw = py * aav;
float ajx = pz * aav;
float rp = ajw + ajx;
float rq = (ro * ack) / rp;
cq = ahu
+ ahv
* (aaw + aht / rr * u_viewZoom);
ns.rn = rn;
float ch = float(pw == 1.);
f = vec4(
(ajn + ajq * (vec2(0.5,0.5) / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE,
NB_SHAPES_BY_SIDE * (1. - qh) * ch,
float(ci)
);
ns.rr = rr;
ns.eu = eu;
ns.cl = cl;
ns.cm = cm;
ns.dc = dc;
ns.ro = xt(ro, acf, ach);
ns.rp = rp;
ns.py = ajw;
ns.rq = rq;
ns.rs = rs;
ns.cq = cq;
ns.rt = rt;
ns.ru = ru;
ns.rv = rv;
ns.rw = rw;
ns.dh = dh;
ns.bd = ais;
ns.or = aiu + ch;
ns.rx = aiv + ch;
ns.ry = ry;
ns.rz = rz;
ns.sa = sa;
return true;
}
float akc(float akd, float ake, vec4 akf) {
float akg = clamp(((u_currentTime - akd) / ake), 0.0, 1.0);
float r = akg;
float akh = r * r;
float aki = akh * r;
vec4 akj = akg < 0.5 ? te(akf) : tg(akf);
float akk = akj.x;
float akl = akj.y;
float akm = akj.z;
float akn = akj.w;
float ako = akk + akl * r + akm * akh + akn * aki;
return ako;
}
void main() {
qm a_final = zd(
a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_final_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_final_x1_y1_x2_y2,
a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
#if ANIMATED
float akd = a_animationBeginTime_animationDuration.x;
float ake = a_animationBeginTime_animationDuration.y;
vec4 akf = a_animationEasing;
float aap = akc(akd, ake, akf);
qm a_prev = zd(
a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_prev_x1_y1_x2_y2,
a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
const float ONE = 1.0;
a_final.pw = mix(a_prev.pw, a_final.pw, ONE);
a_final.py = mix(a_prev.py, a_final.py, aap);
a_final.pz = mix(a_prev.pz, a_final.pz, aap);
a_final.qa = mix(a_prev.qa, a_final.qa, ONE);
a_final.qb = mix(a_prev.qb, a_final.qb, ONE);
a_final.px = mix(a_prev.px, a_final.px, ONE);
a_final.qf = mix(a_prev.qf, a_final.qf, ONE);
a_final.qh = mix(a_prev.qh, a_final.qh, ONE);
a_final.qi = mix(a_prev.qi, a_final.qi, ONE);
a_final.qj = mix(a_prev.qj, a_final.qj, ONE);
a_final.qk = mix(a_prev.qk, a_final.qk, ONE);
a_final.qd = mix(a_prev.qd, a_final.qd, ONE);
a_final.qg = mix(a_prev.qg, a_final.qg, aap);
a_final.dc = mix(a_prev.dc, a_final.dc, aap);
a_final.qn = mix(a_prev.qn, a_final.qn, aap);
a_final.qo = mix(a_prev.qo, a_final.qo, aap);
a_final.qp = mix(a_prev.qp, a_final.qp, aap);
a_final.qq =mix(a_prev.qq, a_final.qq, aap);
a_final.qr = mix(a_prev.qr, a_final.qr, aap);
a_final.qs = mix(a_prev.qs, a_final.qs, ONE);
a_final.cl = mix(a_prev.cl, a_final.cl, aap);
a_final.cm = mix(a_prev.cm, a_final.cm, aap);
a_final.dh = mix(a_prev.dh, a_final.dh, aap);
a_final.qt = mix(a_prev.qt, a_final.qt, aap);
a_final.qu = mix(a_prev.qu, a_final.qu, aap);
a_final.qv = mix(a_prev.qv, a_final.qv, aap);
a_final.qw = mix(a_prev.qw, a_final.qw, aap);
a_final.qx = mix(a_prev.qx, a_final.qx, aap);
a_final.qy = mix(a_prev.qy, a_final.qy, aap);
a_final.qz = mix(a_prev.qz, a_final.qz, aap);
a_final.ra = mix(a_prev.ra, a_final.ra, aap);
a_final.rb = mix(a_prev.rb, a_final.rb, aap);
a_final.rc = mix(a_prev.rc, a_final.rc, aap);
a_final.rd = mix(a_prev.rd, a_final.rd, aap);
a_final.re = mix(a_prev.re, a_final.re, aap);
a_final.rf = mix(a_prev.rf, a_final.rf, aap);
a_final.rg = mix(a_prev.rg, a_final.rg, aap);
a_final.rh = mix(a_prev.rh, a_final.rh, ONE);
a_final.ri = mix(a_prev.ri, a_final.ri, ONE);
a_final.rj = mix(a_prev.rj, a_final.rj, ONE);
#endif
rm ns;
bool aks = aaq(a_final, ns);
if (!aks) {
wz();
return;
}
vec2 aaw = a_vertexInfo.xy;
a = ns.cl;
b = ns.cm;
c = ns.dh;
d = ns.rn;
e = ns.cq;
#if D3D9_FIX
#else
l = ns.eu;
m = ns.rt;
n = ns.ru;
o = vec2(ns.dc, ns.rs);
p = ns.ro;
q = ns.rp;
r = vec2(ns.py, ns.rq);
s = ns.rr;
t = ns.rw;
u = ns.rv;
#endif
float akv = step(aaw.x, 0.0);
float akw = 1.0 - akv;
g = min(ns.rx, ROUNDED_BOX_RADIUS * 2.) * u_pixelRatio;
vec2 xb = ns.bd
+ ns.ry * (ns.or / 2.0) * aaw.x
+ (akv * ns.rz + akw * ns.sa) * ns.rx / 2.0 * aaw.y;
c = c * (1. - f.w)
+ vec4(
aaw.x * ns.or,
aaw.y * ns.rx,
ns.or,
ns.rx
) * u_pixelRatio * f.w;
gl_Position = xa(xb);
}
`,ZA=1e20,MF=class{constructor({fontSize:t=24,buffer:e=8,radius:i=6,cutoff:n=.25}={}){this._maxDimension=1,this._gridSize=1,this._fontSize=t,this._buffer=e,this._radius=i,this._cutoff=n,this._height=Math.ceil(this._fontSize+2*this._buffer*$m),this._canvas=Pr(),this._canvas.height=this._height,this._canvas.width=1;const s=this._canvas.getContext("2d",{willReadFrequently:!0});this._ctx=s,s.textBaseline="middle",s.textAlign="center",s.fillStyle="black"}setOptions({fontSize:t=24,buffer:e=8,cutoff:i=.25,radius:n=6}){this._fontSize=t,this._buffer=e,this._cutoff=i,this._radius=n,this._height=Math.ceil(this._fontSize+2*this._buffer*$m)}draw(t,e,i){Eh(this._ctx,e,this._fontSize,i);const n=NF(this._ctx.measureText(t).width+2*this._buffer)-2*xh,s=this._height,r=n*s,a=Math.max(n,s);this._canvas.width<n&&(this._canvas.width=n,Eh(this._ctx,e,this._fontSize,i),this._ctx.textAlign="center",this._ctx.textBaseline="middle",this._ctx.fillStyle="black"),r>this._gridSize&&(this._gridOuter=new Float64Array(r),this._gridInner=new Float64Array(r),this._gridSize=r),a>this._maxDimension&&(this._f=new Float64Array(a),this._d=new Float64Array(a),this._z=new Float64Array(a+1),this._v=new Int16Array(a),this._maxDimension=a),this._ctx.clearRect(0,0,n,s),this._ctx.fillText(t,n/2,s/2);const u=this._ctx.getImageData(0,0,n,s),h=new Uint8ClampedArray(r);for(let c=0;c<r;c++){const g=u.data[4*c+3]/255;this._gridOuter[c]=g===1?0:g===0?ZA:Math.pow(Math.max(0,.5-g),2),this._gridInner[c]=g===1?ZA:g===0?0:Math.pow(Math.max(0,g-.5),2)}WA(this._gridOuter,n,s,this._f,this._d,this._v,this._z),WA(this._gridInner,n,s,this._f,this._d,this._v,this._z);for(let c=0;c<r;c++){const g=this._gridOuter[c]-this._gridInner[c];h[c]=Math.max(0,Math.min(255,Math.round(255-255*(g/this._radius+this._cutoff))))}return{height:s,width:n,distance:h}}};function WA(t,e,i,n,s,r,a){for(let u=0;u<e;u++){for(let h=0;h<i;h++)n[h]=t[h*e+u];qA(n,s,r,a,i);for(let h=0;h<i;h++)t[h*e+u]=s[h]}for(let u=0;u<i;u++){for(let h=0;h<e;h++)n[h]=t[u*e+h];qA(n,s,r,a,e);for(let h=0;h<e;h++)t[u*e+h]=Math.sqrt(s[h])}}function qA(t,e,i,n,s){i[0]=0,n[0]=-1e20,n[1]=1e20;for(let r=1,a=0;r<s;r++){let u=(t[r]+r*r-(t[i[a]]+i[a]*i[a]))/(2*r-2*i[a]);for(;u<=n[a];)a--,u=(t[r]+r*r-(t[i[a]]+i[a]*i[a]))/(2*r-2*i[a]);a++,i[a]=r,n[a]=u,n[a+1]=1e20}for(let r=0,a=0;r<s;r++){for(;n[a+1]<r;)a++;e[r]=(r-i[a])*(r-i[a])+t[i[a]]}}function NF(t){return Math.ceil((t+2*xh)/to)*to}var Q_=256,RF=.275,OF=.25,IF=6,PF=XD-2*xh,zF=YD-2*xh,QA={fontSize:Tg,cutoff:RF,radius:IF},DF={fontSize:Tg,cutoff:OF,radius:8},kF=class{constructor(t,e){this._patternIdToInfoTexture=new Uint8Array(Q_*Q_*4),this._glTextures=[],this._textureSizes=[],this._pixelRatio=1,this._gl=t,this._glUnit=e;const i=Pr(el,el),n=i.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("Pattern: could not get 2d context");this._imageCanvasContext=n,this._imageCanvas=i,this._canvasForDuplicatedImage,this._sdfGenerator=new MF(QA),this._maxTextureSize=Math.min(4096,t.getParameter(t.MAX_TEXTURE_SIZE))}refresh(t){this._pixelRatio=t.getPixelRatio();const e=this._gl,i=this._getPatternsByFilter(t.getPatternList());for(let r=0;r<i.length;++r){const a=r,u=i[r],h=hF(u,this._maxTextureSize),{texture:c,size:g}=jL(a,u,h,this._maxTextureSize,this._patternIdToInfoTexture),_=this._glTextures[a]||(this._glTextures[a]=e.createTexture()),m=a===Sc?$0:Lx;GA(e,_,this._glUnit+1+a,c,g,a,m),this._textureSizes[a]=g}const n=this._glTextureInfo||(this._glTextureInfo=e.createTexture()),s=this._patternIdToInfoTexture;GA(e,n,this._glUnit,s,Q_,Sc,Lx)}bindMetaDataTexture(){const t=this._gl;t.activeTexture(t.TEXTURE0+this._glUnit),t.bindTexture(t.TEXTURE_2D,this._glTextureInfo)}getInfoTextureUnit(){return this._glUnit}getNearestTextureUnit(){return this._glUnit+1+Sc}getLinearTextureUnit(){return this._glUnit+1+fg}getLinearSdfTextureUnit(){return this._glUnit+1+gg}getMipmapTextureUnit(){return this._glUnit+1+nd}getInfoTextureSize(){return Q_}getNearestTextureSize(){return this._textureSizes[Sc]}getLinearTextureSize(){return this._textureSizes[fg]}getLinearSdfTextureSize(){return this._textureSizes[gg]}getMipmapTextureSize(){return this._textureSizes[nd]}_getPatternsByFilter(t){const e=new Array(FA);for(let i=0;i<FA;++i)e[i]=[];for(let i=0;i<t.length;++i){const n=this._getPatternPixels(t[i]);e[n.filter].push(n)}return e}_getPatternPixels({id:t,type:e,attributes:i}){let n;const{text:s,font:r,style:a,image:u,scaled:h,duplicated:c,colorArray:g}=i;switch(e){case ph:n=c?this._getDuplicatedImagePixels(u):h?this._getScaledImagePixels(u):this._getNonScaledImagePixels(u);break;case ad:n=this._getSdfTextPixels(s,r,a);break;case gd:n=this._getIconPixels(s,r,a);break;case _d:n=this._getBadgeIconPixels(s,r,a);break;case Wg:n=this._getPieChartPixels(g);break;default:throw new Error(`pattern type "${e}" does not exist`)}return n.id=t,n}_getScaledImagePixels(t){let e=t.width,i=t.height;if(e>0){const n=el/Math.max(t.width,t.height);e*=n,i*=n}return e&&i&&(e=zc(e),i=zc(i)),e-=2*xh,i-=2*xh,this._getImagePixels(t,e,i)}_getNonScaledImagePixels(t){return this._getImagePixels(t,t.width,t.height)}_getDuplicatedImagePixels(t){if(t.width===0||t.height===0)return this._getImagePixels(t,0,0);this._canvasForDuplicatedImage||(this._canvasForDuplicatedImage=Pr(el,el));const e=this._canvasForDuplicatedImage,i=e.getContext("2d"),n=t.width,s=t.height;let r=(el-n)/2,a=(el-s)/2;for(;r>0;)r-=n;for(;a>0;)a-=s;for(let u=r;u<el;u+=n)for(let h=a;h<el;h+=s)i.drawImage(t,u,h);return this._getImagePixels(e,el,el)}_getImagePixels(t,e,i){let n;if(e===0||i===0)n=new Uint8Array(0);else{(this._imageCanvas.width<e||this._imageCanvas.height<i)&&(this._imageCanvas.width=e,this._imageCanvas.height=i);const s=this._imageCanvasContext;Ax(this._imageCanvas,s,e,i);try{s.drawImage(t,0,0,e,i)}catch{}n=s.getImageData(0,0,e,i).data}return{width:e,height:i,pixels:n,filter:nd}}_getPieChartPixels(t){const e=zF,i=this._imageCanvasContext,n=e/2,s=e/2;return Ax(this._imageCanvas,i,e,e),i.save(),i.rect(0,0,e,e),i.clip(),$L(i,t,n,s,e),i.restore(),{width:e,height:e,pixels:i.getImageData(0,0,e,e).data,filter:fg}}_getTextPixels(t,e,i,n,s,r){const a=this._imageCanvasContext,u=s*this._pixelRatio;Eh(a,i,u,n);let h=Math.ceil(a.measureText(e).width);h===0&&(h=u);let c=0,g=0;t===nd||(c=2*Math.ceil(u*$m/2),g=2*Math.ceil(h*_L/2));const _=Math.ceil(h+g),m=Math.ceil(u+c),v=this._imageCanvas.height<m||this._imageCanvas.width<_;return this._imageCanvas.height<m&&(this._imageCanvas.height=m),this._imageCanvas.width<_&&(this._imageCanvas.width=_),v&&Eh(a,i,u,n),a.clearRect(0,0,_,m),a.fillStyle="black",a.textBaseline="middle",a.textAlign="left",a.fillText(e,r+g/2,m/2),{width:_,height:m,pixels:a.getImageData(0,0,_,m).data,filter:t}}_getIconPixels(t,e,i){return this._getTextPixels(nd,t,e,i,PF,0)}_getBadgeIconPixels(t,e,i){return this._sdfGenerator.setOptions(DF),this._getSdfPixels(t,e,i)}_getSdfTextPixels(t,e,i){return this._sdfGenerator.setOptions(QA),this._getSdfPixels(t,e,i)}_getSdfPixels(t,e,i){const{width:n,height:s,distance:r}=this._sdfGenerator.draw(t,e,i),a=new Uint8Array(n*s*4);for(let u=0;u<r.length;++u)a[4*u+3]=r[u];return{width:n,height:s,pixels:a,filter:gg}}},FF=class{constructor(t,e){this._gl=t,this._glTextureUnit=e,this._simpleShapePixels=new Uint8Array(Mm*Mm*4),this._complexShapePixels=new Uint8Array(dh*dh*4),this._shapesWritten=new Set}refresh(t){const e=t.getShapeList();for(const i of e)if(!this._shapesWritten.has(i.id)){const n=i.isSimple?Mm:dh,s=i.isSimple?this._simpleShapePixels:this._complexShapePixels;dF(i,n,yx,s),this._loadShapeInGpu(i.id,n,s),this._shapesWritten.add(i.id)}}_loadShapeInGpu(t,e,i){const n=this._gl,s=xx,r=t%vx*dh,a=Math.floor(t/vx)*dh;if(this._texture)n.bindTexture(n.TEXTURE_2D,this._texture);else{const u=new Uint8Array(s*s*4);this._texture=n.createTexture(),n.activeTexture(n.TEXTURE0+this._glTextureUnit),n.bindTexture(n.TEXTURE_2D,this._texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s,s,0,n.RGBA,n.UNSIGNED_BYTE,u)}n.texSubImage2D(n.TEXTURE_2D,0,r,a,e,e,n.RGBA,n.UNSIGNED_BYTE,i)}getTextureSize(){return xx}getSamplingSize(){return dh}getBufferRatio(){return yx}getTextureUnit(){return this._glTextureUnit}rewriteShape(t){this._shapesWritten.delete(t)}},KA=class{constructor(t,{vertex:e,fragment:i,constants:n,macros:s}){this._state=0,this._gl=t,this._vertexSource=e,this._fragmentSource=i,this._constants=ps(n||{}),this._macros=ps(s||{})}setConstant(t,e){this._constants[t]=e}setMacro(t,e){this._macros[t]=e}getState(){return this._state}getProgram(){return this._program}compile(){const t=this._gl,e=jA(this._vertexSource,this._macros,this._constants),i=jA(this._fragmentSource,this._macros,this._constants);this._program&&(t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader));const n=t.createProgram(),s=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);if(!(n&&s&&r))throw new Error("Error instantiating WebGL program");this._program=n,this._vertexShader=s,this._fragmentShader=r,t.shaderSource(this._vertexShader,e),t.compileShader(this._vertexShader),t.attachShader(this._program,this._vertexShader),t.shaderSource(this._fragmentShader,i),t.compileShader(this._fragmentShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._state=1}getError(){const t=this._gl;if(!t.getShaderParameter(this._vertexShader,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(this._vertexShader)||"";let i=e;const n=e.match(/ERROR: (\d+):(\d+):(.*)\n/g);if(n&&n.length){const s=this._vertexSource.split(`
`);i=n.map(r=>{const a=r.match(/ERROR: (\d+):(\d+):(.*)\n/);if(!a)return r;const[u,h]=a.slice(2);return`${s[+u]}
${s[+u+1]}
~~~~~~~~~~~
${s[+u+2]}
 -> ${h}`}).join(`
`)}return{step:"vertex",message:i}}return t.getShaderParameter(this._fragmentShader,t.COMPILE_STATUS)?t.getProgramParameter(this._program,t.LINK_STATUS)?(this._state=2,null):{step:"link",message:t.getProgramInfoLog(this._program)||""}:{step:"fragment",message:t.getShaderInfoLog(this._fragmentShader)||""}}};function jA(t,e,i){const n=Object.keys(e),s=Object.keys(i);for(let r=0;r<n.length;++r){const a=n[r],u=e[a];t=t.replace(`#define ${a} 0`,`#define ${a} ${u}`)}for(let r=0;r<s.length;++r){const a=s[r],u=i[a],h=u+(u%1==0?".0":"");t=t.replace(`const float ${a} = 0.0;`,`const float ${a} = ${h};`)}return t}function BF(){return typeof window<"u"&&!!window.FORCE_WEBGL}/** @preserve instance id */var JA=zL(),UF={stencil:!0,antialias:!1,alpha:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!BF()},GF=0,HF=1,VF={NO_WEBGL:'Unable to create a WebGL context: `canvas.getContext("webgl")` and `canvas.getContext("experimental-webgl")` returned `null`',NO_ANGLE_INSTANCED_ARRAYS:'WebGL extension "ANGLE_instanced_arrays" unavailable: `gl.getExtension("ANGLE_instanced_arrays")` returned `null`'},eC=class extends Error{};function gv(t,e){if(!t&&e){const i=new eC(VF[e]);throw i.code=e,i}}var YF=class iC extends yu{constructor(e){super(e),this._2dcanvas=Pr(),this._ctx=this._2dcanvas.getContext("2d"),this._bufferDrawers=[],this._mustResize=!1,this._error=null,this._onContextLost=h=>{h.preventDefault(),this._error=new eC("WebGL context lost"),this.fire("error",this._error)};const i=iC.createInitData(),{canvas:n,gl:s,ext:r,staticProgramWrapper:a,animationProgramWrapper:u}=i;gv(s,"NO_WEBGL"),gv(r,"NO_ANGLE_INSTANCED_ARRAYS"),this._glCanvas=n,this._gl=s,this._ext=r,this._staticProgramWrapper=a,this._animationProgramWrapper=u,this._shapeTexture=new FF(this._gl,GF),this._patternTexture=new kF(this._gl,HF),this._initCanvas(this._glCanvas),this._computeShaderInfo(),this._initSpecialGlBuffers(),this._initGlPrograms(),this._initGl()}_initCanvas(e){super._initCanvas(e),e.addEventListener("webglcontextlost",this._onContextLost,!1)}static isAvailable(){return JA||gv(null,"NO_WEBGL"),JA}static createInitData(){const e=Pr(),i=X0(e,UF,"webgl"),n=i&&typeof i.getExtension=="function"?i.getExtension("ANGLE_instanced_arrays"):null,s=WF(),r=new KA(i,{vertex:fv,fragment:cv,constants:s,macros:{ANIMATED:0}}),a=new KA(i,{vertex:fv,fragment:cv,constants:s,macros:{ANIMATED:1}});return i&&n&&(r.compile(),i.flush()),{canvas:e,gl:i,ext:n,staticProgramWrapper:r,animationProgramWrapper:a}}static getName(){return"WebGL"}_beforeFirstFrame(){this._animationProgramWrapper.getState()===0&&this._animationProgramWrapper.compile()}ensureAnimationsReady(){const e=this._animationProgramWrapper.getState();e!==2&&(e===0&&this._animationProgramWrapper.compile(),this._animationProgramWrapper.getError())}getDomElement(){return this._glCanvas}_initGl(){const e=this._gl;e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}_computeShaderInfo(){this._shaderMetadata=XF(fv,cv)}_initGlPrograms(){this._staticProgram=new XA({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._staticProgramWrapper}),this._animationProgram=new XA({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._animationProgramWrapper})}_initSpecialGlBuffers(){const e=this._gl,i=e.createBuffer(),n=new Int8Array(18*Po);for(let s=0;s<Po;++s){const r=[-1,-1,s,1,-1,s,1,1,s,-1,-1,s,-1,1,s,1,1,s],a=s*r.length;for(let u=0;u<r.length;u++)n[u+a]=r[u]}e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this._specialGlBuffers={vertexInfo:i}}_computeUniforms(){return{viewWidth:this._width,viewHeight:this._height,viewX:this._viewX,viewY:this._viewY,viewZoom:this._viewZoom,viewAngle:this._viewAngle,currentTime:this._currentTime,pixelRatio:this._pixelRatio,backgroundColor:this._backgroundRgba,patternInfoTexture:this._patternTexture.getInfoTextureUnit(),patternNearestTexture:this._patternTexture.getNearestTextureUnit(),patternLinearTexture:this._patternTexture.getLinearTextureUnit(),patternLinearSdfTexture:this._patternTexture.getLinearSdfTextureUnit(),patternMipmapTexture:this._patternTexture.getMipmapTextureUnit(),shapeTexture:this._shapeTexture.getTextureUnit(),BYTES_TO_COORD:this._scales.bytesToActualCoord,BYTES_TO_SCALED_SIZE:this._scales.bytesToActualScaledSize,BYTES_TO_MIN_VISIBLE_SIZE:this._scales.bytesToActualMinVisibleSize,BYTES_TO_SYMBOLIC_SIZE:this._scales.bytesToActualSymbolicSize,BYTES_TO_DASH_LENGTH:this._scales.bytesToActualDashLength,BYTES_TO_GAP_LENGTH:this._scales.bytesToActualGapLength,BYTES_TO_PATTERN_SCALE:this._scales.bytesToActualPatternScale,PATTERN_INFO_TEXTURE_SIZE:this._patternTexture.getInfoTextureSize(),PATTERN_NEAREST_TEXTURE_SIZE:this._patternTexture.getNearestTextureSize(),PATTERN_LINEAR_TEXTURE_SIZE:this._patternTexture.getLinearTextureSize(),PATTERN_LINEAR_SDF_TEXTURE_SIZE:this._patternTexture.getLinearSdfTextureSize(),PATTERN_MIPMAP_TEXTURE_SIZE:this._patternTexture.getMipmapTextureSize(),PATTERN_POSITION_UNIT_SIZE:to,ROUNDED_BOX_RADIUS:this._textManager.getCornerRadius(),SHAPE_TEXTURE_SIZE:this._shapeTexture.getTextureSize(),SHAPE_SAMPLING_SIZE:this._shapeTexture.getSamplingSize(),SHAPE_SAMPLING_BUFFER_RATIO:this._shapeTexture.getBufferRatio(),NB_SHAPES_BY_SIDE:this._shapeTexture.getTextureSize()/this._shapeTexture.getSamplingSize(),SHAPE_DIMENSIONS:this._shapeTexture.getSamplingSize()/this._shapeTexture.getTextureSize(),SHAPE_ACTUAL_RATIO:1-this._shapeTexture.getBufferRatio()}}_render({shapesChanged:e,patternsChanged:i,dimensionsChanged:n,backgroundColorChanged:s}){const r=this._gl;if(this._error)throw this._error;if(e&&(this._shapeTexture.refresh(this._shapeManager),this._patternTexture.bindMetaDataTexture()),i&&this._patternTexture.refresh(this._patternManager),n&&(this._mustResize=!0),s){const[h,c,g,_]=this._renderBackground?this._backgroundRgba:[0,0,0,0];r.clearColor(h*_,c*_,g*_,_)}const a=this._computeUniforms(),u=this._getSortedBufferList();this._mustResize&&u.length&&(Um(this._glCanvas,this._width,this._height,this._pixelRatio),r.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),this._mustResize=!1),r.clear(r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT);for(let h=0;h<u.length;++h)this._displayBuffer(u[h],a);this._endFrame()}_displayBuffer(e,i){const n=e.getProgram();n!==this._currentProgram&&(this._currentProgram&&this._currentProgram.endPass(),this._currentProgram=n,this._currentProgram.startPass(i)),e.markAsUsed(),e.draw()}_getSortedBufferList(){const e=this._bufferList.getBuffersByAscendingDepth(),i=[];for(let n=0;n<this._bufferDrawers.length;++n){const s=this._bufferDrawers[n];s&&s.markAsUnused()}for(let n=0;n<e.length;++n){const s=e[n],r=this._getBufferDrawer(s);r.markAsUsed(),!s.isEmpty()&&this._isBufferDisplayable(s)&&i.push(r)}for(let n=0;n<this._bufferDrawers.length;++n){const s=this._bufferDrawers[n];s&&!s.isUsed()&&(s.destroy(),this._bufferDrawers[n]=void 0)}return i}_endFrame(){this._currentProgram&&(this._currentProgram.endPass(),this._currentProgram=null)}_getBufferDrawer(e){const i=e.getId();let n=this._bufferDrawers[i];if(!n){for(;this._bufferDrawers.length<=i;)this._bufferDrawers.push(void 0);n=new EF({gl:this._gl,ext:this._ext,staticProgram:this._staticProgram,animationProgram:this._animationProgram}),this._bufferDrawers[i]=n}return n.setDataBuffer(e),n}destroy(){this._glCanvas&&this._glCanvas.removeEventListener("webglcontextlost",this._onContextLost);const e=this._gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}getImageData(){const e=this._glCanvas.width,i=this._glCanvas.height;return(this._2dcanvas.width<e||this._2dcanvas.height<i)&&(this._2dcanvas.width=e,this._2dcanvas.height=i),this._ctx.clearRect(0,0,e,i),this._ctx.drawImage(this._glCanvas,0,0),this._ctx.getImageData(0,0,e,i)}_getImageDataFlippedYAxis(){const e=this._gl,i=this._glCanvas.width,n=this._glCanvas.height,s=this._ctx.createImageData(i,n),r=new Uint8Array(s.data.buffer);return e.readPixels(0,0,i,n,e.RGBA,e.UNSIGNED_BYTE,r),s}setConstant(e,i){this._staticProgramWrapper.setConstant(e,i),this._animationProgramWrapper.setConstant(e,i),this._staticProgramWrapper.compile(),this._animationProgramWrapper.compile(),this._initGlPrograms(),this._bufferDrawers.forEach(n=>{n==null||n.destroy()}),this._bufferDrawers=[]}getShapeTexture(){return this._shapeTexture}};function XF(t,e){const i={vertexInfoAttribute:"a_vertexInfo",attributes:[],uniforms:[]};return $A(i,t),$A(i,e),i}var ZF={float:1,vec2:2,vec3:3,vec4:4};function $A(t,e){const i=/(?:attribute\s+\/\*\s*(byte|ubyte|short|ushort|float)\s*\*\/\s*(float|vec2|vec3|vec4)\s+(\w+)\s*;)|(?:#if\s*(\w+))|(?:#endif)/g,n=/uniform\s+(float|vec2|vec3|vec4|sampler2D|int)\s+(\w+)\s*;/g,s=[];let r=i.exec(e);for(;r;){const a=r[0];a==="#endif"?s.pop():a.startsWith("#if")?s.push(r[4]):t.attributes.push({name:r[3],size:ZF[r[2]],type:r[1],tags:s.slice(),location:null,byteSize:0,glType:null}),r=i.exec(e)}for(r=n.exec(e);r;){if(!t.uniforms.some(({id:a})=>a===r[1])){const a=r[1],u=r[2],h=u.replace("u_","");t.uniforms.push({id:h,name:u,type:a})}r=n.exec(e)}}function WF(){return{BYTES_TO_OFFSET_ANGLE:2*Math.PI/8,BYTES_TO_COLOR:1/15,SDF_FONT_SIZE:Tg,CURVATURE_RATIO:Mp,PATTERN_PADDING:xh,TEXT_WIDTH_MULTIPLIER:_L,TEXT_HEIGHT_MULTIPLIER:$m,SELF_LOOP_CURVATURE_RATIO:tp,EDGE_ARROW_SIZE_RATIO:yu.edgeArrowSizeRatio,EDGE_MIN_TIP_SIZE:yu.minEdgeTipSize,CURVE_SUBDIVISIONS:Po,PIECE_NODE_COMPONENT:Pa,PIECE_TEXT_BOX:ld,PIECE_EDGE_BODY:Np,PIECE_EDGE_HEAD:F0,PIECE_EDGE_TAIL:B0,PIECE_EDGE_TEXT:id,MAX_TEXT_SIZE:kk,BYTES_TO_TEXT_OFFSET_X:1/GL,BYTES_TO_TEXT_OFFSET_Y:1/Tx,FILTER_NEAREST:Sc,FILTER_LINEAR:fg,FILTER_LINEAR_SDF:gg,FILTER_MIPMAP:nd,SHAPE_TEXTURE_SIZE:xx,SIMPLE_SHAPE_SAMPLING_SIZE:Mm,COMPLEX_SHAPE_SAMPLING_SIZE:dh,SHAPE_SAMPLING_BUFFER_RATIO:yx,MAX_SHAPES:Jm.toString(),FIRST_COMPLEX_SHAPE_ID:px,SELF_LOOP_TO_CIRCLE_APPROX:yL,SDF_GAMMA:qD}}var qF={x:0,y:0,zoom:1,angle:0,width:80,height:60,pixelRatio:1,backgroundColor:null,currentTime:0,isBufferDisplayable:f0,hideImages:!1,renderBackground:!1,bentEnable:!1,bentVertical:!1},K_={webgl:YF,canvas:gF,svg:xF},t1=[0,0,0,0],_v={webgl:null,svg:null,canvas:null},mv=class extends Zg{constructor(t){super(),this._view=ps(qF),this._domWrapper=xu?document.createElement("div"):Bm(),this._domElement=this._domWrapper.appendChild(xu?document.createElement("div"):Bm()),this._currentElementSize=0,this._currentBlockOffset=0,this._currentByteOffset=0,this._blockIdToAddress=new Uint32Array(0),this._renderersByType={},this._switchMainRenderer=!0,this._refreshTexts=!1,this._backgroundColor=null,this._initData=t||{},this._patternManager=new Ok,this._shapeManager=new Ik,this._boundariesManager=new nk,this._textManager=new Fk(this._patternManager),this._bufferOffsetToId=new EL,this._memoryManager=new Mk(this._patternManager,this._shapeManager,this._textManager,this._bufferOffsetToId,e=>this.parseColor(e)||t1),this._bufferList=new jD}static createInitData(){const t={};for(const e in K_)t[e]=K_[e].createInitData();return t}static cacheInitData(t){_v=t}static getCachedInitData(){return _v}static clearCachedInitData(){_v={webgl:null,svg:null,canvas:null}}freeBlock(t){this._checkBlockId(t);const e=this._blockIdToAddress[t],i=this._bufferList.freeBlock(e);return this._blockIdToAddress[t]=i,i}_ensureDomElementsFitParent(){const t=this._domElement.parentNode;!t||t.offsetWidth===this._view.width&&t.offsetHeight===this._view.height||bd(t,`${this._view.width}px`,`${this._view.height}px`)}_ensureCorrectBackgroundColor(){const t=this._domElement.parentNode;this._backgroundColor!==this._view.backgroundColor&&t&&(t.style.backgroundColor=this._view.backgroundColor||"",this._backgroundColor=this._view.backgroundColor)}createGroup(){return new ik}parseColor(t){return io(t)}clear(){this._blockIdToAddress.fill(0),this._patternManager.reset(),this._boundariesManager.reset(),this._textManager.reset(),this._bufferList.reset(),this._bufferOffsetToId.reset()}notifyFontsReloaded(){this._patternManager.notifyUpdate(),this._textManager.clear(),this._refreshTexts=!0}notifyPatternUpdate(){this._patternManager.notifyUpdate()}getShapePoints(t){return this._shapeManager.getDefinitionFromName(t).points}checkShapeHit(t,e,i){const{getDistanceFromStrokeVertically:n,getDistanceFromStrokeHorizontally:s}=this._shapeManager.getDefinitionFromName(t);return Math.min(n(e,i),s(e,i))>=0}setGlobalBoundaries(t){const{maxBlockId:e=0,maxScaledSize:i,maxMinVisibleSize:n,maxSymbolicSize:s,maxDashLength:r,maxGapLength:a,maxPatternScale:u}=t;return e>this._blockIdToAddress.length&&this._resizeBlockArray(e),!!this._boundariesManager.set(t)&&(this._memoryManager.resizeBoundaries(i,n,s,r,a,u),!0)}_resizeBlockArray(t){const e=new Uint32Array(t);e.set(this._blockIdToAddress),this._blockIdToAddress=e}registerShape(t,e){this._shapeManager.register(t,e)}updateShape(t,e){var n;this._shapeManager.updateShape(t,e);const i=(n=this._renderersByType.webgl)==null?void 0:n.getShapeTexture();i&&i.rewriteShape(this._shapeManager.getIdFromName(t))}_bindBlock(t,e,i,n,s,r,a){this._checkBlockId(t);const u=this._blockIdToAddress[t],h=this._bufferList.allocateBlock(u,e,i,n,s,r,a);return this._blockIdToAddress[t]=h.address,this._currentDataView=h.buffer.getDataView(),this._currentElementSize=h.buffer.elementSize,this._currentBlockOffset=h.offset,this._currentByteOffset=this._currentBlockOffset*this._currentElementSize,this._currentSideDataView=h.buffer.getSideDataView(),this._currentSideElementSize=h.buffer.getTotalSideElementsSize(),this._currentSideByteOffset=this._currentBlockOffset*this._currentSideElementSize,h}_setItemIndex(t){const e=this._currentBlockOffset+t;this._currentByteOffset=e*this._currentElementSize,this._currentSideByteOffset=e*this._currentSideElementSize}_checkBlockId(t){t>=this._blockIdToAddress.length&&this._resizeBlockArray(fh(t+1))}_setTextCharacters(t){this._textManager.storeTextInDataView(this._currentSideDataView,this._currentSideByteOffset,this._currentSideByteOffset+this._currentSideElementSize,t)}_storeElement(t,e){this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset,t.end),e&&(this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset+Ic,t.start),this._memoryManager.storeAnimationInformation(this._currentDataView,this._currentByteOffset+2*Ic,t.animation,G0.getCoefficients(t.animation.easing)))}storeGroup(t,e){if(!e||e.size===0)return this.freeBlock(t);const i=e.type,n=e.depth,s=e.size,r=e.getElements(),a=e.animated,u=e.stencilUsage,h=e.getId();let c=0;if(i===fd)for(let _=0;_<s;++_){const m=r[_],{start:v,end:b}=m;if(b.pattern.type===bh){const x=b.pattern.attributes.text;c=Math.max(c,x.length)}if(a&&v.pattern.type===bh){const x=v.pattern.attributes.text;c=Math.max(c,x.length)}}const g=this._bindBlock(t,i,a,n,s,c,u);for(let _=0;_<s;++_){const m=r[_];this._setItemIndex(_),this._storeElement(m,a),this._bufferOffsetToId.set(g.buffer.getId(),g.offset+_,h)}if(i===fd)for(let _=0;_<s;++_){const m=r[_];this._setItemIndex(_),this._setTextCharacters(m.end.pattern)}return g.address}_refreshTextElements(){const t=this._bufferList.getBuffers();for(const e of t)if(e&&e.type===fd){const i=e.getSideDataView(),n=e.getTotalSideElementsSize(),s=e.getSize();let r=0,a=n;for(let u=0;u<s;++u){const h=this._textManager.extractTextFromDataView(i,r,a);this._textManager.storeTextInDataView(i,r,a,h),r=a,a+=n}e.triggerUpdate()}}extractElement(t,e=0){if(!t)return null;const i=this._bufferList.getBlockInfo(t);return this._renderer.extractElement(i.buffer,i.offset+e)}getDomElement(){return this._domElement}getDomWrapper(){return this._domWrapper}measureText(t,e,i,n=1){return this._textManager.measureText(t,e,i,n)}setRenderType(t){this._renderType!==t&&(this._renderType=t,this._switchMainRenderer=!0)}setEdgeArrowSizeRatio(t){yu.setEdgeArrowSizeRatio(t),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_ARROW_SIZE_RATIO",t)}setEdgeMinTipSize(t){yu.setMinEdgeTipSize(t),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_MIN_TIP_SIZE",t)}setBentEdges(t,e){this._view.bentEnable=t,this._view.bentVertical=e}getBentEdges(){return{bentEnable:this._view.bentEnable,bentVertical:this._view.bentVertical}}_ensureMainRendererReady(){if(this._switchMainRenderer){this._renderType===null&&(this._renderType="canvas");const t=K_[this._renderType];t&&t.isAvailable()||(this._renderType="canvas"),this._renderer=this._renderersByType[this._renderType],this._renderer||(this._renderer=this._instanciateRenderer(this._renderType),this._renderer.on("error",e=>this.fire("error",e)),this._renderersByType[this._renderType]=this._renderer),this._updateDomElement()}}_updateDomElement(){const t=this._renderer&&this._renderer.getDomElement(),e=this._domElement;for(;e&&e.firstChild;)e.removeChild(e.firstChild);t&&this._appendDomChild(t)}_appendDomChild(t){t.style.position="absolute",t.style.left="0",t.style.top="0",this._domElement.appendChild(t)}_instanciateRenderer(t){return new(t===null?yu:K_[t])({initData:t===null?null:this._initData[t],bufferList:this._bufferList,shapeManager:this._shapeManager,patternManager:this._patternManager,boundariesManager:this._boundariesManager,textManager:this._textManager,memoryManager:this._memoryManager})}setView(t){this._view={...this._view,...t}}getTextManager(){return this._textManager}_updateManagers(){this._patternManager.setPixelRatio(this._view.pixelRatio),this._shapeManager.update(),this._patternManager.update(),this._textManager.update(),this._boundariesManager.update(),this._bufferList.update(),this._refreshTexts&&(this._refreshTexts=!1,this._refreshTextElements())}_resizeCanvas(t){TL(t,this._view.width,this._view.height,this._view.pixelRatio)}render(){this._ensureMainRendererReady(),this._ensureDomElementsFitParent(),this._ensureCorrectBackgroundColor(),this._updateManagers(),this._renderer.renderFrame(this._view)}ensureAnimationsReady(){this._ensureMainRendererReady(),this._renderer.ensureAnimationsReady()}export(t,e,i){const n=this._instanciateRenderer(t),s={...this._view,...e};return"setViewportClipping"in n&&n.setViewportClipping(!1),this._updateManagers(),n.renderFrame(s),n.export(i).then(()=>n.getDomElement())}getCurrentTime(){return eo()}getImageData(){return this._renderer&&this._renderer.getImageData()}destroy(){for(const t of Object.keys(this._renderersByType)){const e=this._renderersByType[t];e&&e.destroy()}}transparentify(t){const e=this.parseColor(t)||t1;return`rgba(${Math.round(255*e[0])},${Math.round(255*e[1])},${Math.round(255*e[2])},0)`}initDebugRenderingLoop({triggerKey:t="r",start:e=!0}={}){let i=e;document.addEventListener("keydown",({key:s})=>{s===t&&(i=!i)});const n=s=>{(i||s)&&(this.setView({currentTime:eo()}),this.render()),window.requestAnimationFrame(()=>{n()})};window.requestAnimationFrame(()=>{document.body.appendChild(this.getDomElement()),n(!0)})}},QF=xp&&document.fonts,KF=200,pv="/qwerty/ [HELLO] ",e1="serif",jF=16,JF=class{constructor(){this._fontFaceSet=QF?document.fonts:null,this._canvas=Pr(),this._ctx=this._canvas.getContext("2d")}_measureText(t,e){return this._ctx.font=`12px ${e}`,this._ctx.measureText(t).width}check(t){if(t===e1)return!0;const e=this._measureText(pv,e1);return this._measureText(pv,t)!==e}load(t){return this._fontFaceSet&&this._fontFaceSet.load?this._fontFaceSet.load(`12px ${t}`):(this._ctx.font=`12px ${t}`,this._ctx.fillText(pv,10,50),Promise.resolve())}},$F=class{constructor(t,e){this._fontLoaderCounter=0,this._loaded=!1,this._value=null,this._timeout=0,this._fontFaceSet=t,this._fontName=e,this._loaded=!1,this._value=null,this._timeout=0,xp&&!this._fontFaceSet.check(this._fontName)||this._setLoaded()}_setLoaded(){this._loaded=!0,this._value=this._fontName}getValue(){return this._value}isLoaded(){return this._loaded}destroy(){clearTimeout(this._timeout)}load(){return this._tryLoad(KF).then(()=>this._setLoaded())}_tryLoad(t){return this._fontFaceSet.load(this._fontName).then(()=>{if(!this._fontFaceSet.check(this._fontName)&&this._fontLoaderCounter<jF)return new Promise(e=>{t<6e4&&(this._timeout=setTimeout(e,t))}).then(()=>(this._fontLoaderCounter++,this._tryLoad(1.5*t)))})}},t3=class{constructor(){this._fontFaceSet=new JF,this._fonts={},this._onFontLoaded=[],this._hideUntilFontsLoaded=!0}setHideUntilFontsLoaded(t){this._hideUntilFontsLoaded=t}getFont(t){let e=this._fonts[t];return e||(e=new $F(this._fontFaceSet,t),this._fonts[t]=e,e.isLoaded()||e.load().then(()=>this._triggerFontLoaded(t))),!this._hideUntilFontsLoaded&&t||e.getValue()}onFontLoaded(t){this._onFontLoaded.push(t)}destroy(){this._onFontLoaded=[],Object.keys(this._fonts).forEach(t=>this._fonts[t].destroy())}_triggerFontLoaded(t){this._onFontLoaded.forEach(e=>e(t))}};function e3(t,e,i,n){tb(t,e,i,n),t.thicknessOrFontSizeScaled=e.widthScaled,t.thicknessOrFontSizeFixed=e.widthFixed,t.strokeWidthScaled=e.stroke.widthScaled,t.strokeWidthFixed=e.stroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.color,t.strokeColor=e.stroke.color,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=e.stroke.minVisibleSize,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function tb(t,e,i,n){t.pieceId=i,t.shape=n,t.x1=e.sourceX,t.y1=e.sourceY,t.x2=e.targetX,t.y2=e.targetY,t.rectWidthOrSourceRadiusScaled=e.sourceRadiusScaled,t.rectWidthOrSourceRadiusFixed=e.sourceRadiusFixed,t.rectHeightOrTargetRadiusScaled=e.targetRadiusScaled,t.rectHeightOrTargetRadiusFixed=e.targetRadiusFixed,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=no,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.widthScaled,t.curvature=e.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=e.isSelfLoop,t.isText=!1}function i3(t,e,i){const n=e.widthScaled+2*e.halo.widthScaled,s=e.widthFixed+2*e.halo.widthFixed;tb(t,e,i,"line"),t.thicknessOrFontSizeScaled=n,t.thicknessOrFontSizeFixed=s,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.halo.color,t.strokeColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1}function n3(t,e,i,n){tb(t,e,i,n);const s=e.widthFixed*RA+Sk;t.thicknessOrFontSizeScaled=e.widthScaled*NA,t.thicknessOrFontSizeFixed=e.widthFixed*NA,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=e.widthScaled*RA,t.offsetFixed=s,t.fillColor=e.outline.color,t.strokeColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,e.outline.minVisibleSize),t.strokeMinVisibleSize=0,t.offsetAngle=Math.PI/2,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function s3(t,e,i){nC(t,e,i),t.pattern.type=bh,t.pattern.attributes.text=e.content,t.pattern.attributes.size=Xg,t.pattern.attributes.font=e.font,t.pattern.attributes.style=e.style,t.pattern.attributes.align=e.align,t.patternColor=e.color,t.patternScale=1,t.thicknessOrFontSizeScaled=e.sizeScaled,t.thicknessOrFontSizeFixed=e.sizeFixed,t.isText=!0}function r3(t,e,i){nC(t,e,i),t.pieceId+=ld,t.fillColor=e.backgroundColor,t.shape="square"}function nC(t,e,i){const n=e.position==="centered"?0:(i.widthScaled+e.heightScaled)/2+i.stroke.widthScaled,s=e.position==="centered"?0:(i.widthFixed+e.heightFixed)/2+i.stroke.widthFixed+e.padding+e.margin;if(t.pieceId=id,t.shape="square",t.x1=i.sourceX,t.y1=i.sourceY,t.x2=i.targetX,t.y2=i.targetY,!i.isSelfLoop&&i.curvature===0){const r=Math.atan2(t.y2-t.y1,t.x2-t.x1),a=i.sourceRadiusScaled-i.targetRadiusScaled,u=Math.cos(r),h=Math.sin(r);t.x1+=u*a,t.y1+=h*a}t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding+1,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=i.sourceRadiusScaled+i.targetRadiusScaled,t.strokeWidthFixed=i.sourceRadiusFixed+i.targetRadiusFixed,t.offsetScaled=n,t.offsetFixed=s,t.pattern.type=no,t.opacity=i.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,i.minVisibleSize),t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.offsetAngle,t.patternScale=0,t.symbolicSize=i.widthScaled,t.curvature=i.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=i.isSelfLoop,t.isText=!1,t.adjustTextAngle=e.adjustAngle}var o3=t=>!!t||t===0;function hl(t,e,i=0){return t==="inherit"?Array.isArray(e)?e[((i/(2*Math.PI)*e.length|0)+1)%e.length]:e:t}function a3(t,e,i){return t==="source"?Array.isArray(e)?e[0]:e:t==="target"?Array.isArray(i)?i[0]:i:t}function l3(t){const e=t.depth;return e===LL||e===wL||(e-H0)%Y0>=V0}function sC(t){const e=(t.depth-H0)%Y0;return e>=0&&e!==CL&&e!==V0}var qg="shifted",u3="centered";u0(yw());function i1(t,e,i,n,s,r){h3(t,e,i,n,s,r),n1(t,e,i,n.text,s.texts.primary,r.texts.primary,r),n1(t,e,i,n.text.secondary,s.texts.secondary,r.texts.secondary,r)}function h3(t,e,i,n,s,r){if(yv(s.body,r,e3),s.halo.body){const a=n.halo.width.get(i),u=+(n.halo.scalingMethod.get(i)==="scaled");r.halo.widthScaled=a*u,r.halo.widthFixed=a*(1-u),yv(s.halo,r,i3)}s.outline.body&&(r.outline.color=n.outline.color.get(i),r.outline.minVisibleSize=n.outline.minVisibleSize.get(i),yv(s.outline,r,n3))}function yv(t,e,i){i(t.body,e,Np,e.shape.body),t.head&&i(t.head,e,F0,e.shape.head),t.tail&&i(t.tail,e,B0,e.shape.tail)}function n1(t,e,i,n,s,r,a){if(s.text&&r.content){const u=n,h=u.scaling.get(i);if(r.font=e.fontManager.getFont(u.font.get(i)),r.color=hl(u.color.get(i),a.color),r.position=u.position?u.position.get(i):qg,r.style=u.style.get(i),r.minVisibleSize=u.minVisibleSize.get(i),r.margin=u.margin.get(i),r.padding=u.padding.get(i),r.maxLineLength=u.maxLineLength.get(i),r.content=Z0(r.content,r.maxLineLength),r.adjustAngle=u.adjustAngle.get(i),r.align=u.align.get(i),h){const g=u.scale.get(i);r.sizeScaled=a.widthScaled*g,r.sizeFixed=a.widthFixed*g}else r.sizeFixed=u.size.get(i),r.sizeScaled=0;const c=t.measureText(r.content,r.font,r.style);r.widthScaled=c.width*r.sizeScaled,r.widthFixed=c.width*r.sizeFixed,r.heightScaled=c.height*r.sizeScaled,r.heightFixed=c.height*r.sizeFixed,r.offsetAngle=r===a.texts.primary?Ak:Tk,s3(s.text,r,a),s.background&&r3(s.background,r,a)}}function s1(t,e){vv(t.body,e,!0,!0),vv(t.outline,e,e.outline.enabled,!0),vv(t.halo,e,!!e.halo.color,!1),r1(t.texts.primary,e.texts.primary),r1(t.texts.secondary,e.texts.secondary)}function vv(t,e,i,n){t.body=i,t.head=i&&n&&!!e.shape.head,t.tail=i&&n&&!!e.shape.tail}function r1(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor}function o1(t,e,i,n,s,r){d3(t,e,i,n,s,r),a1(t,e.texts.primary,i.text,n,e),a1(t,e.texts.secondary,i.text.secondary,n,e)}function d3(t,e,i,n,s,r){const a=s.source,u=s.target,h=i.source.get(n),c=i.target.get(n),g=a.x.get(h),_=a.y.get(h),m=a.radius.get(h),v=a.innerStroke.width.get(h),b=+(a.innerStroke.color.get(h)!==null),x=+(a.innerStroke.scalingMethod.get(h)==="scaled"),M=a.outerStroke.width.get(h),N=+(a.outerStroke.color.get(h)!==null),O=+(a.outerStroke.scalingMethod.get(h)==="scaled"),R=a.color.get(h),P=+(a.scalingMethod.get(h)==="scaled"),F=u.x.get(c),U=u.y.get(c),V=u.radius.get(c),Y=u.innerStroke.width.get(c),K=+(u.innerStroke.color.get(c)!==null),tt=+(u.innerStroke.scalingMethod.get(c)==="scaled"),j=u.outerStroke.width.get(c),lt=+(u.outerStroke.color.get(c)!==null),pt=+(u.outerStroke.scalingMethod.get(c)==="scaled"),ft=u.color.get(c),ht=+(u.scalingMethod.get(c)==="scaled"),W=a3(i.color.get(n),R,ft),st=i.width.get(n),_t=i.scalingMethod.get(n)==="scaled"?1:0,Vt=i.stroke.width.get(n),X=i.stroke.scalingMethod.get(n)==="scaled"?1:0,et=wk[i.shape.style.get(n)],Dt=i.adjustAnchors.get(n);if(e.source=h,e.target=c,e.sourceX=g,e.sourceY=_,e.targetX=F,e.targetY=U,e.sourceRadiusScaled=v*b*x+M*N*O+m*P,e.sourceRadiusFixed=v*b*(1-x)+M*N*(1-O)+m*(1-P),e.targetRadiusScaled=Y*K*tt+j*lt*pt+V*ht,e.targetRadiusFixed=Y*K*(1-tt)+j*lt*(1-pt)+V*(1-ht),e.widthScaled=st*_t,e.widthFixed=st*(1-_t),e.curvature=i.curvature.get(n),e.isSelfLoop=h===c,e.color=W,e.opacity=i.opacity.get(n),e.minVisibleSize=i.minVisibleSize.get(n),e.shape.body=i.shape.body.get(n),e.shape.head=i.shape.head.get(n),e.shape.tail=i.shape.tail.get(n),e.shape.dashLength=et.dash,e.shape.gapLength=et.gap,e.shape.isBodyTriangle=e.shape.body==="triangle",e.stroke.color=hl(i.stroke.color.get(n),W),e.stroke.widthScaled=Vt*X,e.stroke.widthFixed=Vt*(1-X),e.stroke.minVisibleSize=i.stroke.minVisibleSize.get(n),e.halo.color=i.halo.color.get(n),e.outline.enabled=i.outline.enabled.get(n),e.textHidden=i.textHidden.get(n)===1,Dt&&(e.shape.head||e.shape.tail||e.shape.body==="triangle")){const Mt=e,At=Mt.curvature,Xt=Mt.sourceX,jt=Mt.sourceY,Ge=Mt.targetX,Se=Mt.targetY;let Lt=1,Gt=1;if(At){if(!Mt.isSelfLoop){const ie=Fp(Xt,jt,Ge,Se,At/2);Lt=j_(Mt,r,a,h,Xt,jt,ie.x,ie.y),Gt=j_(Mt,r,u,c,Ge,Se,ie.x,ie.y)}}else Lt=j_(Mt,r,a,h,Xt,jt,Ge,Se),Gt=j_(Mt,r,u,c,Ge,Se,Xt,jt);e.sourceRadiusScaled*=Lt,e.sourceRadiusFixed*=Lt,e.targetRadiusScaled*=Gt,e.targetRadiusFixed*=Gt}}function a1(t,e,i,n,s){e.hidden=s.textHidden,e.content=t.formatText(i.content.get(n)),e.backgroundColor=hl(i.backgroundColor.get(n),s.color)}function j_(t,e,i,n,s,r,a,u){const h=e.angle||0;let c,g=Math.atan2(u-r,a-s)-h,_=1,m=0;g<-Ra?g+=cg:g>Ra&&(g-=cg),g<-Ra/2?(m=ML,c=i.badges.topLeft):g<0?(m=NL,c=i.badges.topRight):g<Ra/2?(m=OL,c=i.badges.bottomRight):(m=RL,c=i.badges.bottomLeft),m+=h;const v=c.text.content&&c.text.content.get(n),b=c.image.url&&c.image.url.get(n);if(o3(v)||b){const x=c.positionScale.get(n),M=c.scale.get(n),N=F2(a,u,s,r,s+Math.cos(m)*x,r+Math.sin(m)*x,M);if(N){const O=N.x-s,R=N.y-r,P=Math.sqrt(O*O+R*R);_=Math.max(_,P)}}if(i.shape.get(n)==="square"){const x=Math.abs(Math.cos(g)),M=Math.abs(Math.sin(g)),N=1/Math.max(x,M);_=Math.max(_,N)}return _}function l1(){return{source:0,target:0,sourceX:0,sourceY:0,targetX:0,targetY:0,sourceRadiusScaled:0,sourceRadiusFixed:0,targetRadiusScaled:0,targetRadiusFixed:0,widthScaled:0,widthFixed:0,curvature:0,isSelfLoop:!1,color:"",opacity:0,minVisibleSize:0,shape:{body:"line",head:null,tail:null,dashLength:0,gapLength:0,isBodyTriangle:!1},stroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,color:""},outline:{enabled:!1,color:"",minVisibleSize:0},textHidden:!1,texts:{primary:u1(),secondary:u1()}}}function u1(){return{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,position:qg,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0}}function c3(t){return t===null?t:void 0}function Or(t){return typeof t=="boolean"||t===0||t===1?t:void 0}function md(t){return typeof t=="number"&&isFinite(t)?t:void 0}function rs(t){return typeof t=="number"&&isFinite(t)&&t>=0?t:void 0}var rC=-100,f3=400,oC=t=>typeof t=="number"&&isFinite(t)&&t>=rC&&t<=f3?t:void 0;function fu(t){return t===null||typeof t=="string"||typeof t=="number"?t:void 0}function gh(t){return t==="fixed"||t==="scaled"?t:void 0}function _h(t){return io(t)?t:void 0}function g3(t){return t===u3||t===qg?t:void 0}function $r(t){return t==="inherit"||io(t)?t:void 0}function _3(t){return t==="source"||t==="target"||io(t)?t:void 0}function wc(t){return t===null?null:typeof t=="string"?t.split(",").map(e=>{const i=e.trim(),n=i.indexOf(" ")!==-1,s=i[0];return n&&s!=='"'&&s!=="'"?`"${i}"`:i}).join(","):void 0}function Lc(t){return t==="none"?"normal":t==="normal"||t==="italic"||t==="bold"||t==="italic bold"||t==="bold italic"?t:void 0}function ip(t){return t==="left"||t==="center"?t:void 0}function m3(t){return t==="equilateral"?"pentagon":t==="triangle"?"triangleUp":t==="triangleRight"?"triangle":t==="circle"||t==="square"||t==="cross"||t==="diamond"||t==="pentagon"||t==="hexagon"||t==="star"||t==="triangleUp"||t==="triangleDown"||t==="triangleLeft"||t==="triangle"?t:void 0}function p3(t){return["line","tapered","arrow","dashed","dotted"].includes(t)?t:void 0}function y3(t){return t==="line"||t==="triangle"?t:void 0}function h1(t){return t===null||t==="arrow"||t==="circle-hole-arrow"||t==="triangle-hole-arrow"||t==="short-arrow"||t==="sharp-arrow"||t==="circle"||t==="square"?t:void 0}function v3(t){return t==="plain"||t==="dashed"||t==="dotted"?t:void 0}function x3(t){return t==="top"||t==="bottom"||t==="left"||t==="right"||t==="center"?t:void 0}function b3(t){if(io(t))return t;if(Array.isArray(t)){if(t.length<1)return;for(let e=0;e<t.length;++e)if(!io(t[e]))return;return t}}function mn(t){return function(e){if(typeof e=="number")return isFinite(e)&&e>=0?e:void 0;if(typeof e!="string"||e.charAt(e.length-1)!=="%")return;const i=parseFloat(e);return isNaN(i)?void 0:t*i/100}}function eb(){return{edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0}}function Cg(t,e=eb()){const i=(t-rC)*Y0+H0;return e.edgeHalo=pk,e.nodeHaloStroke=wL,e.nodeHalo=LL,e.edgeBody=i+CL,e.edgeTextBackground=i+yk,e.edgeText=i+vk,e.nodeBody=i+V0,e.nodeTextBackground=i+xk,e.nodeText=i+bk,e}var E3=(t,e)=>{e.halo.body=e.halo.body||t.halo.body,e.halo.head=e.halo.head||t.halo.head,e.halo.tail=e.halo.tail||t.halo.tail,e.outline.body=e.outline.body||t.outline.body,e.outline.head=e.outline.head||t.outline.head,e.outline.tail=e.outline.tail||t.outline.tail,e.body.body=e.body.body||t.body.body,e.body.head=e.body.head||t.body.head,e.body.tail=e.body.tail||t.body.tail;const i=e.texts,n=t.texts;i.primary.text=i.primary.text||n.primary.text,i.primary.background=i.primary.background||n.primary.background,i.secondary.text=i.secondary.text||n.secondary.text,i.secondary.background=i.secondary.background||n.secondary.background},aC=t=>(e,i)=>{i.halo.body=e.halo.body[t],i.halo.head=e.halo.head[t],i.halo.tail=e.halo.tail[t],i.outline.body=e.outline.body[t],i.outline.head=e.outline.head[t],i.outline.tail=e.outline.tail[t],i.body.body=e.body.body[t],i.body.head=e.body.head[t],i.body.tail=e.body.tail[t],i.texts.primary.text=e.texts.primary.text[t],i.texts.primary.background=e.texts.primary.background[t],i.texts.secondary.text=e.texts.secondary.text[t],i.texts.secondary.background=e.texts.secondary.background[t]},S3=aC("start"),A3=aC("end"),T3=class{constructor({engine:t,imageManager:e,fontManager:i,formatText:n,view:s,attributes:r,attributesPrev:a,nodeAttributes:u,nodeAttributesPrev:h}){this._fullComponents=Ff(),this._startComponents=Ff(),this._endComponents=Ff(),this._startFlags=Ff(),this._endFlags=Ff(),this._startInput=l1(),this._endInput=l1(),this._depthInfo=eb(),this._nullElt={id:-1,valid:!0},this._engine=t,this._view=s,this._helper={imageManager:e,fontManager:i,formatText:n},this._attributes=r,this._attributesPrev=a,this._nodeAttributes=u,this._nodeAttributesPrev=h,this._layers=d1(()=>t.createGroup()),this._blockIds=d1(()=>0)}drawEdge(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();const e=this._engine,i=this._helper,n=-t,s=this._attributes,{bentEnable:r,bentVertical:a}=e.getBentEdges(),u=Cg(s.layer.get(t)-(s.detectable.get(t)?0:1),this._depthInfo),h=s.source.get(t),c=s.target.get(t),g=s.curvature.get(t),_=this._attributesPrev.curvature.get(t),m=s.animationDuration.get(t),v=s.animationStart.get(t),b=s.animationEasing.get(t),x=m>0,M=g!==0||x&&_!==0||this._engine.getBentEdges().bentEnable;this._prepareBlocks(x,u,n,M);const N=this._extremitiesAttributes={source:this._nodeAttributes,target:this._nodeAttributes};if(o1(i,this._endInput,s,t,N,this._view),s1(this._endFlags,this._endInput),x){const O=this._nodeAttributes.animationDuration.get(h)>0,R=this._nodeAttributes.animationDuration.get(c)>0;N.source=O?this._nodeAttributesPrev:this._nodeAttributes,N.target=R?this._nodeAttributesPrev:this._nodeAttributes,o1(i,this._startInput,this._attributesPrev,t,N,this._view),s1(this._startFlags,this._startInput),E3(this._endFlags,this._startFlags)}this._initComponents(this._fullComponents,this._endFlags,this._layers),A3(this._fullComponents,this._endComponents),this._endComponents.body.body.bentEnable=r,this._endComponents.body.body.bentVertical=a,this._endComponents.body.head&&(this._endComponents.body.head.bentEnable=r,this._endComponents.body.head.bentVertical=a),this._endComponents.body.tail&&(this._endComponents.body.tail.bentEnable=r,this._endComponents.body.tail.bentVertical=a),i1(e,i,t,this._attributes,this._endComponents,this._endInput),this._endComponents.texts.primary.text&&(this._endComponents.texts.primary.background&&(this._endComponents.texts.primary.background.bentEnable=r,this._endComponents.texts.primary.background.bentVertical=a),this._endComponents.texts.primary.text.bentEnable=r,this._endComponents.texts.primary.text.bentVertical=a),this._endComponents.texts.secondary.text&&(this._endComponents.texts.secondary.background&&(this._endComponents.texts.secondary.background.bentEnable=r,this._endComponents.texts.secondary.background.bentVertical=a),this._endComponents.texts.secondary.text.bentEnable=r,this._endComponents.texts.secondary.text.bentVertical=a),x&&(S3(this._fullComponents,this._startComponents),i1(e,i,t,this._attributesPrev,this._startComponents,this._startInput),this._setBlocksAnimation(m,v,b)),this._setupHaloMasking(h,c),this._storeBlocks()}_setupHaloMasking(t,e){const i=this._nodeAttributes.halo,n=this._layers,s=i.color.get(t)&&i.hideNonAdjacentEdges.get(t),r=i.color.get(e)&&i.hideNonAdjacentEdges.get(e),a=!s&&!r?AL:Tc;n.body.stencilUsage=n.text.stencilUsage=n.textBg.stencilUsage=a}_computeBlockIds(t){const e=t*Op,i=this._blockIds;i.body=e+ck,i.halo=e+_k,i.text=e+fk,i.textBg=e+gk}_prepareBlocks(t,e,i,n){const s=this._layers;s.body.reset(n?ep:ol,t,e.edgeBody,i),s.halo.reset(n?ep:ol,t,e.edgeHalo,i),s.text.reset(fd,t,e.edgeText,i),s.textBg.reset(ol,t,e.edgeTextBackground,i)}_storeBlocks(){const t=this._engine,e=this._layers,i=this._blockIds;t.storeGroup(i.body,e.body),t.storeGroup(i.halo,e.halo),t.storeGroup(i.text,e.text),t.storeGroup(i.textBg,e.textBg)}_freeBlocks(){const t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.halo),t.freeBlock(e.text),t.freeBlock(e.textBg)}_setBlocksAnimation(t,e,i){const n=this._layers;n.body.setGlobalAnimation(t,e,i),n.halo.setGlobalAnimation(t,e,i),n.text.setGlobalAnimation(t,e,i),n.textBg.setGlobalAnimation(t,e,i)}_initComponents(t,e,i){this._initEdgeComponents(t.halo,e.halo,i.halo),this._initEdgeComponents(t.outline,e.outline,i.body),this._initEdgeComponents(t.body,e.body,i.body),this._initTextComponents(t.texts.primary,e.texts.primary,i),this._initTextComponents(t.texts.secondary,e.texts.secondary,i)}_initEdgeComponents(t,e,i){t.head=this._nextElement(e.head,i),t.tail=this._nextElement(e.tail,i),t.body=this._nextElement(e.body,i)}_initTextComponents(t,e,i){t.background=this._nextElement(e.background,i.textBg),t.text=this._nextElement(e.text,i.text)}_nextElement(t,e){return t?e.next():this._nullElt}};function d1(t){return{body:t(),halo:t(),text:t(),textBg:t()}}function Ff(){return{halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}}}function w3(t,e,i){lC(t,e,i),e.imageContent!==null?(t.pattern.type=ph,t.pattern.attributes.image=e.imageContent,t.pattern.attributes.scaled=!0,t.pattern.attributes.duplicated=!1,t.patternScale=e.imageScale,t.patternMinVisibleSize=0,t.patternColor=null):(t.fillColor=null,t.strokeColor=null)}function L3(t,e,i){lC(t,e,i),e.textContent&&(t.pattern.type=_d,t.pattern.attributes.text=e.textContent,t.pattern.attributes.font=e.textFont,t.pattern.attributes.style=e.textStyle,t.pattern.attributes.paddingLeft=e.scale*e.textPaddingLeft*2,t.pattern.attributes.paddingTop=e.scale*e.textPaddingTop*2,t.pattern.attributes.size=Xg,t.patternMinVisibleSize=0,t.patternColor=e.textColor,t.patternScale=e.textScale,t.isBadge=!0),!e.imageUrl&&e.textContent||(t.fillColor=null,t.strokeColor=null)}function lC(t,e,i){const n=i.diameterScaled*e.scale,s=i.diameterFixed*e.scale,r=i.diameterScaled*e.positionScale/2,a=i.diameterFixed*e.positionScale/2;t.pieceId=Pa,t.shape="circle",t.x1=i.x,t.y1=i.y,t.x2=i.x,t.y2=i.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=s,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=s,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.strokeWidthScaled,t.strokeWidthFixed=e.strokeWidthFixed,t.offsetScaled=r,t.offsetFixed=a,t.pattern.type=no,t.opacity=i.opacity,t.fillColor=e.color,t.strokeColor=e.strokeColor,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.angle,t.patternScale=0,t.symbolicSize=i.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function C3(t,e,i){Bp(t,e),t.fillColor=Array.isArray(e.color)?null:e.color,t.strokeColor=e.innerStroke.color,t.strokeMinVisibleSize=e.innerStroke.minVisibleSize,t.strokeWidthScaled=e.innerStroke.widthScaled,t.strokeWidthFixed=e.innerStroke.widthFixed,i&&(t.pattern.type=no)}function Bp(t,e){t.pieceId=Pa,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=e.diameterScaled,t.rectWidthOrSourceRadiusFixed=e.diameterFixed,t.rectHeightOrTargetRadiusScaled=e.diameterScaled,t.rectHeightOrTargetRadiusFixed=e.diameterFixed,t.shape=e.shape,t.opacity=e.opacity,t.symbolicSize=e.diameterScaled,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=null,t.strokeColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function M3(t,e){const i=e.diameterScaled+2*e.halo.widthScaled,n=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=Pa,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=i,t.rectWidthOrSourceRadiusFixed=n,t.rectHeightOrTargetRadiusScaled=i,t.rectHeightOrTargetRadiusFixed=n,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=no,t.opacity=e.opacity,t.fillColor=e.halo.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function N3(t,e){const i=e.diameterScaled+2*e.halo.widthScaled,n=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=Pa,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=i,t.rectWidthOrSourceRadiusFixed=n,t.rectHeightOrTargetRadiusScaled=i,t.rectHeightOrTargetRadiusFixed=n,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.halo.strokeWidthScaled,t.strokeWidthFixed=e.halo.strokeWidthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=no,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.halo.strokeColor,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function R3(t,e){Bp(t,e),t.pattern.type=gd,t.pattern.attributes.text=e.icon.content,t.pattern.attributes.font=e.icon.font,t.pattern.attributes.style=e.icon.style,t.pattern.attributes.size=Xg,t.patternMinVisibleSize=e.icon.minVisibleSize,t.patternColor=e.icon.color,t.patternScale=e.icon.scale}function O3(t,e){const i=e.image.fit&&!e.image.tile;Bp(t,e),t.pattern.type=ph,t.pattern.attributes.image=e.image.content,t.pattern.attributes.scaled=i,t.pattern.attributes.duplicated=e.image.tile,t.patternScale=i?e.image.scale:0,t.patternMinVisibleSize=e.image.minVisibleSize,t.patternColor=null}function I3(t,e){const i=e.diameterScaled+2*e.innerStroke.widthScaled,n=e.diameterFixed+2*e.innerStroke.widthFixed;t.pieceId=Pa,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=i,t.rectWidthOrSourceRadiusFixed=n,t.rectHeightOrTargetRadiusScaled=i,t.rectHeightOrTargetRadiusFixed=n,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.outerStroke.widthScaled,t.strokeWidthFixed=e.outerStroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=no,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.outerStroke.color,t.patternColor=null,t.globalMinVisibleSize=e.outerStroke.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function P3(t,e){const i=e.diameterScaled*CA,n=e.diameterFixed*CA;let s=e.diameterScaled*MA,r=e.diameterFixed*MA+Ek;e.outerStroke.color&&(s+=e.outerStroke.widthScaled/2,r+=e.outerStroke.widthFixed/2),t.pieceId=Pa,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=i,t.rectWidthOrSourceRadiusFixed=n,t.rectHeightOrTargetRadiusScaled=i,t.rectHeightOrTargetRadiusFixed=n,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=s,t.offsetFixed=r,t.pattern.type=no,t.opacity=e.opacity,t.fillColor=e.outline.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.outline.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=1.5707963267948966,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function z3(t,e){Bp(t,e),Array.isArray(e.color)&&(t.pattern.type=Wg,t.pattern.attributes.colors=e.color.join(";"),t.patternScale=1,t.patternMinVisibleSize=0,t.patternColor=null)}function D3(t,e,i){uC(t,e,i),t.pattern.type=bh,t.pattern.attributes.text=e.content,t.pattern.attributes.font=e.font,t.pattern.attributes.style=e.style,t.pattern.attributes.align=e.align,t.patternMinVisibleSize=0,t.patternColor=e.color,t.thicknessOrFontSizeScaled=e.sizeScaled,t.thicknessOrFontSizeFixed=e.sizeFixed,t.isText=!0}function k3(t,e,i){uC(t,e,i),t.fillColor=e.backgroundColor,t.pieceId=ld,t.shape="square"}function F3(t,e,i){const n=Math.ceil(e.margin/2),s=i.diameterScaled/2,r=i.diameterFixed/2+n,a=Ck[e.position],u=Math.cos(a),h=Math.sin(a),c=e.margin<12?1:e.margin<30?1-(e.margin-12)/18*.7:.25;t.pieceId=Pa,t.shape="triangle",t.x1=i.x-u,t.y1=i.y-h,t.x2=i.x+u,t.y2=i.y+h,t.rectWidthOrSourceRadiusScaled=0,t.rectWidthOrSourceRadiusFixed=e.margin,t.rectHeightOrTargetRadiusScaled=0,t.rectHeightOrTargetRadiusFixed=e.margin*c,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=s,t.offsetFixed=r,t.pattern.type=no,t.opacity=i.opacity,t.fillColor=e.backgroundColor,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.positionAngle,t.patternScale=0,t.symbolicSize=i.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1}function uC(t,e,i){let n=0,s=0;if(e.isPositionCenter||(n+=i.diameterScaled/2,s+=i.diameterFixed/2+e.margin+e.padding),e.isPositionVertical){if(n+=e.heightScaled/2,s+=e.heightFixed/2,e===i.texts.secondary&&i.texts.primary.position==="bottom"){const a=i.texts.primary;n+=a.heightScaled,s+=a.heightFixed+a.margin+2*a.padding}}else e.isPositionHorizontal&&(n+=e.widthScaled/2,s+=e.widthFixed/2);const r=Xg;t.pieceId=Pa,t.shape="square",t.x1=i.x,t.y1=i.y,t.x2=i.x,t.y2=i.y,t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=n,t.offsetFixed=s,t.pattern.type=no,t.pattern.attributes.size=r,t.opacity=i.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.positionAngle,t.patternScale=1,t.symbolicSize=i.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function c1(t,e,i,n,s,r){const a=s.badges,u=n.badges,h=r.badges;B3(t,e,i,n,s,r),f1(t,e,i,n.text,s.texts.primary,r.texts.primary,r),f1(t,e,i,n.text.secondary,s.texts.secondary,r.texts.secondary,r),J_(t,e,i,u.topLeft,a.topLeft,h.topLeft,r),J_(t,e,i,u.topRight,a.topRight,h.topRight,r),J_(t,e,i,u.bottomLeft,a.bottomLeft,h.bottomLeft,r),J_(t,e,i,u.bottomRight,a.bottomRight,h.bottomRight,r)}function B3(t,e,i,n,s,r){if(s.halo){const a=n.halo.width.get(i),u=+(n.halo.scalingMethod.get(i)==="scaled");r.halo.widthScaled=a*u,r.halo.widthFixed=a*(1-u),M3(s.halo,r),s.haloStroke&&(r.halo.strokeWidthScaled=0,r.halo.strokeWidthFixed=n.halo.strokeWidth.get(i),N3(s.haloStroke,r))}if(s.outline&&(r.outline.color=n.outline.color.get(i),r.outline.minVisibleSize=n.outline.minVisibleSize.get(i),P3(s.outline,r)),s.outerStroke&&(r.outerStroke.minVisibleSize=n.outerStroke.minVisibleSize.get(i),I3(s.outerStroke,r)),s.pieChart&&z3(s.pieChart,r),s.image&&(r.image.content=e.imageManager.getImage(r.image.url),r.image.fit=n.image.fit.get(i),r.image.tile=n.image.tile.get(i),r.image.scale=n.image.scale.get(i),r.image.minVisibleSize=n.image.minVisibleSize.get(i),O3(s.image,r)),s.icon&&(r.icon.font=e.fontManager.getFont(n.icon.font.get(i)),r.icon.style=n.icon.style.get(i),r.icon.color=n.icon.color.get(i),r.icon.scale=n.icon.scale.get(i),r.icon.minVisibleSize=n.icon.minVisibleSize.get(i),R3(s.icon,r)),s.body){const a=!s.pieChart&&!s.image&&!s.icon;C3(s.body,r,a)}}function J_(t,e,i,n,s,r,a){if(s.image||s.text){const u=n.stroke.width.get(i),h=+(n.stroke.scalingMethod.get(i)==="scaled");r.color=hl(n.color.get(i),a.color,r.angle),r.strokeColor=n.stroke.color.get(i),r.strokeWidthScaled=u*h,r.strokeWidthFixed=u*(1-h),r.minVisibleSize=n.minVisibleSize.get(i),r.positionScale=n.positionScale.get(i),r.scale=n.scale.get(i)}if(s.image&&(r.imageContent=e.imageManager.getImage(r.imageUrl),r.imageScale=n.image.scale.get(i),w3(s.image,r,a)),s.text){if(r.textFont=e.fontManager.getFont(n.text.font.get(i)),r.textStyle=n.text.style.get(i),r.textColor=hl(n.text.color.get(i),a.color),r.textScale=n.text.scale.get(i),r.textPaddingTop=n.text.paddingTop.get(i),r.textPaddingLeft=n.text.paddingLeft.get(i),t.measureText(r.textContent,r.textFont,r.textStyle,r.textScale).width>1){let u=0,h=0;for(;h<r.textContent.length&&u<1;)u+=t.measureText(r.textContent[h],r.textFont,r.textStyle,r.textScale).width,h+=1;h!==r.textContent.length&&(r.textContent=r.textContent.substring(0,h-1)+"")}L3(s.text,r,a)}}function f1(t,e,i,n,s,r,a){if(s.text&&r.content){const u=n,h=u.scaling.get(i);if(r.font=e.fontManager.getFont(u.font.get(i)),r.color=hl(u.color.get(i),a.color),r.style=u.style.get(i),r.align=u.align.get(i),r.minVisibleSize=u.minVisibleSize.get(i),r.margin=u.margin.get(i),r.padding=u.padding.get(i),r.maxLineLength=u.maxLineLength.get(i),r.content=Z0(r.content,r.maxLineLength),h){const g=u.scale.get(i);r.sizeScaled=a.diameterScaled*g,r.sizeFixed=a.diameterFixed*g}else r.sizeFixed=u.size.get(i),r.sizeScaled=0;const c=t.measureText(r.content,r.font,r.style);r.widthScaled=c.width*r.sizeScaled,r.widthFixed=c.width*r.sizeFixed,r.heightScaled=c.height*r.sizeScaled,r.heightFixed=c.height*r.sizeFixed,r.positionAngle=Lk[r.position],r.isPositionCenter=r.position==="center",r.isPositionVertical=r.position==="top"||r.position==="bottom",r.isPositionHorizontal=r.position==="left"||r.position==="right",D3(s.text,r,a),s.background&&(k3(s.background,r,a),s.tip&&F3(s.tip,r,a))}}function g1(t,e){U3(t,e),_1(t.texts.primary,e.texts.primary),_1(t.texts.secondary,e.texts.secondary),$_(t.badges.topLeft,e.badges.topLeft),$_(t.badges.topRight,e.badges.topRight),$_(t.badges.bottomLeft,e.badges.bottomLeft),$_(t.badges.bottomRight,e.badges.bottomRight)}function U3(t,e){t.body=!0,t.icon=!!e.icon.content,t.image=!!e.image.url,t.pieChart=Array.isArray(e.color),t.outerStroke=!!e.outerStroke.color,t.outline=!!e.outline.enabled,t.halo=!!e.halo.color,t.haloStroke=t.halo&&!!e.halo.strokeColor}function _1(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor,t.tip=t.background&&e.tip&&e.position!=="center"}function $_(t,e){t.text=!!e.textContent,t.image=!!e.imageUrl}function m1(t,e,i,n){G3(t,e,i,n),p1(t,e.texts.primary,i.text,n,e),p1(t,e.texts.secondary,i.text.secondary,n,e),tm(t,e.badges.topLeft,i.badges.topLeft,n),tm(t,e.badges.topRight,i.badges.topRight,n),tm(t,e.badges.bottomLeft,i.badges.bottomLeft,n),tm(t,e.badges.bottomRight,i.badges.bottomRight,n)}function G3(t,e,i,n){const s=+(i.scalingMethod.get(n)==="scaled"),r=2*i.radius.get(n),a=i.innerStroke.width.get(n),u=+(i.innerStroke.scalingMethod.get(n)==="scaled"),h=i.outerStroke.width.get(n),c=+(i.outerStroke.scalingMethod.get(n)==="scaled");e.x=i.x.get(n),e.y=i.y.get(n),e.shape=i.shape.get(n),e.color=i.color.get(n),e.opacity=i.opacity.get(n),e.diameterScaled=r*s,e.diameterFixed=r*(1-s),e.innerStroke.color=hl(i.innerStroke.color.get(n),e.color),e.innerStroke.widthScaled=a*u,e.innerStroke.widthFixed=a*(1-u),e.innerStroke.minVisibleSize=i.innerStroke.minVisibleSize.get(n),e.outerStroke.color=hl(i.outerStroke.color.get(n),e.color),e.outerStroke.widthScaled=h*c,e.outerStroke.widthFixed=h*(1-c),e.halo.color=i.halo.color.get(n),e.halo.strokeColor=i.halo.strokeColor.get(n),e.icon.content=t.formatText(i.icon.content.get(n)),e.image.url=i.image.url.get(n),e.outline.enabled=i.outline.enabled.get(n),e.textHidden=i.textHidden.get(n)===1}function p1(t,e,i,n,s){if(e.hidden=s.textHidden,e.content=t.formatText(i.content.get(n)),e.backgroundColor=hl(i.backgroundColor.get(n),s.color),e===s.texts.primary){const r=i;e.tip=r.tip.get(n),e.position=r.position.get(n)}else e.position="bottom"}function tm(t,e,i,n){const s=i.text.content.get(n);e.textContent=t.formatText(s),e.imageUrl=i.image.url.get(n)}var em=t=>({angle:t,color:"",scale:0,positionScale:0,minVisibleSize:0,strokeColor:"",strokeWidthScaled:0,strokeWidthFixed:0,textContent:"",textFont:"",textColor:"",textScale:0,textStyle:"none",imageUrl:"",imageContent:null,imageScale:0,textPaddingLeft:0,textPaddingTop:0}),y1=()=>({hidden:!1,content:"",position:"",backgroundColor:"",tip:!1,font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",align:"left",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,isPositionCenter:!1,isPositionVertical:!1,isPositionHorizontal:!1}),v1=()=>({x:0,y:0,shape:"",color:"",opacity:0,diameterScaled:0,diameterFixed:0,innerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},outerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},icon:{content:"",font:"",color:"",scale:0,size:0,style:"none",minVisibleSize:0},image:{url:"",content:null,scale:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,color:"",strokeColor:""},outline:{enabled:!1,color:"",minVisibleSize:0},badges:{topLeft:em(ML),topRight:em(NL),bottomLeft:em(RL),bottomRight:em(OL)},textHidden:!1,texts:{primary:y1(),secondary:y1()}}),H3=(t,e)=>{e.haloStroke=e.haloStroke||t.haloStroke,e.halo=e.halo||t.halo,e.outline=e.outline||t.outline,e.outerStroke=e.outerStroke||t.outerStroke,e.body=e.body||t.body,e.pieChart=e.pieChart||t.pieChart,e.image=e.image||t.image,e.icon=e.icon||t.icon;const i=t.badges,n=e.badges;n.topLeft.text=n.topLeft.text||i.topLeft.text,n.topLeft.image=n.topLeft.image||i.topLeft.image,n.topRight.text=n.topRight.text||i.topRight.text,n.topRight.image=n.topRight.image||i.topRight.image,n.bottomLeft.text=n.bottomLeft.text||i.bottomLeft.text,n.bottomLeft.image=n.bottomLeft.image||i.bottomLeft.image,n.bottomRight.text=n.bottomRight.text||i.bottomRight.text,n.bottomRight.image=n.bottomRight.image||i.bottomRight.image;const s=t.texts,r=e.texts;r.primary.text=r.primary.text||s.primary.text,r.primary.background=r.primary.background||s.primary.background,r.primary.tip=r.primary.tip||s.primary.tip,r.secondary.text=r.secondary.text||s.secondary.text,r.secondary.background=r.secondary.background||s.secondary.background,r.secondary.tip=r.secondary.tip||s.secondary.tip},hC=t=>(e,i)=>{i.haloStroke=e.haloStroke[t],i.halo=e.halo[t],i.outline=e.outline[t],i.outerStroke=e.outerStroke[t],i.body=e.body[t],i.pieChart=e.pieChart[t],i.image=e.image[t],i.icon=e.icon[t];const n=e.badges,s=i.badges;s.topLeft.text=n.topLeft.text[t],s.topLeft.image=n.topLeft.image[t],s.topRight.text=n.topRight.text[t],s.topRight.image=n.topRight.image[t],s.bottomLeft.text=n.bottomLeft.text[t],s.bottomLeft.image=n.bottomLeft.image[t],s.bottomRight.text=n.bottomRight.text[t],s.bottomRight.image=n.bottomRight.image[t];const r=e.texts,a=i.texts;a.primary.text=r.primary.text[t],a.primary.background=r.primary.background[t],a.primary.tip=r.primary.tip[t],a.secondary.text=r.secondary.text[t],a.secondary.background=r.secondary.background[t],a.secondary.tip=r.secondary.tip[t]},V3=hC("start"),Y3=hC("end"),X3=class{constructor({engine:t,imageManager:e,fontManager:i,formatText:n,attributes:s,attributesPrev:r}){this._fullComponents=Bf(),this._startComponents=Bf(),this._endComponents=Bf(),this._startFlags=Bf(),this._endFlags=Bf(),this._startInput=v1(),this._endInput=v1(),this._depthInfo=eb(),this._nodePatternAssigned=!1,this._nullElt={id:-1,valid:!0},this._engine=t,this._attributes=s,this._attributesPrev=r,this._helper={imageManager:e,fontManager:i,formatText:n},this._layers=x1(()=>t.createGroup()),this._blockIds=x1(()=>0)}drawNode(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();const e=this._engine,i=this._helper,n=t,s=this._attributes,r=Cg(s.layer.get(t)-(s.detectable.get(t)?0:1),this._depthInfo),a=s.animationDuration.get(t),u=a>0;if(this._prepareBlocks(u,r,n),m1(i,this._endInput,s,t),g1(this._endFlags,this._endInput),u&&(m1(i,this._startInput,this._attributesPrev,t),g1(this._startFlags,this._startInput),H3(this._endFlags,this._startFlags)),this._initComponents(this._fullComponents,this._endFlags,this._layers),Y3(this._fullComponents,this._endComponents),c1(e,i,t,s,this._endComponents,this._endInput),u&&(V3(this._fullComponents,this._startComponents),c1(e,i,t,this._attributesPrev,this._startComponents,this._startInput)),u){const h=this._attributes.animationStart.get(t),c=this._attributes.animationEasing.get(t);this._setBlocksAnimation(a,h,c)}this._endFlags.halo&&this._attributes.halo.hideNonAdjacentEdges.get(t)&&(this._layers.halo.stencilUsage=this._layers.haloStroke.stencilUsage=SL),this._storeBlocks()}_computeBlockIds(t){const e=t*Op,i=this._blockIds;i.body=e+ak,i.text=e+lk,i.textBg=e+uk,i.halo=e+hk,i.haloStroke=e+dk}_prepareBlocks(t,e,i){const n=this._layers;n.body.reset(ol,t,e.nodeBody,i),n.text.reset(fd,t,e.nodeText,i),n.textBg.reset(ol,t,e.nodeTextBackground,i),n.halo.reset(ol,t,e.nodeHalo,i),n.haloStroke.reset(ol,t,e.nodeHaloStroke,i)}_storeBlocks(){const t=this._engine,e=this._layers,i=this._blockIds;t.storeGroup(i.body,e.body),t.storeGroup(i.text,e.text),t.storeGroup(i.textBg,e.textBg),t.storeGroup(i.halo,e.halo),t.storeGroup(i.haloStroke,e.haloStroke)}_freeBlocks(){const t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.text),t.freeBlock(e.textBg),t.freeBlock(e.halo),t.freeBlock(e.haloStroke)}_setBlocksAnimation(t,e,i){const n=this._layers;n.body.setGlobalAnimation(t,e,i),n.text.setGlobalAnimation(t,e,i),n.textBg.setGlobalAnimation(t,e,i),n.halo.setGlobalAnimation(t,e,i),n.haloStroke.setGlobalAnimation(t,e,i)}_initComponents(t,e,i){this._nodePatternAssigned=!1,this._initBaseComponents(t,e,i),this._initBadgeComponents(t.badges.topLeft,e.badges.topLeft,i),this._initBadgeComponents(t.badges.topRight,e.badges.topRight,i),this._initBadgeComponents(t.badges.bottomLeft,e.badges.bottomLeft,i),this._initBadgeComponents(t.badges.bottomRight,e.badges.bottomRight,i),this._initTextComponents(t.texts.primary,e.texts.primary,i),this._initTextComponents(t.texts.secondary,e.texts.secondary,i)}_initBaseComponents(t,e,i){t.haloStroke=this._nextElement(e.haloStroke,i.haloStroke),t.halo=this._nextElement(e.halo,i.halo),t.outline=this._nextElement(e.outline,i.body),t.outerStroke=this._nextElement(e.outerStroke,i.body),t.body=this._nextElement(e.body,i.body),t.pieChart=this._getNodePatternElement(e.pieChart,i),t.image=this._getNodePatternElement(e.image,i),t.icon=this._getNodePatternElement(e.icon,i)}_initBadgeComponents(t,e,i){t.image=this._nextElement(e.image,i.body),t.text=this._nextElement(e.text,i.body)}_initTextComponents(t,e,i){t.background=this._nextElement(e.background,i.textBg),t.tip=this._nextElement(e.tip,i.textBg),t.text=this._nextElement(e.text,i.text)}_nextElement(t,e){return t?e.next():this._nullElt}_getNodePatternElement(t,e){return t?this._nodePatternAssigned?e.body.next():(this._nodePatternAssigned=!0,e.body.getCurrentElement()):this._nullElt}};function x1(t){return{body:t(),text:t(),textBg:t(),halo:t(),haloStroke:t()}}function Bf(){return{haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}}}function Z3({graph:t,elements:e,engine:i,imageManager:n,fontManager:s,view:r,attributes:a,boundaries:u,formatText:h}){const{nodeAttributes:c,nodeAttributesPrev:g,edgeAttributes:_,edgeAttributesPrev:m}=W3(a),{nodes:v,edges:b}=e,{maxSize:x,maxMinVisibleSize:M}=u;if(!v.size&&!b.size)return;const N=(Math.max(t.getNodeMaxIndex(),t.getEdgeMaxIndex())+1)*Op,O=x<1024?8*x:2*x,R=i.setGlobalBoundaries({maxBlockId:fh(N),maxScaledSize:fh(O),maxMinVisibleSize:fh(M),maxSymbolicSize:fh(x),maxDashLength:3,maxGapLength:1,maxPatternScale:2,maxCoord:-1/0}),P=(R?t.getNodes("_all"):v)._indexes,F=(R?t.getEdges("_all"):b)._indexes;if(P.length){const U=new X3({engine:i,imageManager:n,fontManager:s,formatText:h,attributes:c,attributesPrev:g});for(let V=0;V<P.length;++V)U.drawNode(P[V])}if(F.length){const U=new T3({engine:i,imageManager:n,fontManager:s,formatText:h,view:r,attributes:_,attributesPrev:m,nodeAttributes:c,nodeAttributesPrev:g});for(let V=0;V<F.length;++V)U.drawEdge(F[V])}}function W3(t){const e=_c(t.nodes.current,{text:{secondary:{scaling:t.nodes.current.text.scaling,maxLineLength:t.nodes.current.text.maxLineLength}}});return{nodeAttributes:e,nodeAttributesPrev:_c(t.nodes.previous,{textHidden:e.textHidden,text:{secondary:{scaling:t.nodes.previous.text.scaling,maxLineLength:t.nodes.previous.text.maxLineLength}}}),edgeAttributes:_c(t.edges.current,{text:{secondary:{scaling:t.edges.current.text.scaling,maxLineLength:t.edges.current.text.maxLineLength,adjustAngle:t.edges.current.text.adjustAngle}}}),edgeAttributesPrev:_c(t.edges.previous,{source:t.edges.current.source,target:t.edges.current.target,textHidden:t.edges.current.textHidden,text:{secondary:{scaling:t.edges.previous.text.scaling,maxLineLength:t.edges.previous.text.maxLineLength,adjustAngle:t.edges.previous.text.adjustAngle}}})}}function Mg(t,e,i){const n=i.length;let s=n-1,r=!1;for(let a=0;a<n;++a)(i[a].y<e&&i[s].y>=e||i[s].y<e&&i[a].y>=e)&&(i[a].x<=t||i[s].x<=t)&&(r=r!==i[a].x+(e-i[a].y)/(i[s].y-i[a].y)*(i[s].x-i[a].x)<t),s=a;return r}function im(t){const e=t.x*t.x+t.y*t.y;return{x:t.x/e,y:t.y/e}}function b1(t,e){let i=1/0,n=-1/0;for(let s=0,r=t.length;s<r;s++){const a=t[s],u=a.x*e.x+a.y*e.y;u<i&&(i=u),u>n&&(n=u)}return{x:i,y:n}}function q3(t,e){let i=t[1],n=t[0],s=im({x:i.x-n.x,y:i.y-n.y}),r=s.x;s.x=-s.y,s.y=r;const a=s;i=t[2],n=t[1],s=im({x:i.x-n.x,y:i.y-n.y}),r=s.x,s.x=-s.y,s.y=r;const u=s;i=e[1],n=e[0],s=im({x:i.x-n.x,y:i.y-n.y}),r=s.x,s.x=-s.y,s.y=r;const h=s;return i=e[2],n=e[1],s=im({x:i.x-n.x,y:i.y-n.y}),r=s.x,s.x=-s.y,s.y=r,[a,u,h,s]}function dC(t,e){const i=q3(t,e);for(let n=0,s=i.length;n<s;n++){const r=i[n],a=b1(t,r),u=b1(e,r);if((a.x<=u.y&&a.y>=u.x?Math.min(a.y,u.y)-Math.max(a.x,u.x):0)===0)return!1}return!0}function Q3(t){let e=0,i=0;const n=t.length;if(n===0)throw new Error("Compute centroid: at least one point is required");for(let s=0;s<n;++s){const r=t[s];e+=r.x,i+=r.y}return e/=n,i/=n,{x:e,y:i}}var cC=Qg(4),fC=Qg(5),gC=Qg(10,.4),np=1/3,K3=[{x:-1,y:-.3333333333333333},{x:0,y:-.3333333333333333},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:0,y:np},{x:-1,y:np}],_C=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],j3=[{x:-1,y:-.3333333333333333},{x:-.55,y:-.3333333333333333},{x:-1,y:-1},{x:1,y:0},{x:-1,y:1},{x:-.55,y:np},{x:-1,y:np}],E1=[{x:-.6,y:-.3},{x:.1,y:0},{x:-.6,y:.3}],mC=[{x:-1,y:.31},{x:-1,y:-.31},{x:-.31,y:-.31},{x:-.31,y:-1},{x:.31,y:-1},{x:.31,y:-.31},{x:1,y:-.31},{x:1,y:.31},{x:.31,y:.31},{x:.31,y:1},{x:-.31,y:1},{x:-.31,y:.31}],uh={circle:{getDistanceFromStrokeVertically:(t,e)=>1,getDistanceFromStrokeHorizontally:(t,e)=>1-Math.sqrt(t*t+e*e),points:[{x:0,y:0,r:1}],isSimple:!0},square:{getDistanceFromStrokeVertically:(t,e)=>.996-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>.996-Math.abs(t),points:_C,isSimple:!0},line:{getDistanceFromStrokeVertically:(t,e)=>1-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1,points:[{x:-1,y:0},{x:1,y:0}],isSimple:!0},triangle:{getDistanceFromStrokeVertically:(t,e)=>(1-t)/2-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},arrow:{getDistanceFromStrokeVertically:(t,e)=>(1-t)/2-Math.abs(e),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},"circle-hole-arrow":{getDistanceFromStrokeVertically:(t,e)=>Math.min(Math.sqrt((t+.4)*(t+.4)+e*e)-.27,(1-t)/2-Math.abs(e)),getDistanceFromStrokeHorizontally:(t,e)=>1-Math.abs(t),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:[{x:-.4,y:0,r:.3}],isSimple:!0},"triangle-hole-arrow":{getDistanceFromStrokeVertically:(t,e)=>{const i=Math.min((1-t)/2-Math.abs(e),1-Math.abs(t)),n=-pC(t,e,E1);return Math.min(i,n)},getDistanceFromStrokeHorizontally:(t,e)=>1,points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:E1,isSimple:!0},"short-arrow":xo(K3,!1),"sharp-arrow":xo(j3,!1),cross:{getDistanceFromStrokeVertically:(t,e)=>1,getDistanceFromStrokeHorizontally:(t,e)=>{const i=Math.abs(t),n=Math.abs(e),s=.31-Math.min(i,n),r=1-Math.max(i,n);return Math.min(s,r)},points:mC,isSimple:!1},diamond:xo(cC),pentagon:xo(fC),star:xo(gC),triangleUp:xo([{x:-1,y:1},{x:1,y:1},{x:0,y:-1}],!0),triangleDown:xo([{x:-1,y:-1},{x:1,y:-1},{x:0,y:1}],!0),triangleLeft:xo([{x:1,y:-1},{x:1,y:1},{x:-1,y:0}],!0),hexagon:xo(Qg(6,1,-Math.PI/2+Ip),!1)},J3=["circle","square","triangle","line","triangleUp","triangleDown","triangleLeft"],$3=["cross","diamond","pentagon","star","hexagon"],tB=["arrow","triangle-hole-arrow","circle-hole-arrow","short-arrow","sharp-arrow"];function S1(t,e){for(const r of J3)xv(t,r);const i=e.nodes.current.shape.getValues(),n=e.edges.current.shape.head.getValues(),s=e.edges.current.shape.tail.getValues();for(const r of $3)i.includes(r)&&xv(t,r);for(const r of tB)r&&(n.includes(r)||s.includes(r))&&xv(t,r)}function xv(t,e){t.registerShape(e,uh[e])}function eB(t,e){uh.star=xo(ac(gC,e,oc)),uh.pentagon=xo(ac(fC,e,oc)),uh.hexagon=xo(ac(Qg(6,1,-Math.PI/2+Ip),2*e,oc)),uh.square=xo(ac(_C,4*e,oc)),uh.cross=xo(ac(mC,2*e,oc)),uh.diamond=xo(ac(cC,2*e,oc)),["star","pentagon","hexagon","square","cross","diamond"].forEach(i=>t.updateShape(i,uh[i]))}function pC(t,e,i){let n=1/0;const s={x:t,y:e};for(let r=0;r<i.length;++r){const a=i[r],u=i[(r+1)%i.length];n=Math.min(n,ZL(s,a,u))}return n*(Mg(t,e,i)?1:-1)}function Qg(t,e=1,i=-Math.PI/2+Ip){const n=[],s=2*Math.PI/t;let r=i;for(let a=0;a<t;++a){const u=a%2==1?e:1;n.push({x:Math.cos(r)*u,y:Math.sin(r)*u}),r+=s}return n}function xo(t,e=!1){return{getDistanceFromStrokeVertically:()=>1,getDistanceFromStrokeHorizontally:(i,n)=>pC(i,n,t),points:t,isSimple:e}}function ac(t,e,i=5){if(e===0)return t;const n=[],s=t.length;for(let r=0;r<s;r++){const a=t[(r+s-1)%s],u=t[r%s],h=t[(r+1)%s],c=a.x-u.x,g=a.y-u.y,_=Math.sqrt(c*c+g*g),m=c/_,v=g/_,b=Math.atan2(v,m),x=h.x-u.x,M=h.y-u.y,N=Math.sqrt(x*x+M*M),O=x/N,R=M/N,P=Math.atan2(R,O),F=m*R-v*O,U=m*O-v*-R;let V=Math.asin(F<-1?-1:F>1?1:F),Y=1,K=!1;U<0?V<0?V=Math.PI+V:(V=Math.PI-V,Y=-1,K=!0):V>0&&(Y=-1,K=!0);const tt=V/2;let j=Math.abs(Math.cos(tt)*e/Math.sin(tt)),lt=e;j>Math.min(_/2,N/2)&&(j=Math.min(_/2,N/2),lt=Math.abs(j*Math.sin(tt)/Math.cos(tt)));let pt=u.x+O*j,ft=u.y+R*j;pt+=-R*lt*Y,ft+=O*lt*Y;const ht=b+Math.PI/2*Y;let W=P-Math.PI/2*Y-ht;W=K?W>0?W-2*Math.PI:W:W<0?W+2*Math.PI:W;for(let st=0;st<i;st++){const _t=ht+W*(st/(i-1)),Vt=pt+lt*Math.cos(_t),X=ft+lt*Math.sin(_t);n.push({x:Vt,y:X})}}return n}var iB=class extends Zg{constructor(t,e){super(),this.isDummy=!0,this.width=0,this.height=0,this.namespaceURI="http://www.w3.org/1999/xhtml"}setAttribute(t,e){t==="src"&&(this.src=e),t==="crossOrigin"&&(this.crossOrigin=e)}set src(t){t&&(this._src=t,setTimeout(()=>{this.onload&&this.onload.call(this),this.width=1,this.height=1,this.fire("load")},10))}get src(){return this._src}addEventListener(t,e){this.on(t,e)}};function nB(t,e){return new(typeof Image<"u"?Image:iB)(t,e)}var sB=class{constructor(){this._images={},this._crossOrigin="anonymous",this._whenReady=[],this._onFetch=[],this._nbLoaded=0,this._nbToLoad=0}setImgCrossOrigin(t){this._crossOrigin=t}clear(){this._images={},this._nbLoaded=0,this._nbToLoad=0}getImage(t){let e=this._images[t];return e===void 0&&(this._nbToLoad+=1,e=nB(),e.crossOrigin=this._crossOrigin,e.addEventListener("load",()=>this._onImgLoad(t)),e.addEventListener("error",()=>{this._onImgLoad(t),this._images[t]=null}),CI(e,"src",t),this._images[t]=e),e}_onImgLoad(t){this._nbLoaded+=1,this._onFetch.forEach(e=>e(t)),this._nbLoaded===this._nbToLoad&&(this._whenReady.forEach(e=>e()),this._whenReady=[])}onFetch(t){this._onFetch.push(t)}whenReady(){return this._nbLoaded===this._nbToLoad?Promise.resolve():new Promise(t=>this._whenReady.push(t))}destroy(){this._whenReady=[],this._onFetch=[]}},ib={};function rB(t){let e="";for(let i=0;i<t.length;i++)e+=t[i].cssText+`
`;return e}function yC(){const t=bu(),e=t.styleSheets||[],i=y2(t),n=[],s=[];for(let a=0;a<e.length;a++){const u=e[a];u.href==null?n.push({href:i,content:rB(u.cssRules)}):s.push(u.href)}const r=/@font-face\s*\{[^}]+\}/g;return Promise.all(s.map(a=>Uc(a).then(u=>({href:a,content:u})).catch(km))).then(a=>a.concat(n)).then(a=>{const u=[];for(let h=0;h<a.length;h++){const c=a[h];if(c!==null){const{href:g,content:_}=c,m=_.match(r);if(m){const v=aB(m,g);u.push.apply(u,v)}}}return u})}function vC(t,e){return Promise.all(t.map(({formats:i,originalRule:n})=>Promise.all(i.map(({format:s,url:r})=>e?p2(r).then(a=>({format:s,src:a})).catch(km):{format:s,src:r})).then(s=>{const r=[];for(const a of s)a!==null&&r.push(`url('${a.src}') format('${a.format}')`);if(r.length!==0){const a=`src: ${r.join(",")}`;return n.replace(/@font-face\s*{([^}]*);?}/,`@font-face{$1;${a}}`).replace(/\s+/," ").replace(/;+/,";")}return n})))}kg(ib,{BUTTON_MAPPING:()=>v0,BoundingBox:()=>So,DummyCanvas:()=>IL,DummyCanvasRenderingContext2D:()=>PL,DummyDomElement:()=>u2,DummyFileReader:()=>o2,DummyTextNode:()=>wC,DummyXHR:()=>r2,ElementSet:()=>Kg,EventTarget:()=>Zg,FlexArray:()=>Km,IndexList:()=>oL,MOUSE_WHEEL_THROTTLE:()=>t2,Map2:()=>EL,PathMap:()=>bC,PrioritySet:()=>tL,SVG_NS:()=>p0,Table:()=>dx,XLINK:()=>c2,XML_NS:()=>Kv,applyCursorStyle:()=>Gm,baseURI:()=>y2,binaryIndexOf:()=>xw,cancelAnimFrame:()=>e2,clamp:()=>Ia,clearCanvas:()=>Ax,componentsToRGBA:()=>vL,computeMax:()=>pc,computeMin:()=>cu,concatenateArrays:()=>cO,createBlob:()=>bg,createCanvas:()=>Pr,createDummyDomElement:()=>Bm,createDummyXmlDocument:()=>CC,createElement:()=>jv,createSvgElement:()=>un,createTextNode:()=>y0,createWebGL2Context:()=>DL,createWorker:()=>AC,createXmlDocument:()=>MC,dataUrlToBlob:()=>h2,debounce:()=>_O,deepCopy:()=>ps,displayPixelsOnScreen:()=>mB,ensureTransferable:()=>yp,escapeDOMAttribute:()=>mc,extendList:()=>yO,fadeElement:()=>v2,fetch:()=>Uc,fetchBinary:()=>m2,fetchBinaryAsBase64:()=>p2,flatten:()=>xg,flattenArray:()=>vw,forEach:()=>Bl,formatAngle:()=>Hm,formatHex:()=>Rm,formatWorkerMessage:()=>SC,getBaseLog:()=>x2,getCurrentTime:()=>eo,getDate:()=>ww,getDocument:()=>bu,getDocumentFontRules:()=>yC,getEmbeddedFontRules:()=>vC,getFlattenedKeys:()=>vd,getGlContext:()=>kL,getImage:()=>f2,getLeafValues:()=>pp,getOptions:()=>ua,getPixelRatio:()=>Do,getProperty:()=>_s,getResizeObserver:()=>a2,getStyle:()=>l2,getTime:()=>Lw,getValues:()=>ug,getWebglContext:()=>X0,hash8:()=>Zv,htmlSanitizer:()=>x0,indexArrayToArray:()=>vg,indexByName:()=>vO,insertSortAsc:()=>Wf,insertSortDesc:()=>dO,isArray:()=>Ir,isBlob:()=>GI,isHTMLElement:()=>_2,isInteger:()=>gO,isLittleEndian:()=>mp,isObject:()=>Hs,isRawObject:()=>yd,isWebGLSupported:()=>zL,lerp:()=>_n,mapKeys:()=>xL,mapValues:()=>bL,merge:()=>_c,mergeValues:()=>Pm,mix:()=>Jv,nextPowerOfTwo:()=>fh,objToValueList:()=>Up,parseColor:()=>io,parseColorHex:()=>k0,parseColorRgba:()=>D0,pick:()=>qv,processQueue:()=>mO,promiseQueue:()=>Ew,promptDownload:()=>Ah,propertyPathToString:()=>Xv,removeFromArray:()=>fO,requestAnimFrame:()=>g0,resizeElement:()=>Um,resolvePath:()=>xC,rgbaToRgb:()=>cc,serializeXMLDocument:()=>nb,setAttributes:()=>m0,setCtxFont:()=>Eh,setElementSize:()=>bd,setKeys:()=>dB,setProperty:()=>_u,setValues:()=>$f,smartRequire:()=>Oa,throttle:()=>_p,toArray:()=>Yv,toHexa:()=>bx,toPropertyPath:()=>pd,traverse:()=>Aw,unflatten:()=>Wv,unorderedHash:()=>pO,workerIsAvailable:()=>EC});var oB={"embedded-opentype":!0,svg:!0};function aB(t,e){const i=/url\(['"]?([^'")]+)['"]?\)\s+format\(['"]?([^'")]+)['"]?\)/g,n=/font-family\s*:\s*['"]?([^;'"]+)['"]?;/,s=[];for(let r=0;r<t.length;r++){const a=t[r],u=a.match(n);if(u){const h=u[1],c=[];let g;for(;g=i.exec(a);){const _=g[1],m=g[2];oB[m.toLowerCase()]||c.push({format:m,url:xC(_,e)})}s.push({name:h,formats:c,originalRule:a})}}return s}function xC(t,e){if(/^http(s)?:/.test(t))return t;if(t[0]==="/"){const s=e.match(/((\w+:\/\/)([^/]+))/);return s?s[1]+t:t}const i=t.split("/"),n=e.split("/");for(e[e.length-1]!=="/"&&n.pop();i[0]==="..";)i.shift(),n.pop();return n.concat(i).join("/").replace(/[\w](\/{2,})/g,s=>s[0]+"/")}function lB(t){return t instanceof RegExp||t instanceof Date}var uB=typeof HTMLElement>"u"?t=>!1:t=>t instanceof HTMLElement,hB=function(t){return typeof t!="object"||t===null||Ir(t)||lB(t)};function Up(t,e=[],i=[]){if(!uB(t)){if(hB(t))e.push({path:i.slice(),value:t});else{const n=Object.keys(t);for(let s=0;s<n.length;++s){const r=n[s],a=i.slice();a.push(r),Up(t[r],e,a)}}return e}}var bC=class{constructor(){this._keys=[],this._values=[],this._size=0,this._cachedPath=[],this._cachedIndex=-1}get size(){return this._size}set(t,e){const i=this._getIndex(t);i!==-1?this._values[i]=e:(bv(this._cachedPath,t)&&(this._cachedIndex=this._keys.length),this._keys.push(t),this._values.push(e),this._size+=1)}get(t){const e=this._getIndex(t);if(e!==-1)return this._values[e]}has(t){return this._getIndex(t)!==-1}keys(){return this._keys.slice()}_getIndex(t){if(bv(t,this._cachedPath))return this._cachedIndex;this._cachedPath=t.slice();const e=this._keys;for(let i=0;i<e.length;++i)if(bv(e[i],t))return this._cachedIndex=i,i;return this._cachedIndex=-1,-1}};function bv(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}var Cx,dB=function(e){return Array.from(e.keys())},$f=function(e){return Array.from(e.values())},Ng=Oa("web-worker"),EC=!!Ng||typeof Worker<"u"&&typeof Blob<"u";function SC(t){return Ng?Mx(t):t}function Mx(t){if(ArrayBuffer.isView(t))return Array.from(t);if(Array.isArray(t)){for(let e=0;e<t.length;e++)t[e]=Mx(t[e]);return t}if(Hs(t)){const e=Object.keys(t);for(const i of e)t[i]=Mx(t[i]);return t}return t}function AC(t){return Ng?fB(t.toString()):cB(t)}function cB(t){return MI(dI(t))}function fB(t){if(Ng)return new Ng("data:application/javascript,"+t.replace(/\n/g,""))}var A1=Oa("@xmldom/xmldom");Cx=typeof XMLSerializer<"u"?XMLSerializer:A1?A1.XMLSerializer:null;var gB=class TC{constructor(e){this._attributes={},this._children=[],this._name=e}setAttribute(e,i){this._attributes[e]=i}appendChild(e){this._children.push(e)}get tagName(){return this._name}get children(){return this._children}get childNodes(){return this._children}get firstChild(){return this._children[0]||null}serialize(){const e=this._name,i=this._attributes,n=this._children,s=Object.keys(i).filter(a=>i[a]!==void 0).map(a=>` ${a}="${""+i[a]}"`).join(""),r=n.map(a=>a.serialize()).join("");return r.length?`<${e}${s}>${r}</${e}>`:`<${e}${s}/>`}cloneNode(e){const i=new TC(this._name),n=Object.keys(this._attributes);for(const s of n)i.setAttribute(s,this._attributes[s]);if(e)for(let s=0;s<this._children.length;s++)i.appendChild(this._children[s].cloneNode(e));return i}},wC=class LC{constructor(e){this._text=e}serialize(){return this._text}cloneNode(){return new LC(this._text)}},_B=class{constructor(){this._children=[],this._meta=[],this._children=[],this._meta=[]}appendChild(t){this._children.push(t)}serialize(){return this._meta.concat(this._children.map(t=>t.serialize())).join("")}createElement(t){return new gB(t)}createTextNode(t){return new wC(t)}},CC=()=>new _B;function nb(t){if(Cx)return new Cx().serializeToString(t)}var MC=()=>bu().implementation.createDocument("","",null),Kg=class{constructor(t,e){this._graph=t,this._nodes={elementList:t.nodeList,flexArray:t.createNodeAttribute({storage:1,name:e},!!e),indexList:t.createIndexList(!0)},this._edges={elementList:t.edgeList,flexArray:t.createEdgeAttribute({storage:1,name:e},!!e),indexList:t.createIndexList(!1)}}_get(t){return t.isNode?this._nodes:this._edges}addOrRemoveElements(t,e){return e?this.addElements(t):this.removeElements(t)}addElements(t){const{elementList:e,flexArray:i,indexList:n}=this._get(t),s=n.getLength();for(let r=0;r<t._indexes.length;r++){const a=t._indexes[r];i.get(a)!==1&&(i.set(a,1),n.pushUnchecked(a))}return e(n.slice(s))}removeElements(t){const{elementList:e,flexArray:i,indexList:n}=this._get(t),s=n.getLength(),r=n.getBuffer();if(s>r.length)return this.clear(),this.addElements(t),t;let a=0;for(let u=0;u<t._indexes.length;u++){const h=t._indexes[u];i.get(h)!==0&&(i.set(h,0),a+=1)}if(a===s)return e(n.sliceAndReset());if(a===0)return e();{const u=this._graph.acquireIndexList(t.isNode);let h=0;for(let c=0;c<s;++c){const g=r[c];i.get(g)===0?(h+=1,u.pushUnchecked(g)):r[c-h]=g}return n.setLength(s-a),e(u.sliceAndReset())}}hasElement(t){return!!this._get(t).flexArray.get(t._index)}clear(){this._nodes.indexList.isEmpty()||(this._nodes.indexList.reset(),this._nodes.flexArray.reset()),this._edges.indexList.isEmpty()||(this._edges.indexList.reset(),this._edges.flexArray.reset())}isEmpty(){return this._nodes.indexList.isEmpty()&&this._edges.indexList.isEmpty()}getElements(){return{nodes:this._nodes.elementList(this._nodes.indexList.slice()),edges:this._edges.elementList(this._edges.indexList.slice())}}};function mB(t,e,i,n=0){e===void 0&&(e=i=Math.sqrt(t.length/4)),i===void 0&&(i=e);const s=document.createElement("canvas"),r=s.getContext("2d");if(r){const a=r.createImageData(e,i);s.style.imageRendering="pixelated",s.style.border="1px solid black",s.style.margin="2px",s.style.position="absolute",s.style.top=s.style.left="0px",s.width=e,s.height=i,a.data.set(t),r.putImageData(a,0,0);const u=document.getElementById("graph-container");u&&(u.style.position="static"),setTimeout(()=>document.body.appendChild(s),n)}}var pB=class{constructor(t,e){this._attributesManager=t,this._id=e}getDefinition(){return this._attributesManager.getAttributeLayerDefinition(this._id)}update(t){this._attributesManager.updateAttributeLayer(this._id,t)}destroy(){this._attributesManager.destroyAttributeLayer(this._id)}updateElements(t){this._attributesManager.updateElementsForAttributeLayer(this._id,t)}updateAll(){this._attributesManager.updateAllForAttributeLayer(this._id)}setAttributeValues(t,e,i){this._attributesManager.setAttributeLayerValues(this._id,t,e,i)}getUsedAttributeNames(t){return this._attributesManager.getUsedAttributeLayerAttributes(this._id,t)}getFlexArrays(){return this._attributesManager.getAttributeLayerFlexArrays(this._id)}},sb={};kg(sb,{cubicIn:()=>bB,cubicInOut:()=>SB,cubicOut:()=>EB,linear:()=>sp,quadraticIn:()=>yB,quadraticInOut:()=>xB,quadraticOut:()=>vB});var sp=t=>t,yB=t=>t*t,vB=t=>t*(2-t),xB=t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1),bB=t=>t*t*t,EB=t=>--t*t*t+1,SB=t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2),AB={name:"animationStart",storage:32,default:0},TB={name:"animationDuration",storage:16,default:0},wB={name:"animationEasing",storage:"resource",default:"linear"},LB={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentNodes:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},CB={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},extremities:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},parallelEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},MB={x:1,y:1,radius:1,"halo.hideNonAdjacentEdges":1};function _g(t){return typeof t=="string"}var bo="Arial",Sh="black",rp="rgba(255,255,255,0)",Dc=12,Rg=3,rb=7,NB=!0,ob=10,RB=5,NC=.08,RC="rgba(255,255,255,0)",OC="normal",IC="center",PC=!1,zC=0,Nx="red",DC="rgb(220, 220, 220)",kC="red",FC="rgb(220, 220, 220)",Rx=1,BC="scaled",UC="grey",GC=1,HC=0,VC=0,YC=!0,XC=0,ZC=!0,WC="line",qC=null,QC=null,KC="plain",jC="inherit",Ox=0,JC="fixed",$C=0,tM=null,Ix=10,eM="fixed",iM=1e3,nM=800,sM="rgba(0, 0, 0, 0.6)",rM="rgba(0, 0, 0, 0)",oM=10,aM=1,lM=2,uM="rgba(0, 0, 0, 0.36)",hM=0,OB=1,dM="normal",cM="center",fM=2,Px=2,gM=qg,_M=4,mM=!0,pM=4,zx=2,Dx=12,yM=2;function IB(t,e,i){let n,s,r,a;i==="line"?(n="line",s="plain",r=null,a=null):i==="arrow"?(n="line",s="plain",r="arrow",a=null):i==="tapered"?(n="triangle",s="plain",r=null,a=null):i==="dashed"?(n="line",s="dashed",r=null,a=null):i==="dotted"&&(n="line",s="dotted",r=null,a=null),t.shape.body.set(e,n),t.shape.style.set(e,s),t.shape.head.set(e,r),t.shape.tail.set(e,a)}var vM={width:{_flexArray:Rx,_check:mn(Rx)},scalingMethod:{_flexArray:BC,_check:gh},color:{_flexArray:UC,_check:_3},opacity:{_flexArray:GC,_check:rs},minVisibleSize:{_flexArray:HC,_check:rs},layer:{_flexArray:VC,_check:oC},detectable:{_flexArray:YC,_check:Or},curvature:{_flexArray:XC,_check:md},adjustAnchors:{_flexArray:ZC,_check:Or},shape:{_check:p3,_set:IB,type:"shape.head",body:{_flexArray:WC,_check:y3},head:{_flexArray:qC,_check:h1},tail:{_flexArray:QC,_check:h1},style:{_flexArray:KC,_check:v3}},stroke:{color:{_flexArray:jC,_check:$r},width:{_flexArray:Ox,_check:mn(Ox)},scalingMethod:{_flexArray:JC,_check:gh},minVisibleSize:{_flexArray:$C,_check:rs}},strokeWidth:"stroke.width",halo:{_alias:"halo.color",color:{_flexArray:tM,_check:_h},width:{_flexArray:Ix,_check:mn(Ix)},scalingMethod:{_flexArray:eM,_check:gh},size:"halo.width"},pulse:{enabled:{_flexArray:!1,_check:Or},duration:{_flexArray:iM,_check:rs},interval:{_flexArray:nM,_check:rs},startColor:{_flexArray:sM,_check:$r},endColor:{_flexArray:rM,_check:$r},width:{_flexArray:oM,_check:rs},startRatio:{_flexArray:aM,_check:rs},endRatio:{_flexArray:lM,_check:rs}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Or},color:{_flexArray:uM,_check:_h},minVisibleSize:{_flexArray:hM,_check:rs}},text:{_alias:"text.content",content:{_flexArray:null,_check:fu},font:{_flexArray:bo,_check:wc},color:{_flexArray:Sh,_check:_h},size:{_flexArray:Dc,_check:mn(Dc)},scale:{_flexArray:1,_check:rs},style:{_flexArray:dM,_check:Lc},align:{_flexArray:cM,_check:ip},margin:{_flexArray:fM,_check:md},padding:{_flexArray:Px,_check:mn(Px)},backgroundColor:{_flexArray:rp,_check:$r},minVisibleSize:{_flexArray:_M,_check:rs},position:{_flexArray:gM,_check:g3},adjustAngle:{_flexArray:mM,_check:Or},scaling:{_flexArray:PC,_check:Or},maxLineLength:{_flexArray:zC,_check:rs},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:fu},font:{_flexArray:bo,_check:wc},color:{_flexArray:Sh,_check:_h},size:{_flexArray:Dx,_check:mn(Dx)},scale:{_flexArray:NC,_check:rs},style:{_flexArray:OC,_check:Lc},align:{_flexArray:IC,_check:ip},margin:{_flexArray:yM,_check:md},padding:{_flexArray:zx,_check:mn(zx)},backgroundColor:{_flexArray:RC,_check:$r},minVisibleSize:{_flexArray:pM,_check:rs}}}},xM="grey",bM="white",ab=2,EM=null,lb=5,kx=0,SM="rgba(0, 0, 0, 0.36)",PB=1,zB="circle",Fx=12,tg="white",nm=12,eg="black",Ac=2,ig="black",ub=40,AM=null,TM=null,hb=1,wM="black",LM=1e3,CM=800,MM=1,NM=2,RM="rgba(0, 0, 0, 0.0)",OM="rgba(0, 0, 0, 0.6)",IM=50,DB=.1,ch=12,sm=24,Og=1,T1=Og/2,w1=.45,L1=.7,kB=10,PM=kB/2,zM=5,FB=mn(zM),BB=mn(Dc),UB=mn(ob),GB=mn(ab),HB=mn(lb),VB=mn(rb),C1=mn(Rg),YB=mn(PM),XB=mn(ub),ZB=mn(hb);function rm(t){return{_check:fu,_set:(e,i,n)=>{e.badges[t].text.content.set(i,n),n==null&&e.badges[t].image.url.set(i,n)},_get:(e,i)=>e.badges[t].text.content.get(i),color:{_flexArray:tg,_check:$r},scale:{_flexArray:w1,_check:mn(w1)},positionScale:{_flexArray:1,_check:rs},minVisibleSize:{_flexArray:ch,_check:mn(ch)},image:{_alias:`badges.${t}.image.url`,url:{_flexArray:null,_check:fu},scale:{_flexArray:Og,_check:mn(Og)}},stroke:{color:{_flexArray:eg,_check:$r},width:{_flexArray:Ac,_check:mn(Ac)},scalingMethod:{_flexArray:"fixed",_check:gh}},text:{_alias:`badges.${t}.text.content`,content:{_flexArray:null,_check:fu},color:{_flexArray:ig,_check:$r},font:{_flexArray:bo,_check:wc},style:{_flexArray:"normal",_check:Lc},scale:{_flexArray:T1,_check:mn(T1)},paddingLeft:{_flexArray:0,_check:md},paddingTop:{_flexArray:0,_check:md}}}}var DM={x:{_flexArray:0,_check:md,_disableMemoryOptimization:!0},y:{_flexArray:0,_check:md,_disableMemoryOptimization:!0},radius:{_flexArray:zM,_check:FB},scalingMethod:{_flexArray:"scaled",_check:gh},color:{_flexArray:xM,_check:b3},opacity:{_flexArray:1,_check:rs},shape:{_flexArray:"circle",_check:m3},layer:{_flexArray:0,_check:oC},detectable:{_flexArray:!0,_check:Or},draggable:{_flexArray:!0,_check:Or},layoutable:{_flexArray:!0,_check:Or},innerStroke:{_alias:"innerStroke.color",width:{_flexArray:ab,_check:GB},scalingMethod:{_flexArray:"fixed",_check:gh},color:{_flexArray:bM,_check:$r},minVisibleSize:{_flexArray:Fx,_check:mn(Fx)}},outerStroke:{_alias:"outerStroke.color",width:{_flexArray:lb,_check:HB},scalingMethod:{_flexArray:"fixed",_check:gh},color:{_flexArray:EM,_check:$r},minVisibleSize:{_flexArray:kx,_check:mn(kx)}},badges:{_check:c3,_set(t,e,i){t.badges.topLeft.text.content.set(e,i),t.badges.topLeft.image.url.set(e,i),t.badges.topRight.text.content.set(e,i),t.badges.topRight.image.url.set(e,i),t.badges.bottomLeft.text.content.set(e,i),t.badges.bottomLeft.image.url.set(e,i),t.badges.bottomRight.text.content.set(e,i),t.badges.bottomRight.image.url.set(e,i)},topLeft:rm("topLeft"),topRight:rm("topRight"),bottomLeft:rm("bottomLeft"),bottomRight:rm("bottomRight")},halo:{_alias:"halo.color",color:{_flexArray:AM,_check:_h},width:{_flexArray:ub,_check:XB},scalingMethod:{_flexArray:"fixed",_check:gh},strokeColor:{_flexArray:TM,_check:_h},strokeWidth:{_flexArray:hb,_check:ZB},clustering:{_flexArray:!1,_check:Or},hideNonAdjacentEdges:{_flexArray:!1,_check:Or}},pulse:{enabled:{_flexArray:!1,_check:Or},duration:{_flexArray:LM,_check:rs},interval:{_flexArray:CM,_check:rs},startColor:{_flexArray:OM,_check:$r},endColor:{_flexArray:RM,_check:$r},width:{_flexArray:IM,_check:rs},startRatio:{_flexArray:MM,_check:rs},endRatio:{_flexArray:NM,_check:rs}},icon:{_alias:"icon.content",content:{_flexArray:null,_check:fu},font:{_flexArray:bo,_check:wc},color:{_flexArray:wM,_check:_h},scale:{_flexArray:L1,_check:mn(L1)},style:{_flexArray:"normal",_check:Lc},minVisibleSize:{_flexArray:ch,_check:mn(ch)}},image:{_alias:"image.url",url:{_flexArray:null,_check:fu},scale:{_flexArray:Og,_check:mn(Og)},fit:{_flexArray:!0,_check:Or},tile:{_flexArray:!1,_check:Or},minVisibleSize:{_flexArray:ch,_check:mn(ch)}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Or},color:{_flexArray:SM,_check:_h},minVisibleSize:{_flexArray:ch,_check:mn(ch)}},text:{_alias:"text.content",content:{_flexArray:null,_check:fu},font:{_flexArray:bo,_check:wc},color:{_flexArray:Sh,_check:$r},size:{_flexArray:Dc,_check:BB},scale:{_flexArray:DB,_check:rs},style:{_flexArray:"normal",_check:Lc},align:{_flexArray:"center",_check:ip},margin:{_flexArray:rb,_check:VB},padding:{_flexArray:Rg,_check:C1},backgroundColor:{_flexArray:null,_check:$r},tip:{_flexArray:!0,_check:Or},minVisibleSize:{_flexArray:sm,_check:mn(sm)},scaling:{_flexArray:!1,_check:Or},position:{_flexArray:"bottom",_check:x3},maxLineLength:{_flexArray:0,_check:rs},truncateLength:{_flexArray:0,_check:rs},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:fu},font:{_flexArray:bo,_check:wc},color:{_flexArray:Sh,_check:$r},size:{_flexArray:ob,_check:UB},scale:{_flexArray:.08,_check:rs},style:{_flexArray:"normal",_check:Lc},align:{_flexArray:"center",_check:ip},margin:{_flexArray:PM,_check:YB},padding:{_flexArray:Rg,_check:C1},backgroundColor:{_flexArray:null,_check:$r},minVisibleSize:{_flexArray:sm,_check:mn(sm)}}}},WB=t=>(e,i)=>e[t].get(i),qB=(t,e)=>(i,n)=>i[t][e].get(n),QB=(t,e,i)=>(n,s)=>n[t][e][i].get(s),KB=(t,e,i,n)=>(s,r)=>s[t][e][i][n].get(r),jB=t=>(e,i,n)=>e[t].set(i,n),JB=(t,e)=>(i,n,s)=>i[t][e].set(n,s),$B=(t,e,i)=>(n,s,r)=>n[t][e][i].set(s,r),tU=(t,e,i,n)=>(s,r,a)=>s[t][e][i][n].set(r,a),eU=[WB,qB,QB,KB],iU=[jB,JB,$B,tU];function M1(t,e){if(!t._check)throw new Error(`error somewhere for ${e}`);const i=e.split("."),n=i.length-1,s=eU[n].apply(null,i),r=iU[n].apply(null,i);return{check:t._check,set:r,get:s,nested:{}}}function op(t,e){const i=e?DM:vM,n=typeof t=="string"?[t]:vd(t,"",[]);let s=!1;const r=[];for(let a=0;a<n.length;a++){const u=n[a].split(".");let h=i[u[0]];for(let g=1;g<u.length;g++)h=h[u[g]];h.type&&(n[a]=h.type),h._alias&&(n[a]=h._alias),n[a]==="badges"&&(n[a]="badges.topLeft.text.content",s=!0);const c=u[u.length-1];c!=="topLeft"&&c!=="topRight"&&c!=="bottomLeft"&&c!=="bottomRight"||(n[a]=`badges.${c}.text.content`,r.push(`badges.${c}.image.url`)),n[a]==="strokeWidth"&&(n[a]="stroke.width")}return s&&(n.push("badges.topLeft.image.url"),n.push("badges.topRight.text.content"),n.push("badges.topRight.image.url"),n.push("badges.bottomLeft.text.content"),n.push("badges.bottomLeft.image.url"),n.push("badges.bottomRight.text.content"),n.push("badges.bottomRight.image.url")),n.push(...r),n}var om=t=>(e,i)=>({url:e.badges[t].image.url.get(i),scale:e.badges[t].image.scale.get(i)}),am=t=>(e,i)=>({color:e.badges[t].stroke.color.get(i),width:e.badges[t].stroke.width.get(i),scalingMethod:e.badges[t].stroke.scalingMethod.get(i)}),lm=t=>(e,i)=>({content:e.badges[t].text.content.get(i),color:e.badges[t].text.color.get(i),font:e.badges[t].text.font.get(i),style:e.badges[t].text.style.get(i),scale:e.badges[t].text.scale.get(i),paddingLeft:e.badges[t].text.paddingLeft.get(i),paddingTop:e.badges[t].text.paddingTop.get(i)}),um=t=>(e,i)=>({color:e.badges[t].color.get(i),scale:e.badges[t].scale.get(i),positionScale:e.badges[t].positionScale.get(i),minVisibleSize:e.badges[t].minVisibleSize.get(i),image:{url:e.badges[t].image.url.get(i),scale:e.badges[t].image.scale.get(i)},stroke:{color:e.badges[t].stroke.color.get(i),width:e.badges[t].stroke.width.get(i),scalingMethod:e.badges[t].stroke.scalingMethod.get(i)},text:{content:e.badges[t].text.content.get(i),color:e.badges[t].text.color.get(i),font:e.badges[t].text.font.get(i),style:e.badges[t].text.style.get(i),scale:e.badges[t].text.scale.get(i),paddingLeft:e.badges[t].text.paddingLeft.get(i),paddingTop:e.badges[t].text.paddingTop.get(i)}}),lh={topLeft:um("topLeft"),topRight:um("topRight"),bottomLeft:um("bottomLeft"),bottomRight:um("bottomRight")},il={stroke:(t,e)=>({color:t.stroke.color.get(e),width:t.stroke.width.get(e),scalingMethod:t.stroke.scalingMethod.get(e),minVisibleSize:t.stroke.minVisibleSize.get(e)}),innerStroke:(t,e)=>({width:t.innerStroke.width.get(e),scalingMethod:t.innerStroke.scalingMethod.get(e),color:t.innerStroke.color.get(e),minVisibleSize:t.innerStroke.minVisibleSize.get(e)}),outerStroke:(t,e)=>({width:t.outerStroke.width.get(e),scalingMethod:t.outerStroke.scalingMethod.get(e),color:t.outerStroke.color.get(e),minVisibleSize:t.outerStroke.minVisibleSize.get(e)}),pulse:(t,e)=>({enabled:t.pulse.enabled.get(e),duration:t.pulse.duration.get(e),interval:t.pulse.interval.get(e),startColor:t.pulse.startColor.get(e),endColor:t.pulse.endColor.get(e),width:t.pulse.width.get(e),startRatio:t.pulse.startRatio.get(e),endRatio:t.pulse.endRatio.get(e)}),outline:(t,e)=>({enabled:t.outline.enabled.get(e),color:t.outline.color.get(e),minVisibleSize:t.outline.minVisibleSize.get(e)}),halo:(t,e)=>({color:t.halo.color.get(e),width:t.halo.width.get(e),scalingMethod:t.halo.scalingMethod.get(e),strokeColor:t.halo.strokeColor.get(e),strokeWidth:t.halo.strokeWidth.get(e),clustering:t.halo.clustering.get(e),hideNonAdjacentEdges:t.halo.hideNonAdjacentEdges.get(e)}),"text.secondary":(t,e)=>({content:t.text.secondary.content.get(e),font:t.text.secondary.font.get(e),color:t.text.secondary.color.get(e),size:t.text.secondary.size.get(e),scale:t.text.secondary.scale.get(e),style:t.text.secondary.style.get(e),align:t.text.secondary.align.get(e),margin:t.text.secondary.margin.get(e),padding:t.text.secondary.padding.get(e),backgroundColor:t.text.secondary.backgroundColor.get(e),minVisibleSize:t.text.secondary.minVisibleSize.get(e)}),text:(t,e)=>({content:t.text.content.get(e),font:t.text.font.get(e),color:t.text.color.get(e),size:t.text.size.get(e),scale:t.text.scale.get(e),style:t.text.style.get(e),align:t.text.align.get(e),margin:t.text.margin.get(e),padding:t.text.padding.get(e),backgroundColor:t.text.backgroundColor.get(e),tip:t.text.tip.get(e),minVisibleSize:t.text.minVisibleSize.get(e),scaling:t.text.scaling.get(e),position:t.text.position.get(e),maxLineLength:t.text.maxLineLength.get(e),truncateLength:t.text.truncateLength.get(e),secondary:il["text.secondary"](t,e)}),image:(t,e)=>({url:t.image.url.get(e),scale:t.image.scale.get(e),fit:t.image.fit.get(e),tile:t.image.tile.get(e),minVisibleSize:t.image.minVisibleSize.get(e)}),icon:(t,e)=>({content:t.icon.content.get(e),font:t.icon.font.get(e),color:t.icon.color.get(e),scale:t.icon.scale.get(e),style:t.icon.style.get(e),minVisibleSize:t.icon.minVisibleSize.get(e)}),badges:(t,e)=>({topLeft:lh.topLeft(t,e),topRight:lh.topRight(t,e),bottomLeft:lh.bottomLeft(t,e),bottomRight:lh.bottomRight(t,e)}),"badges.topLeft":lh.topLeft,"badges.topRight":lh.topRight,"badges.bottomLeft":lh.bottomLeft,"badges.bottomRight":lh.bottomRight,"badges.topLeft.image":om("topLeft"),"badges.topLeft.stroke":am("topLeft"),"badges.topLeft.text":lm("topLeft"),"badges.topRight.image":om("topRight"),"badges.topRight.stroke":am("topRight"),"badges.topRight.text":lm("topRight"),"badges.bottomLeft.image":om("bottomLeft"),"badges.bottomLeft.stroke":am("bottomLeft"),"badges.bottomLeft.text":lm("bottomLeft"),"badges.bottomRight.image":om("bottomRight"),"badges.bottomRight.stroke":am("bottomRight"),"badges.bottomRight.text":lm("bottomRight"),all:(t,e)=>({x:t.x.get(e),y:t.y.get(e),radius:t.radius.get(e),scalingMethod:t.scalingMethod.get(e),color:t.color.get(e),opacity:t.opacity.get(e),shape:t.shape.get(e),layer:t.layer.get(e),detectable:t.detectable.get(e),draggable:t.draggable.get(e),layoutable:t.layoutable.get(e),innerStroke:il.innerStroke(t,e),outerStroke:il.outerStroke(t,e),badges:il.badges(t,e),halo:il.halo(t,e),pulse:il.pulse(t,e),icon:il.icon(t,e),image:il.image(t,e),outline:il.outline(t,e),text:il.text(t,e)})},hh={shape:(t,e)=>({body:t.shape.body.get(e),head:t.shape.head.get(e),tail:t.shape.tail.get(e),style:t.shape.style.get(e)}),"text.secondary":(t,e)=>({content:t.text.secondary.content.get(e),font:t.text.secondary.font.get(e),color:t.text.secondary.color.get(e),size:t.text.secondary.size.get(e),scale:t.text.secondary.scale.get(e),style:t.text.secondary.style.get(e),align:t.text.secondary.align.get(e),margin:t.text.secondary.margin.get(e),padding:t.text.secondary.padding.get(e),backgroundColor:t.text.secondary.backgroundColor.get(e),minVisibleSize:t.text.secondary.minVisibleSize.get(e)}),text:(t,e)=>({content:t.text.content.get(e),font:t.text.font.get(e),color:t.text.color.get(e),size:t.text.size.get(e),scale:t.text.scale.get(e),style:t.text.style.get(e),align:t.text.align.get(e),margin:t.text.margin.get(e),padding:t.text.padding.get(e),position:t.text.position.get(e),backgroundColor:t.text.backgroundColor.get(e),minVisibleSize:t.text.minVisibleSize.get(e),adjustAngle:t.text.adjustAngle.get(e),scaling:t.text.scaling.get(e),maxLineLength:t.text.maxLineLength.get(e),secondary:hh["text.secondary"](t,e)}),outline:(t,e)=>({enabled:t.outline.enabled.get(e),color:t.outline.color.get(e),minVisibleSize:t.outline.minVisibleSize.get(e)}),pulse:(t,e)=>({enabled:t.pulse.enabled.get(e),duration:t.pulse.duration.get(e),interval:t.pulse.interval.get(e),startColor:t.pulse.startColor.get(e),endColor:t.pulse.endColor.get(e),width:t.pulse.width.get(e),startRatio:t.pulse.startRatio.get(e),endRatio:t.pulse.endRatio.get(e)}),stroke:(t,e)=>({color:t.stroke.color.get(e),width:t.stroke.width.get(e),scalingMethod:t.stroke.scalingMethod.get(e),minVisibleSize:t.stroke.minVisibleSize.get(e)}),halo:(t,e)=>({color:t.halo.color.get(e),width:t.halo.width.get(e),scalingMethod:t.halo.scalingMethod.get(e)}),all:(t,e)=>({width:t.width.get(e),scalingMethod:t.scalingMethod.get(e),color:t.color.get(e),opacity:t.opacity.get(e),minVisibleSize:t.minVisibleSize.get(e),layer:t.layer.get(e),detectable:t.detectable.get(e),curvature:t.curvature.get(e),adjustAnchors:t.adjustAnchors.get(e),shape:hh.shape(t,e),stroke:hh.stroke(t,e),halo:hh.halo(t,e),pulse:hh.pulse(t,e),outline:hh.outline(t,e),text:hh.text(t,e)})};function db(t,e,i,n=!0){if((e=e||t)._flexArray!==void 0)return M1(e,i);let s={check:ll,get:Ci,set:Ci,nested:{}};if(_g(e)||e._alias){const r=_g(e)?e:e._alias;s=M1(_s(t,r),r)}else{if(e._set?(s.set=e._set,s.check=e._check):(s.set=Ci,s.check=Ci),e._get)s.get=e._get;else{const r=n?il:hh;s.get=r[i||"all"]}s.nested={}}if(!_g(e)){const r=Object.keys(e);for(const a of r){const u=e[a];a.startsWith("_")||(s.nested[a]=db(t,u,i?i+"."+a:a,n))}}return s}var nU=db(DM,void 0,void 0,!0),sU=db(vM,void 0,void 0,!1),rU=[];function N1(t){let e=rU;return t.output===void 0?(typeof t.attributes=="function"&&(e="all"),Hs(t.attributes)&&(e=vd(t.attributes))):t.output&&(e=t.output.attributes),cb(e,t.allAttributePaths)}function oU(t,e,i,n){if(n>i){for(const s of e.attributes)for(const r of t.attributes)if(r===s)return!0}for(const s of e.tags)for(const r of t.tags)if(s===r)return!0;return!1}function Il(t,e,i,n,s,r){oU(i,n,s,r)&&t.push(e)}function aU(t){let e=t.dependencies;e===void 0?e=LB:Hs(e)||(e={});const i=pp(t.attributes).some(a=>typeof a=="function"),n=t.selector&&!t.standaloneSelector,s=!(!i&&!n);let r=e.adjacentEdges;return!r&&e.adjacentNodes&&(r=!0),{self:Fl(e.self,s,t.allAttributePaths),adjacentNodes:Fl(e.adjacentNodes,s,t.allAttributePaths),adjacentEdges:Fl(r,s,t.allAttributePaths),allNodes:Fl(e.allNodes,s,t.allAttributePaths),allEdges:Fl(e.allEdges,s,t.allAttributePaths)}}function lU(t){let e=t.dependencies;e===void 0?e=CB:Hs(e)||(e={});const i=pp(t.attributes).some(r=>typeof r=="function"),n=t.selector&&!t.standaloneSelector,s=!(!i&&!n);return{self:Fl(e.self,s,t.allAttributePaths),extremities:Fl(e.extremities,s,t.allAttributePaths),parallelEdges:Fl(e.parallelEdges,s,t.allAttributePaths),allNodes:Fl(e.allNodes,s,t.allAttributePaths),allEdges:Fl(e.allEdges,s,t.allAttributePaths)}}function Fl(t,e,i){if(!e)return{attributes:[],tags:[]};if(t===!0)return{attributes:[],tags:[cx]};const n={attributes:cb((t=t||{}).attributes,i),tags:dU(t.tags)};return t.data&&n.tags.push(fx),t.selection&&n.tags.push(ss),t.hover&&n.tags.push(dg),n}function uU(t){return Array.isArray(t)?t.join("."):t}function hU(t){return t.map(uU).filter(_g)}function cb(t,e){if(t==="all")return e.slice();if(!Array.isArray(t))return[];const i=hU(t);return e?e.filter(n=>i.some(s=>n.startsWith(s))):i}function dU(t){return Array.isArray(t)?t.filter(_g):[]}var R1={storage:1,default:0},ap=class{constructor({graph:t,isNode:e,includeRemovedElements:i}){this._all=!1,this._isNode=e,this._graph=t,this._includeRemovedElements=i,this._eltList=e?this._graph.nodeList:this._graph.edgeList,this._flexArray=e?t.createNodeAttribute(R1,!1):t.createEdgeAttribute(R1,!1),this._all=!1,this._indexList=t.createIndexList(e)}_getAllIndexes(){const t=this._isNode?this._graph.getNodeMaxIndex():this._graph.getEdgeMaxIndex(),e=new Uint32Array(t);for(let i=1;i<=t;++i)e[i-1]=i;return e}addAll(){this._all=!0}add(t){if(!this._all)for(let e=0;e<t._indexes.length;e++){const i=t._indexes[e];this.addIndex(i)}}addIndex(t){this._flexArray.get(t)===0&&(this._flexArray.set(t,1),this._indexList.push(t))}isEmpty(){return!this._all&&this._indexList.isEmpty()}isFull(){return this._all}getListAndClear(){const t=this.getList();return this.clear(),t}getList(){let t;if(this._all&&!this._includeRemovedElements)t=this._isNode?this._graph.getNodes("all"):this._graph.getEdges("all");else{const e=this._all?this._getAllIndexes():this._indexList.slice();t=this._eltList(e)}return t}clear(){this._all=!1,this._indexList.isEmpty()||(this._indexList.reset(),this._flexArray.reset())}addSet(t){if(t._all)this.addAll();else{const e=t._indexList.getBuffer(),i=t._indexList.getLength();for(let n=0;n<i;++n)this.addIndex(e[n])}}};function kM(t,e=[],i=""){return t.constructor===Km?t.isInitialized()&&e.push(i):t.constructor===Object&&Object.keys(t).forEach(n=>{kM(t[n],e,i?i+"."+n:n)}),e}var O1=class{constructor(t,e,i){this._updatedAttributes=new Set,this._updatedAttributesTmp=new Set,this._allUsedAttributes=new Set,this._graph=t,this._eltName=e?"node":"edge",this._accessors=e?nU:sU,this._createFlexArrays=i;const n=this._createFlexArrays(t,{original:!0,useDefaultValues:!0});this._finalFlexArrays=n;const s=this._createFlexArrays(t,{original:!1,useDefaultValues:!0});this._prevFlexArrays=s;const r=this._createFlexArrays(t,{original:!1,useDefaultValues:!0});this._defaultFlexArrays=r,this._currentFlexArrays=this._defaultFlexArrays,this.setLastFlexArrays(this._defaultFlexArrays),this._elementsToRedraw=new ap({graph:t,isNode:e,includeRemovedElements:!0}),this._elementsUpdated=new ap({graph:t,isNode:e,includeRemovedElements:!1}),this._finalFlexArraysWrapped={...this._finalFlexArrays,excluded:t.getAttribute(e,"excluded"),textHidden:t.getAttribute(e,"textHidden"),animationStart:t.createAttribute(e,AB),animationDuration:t.createAttribute(e,TB),animationEasing:t.createAttribute(e,wB),id:this._graph.getAttribute(e,"id"),...!e&&{source:t.getEdgeAttribute("source"),target:t.getEdgeAttribute("target")}}}clear(){this._elementsToRedraw.clear(),this._elementsUpdated.clear(),this._updatedAttributes.clear(),this._updatedAttributesTmp.clear()}getAttributeFlexArrays(){return this._finalFlexArraysWrapped}getPrevAttributeFlexArrays(){return this._prevFlexArrays}getAnimationInformation(t){const e=t._indexes,i=Array(e.length),n=this._finalFlexArraysWrapped;for(let s=0;s<e.length;s++){const r=e[s];i[s]={duration:n.animationDuration.get(r),start:n.animationStart.get(r),easing:n.animationEasing.get(r)}}return i}setDefaultAttributes(t){vd(t).forEach(e=>{const i=_s(this._currentFlexArrays,e),n=_s(this._prevFlexArrays,e),s=_s(this._defaultFlexArrays,e),r=_s(this._finalFlexArrays,e);if(!i)return;const a=_s(t,e);i.setDefaultValue(a),s.setDefaultValue(a),n.setDefaultValue(a),r.setDefaultValue(a)}),this.redrawAll()}startUpdate(){}prepareFlexArraysUpdate(t){this._currentFlexArrays=t.inputFlexArrays}setLastFlexArrays(t){this._lastFlexArrays=t}updateFlexArrays(t){const{attributes:e,selector:i,context:n,outputFlexArrays:s,toUpdate:r,formattedOutput:a}=t;this._elementsUpdated.addSet(r),this._elementsToRedraw.addSet(r);const u=r.getListAndClear();if(e&&u.size){const{valid:h,invalid:c}=Gw(this._graph,u,i,n);for(const g of a.attributes){const _=_s(s,g);for(let m=0;m<c._indexes.length;m++){const v=c._indexes[m];_.set(v,void 0)}}this._assignAttributesToFlexArrays(this._accessors,s,h,e,n),this._addUpdatedAttributes(t)}}endUpdate(){const t=this._elementsUpdated.getList(),e=$f(this._updatedAttributesTmp);for(const i of e){const n=_s(this._lastFlexArrays,i),s=_s(this._finalFlexArrays,i);for(let r=0;r<t._indexes.length;r++){const a=t._indexes[r];s.set(a,n.get(a))}}this._updatedAttributesTmp.clear(),this._currentFlexArrays=this._finalFlexArrays}setAttributeValues(t,e,i,n,s){const r=t.outputFlexArrays,a=this._accessors;this._assignAttributesToFlexArrays(a,r,e,i,null),this._addUpdatedAttributes(t,n),this._elementsUpdated.add(e),this._elementsToRedraw.add(e)}notifyLayerDestroyed(t){this._addUpdatedAttributes(t)}_addUpdatedAttributes(t,e){const{outputFlexArrays:i,formattedOutput:n}=t,s=Array.isArray(e)?cb(e):n.attributes;for(const r of s)_s(i,r).isInitialized()&&(this._updatedAttributes.add(r),this._updatedAttributesTmp.add(r),this._allUsedAttributes.add(r))}addUpdatedAttribute(t){this._updatedAttributes.add(t),this._updatedAttributesTmp.add(t),this._allUsedAttributes.add(t)}getUsedAttributeNames(t){return kM(t.outputFlexArrays)}redrawElements(t){this._elementsToRedraw.add(t)}redrawAll(){this._elementsToRedraw.addAll()}getAndResetElementsToRedraw(){return this._elementsToRedraw.getListAndClear()}getAndResetElementsUpdated(){return this._elementsUpdated.getListAndClear()}getAndResetAttributesUpdated(){const t=$f(this._updatedAttributes);return this._updatedAttributes.clear(),t}getUpdatedAttributes(){return this._updatedAttributes}getUpdatedElementsList(){return this._elementsUpdated.getList()}getUpdatedAttributesSet(){return new Set(this._updatedAttributes)}createFlexArrays(){return this._createFlexArrays(this._graph,{original:!1,useDefaultValues:!1})}getAttributeValues(t,e,i,n){const s=n?this._prevFlexArrays:this._currentFlexArrays;return i?this._getMultipleAttributeValues(t,e,s):this._getSingleAttributeValues(t,e,s)}_getAccessor(t=""){let e=this._accessors;const i=pd(t);for(const n of i)if(e=e.nested[n],!e)throw new Error(`${this._eltName} attribute "${i.join("")}" does not exist`);return e}_getSingleAttributeValues(t,e,i){const n=this._getAccessor(e),s=t._indexes,r=Array(s.length);for(let a=0;a<s.length;a++)r[a]=n.get(i,s[a]);return r}_getMultipleAttributeValues(t,e,i){if(!e||e==="all")return this._getSingleAttributeValues(t,"",i);const n=Array(t.size);for(let s=0;s<n.length;++s)n[s]={};for(let s=0;s<e.length;s++){const r=e[s],a=this._getSingleAttributeValues(t,r,i);for(let u=0;u<n.length;++u)_u(n[u],r,a[u])}return n}setAnimationAttributes(t,{duration:e,startTime:i,easing:n}){const s=t._indexes,r=this._finalFlexArraysWrapped,a=r.animationDuration,u=r.animationStart,h=r.animationEasing,c=$f(this._allUsedAttributes);if(e){let g=!1;for(const _ of c){if(_==="x"||_==="y"){g=!0;continue}const m=_s(this._finalFlexArrays,_),v=_s(this._prevFlexArrays,_);for(let b=0;b<s.length;b++){const x=s[b];v.set(x,m.get(x))}}if(g){const _=eo(),m=this._finalFlexArrays.x,v=this._finalFlexArrays.y,b=this._prevFlexArrays.x,x=this._prevFlexArrays.y;for(let M=0;M<s.length;M++){const N=s[M],O=a.get(N);if(O){const R=u.get(N),P=h.get(N),F=(sb[P]||sp)(Math.min((_-R)/O,1)),U=Jv(b.get(N),m.get(N),F),V=Jv(x.get(N),v.get(N),F);b.set(N,U),x.set(N,V)}else b.set(N,m.get(N)),x.set(N,v.get(N))}}}a.fill(s,e),u.fill(s,i),h.fill(s,n)}resetAnimationAttributes(t){this._finalFlexArraysWrapped.animationDuration.fill(t._indexes,0)}getUsedAttributes(){return $f(this._allUsedAttributes)}getDefaultFlexArrays(){return this._defaultFlexArrays}_assignAttributesToFlexArrays(t,e,i,n,s,r=[]){if(typeof n=="function"){const a=r.join(".");for(let u=0;u<i.size;++u){const h=i.get(u);if(h){const c=n(h,s,a);this._assignSingleValueToFlexArray(e,h,t,c,r)}}}else if(Hs(n)){const a=Object.keys(n);for(let u=0;u<a.length;++u){const h=a[u];r.push(h);const c=this._getNestedAccessor(t,h,r),g=n[h];this._assignAttributesToFlexArrays(c,e,i,g,s,r),r.pop()}}else if((Array.isArray(n)||ArrayBuffer.isView(n))&&r[0]!=="color")if(r.length===0)for(let a=0;a<i.size;++a)this._assignSingleValueToFlexArray(e,i.get(a),t,n[a],r);else for(let a=0;a<i.size;++a){const u=i._indexes[a],h=t.check(n[a]);t.set(e,u,h)}else{const a=t.check(n);for(let u=0;u<i.size;++u){const h=i.get(u);t.set(e,h._index,a)}}}_getNestedAccessor(t,e,i){const n=t.nested[e];if(!n)throw new Error(`${this._eltName} attribute "${i.join(".")}" does not exist`);return n}_assignSingleValueToFlexArray(t,e,i,n,s){if(Hs(n)){const r=Object.keys(n);for(const a of r){s.push(a);const u=n[a],h=this._getNestedAccessor(i,a,s);this._assignSingleValueToFlexArray(t,e,h,u,s),s.pop()}}else{const r=i.check(n);i.set(t,e._index,r)}}};function cU(t,{original:e,useDefaultValues:i}){const n="resource";return{width:t.createAttribute(!1,{storage:n,default:i?Rx:void 0,name:"width"},e),scalingMethod:t.createAttribute(!1,{storage:n,default:i?BC:void 0,name:"scalingMethod"},e),color:t.createAttribute(!1,{storage:n,default:i?UC:void 0,name:"color"},e),opacity:t.createAttribute(!1,{storage:n,default:i?GC:void 0,name:"opacity"},e),minVisibleSize:t.createAttribute(!1,{storage:n,default:i?HC:void 0,name:"minVisibleSize"},e),layer:t.createAttribute(!1,{storage:n,default:i?VC:void 0,name:"layer"},e),detectable:t.createAttribute(!1,{storage:n,default:i?YC:void 0,name:"detectable"},e),curvature:t.createAttribute(!1,{storage:n,default:i?XC:void 0,name:"curvature"},e),adjustAnchors:t.createAttribute(!1,{storage:n,default:i?ZC:void 0,name:"adjustAnchors"},e),shape:{body:t.createAttribute(!1,{storage:n,default:i?WC:void 0,name:"shape.body"},e),head:t.createAttribute(!1,{storage:n,default:i?qC:void 0,name:"shape.head"},e),tail:t.createAttribute(!1,{storage:n,default:i?QC:void 0,name:"shape.tail"},e),style:t.createAttribute(!1,{storage:n,default:i?KC:void 0,name:"shape.style"},e)},stroke:{color:t.createAttribute(!1,{storage:n,default:i?jC:void 0,name:"stroke.color"},e),width:t.createAttribute(!1,{storage:n,default:i?Ox:void 0,name:"stroke.width"},e),scalingMethod:t.createAttribute(!1,{storage:n,default:i?JC:void 0,name:"stroke.scalingMethod"},e),minVisibleSize:t.createAttribute(!1,{storage:n,default:i?$C:void 0,name:"stroke.minVisibleSize"},e)},halo:{color:t.createAttribute(!1,{storage:n,default:i?tM:void 0,name:"halo.color"},e),width:t.createAttribute(!1,{storage:n,default:i?Ix:void 0,name:"halo.width"},e),scalingMethod:t.createAttribute(!1,{storage:n,default:i?eM:void 0,name:"halo.scalingMethod"},e)},pulse:{enabled:t.createAttribute(!1,{storage:n,default:!i&&void 0,name:"pulse.enabled"},e),duration:t.createAttribute(!1,{storage:n,default:i?iM:void 0,name:"pulse.duration"},e),interval:t.createAttribute(!1,{storage:n,default:i?nM:void 0,name:"pulse.interval"},e),startColor:t.createAttribute(!1,{storage:n,default:i?sM:void 0,name:"pulse.startColor"},e),endColor:t.createAttribute(!1,{storage:n,default:i?rM:void 0,name:"pulse.endColor"},e),width:t.createAttribute(!1,{storage:n,default:i?oM:void 0,name:"pulse.width"},e),startRatio:t.createAttribute(!1,{storage:n,default:i?aM:void 0,name:"pulse.startRatio"},e),endRatio:t.createAttribute(!1,{storage:n,default:i?lM:void 0,name:"pulse.endRatio"},e)},outline:{enabled:t.createAttribute(!1,{storage:n,default:!i&&void 0,name:"outline.enabled"},e),color:t.createAttribute(!1,{storage:n,default:i?uM:void 0,name:"outline.color"},e),minVisibleSize:t.createAttribute(!1,{storage:n,default:i?hM:void 0,name:"outline.minVisibleSize"},e)},text:{content:t.createAttribute(!1,{storage:n,default:i?null:void 0,name:"text.content"},e),font:t.createAttribute(!1,{storage:n,default:i?bo:void 0,name:"text.font"},e),color:t.createAttribute(!1,{storage:n,default:i?Sh:void 0,name:"text.color"},e),size:t.createAttribute(!1,{storage:n,default:i?Dc:void 0,name:"text.size"},e),scale:t.createAttribute(!1,{storage:n,default:i?OB:void 0,name:"text.scale"},e),style:t.createAttribute(!1,{storage:n,default:i?dM:void 0,name:"text.style"},e),align:t.createAttribute(!1,{storage:n,default:i?cM:void 0,name:"text.align"},e),margin:t.createAttribute(!1,{storage:n,default:i?fM:void 0,name:"text.margin"},e),padding:t.createAttribute(!1,{storage:n,default:i?Px:void 0,name:"text.padding"},e),position:t.createAttribute(!1,{storage:n,default:i?gM:void 0,name:"text.position"},e),backgroundColor:t.createAttribute(!1,{storage:n,default:i?rp:void 0,name:"text.backgroundColor"},e),minVisibleSize:t.createAttribute(!1,{storage:n,default:i?_M:void 0,name:"text.minVisibleSize"},e),adjustAngle:t.createAttribute(!1,{storage:n,default:i?mM:void 0,name:"text.adjustAngle"},e),scaling:t.createAttribute(!1,{storage:n,default:i?PC:void 0,name:"text.scaling"},e),maxLineLength:t.createAttribute(!1,{storage:n,default:i?zC:void 0,name:"text.maxLineLength"},e),secondary:{content:t.createAttribute(!1,{storage:n,default:i?null:void 0,name:"text.secondary.content"},e),font:t.createAttribute(!1,{storage:n,default:i?bo:void 0,name:"text.secondary.font"},e),color:t.createAttribute(!1,{storage:n,default:i?Sh:void 0,name:"text.secondary.color"},e),size:t.createAttribute(!1,{storage:n,default:i?Dx:void 0,name:"text.secondary.size"},e),scale:t.createAttribute(!1,{storage:n,default:i?NC:void 0,name:"text.secondary.scale"},e),style:t.createAttribute(!1,{storage:n,default:i?OC:void 0,name:"text.secondary.style"},e),align:t.createAttribute(!1,{storage:n,default:i?IC:void 0,name:"text.secondary.align"},e),margin:t.createAttribute(!1,{storage:n,default:i?yM:void 0,name:"text.secondary.margin"},e),padding:t.createAttribute(!1,{storage:n,default:i?zx:void 0,name:"text.secondary.padding"},e),backgroundColor:t.createAttribute(!1,{storage:n,default:i?RC:void 0,name:"text.secondary.backgroundColor"},e),minVisibleSize:t.createAttribute(!1,{storage:n,default:i?pM:void 0,name:"text.secondary.minVisibleSize"},e)}}}}function fU(t,{original:e,useDefaultValues:i}){const n="resource";return{x:t.createAttribute(!0,{storage:"any",default:i?0:void 0,name:"x"},e),y:t.createAttribute(!0,{storage:"any",default:i?0:void 0,name:"y"},e),radius:t.createAttribute(!0,{storage:n,default:i?5:void 0,name:"radius"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"scaled":void 0,name:"scalingMethod"},e),color:t.createAttribute(!0,{storage:n,default:i?xM:void 0,name:"color"},e),opacity:t.createAttribute(!0,{storage:n,default:i?PB:void 0,name:"opacity"},e),shape:t.createAttribute(!0,{storage:n,default:i?zB:void 0,name:"shape"},e),layer:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"layer"},e),detectable:t.createAttribute(!0,{storage:n,default:!!i||void 0,name:"detectable"},e),draggable:t.createAttribute(!0,{storage:n,default:!!i||void 0,name:"draggable"},e),layoutable:t.createAttribute(!0,{storage:n,default:!!i||void 0,name:"layoutable"},e),innerStroke:{width:t.createAttribute(!0,{storage:n,default:i?ab:void 0,name:"innerStroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:"innerStroke.scalingMethod"},e),color:t.createAttribute(!0,{storage:n,default:i?bM:void 0,name:"innerStroke.color"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?Fx:void 0,name:"innerStroke.minVisibleSize"},e)},outerStroke:{width:t.createAttribute(!0,{storage:n,default:i?lb:void 0,name:"outerStroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:"outerStroke.scalingMethod"},e),color:t.createAttribute(!0,{storage:n,default:i?EM:void 0,name:"outerStroke.color"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?kx:void 0,name:"outerStroke.minVisibleSize"},e)},badges:{topLeft:{color:t.createAttribute(!0,{storage:n,default:i?tg:void 0,name:"badges.topLeft.color"},e),scale:t.createAttribute(!0,{storage:n,default:i?.45:void 0,name:"badges.topLeft.scale"},e),positionScale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.topLeft.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?nm:void 0,name:"badges.topLeft.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.topLeft.image.url"},e),scale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.topLeft.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:n,default:i?eg:void 0,name:"badges.topLeft.stroke.color"},e),width:t.createAttribute(!0,{storage:n,default:i?Ac:void 0,name:"badges.topLeft.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:"badges.topLeft.stroke.scalingMethod"},e)},text:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.topLeft.text.content"},e),color:t.createAttribute(!0,{storage:n,default:i?ig:void 0,name:"badges.topLeft.text.color"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"badges.topLeft.text.font"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"badges.topLeft.text.style"},e),scale:t.createAttribute(!0,{storage:n,default:i?.5:void 0,name:"badges.topLeft.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.topLeft.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.topLeft.text.paddging.top"},e)}},topRight:{color:t.createAttribute(!0,{storage:n,default:i?tg:void 0,name:"badges.topRight.color"},e),scale:t.createAttribute(!0,{storage:n,default:i?.45:void 0,name:"badges.topRight.scale"},e),positionScale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.topRight.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?nm:void 0,name:"badges.topRight.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.topRight.image.url"},e),scale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.topRight.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:n,default:i?eg:void 0,name:"badges.topRight.stroke.color"},e),width:t.createAttribute(!0,{storage:n,default:i?Ac:void 0,name:"badges.topRight.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:"badges.topRight.stroke.scalingMethod"},e)},text:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.topRight.text.content"},e),color:t.createAttribute(!0,{storage:n,default:i?ig:void 0,name:"badges.topRight.text.color"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"badges.topRight.text.font"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"badges.topRight.text.style"},e),scale:t.createAttribute(!0,{storage:n,default:i?.5:void 0,name:"badges.topRight.text.scale"},e),paddingTop:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.topRight.text.paddging.left"},e),paddingLeft:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.topRight.text.paddging.top"},e)}},bottomLeft:{color:t.createAttribute(!0,{storage:n,default:i?tg:void 0,name:"badges.bottomLeft.color"},e),scale:t.createAttribute(!0,{storage:n,default:i?.45:void 0,name:"badges.bottomLeft.scale"},e),positionScale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.bottomLeft.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?nm:void 0,name:"badges.bottomLeft.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.bottomLeft.image.url"},e),scale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.bottomLeft.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:n,default:i?eg:void 0,name:"badges.bottomLeft.stroke.color"},e),width:t.createAttribute(!0,{storage:n,default:i?Ac:void 0,name:"badges.bottomLeft.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:e?"badges.bottomLeft.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.bottomLeft.text.content"},e),color:t.createAttribute(!0,{storage:n,default:i?ig:void 0,name:"badges.bottomLeft.text.color"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"badges.bottomLeft.text.font"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"badges.bottomLeft.text.style"},e),scale:t.createAttribute(!0,{storage:n,default:i?.5:void 0,name:"badges.bottomLeft.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.bottomLeft.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.bottomLeft.text.paddging.top"},e)}},bottomRight:{color:t.createAttribute(!0,{storage:n,default:i?tg:void 0,name:"badges.bottomRight.color"},e),scale:t.createAttribute(!0,{storage:n,default:i?.45:void 0,name:"badges.bottomRight.scale"},e),positionScale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.bottomRight.positionScale"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?nm:void 0,name:"badges.bottomRight.minVisibleSize"},e),image:{url:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.bottomRight.image.url"},e),scale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"badges.bottomRight.image.scale"},e)},stroke:{color:t.createAttribute(!0,{storage:n,default:i?eg:void 0,name:"badges.bottomRight.stroke.color"},e),width:t.createAttribute(!0,{storage:n,default:i?Ac:void 0,name:"badges.bottomRight.stroke.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:e?"badges.bottomRight.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"badges.bottomRight.text.content"},e),color:t.createAttribute(!0,{storage:n,default:i?ig:void 0,name:"badges.bottomRight.text.color"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"badges.bottomRight.text.font"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"badges.bottomRight.text.style"},e),scale:t.createAttribute(!0,{storage:n,default:i?.5:void 0,name:"badges.bottomRight.text.scale"},e),paddingLeft:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.bottomRight.text.paddging.left"},e),paddingTop:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"badges.bottomRight.text.paddging.top"},e)}}},halo:{color:t.createAttribute(!0,{storage:n,default:i?AM:void 0,name:"halo.color"},e),width:t.createAttribute(!0,{storage:n,default:i?ub:void 0,name:"halo.width"},e),scalingMethod:t.createAttribute(!0,{storage:n,default:i?"fixed":void 0,name:"halo.scalingMethod"},e),strokeColor:t.createAttribute(!0,{storage:n,default:i?TM:void 0,name:"halo.strokeColor"},e),strokeWidth:t.createAttribute(!0,{storage:n,default:i?hb:void 0,name:"halo.strokeWidth"},e),clustering:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"halo.clustering"},e),hideNonAdjacentEdges:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"halo.hideNonAdjacentEdges"},e)},pulse:{enabled:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"pulse.enabled"},e),duration:t.createAttribute(!0,{storage:n,default:i?LM:void 0,name:"pulse.duration"},e),interval:t.createAttribute(!0,{storage:n,default:i?CM:void 0,name:"pulse.interval"},e),startColor:t.createAttribute(!0,{storage:n,default:i?OM:void 0,name:"pulse.startColor"},e),endColor:t.createAttribute(!0,{storage:n,default:i?RM:void 0,name:"pulse.endColor"},e),width:t.createAttribute(!0,{storage:n,default:i?IM:void 0,name:"pulse.width"},e),startRatio:t.createAttribute(!0,{storage:n,default:i?MM:void 0,name:"pulse.startRatio"},e),endRatio:t.createAttribute(!0,{storage:n,default:i?NM:void 0,name:"pulse.endRatio"},e)},icon:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"icon.content"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"icon.font"},e),color:t.createAttribute(!0,{storage:n,default:i?wM:void 0,name:"icon.color"},e),scale:t.createAttribute(!0,{storage:n,default:i?.7:void 0,name:"icon.scale"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"icon.style"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?12:void 0,name:"icon.minVisibleSize"},e)},image:{url:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"image.url"},e),scale:t.createAttribute(!0,{storage:n,default:i?1:void 0,name:"image.scale"},e),fit:t.createAttribute(!0,{storage:n,default:!!i||void 0,name:"image.fit"},e),tile:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"image.tile"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?12:void 0,name:"image.minVisibleSize"},e)},outline:{enabled:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"outline.enabled"},e),color:t.createAttribute(!0,{storage:n,default:i?SM:void 0,name:"outline.color"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?12:void 0,name:"outline.minVisibleSize"},e)},text:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"text.content"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"text.font"},e),color:t.createAttribute(!0,{storage:n,default:i?Sh:void 0,name:"text.color"},e),size:t.createAttribute(!0,{storage:n,default:i?Dc:void 0,name:"text.size"},e),scale:t.createAttribute(!0,{storage:n,default:i?.1:void 0,name:"text.scale"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"text.style"},e),align:t.createAttribute(!0,{storage:n,default:i?"center":void 0,name:"text.align"},e),margin:t.createAttribute(!0,{storage:n,default:i?rb:void 0,name:"text.margin"},e),padding:t.createAttribute(!0,{storage:n,default:i?Rg:void 0,name:"text.padding"},e),backgroundColor:t.createAttribute(!0,{storage:n,default:i?rp:void 0,name:"text.backgroundColor"},e),tip:t.createAttribute(!0,{storage:n,default:i?NB:void 0,name:"text.tip"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?24:void 0,name:"text.minVisibleSize"},e),scaling:t.createAttribute(!0,{storage:n,default:!i&&void 0,name:"text.scaling"},e),position:t.createAttribute(!0,{storage:n,default:i?"bottom":void 0,name:"text.position"},e),maxLineLength:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"text.maxLineLength"},e),truncateLength:t.createAttribute(!0,{storage:n,default:i?0:void 0,name:"text.truncateLength"},e),secondary:{content:t.createAttribute(!0,{storage:n,default:i?null:void 0,name:"text.secondary.content"},e),font:t.createAttribute(!0,{storage:n,default:i?bo:void 0,name:"text.secondary.font"},e),color:t.createAttribute(!0,{storage:n,default:i?Sh:void 0,name:"text.secondary.color"},e),size:t.createAttribute(!0,{storage:n,default:i?ob:void 0,name:"text.secondary.size"},e),scale:t.createAttribute(!0,{storage:n,default:i?.08:void 0,name:"text.secondary.scale"},e),style:t.createAttribute(!0,{storage:n,default:i?"normal":void 0,name:"text.secondary.style"},e),align:t.createAttribute(!0,{storage:n,default:i?"center":void 0,name:"text.secondary.align"},e),margin:t.createAttribute(!0,{storage:n,default:i?RB:void 0,name:"text.secondary.margin"},e),padding:t.createAttribute(!0,{storage:n,default:i?Rg:void 0,name:"text.secondary.padding"},e),backgroundColor:t.createAttribute(!0,{storage:n,default:i?rp:void 0,name:"text.secondary.backgroundColor"},e),minVisibleSize:t.createAttribute(!0,{storage:n,default:i?24:void 0,name:"text.secondary.minVisibleSize"},e)}}}}var gU=class{constructor(t){this.nodes=new O1(t,!0,fU),this.edges=new O1(t,!1,cU)}setNodeDefaultAttributes(t){this.nodes.setDefaultAttributes(t)}setEdgeDefaultAttributes(t){this.edges.setDefaultAttributes(t)}getFlexArrays(){return{nodes:{current:this.nodes.getAttributeFlexArrays(),previous:this.nodes.getPrevAttributeFlexArrays()},edges:{current:this.edges.getAttributeFlexArrays(),previous:this.edges.getPrevAttributeFlexArrays()}}}redrawAll(){this.nodes.redrawAll(),this.edges.redrawAll()}clear(){this.nodes.clear(),this.edges.clear()}redrawElements(t){this._fetch(t).redrawElements(t)}getAnimationInformation(t){return this._fetch(t).getAnimationInformation(t)}redrawNodes(t){this.nodes.redrawElements(t)}getUsedAttributes(t,e){return this._fetch(e).getUsedAttributeNames(e.isNode?t.nodes:t.edges)}startUpdate(){this.nodes.startUpdate(),this.edges.startUpdate()}notifyDestroyed(t){this.nodes.notifyLayerDestroyed(t.nodes),this.edges.notifyLayerDestroyed(t.edges)}prepareUpdate(t){this.nodes.prepareFlexArraysUpdate(t.nodes),this.edges.prepareFlexArraysUpdate(t.edges)}onUpdate(t){this.nodes.updateFlexArrays(t.nodes),this.edges.updateFlexArrays(t.edges)}afterLayersUpdate(){this.nodes.endUpdate(),this.edges.endUpdate()}getAndResetElementsToRedraw(){return{nodes:this.nodes.getAndResetElementsToRedraw(),edges:this.edges.getAndResetElementsToRedraw()}}getAndResetElementsUpdated(){const t=this.nodes,e=this.edges;return{nodes:t.getAndResetElementsUpdated(),edges:e.getAndResetElementsUpdated(),nodeAttributesSet:t.getUpdatedAttributesSet(),nodeAttributes:t.getAndResetAttributesUpdated(),edgeAttributes:e.getAndResetAttributesUpdated()}}setAnimationAttributes({nodes:t,edges:e},i){this.nodes.setAnimationAttributes(t,i),this.edges.setAnimationAttributes(e,i)}resetAnimationAttributes({nodes:t,edges:e}){this.nodes.resetAnimationAttributes(t),this.edges.resetAnimationAttributes(e)}setLastOutput(t,e){this.nodes.setLastFlexArrays(t),this.edges.setLastFlexArrays(e)}getCurrentInput(){const t=ps(this.nodes.getDefaultFlexArrays()),e=ps(this.edges.getDefaultFlexArrays());return{currentNodeFlexArrays:t,currentEdgeFlexArrays:e,allNodeAttributePaths:vd(t),allEdgeAttributePaths:vd(e)}}initializeLayer(t,e,i){t.nodes.allAttributePaths=e,t.edges.allAttributePaths=i,t.nodes.formattedDependencies=aU(t.nodes),t.edges.formattedDependencies=lU(t.edges),t.nodes.formattedOutput={attributes:N1(t.nodes),tags:t.tag?[t.tag]:[]},t.edges.formattedOutput={attributes:N1(t.edges),tags:t.tag?[t.tag]:[]},t.nodes.redrawAdjacentEdges=t.nodes.formattedOutput.attributes.some(n=>MB[n]),t.initialized=!0}connectLayerInputOutput(t,e,i){const n=t.nodes.formattedOutput,s=t.edges.formattedOutput;for(const r of n.attributes){const a=_s(e,r),u=_s(t.nodes.outputFlexArrays,r);u.setFallback(a),_u(e,r,u)}for(const r of s.attributes){const a=_s(i,r),u=_s(t.edges.outputFlexArrays,r);u.setFallback(a),_u(i,r,u)}}setupLayerDependencies(t,e){if(t===e)return;const i=t.priority,n=e.priority,s=t.nodes.formattedOutput,r=t.edges.formattedOutput,a=e.nodes.formattedDependencies,u=e.edges.formattedDependencies;Il(t.depsNodeSelf,e,s,a.self,i,n),Il(t.depsNodeAdjacentNodes,e,s,a.adjacentNodes,i,n),Il(t.depsNodeAdjacentEdges,e,r,u.extremities,i,n),Il(t.depsNodeAllNodes,e,s,a.allNodes,i,n),Il(t.depsNodeAllEdges,e,r,u.allNodes,i,n),Il(t.depsEdgeSelf,e,r,u.self,i,n),Il(t.depsEdgeExtremities,e,s,a.adjacentEdges,i,n),Il(t.depsEdgeParallelEdges,e,r,u.parallelEdges,i,n),Il(t.depsEdgeAllNodes,e,s,a.allEdges,i,n),Il(t.depsEdgeAllEdges,e,r,u.allEdges,i,n)}createAttributeLayerData(t,e,i,{tag:n,onBeforeUpdate:s,standaloneSelectors:r}){const a=!!r;return{index:-1,id:e,name:t,tag:n||null,priority:0,depsNodeSelf:[],depsNodeAdjacentNodes:[],depsNodeAdjacentEdges:[],depsNodeAllNodes:[],depsNodeAllEdges:[],depsEdgeSelf:[],depsEdgeExtremities:[],depsEdgeParallelEdges:[],depsEdgeAllNodes:[],depsEdgeAllEdges:[],initialized:!1,onBeforeUpdate:s,nodes:{type:"node",name:t,standaloneSelector:a,toUpdate:new ap({graph:i,isNode:!0,includeRemovedElements:!1}),outputFlexArrays:this.nodes.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null},edges:{type:"edge",name:t,standaloneSelector:a,toUpdate:new ap({graph:i,isNode:!1,includeRemovedElements:!1}),outputFlexArrays:this.edges.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null}}}setAttributeValues(t,e,i,n,s){this._fetch(e).setAttributeValues(t,e,i,n,s)}getAttributeValues(t,e,i,n){return this._fetch(t).getAttributeValues(t,e,i,n)}_fetch(t){return t.isNode?this.nodes:this.edges}},_U=(t,e)=>new pB(t,e),mU=class{constructor(t,{graph:e,dom:i}){this._layerIdCounter=0,this._layers=[],this._destroyedLayers=[],this._layersNeedUpdate=!1,this._updateOngoing=!1,this._needUpdate=!1,this._ogma=t,this._graph=e,this._dom=i,this._emptySubgraph={nodes:t.nodeList(),edges:t.edgeList()},this._textHiddenSet=new Kg(this._graph,"textHidden"),this._layerController=new gU(this._graph)}_getLayerById(t){for(let e=0;e<this._layers.length;++e){const i=this._layers[e];if(i.id===t)return i.index=e,i}throw new Error("usage of a destroyed style rule or class")}setDefaultAttributes(t,e){this._layerController.setNodeDefaultAttributes(t),this._layerController.setEdgeDefaultAttributes(e)}getFlexArrays(){return this._layerController.getFlexArrays()}clear(){this._updateOngoing=!1,this._needUpdate=!1,this._destroyedLayers=[],this._layerController.clear(),this.updateAllForAllAttributeLayers()}redrawElements(t){t.size&&(this._layerController.redrawElements(t),this._dom.refresh())}redrawAll(){this._layerController.redrawAll(),this._dom.refresh()}_triggerUpdate(){this._needUpdate=!0,this._dom.refresh()}_reconstructAttributeLayersIfNecessary(){return!!this._layersNeedUpdate&&(this._reconstructAttributeLayers(),this._layersNeedUpdate=!1,this._dom.refresh(),!0)}getAnimationInformation(t){return this._layerController.getAnimationInformation(t)}update(){if(!this._needUpdate||this._updateOngoing||!this._ogma._token)return!1;this._reconstructAttributeLayersIfNecessary(),this._updateOngoing=!0,this._layerController.startUpdate();for(const t of this._destroyedLayers)t.initialized&&this._layerController.notifyDestroyed(t);for(const t of this._layers)this._layerController.prepareUpdate(t),typeof t.onBeforeUpdate=="function"&&t.onBeforeUpdate(t,this,this._layerController),this._layerController.onUpdate(t);return this._layerController.afterLayersUpdate(),this._updateOngoing=!1,this._needUpdate=!1,!0}setAttributeLayerValues(t,e,i,n){const s=this._getLayerById(t),r=e.isNode?s.nodes:s.edges;this._reconstructAttributeLayersIfNecessary(),this._layerController.setAttributeValues(r,e,i,n,s),this._updateElementsForAttributeLayers([s],e)}getAttributeLayerFlexArrays(t){const e=this._getLayerById(t);return{nodes:e.nodes.outputFlexArrays,edges:e.edges.outputFlexArrays}}getUsedAttributeLayerAttributes(t,e){const i=this._getLayerById(t);return this._layerController.getUsedAttributes(i,e)}getUpdatedElements(){return{elementsToRedraw:this._layerController.getAndResetElementsToRedraw(),elementsUpdated:this._layerController.getAndResetElementsUpdated()}}addAttributeLayer(t){const{name:e,layerFactory:i=_U}=t;if(!e)throw new Error("Attribute layer must have a name");if(e&&this._layers.find(s=>s.name===e))throw new Error(`attribute layer with name "${t.name}" already exists`);const n=this._layerController.createAttributeLayerData(e,++this._layerIdCounter,this._graph,t);return this._layers.push(n),this._updateLayer(n,t),i(this,this._layerIdCounter)}_reconstructAttributeLayers(){this._layers.sort((s,r)=>s.priority-r.priority);const{currentNodeFlexArrays:t,currentEdgeFlexArrays:e,allNodeAttributePaths:i,allEdgeAttributePaths:n}=this._layerController.getCurrentInput();for(const s of this._layers)this._layerController.initializeLayer(s,i,n);for(const s of this._layers){s.nodes.inputFlexArrays=ps(t),s.edges.inputFlexArrays=ps(e),s.depsNodeSelf=[],s.depsNodeAdjacentNodes=[],s.depsNodeAdjacentEdges=[],s.depsNodeAllNodes=[],s.depsNodeAllEdges=[],s.depsEdgeSelf=[],s.depsEdgeExtremities=[],s.depsEdgeParallelEdges=[],s.depsEdgeAllNodes=[],s.depsEdgeAllEdges=[],s.nodes.toUpdate.addAll(),s.edges.toUpdate.addAll(),this._layerController.connectLayerInputOutput(s,t,e);for(const r of this._layers)this._layerController.setupLayerDependencies(s,r)}this._layerController.setLastOutput(t,e);for(const s of this._layers)s.nodes.needAdjacentElements=s.nodes.redrawAdjacentEdges||s.depsNodeAdjacentNodes.length>0||s.depsNodeAdjacentEdges.length>0,s.edges.needAdjacentElements=s.depsEdgeExtremities.length>0||s.depsEdgeParallelEdges.length>0}_updateLayer(t,{priority:e,fullOverwrite:i,nodeAttributes:n,nodeSelector:s,nodeContext:r,nodeDependencies:a,nodeOutput:u,edgeAttributes:h,edgeSelector:c,edgeContext:g,edgeDependencies:_,edgeOutput:m}={}){n!==void 0&&(t.nodes.attributes=i?n:Pm(t.nodes.attributes,n)),s!==void 0&&(t.nodes.selector=s),r!==void 0&&(t.nodes.context=r),a!==void 0&&(t.nodes.dependencies=a),u!==void 0&&(t.nodes.output=u),h!==void 0&&(t.edges.attributes=i?h:Pm(t.edges.attributes,h)),c!==void 0&&(t.edges.selector=c),g!==void 0&&(t.edges.context=g),_!==void 0&&(t.edges.dependencies=_),m!==void 0&&(t.edges.output=m),e!==void 0&&(t.priority=e),this._triggerLayerUpdate()}_triggerLayerUpdate(){this._layersNeedUpdate=!0,this._triggerUpdate()}updateAllForAttributeLayer(t){const e=this._getLayerById(t);this._updateAllForAttributeLayer(e)}updateAllForAllAttributeLayers(){for(const t of this._layers)this._updateAllForAttributeLayer(t)}_updateAllForAttributeLayer(t,e=!0,i=!0){if(e&&!t.nodes.toUpdate.isFull()){t.nodes.toUpdate.addAll();for(const n of t.depsNodeSelf)this._updateAllForAttributeLayer(n,!0,!1);for(const n of t.depsNodeAdjacentNodes)this._updateAllForAttributeLayer(n,!0,!1);for(const n of t.depsNodeAdjacentEdges)this._updateAllForAttributeLayer(n,!1,!0);for(const n of t.depsNodeAllNodes)this._updateAllForAttributeLayer(n,!0,!1);for(const n of t.depsNodeAllEdges)this._updateAllForAttributeLayer(n,!1,!0)}if(i&&!t.edges.toUpdate.isFull()){t.edges.toUpdate.addAll();for(const n of t.depsEdgeSelf)this._updateAllForAttributeLayer(n,!1,!0);for(const n of t.depsEdgeExtremities)this._updateAllForAttributeLayer(n,!0,!1);for(const n of t.depsEdgeParallelEdges)this._updateAllForAttributeLayer(n,!1,!0);for(const n of t.depsEdgeAllNodes)this._updateAllForAttributeLayer(n,!0,!1);for(const n of t.depsEdgeAllEdges)this._updateAllForAttributeLayer(n,!1,!0)}this._triggerUpdate()}updateElementsForAttributeLayer(t,e){const i=this._getLayerById(t);this._updateElementsForAttributeLayers([i],e)}updateForAllAttributeLayers(t){this._updateElementsForAttributeLayers(this._layers,t)}_updateElementsForAttributeLayers(t,e){let i=this._emptySubgraph;if(e.isNode){for(const n of t)if(!n.nodes.toUpdate.isFull()){n.nodes.needAdjacentElements&&(i=i===this._emptySubgraph?e.fastGetAdjacentElements():i),n.nodes.toUpdate.add(e);for(const s of n.depsNodeSelf)s.nodes.toUpdate.add(e);for(const s of n.depsNodeAdjacentNodes)s.nodes.toUpdate.add(i.nodes);for(const s of n.depsNodeAdjacentEdges)s.edges.toUpdate.add(i.edges);for(const s of n.depsNodeAllNodes)this._updateAllForAttributeLayer(s,!0,!1);for(const s of n.depsNodeAllEdges)this._updateAllForAttributeLayer(s,!1,!0);n.nodes.redrawAdjacentEdges&&this._layerController.redrawElements(i.edges)}}else for(const n of t)if(!n.edges.toUpdate.isFull()){n.edges.needAdjacentElements&&(i=i===this._emptySubgraph?e.fastGetAdjacentElements():i),n.edges.toUpdate.add(e);for(const s of n.depsEdgeSelf)s.edges.toUpdate.add(e);for(const s of n.depsEdgeExtremities)s.nodes.toUpdate.add(i.nodes);for(const s of n.depsEdgeParallelEdges)s.edges.toUpdate.add(i.edges);for(const s of n.depsEdgeAllNodes)this._updateAllForAttributeLayer(s,!0,!1);for(const s of n.depsEdgeAllEdges)this._updateAllForAttributeLayer(s,!1,!0)}this._triggerUpdate()}destroyAttributeLayer(t){const e=this._getLayerById(t);this._destroyedLayers.push(e),this._layers.splice(e.index,1),this._triggerLayerUpdate()}updateAttributeLayer(t,e){const i=this._getLayerById(t);this._updateLayer(i,e)}getAttributeLayerDefinition(t){const e=this._getLayerById(t),{priority:i,nodes:n,edges:s}=e;return{priority:i,nodeAttributes:n.attributes,nodeSelector:n.selector,nodeContext:n.context,nodeDependencies:n.dependencies,nodeOutput:n.output,edgeAttributes:s.attributes,edgeSelector:s.selector,edgeContext:s.context,edgeDependencies:s.dependencies,edgeOutput:s.output}}getAttributeValues(t,e,i,n){return this.update(),this._layerController.getAttributeValues(t,e,i,n)}setAnimationAttributes(t,e){return this._layerController.setAnimationAttributes(t,e)}resetAnimationAttributes(t){return this._layerController.resetAnimationAttributes(t)}setTextHidden(t,e){const i=this._textHiddenSet.addOrRemoveElements(t,e);this.redrawElements(i)}resetTextHidden(){const{nodes:t,edges:e}=this._textHiddenSet.getElements();this._textHiddenSet.clear(),this._layerController.redrawElements(t),this._layerController.redrawElements(e)}getUsedNodeAttributes(){return this._layerController.nodes.getUsedAttributes()}getUsedEdgeAttributes(){return this._layerController.edges.getUsedAttributes()}interpolateAttributes(t){const e=eo(),i=this._ogma.modules.graphics.getAttributesManager(),n=this._layerController,s=t.isNode?i.getUsedNodeAttributes():i.getUsedEdgeAttributes(),{animationDuration:r,animationEasing:a,animationStart:u}=n.getFlexArrays().nodes.current,h=r.getMultiple(t._indexes),c=a.getMultiple(t._indexes),g=u.getMultiple(t._indexes),_=[];for(let m=0;m<t.size;m++){const v={};s.forEach(b=>{const x=typeof b=="string"?b:b.join("."),M=_s(n.getFlexArrays().nodes.previous,b),N=_s(n.getFlexArrays().nodes.current,b);if(!N)return;const O=QL(e,g[m],h[m],c[m]);isNaN(O)?v[x]=N.get(t._indexes[m]):x.match(/color/gi)?v[x]=Jf(M.get(t._indexes[m]),N.get(t._indexes[m]),O,O):v[x]=_n(M.get(t._indexes[m]),N.get(t._indexes[m]),O)}),_.push(v)}return _}},pU=1e-12;function I1(t){return((t=Math.exp(t))+1/t)/2}function yU(t){return((t=Math.exp(t))-1/t)/2}function vU(t){return((t=Math.exp(2*t))-1)/(t+1)}var xU=function t(e,i,n){function s(r,a){var u,h,c=r[0],g=r[1],_=r[2],m=a[0],v=a[1],b=a[2],x=m-c,M=v-g,N=x*x+M*M;if(N<pU)h=Math.log(b/_)/e,u=function(V){return[c+V*x,g+V*M,_*Math.exp(e*V*h)]};else{var O=Math.sqrt(N),R=(b*b-_*_+n*N)/(2*_*i*O),P=(b*b-_*_-n*N)/(2*b*i*O),F=Math.log(Math.sqrt(R*R+1)-R),U=Math.log(Math.sqrt(P*P+1)-P);h=(U-F)/e,u=function(V){var Y=V*h,K=I1(F),tt=_/(i*O)*(K*vU(e*Y+F)-yU(F));return[c+tt*x,g+tt*M,_*K/I1(e*Y+F)]}}return u.duration=1e3*h*e/Math.SQRT2,u}return s.rho=function(r){var a=Math.max(.001,+r),u=a*a;return t(a,u,u*u)},s}(Math.SQRT2,2,4),bU="cubicOut",EU=({graphWidth:t,graphHeight:e,viewWidth:i,viewHeight:n})=>.2*Math.min(i/t,n/e),SU=({smallestNodeSize:t,viewWidth:e,viewHeight:i})=>t===1/0?1/0:Math.min(e,i)/t*.5;function AU(t,e,i){return e===void 0?TU(t):e==="alt"?t.altKey:e==="shift"?t.shiftKey:e==="space"?i.isPressed("space"):void 0}function TU(t){return!t.altKey&&(EO?t.metaKey:t.ctrlKey)&&!t.shiftKey}var Bx=Math.SQRT2,P1=.15,wU=class extends li{constructor(t,e){super(t),this._zooming=!1,this.debug=!1,this._smoothZoom=_p((i,n,s)=>{const r=this._modules.settings,a=r.get("interactions.zoom.duration"),u=r.get("interactions.zoom.easing"),h=this._modules.camera.getZoom(),c={duration:a,easing:u};this._zooming||(this._zooming=!0,this._updateVisibility("zoom",!0));const g=r.get("interactions.zoom.speed")||P1;let _=Bk(i,g);i<0&&_!==0&&(_=1/_);const m=h*_;this._modules.camera.setZoom(m,c,{x:n,y:s}).then(()=>{this._zooming&&(this._zooming=!1,this._updateVisibility("zoom",!1))})},t2),this.debug=e}onMounted(){const t=this._modules.settings;t.register("interactions.zoom.enabled",!0),t.register("interactions.zoom.onDoubleClick",!1),t.register("interactions.zoom.duration",150),t.register("interactions.zoom.modifier",Bx),t.register("interactions.zoom.speed",P1),t.register("interactions.zoom.easing",bU),t.register("interactions.zoom.minValue",this.debug?null:EU),t.register("interactions.zoom.maxValue",this.debug?null:SU),t.register("interactions.zoom.hideNodes",!1),t.register("interactions.zoom.hideEdges",!1),t.register("interactions.zoom.hideNodeTexts",!1),t.register("interactions.zoom.hideEdgeTexts",!1),t.register("interactions.zoom.scrollToPan",!1),t.register("interactions.zoom.metaKey",void 0),t.register("interactions.pan.enabled",!0),t.register("interactions.pan.hideNodes",!1),t.register("interactions.pan.hideEdges",!1),t.register("interactions.pan.hideNodeTexts",!1),t.register("interactions.pan.hideEdgeTexts",!1),t.register("interactions.rotation.enabled",!0),t.register("interactions.rotation.hideNodes",!1),t.register("interactions.rotation.hideEdges",!1),t.register("interactions.rotation.hideNodeTexts",!1),t.register("interactions.rotation.hideEdgeTexts",!1),t.register("interactions.gesture.enabled",!0),t.register("interactions.gesture.hideNodes",!1),t.register("interactions.gesture.hideEdges",!1),t.register("interactions.gesture.hideNodeTexts",!1),t.register("interactions.gesture.hideEdgeTexts",!1),this._setupInteractions()}_setupInteractions(){this._modules.interactions.onMouseWheel({priority:"zoom",check:()=>!!this._modules.settings.get("interactions.zoom.enabled"),handler:({x:t,y:e,delta:i,dx:n,dy:s,domEvent:r})=>{const a=n%1!=0||s%1!=0,u=this._modules.settings;!u.get("interactions.zoom.scrollToPan")||AU(r,u.get("interactions.zoom.metaKey"),this._modules.keyboard)||a?this._smoothZoom(i,t,e):this._modules.camera.move({x:n,y:s})}}),this._modules.interactions.onDoubleClick({priority:"zoom",check:()=>{const t=this._modules.settings.get("interactions.zoom.enabled"),e=this._modules.settings.get("interactions.zoom.onDoubleClick");return!(!t||!e)},handler:({x:t,y:e})=>this._smoothZoom(1,t,e)}),this._modules.interactions.onDrag({priority:"panning",disableDetection:!0,check:({button:t})=>{const e=!!this._modules.settings.get("interactions.pan.enabled");return t==="left"&&e},onStart:()=>this._updateVisibility("pan",!0),onProgress:({dx:t,dy:e})=>this._modules.camera.move({x:-t,y:-e}),onStop:()=>this._updateVisibility("pan",!1)}),this._modules.interactions.onDrag({priority:"rotation",disableDetection:!0,check:({button:t,domEvent:e})=>(t==="right"||e&&e.buttons===2)&&!!this._modules.settings.get("interactions.rotation.enabled"),onStart:({x:t,y:e})=>{this._rotationStart={x:t,y:e},this._updateVisibility("rotation",!0)},onProgress:({x:t,y:e})=>this._rotate({x:t,y:e}),onStop:()=>this._updateVisibility("rotation",!1)}),this._modules.interactions.onGesture({priority:"gesture",disableDetection:!0,check:()=>!!this._modules.settings.get("interactions.gesture.enabled"),onStart:()=>this._updateVisibility("gesture",!0),onProgress:({dx:t,dy:e,rotation:i,scale:n,x:s,y:r})=>{this._modules.settings.get("interactions.rotation.enabled")&&this._modules.camera.rotate(-i),this._modules.camera.zoomIn({modifier:n},{x:s,y:r}),this._modules.camera.move({x:-t,y:-e})},onStop:()=>this._updateVisibility("gesture",!0)})}_rotate({x:t,y:e}){const{width:i,height:n}=this._modules.camera.getSize(),s=i/2,r=n/2,a=this._rotationStart.x-s,u=this._rotationStart.y-r,h=t-s,c=e-r,g=Math.atan2(u,a)-Math.atan2(c,h);this._rotationStart.x=t,this._rotationStart.y=e,this._modules.camera.rotate(g)}_updateVisibility(t,e){const i=!e,n=this._modules.settings,s=n.get(`interactions.${t}.hideNodes`),r=n.get(`interactions.${t}.hideEdges`),a=n.get(`interactions.${t}.hideNodeTexts`),u=n.get(`interactions.${t}.hideEdgeTexts`);s&&this._modules.graphics.setNodesVisibility(i),a&&this._modules.graphics.setNodeTextsVisibility(i),r&&this._modules.graphics.setEdgesVisibility(i),u&&this._modules.graphics.setEdgeTextsVisibility(i)}},z1=1e-8,D1=1e8,Ev={duration:0,startAfter:0,ignoreZoomLimits:!1,callback:Ci,easing:"quadraticOut"};function hm(t){return Math.abs(t)<1e-9}var LU=80,CU=class FM extends li{constructor(){super(...arguments),this._minZoom=z1,this._maxZoom=D1,this._timeout=0,this._cornerCosSin=new Float32Array([0,0,0,0,0,0,0,0])}onMounted(){this._reset(),this._modules.settings.register("minZoom",z1,e=>{this._minZoom=e,this._zoom<e&&(this._zoom=e,this._modules.events.fire("move"))}),this._modules.settings.register("maxZoom",D1,e=>{this._maxZoom=e,this._zoom>e&&(this._zoom=e,this._modules.events.fire("move"))}),this._modules.events.on("setContainer",()=>{this._reset(),this._modules.events.fire("move")}).on("resize",()=>{this._reloadDimensions(),this._modules.events.fire("move")})}get x(){return this._x}get y(){return this._y}get zoom(){return this._zoom}get angle(){return this._angle}get width(){return this._dimensions.width}get height(){return this._dimensions.height}moveEnd(e){this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._modules.events.fire("viewChanged",{type:e})},LU)}getSize(){return{width:this._dimensions.width,height:this._dimensions.height}}getCenter(){return{x:this._x,y:this._y}}setCenter({x:e,y:i},n){const s=this._x,r=this._y,a=e-this._x,u=i-this._y;return hm(a)&&hm(u)?Promise.resolve():new Promise(h=>{this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const c=this._modules.animations.play(g=>{this._x=s+a*g,this._y=r+u*g,this._modules.events.fire("move").fire("pan")},{...Ev,...n,callback:()=>this.moveEnd("pan"),resolve:h});c&&(this._moveAnimation=c)})}move({x:e,y:i},n){const s=k1({x:e,y:i},this._zoom,this._sinAngle,this._cosAngle);return this.setCenter({x:this._x+s.x,y:this._y+s.y},n)}getZoom(){return this._zoom}setZoom(e,i,n={x:void 0,y:void 0}){const{x:s,y:r}=n;let a=Ia(e,this._minZoom,this._maxZoom);return i&&i.ignoreZoomLimits||(a=this._applyZoomLimits(a)),hm(this._zoom-a)?Promise.resolve():new Promise(u=>{const h={...Ev,...i,callback:()=>this.moveEnd("zoom"),resolve:u},c=this._dimensions.width/2,g=this._dimensions.height/2,_=this._zoom,m=c/_-c/a;if(s!==void 0&&r!==void 0){const b=(s-c)/_-(s-c)/a,x=(r-g)/_-(r-g)/a,M=this._cosAngle,N=this._sinAngle,O=M*b-N*x,R=N*b+M*x;this.setCenter({x:this._x+O,y:this._y+R},i)}this._zoomAnimation&&this._modules.animations.cancel(this._zoomAnimation),this._modules.dom.afterNextFrame().then(()=>{this._modules.events.fire("zoomStart",{duration:h.duration,easing:h.easing,startZoom:_,endZoom:a})});const v=this._modules.animations.play(b=>{this._zoom=c/(c/_-m*b),this._modules.events.fire("move").fire("zoom")},h);v&&(this._zoomAnimation=v)})}_applyZoomLimits(e){const i=this._modules.settings.get("interactions.zoom.minValue"),n=this._modules.settings.get("interactions.zoom.maxValue"),{minScaledSize:s,maxScaledSize:r,width:a,height:u,cx:h}=this._modules.locate.getGraphBoundingBox(),c=this._zoom,g=this.getSize();let _=e;if(!isNaN(h)){const m={smallestNodeSize:s,biggestNodeSize:r,graphWidth:a+r,graphHeight:u+r,viewWidth:g.width,viewHeight:g.height},v=i&&i(m),b=n&&n(m);F1(v)&&_<v?_<c&&(_=Math.min(c,v)):F1(b)&&_>b&&_>c&&(_=Math.max(c,b))}return _}zoomIn(e,i={x:void 0,y:void 0}){let n=1;return e===void 0&&(e={}),typeof e=="number"&&(e={modifier:e}),n=typeof e.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Bx:e.modifier,this.setZoom(this._zoom*n,e,i)}moveToBounds(e,i={}){const n=this._modules.locate.computeConfigForBounds(e,{ignoreZoomLimits:!0});return this.moveTo(n,i)}moveTo(e,i={}){const n=this.getZoom(),s=this.getCenter(),r=e.zoom||this._zoom;return i.duration===0?this.setView(e):new Promise(a=>{const u=Math.min(this.width,this.height),h=xU([s.x,s.y,u/n],[e.x,e.y,u/r]),c=h.duration,g=i.duration||c;this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const _=this._modules.animations.play(m=>{const[v,b,x]=h(m);this._x=v,this._y=b,this._zoom=u/x,this._modules.events.fire("move"),this._modules.events.fire("pan")},{duration:g,easing:i.easing,callback:()=>this.moveEnd("pan"),resolve:a});_&&(this._moveAnimation=_)})}zoomOut(e,i={x:void 0,y:void 0}){let n=1;return e===void 0&&(e={}),typeof e=="number"&&(e={modifier:e}),n=typeof e.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Bx:e.modifier,this.setZoom(this._zoom/n,e,i)}getAngle(){return this._angle}setAngle(e,i){const n=this._angle,s=e-n;return hm(s)?Promise.resolve():new Promise(r=>{this._rotateAnimation&&this._modules.animations.cancel(this._rotateAnimation);const a=this._modules.animations.play(u=>{for(this._angle=n+s*u,this.calculateBoxCornerAngles();this._angle>Math.PI;)this._angle-=2*Math.PI;for(;this._angle<-Math.PI;)this._angle+=2*Math.PI;this._sinAngle=Math.sin(this._angle),this._cosAngle=Math.cos(this._angle),this._modules.events.fire("move").fire("rotate")},{...Ev,...i,callback:()=>this.moveEnd("rotate"),resolve:r});a&&(this._rotateAnimation=a)})}rotate(e,i){return this.setAngle(this._angle+e,i)}getScreenCenter(){return{x:this._dimensions.width/2,y:this._dimensions.height/2}}graphToScreenCoordinates({x:e,y:i},n={x:0,y:0}){const s=this._dimensions.width/2,r=this._dimensions.height/2;return Wm((e-this._x)*this._zoom+s,(i-this._y)*this._zoom+r,s,r,-this._angle,n)}screenToGraphCoordinates({x:e,y:i},n={x:0,y:0}){return Wm(this._x+(e-this._dimensions.width/2)/this._zoom,this._y+(i-this._dimensions.height/2)/this._zoom,this._x,this._y,this._angle,n)}projectBounds(e,i=e){const n=e[0],s=e[1],r=e[2],a=e[3],u=this._x,h=this._y,c=this._dimensions.width/2,g=this._dimensions.height/2,_=this._sinAngle,m=this._cosAngle,v=1/this._zoom;let b=1/0,x=1/0,M=-1/0,N=-1/0;const O=[n,s,n,a,r,a,r,s];for(let R=0;R<O.length;R+=2){let P=O[R],F=O[R+1];P=u+(P-c)*v,F=h+(F-g)*v;const U=P-u,V=F-h;P=m*U-_*V+u,F=_*U+m*V+h,P<b&&(b=P),P>M&&(M=P),F<x&&(x=F),F>N&&(N=F)}return i[0]=b,i[1]=x,i[2]=M,i[3]=N,i}screenToGraphVector({x:e,y:i}){return k1({x:e,y:i},this._zoom,this._sinAngle,this._cosAngle)}getView(){return{x:this._x,y:this._y,zoom:this._zoom,angle:this._angle,width:this._dimensions.width,height:this._dimensions.height}}setView(e,i){const{x:n,y:s,zoom:r,angle:a}={x:this._x,y:this._y,zoom:this._zoom,angle:this._angle,...e};return Promise.all([this.setCenter({x:n,y:s},i),this.setZoom(r,i),this.setAngle(a,i)]).then(Ci)}_reloadDimensions(){this._dimensions=this._modules.dom.getDimensions()}animationInProgress(){const e=this._moveAnimation,i=this._zoomAnimation,n=this._rotateAnimation;return!!(e&&!e.done||i&&!i.done||n&&!n.done)}getProjectedScreenBounds(e=0){const{width:i,height:n}=this._dimensions,s=Math.max(i,n)*e;return this.projectBounds([0-s,0-s,i+s,n+s])}calculateBoxCornerAngles(){const e=this._angle;this._cornerCosSin[0]=Math.cos(e+Math.PI/4),this._cornerCosSin[1]=Math.sin(e+Math.PI/4),this._cornerCosSin[2]=Math.cos(e+3*Math.PI/4),this._cornerCosSin[3]=Math.sin(e+3*Math.PI/4),this._cornerCosSin[4]=Math.cos(e-3*Math.PI/4),this._cornerCosSin[5]=Math.sin(e-3*Math.PI/4),this._cornerCosSin[6]=Math.cos(e-Math.PI/4),this._cornerCosSin[7]=Math.sin(e-Math.PI/4)}getCornerCos(e){return this._cornerCosSin[2*e]}getCornerSin(e){return this._cornerCosSin[2*e+1]}_reset(){this._zoom=1,this._x=0,this._y=0,this._angle=0,this.calculateBoxCornerAngles(),this._sinAngle=0,this._cosAngle=1,this._dimensions=this._modules.dom.getDimensions()}clone(e){const i=new FM(this._ogma);return i._zoom=e.zoom||this._zoom,i._x=e.x||this._x,i._y=e.y||this._y,i._angle=e.angle||this._angle,i._sinAngle=Math.sin(i._angle),i._cosAngle=Math.cos(i._angle),i.calculateBoxCornerAngles(),i._dimensions={width:e.width||this._dimensions.width,height:e.height||this._dimensions.height},i}};function k1({x:t,y:e},i,n,s){return{x:s*(t/=i)-n*(e/=i),y:n*t+s*e}}function F1(t){return typeof t=="number"&&isFinite(t)}function MU(t){const e=t.filter(i=>isFinite(i)&&i>0);return e.length?cu(e):1}var NU="anonymous",RU="white",OU="default",IU={maxBlockId:1024,maxCoord:-1/0,maxScaledSize:16,maxPixelSize:255,maxMinVisibleSize:64,maxDashOffset:4,maxDashLength:3,maxGapLength:1,maxSymbolicSize:0,maxPatternScale:0},PU=vp?"webgl":null,B1=5,zU=class extends li{constructor(){super(...arguments),this._debug=!1,this._initDone=!1,this._boundaries={maxSize:10,maxMinVisibleSize:64},this._visibility={nodes:0,edges:0,nodeTexts:0,edgeTexts:0},this._nextAnimationId=1,this._animations=[],this._rendererState={type:null,code:null,state:"ok",message:""},this._cursorStyle=[],this._fontsNewlyLoaded=[],this._nextGeIndex=1,this._availableGeIndexes=[],this._renderOnNewFrame=!0,this._isBufferDisplayable=t=>{const e=l3(t),i=sC(t),n=e?this._visibility.nodes:this._visibility.edges,s=e?this._visibility.nodeTexts:this._visibility.edgeTexts;return n===0&&(!i||s===0)},this._onRendererChange=t=>{this._updateRendererState({type:t,state:"requested",code:null,message:void 0}),this._engine.setRenderType(t),this._modules.dom.refresh()},this._onNewFrame=()=>{this._processAnimations(),this._loadGraphInGraphicsEngine(),this._renderOnNewFrame&&this._render()},this._applyCursorStyle=()=>{const t=this._cursorStyle[this._cursorStyle.length-1]||this._modules.settings.get("cursor.default");Gm(this._domWrapper,t)},this._updateImageCrossOrigin=()=>{this._imageManager.setImgCrossOrigin(this._modules.settings.get("imgCrossOrigin")||null)}}onMounted(){this._debug=this._ogma.isDebug(),this._renderOnNewFrame=!0,this._formatText=UL().applyArabicShaping,this._attributesManager=new mU(this._ogma,this._modules),this._imageManager=new sB,this._fontManager=new t3,this._engine=new mv(mv.getCachedInitData()),this._domWrapper=this._engine.getDomWrapper(),this._engine.on("error",this._onNewFrame),this._nodeAnimationMap=new Map,this._edgeAnimationMap=new Map,this._movingNodes=new Set,this._movingEdges=new Set,this._modules.events.register(["reloadFonts","rendererStateChange","beforeUpdateAttributes","updateAttributes","animate","move","pan","zoom","rotate","viewExportStart","viewExportEnd","afterImageExport","viewChanged","zoomStart"]),this._modules.settings.register("renderer",PU,this._onRendererChange),this._modules.settings.register("edgeTipRatio",mL,t=>{this._engine.setEdgeArrowSizeRatio(t),this._modules.dom.refresh()}),this._modules.settings.register("nodeCornerRadius",0,t=>{eB(this._engine,t),this._modules.dom.refresh()}),this._modules.settings.register("edgeMinTipSize",pL,t=>{this._engine.setEdgeMinTipSize(t),this._modules.dom.refresh()}),this._modules.settings.register("backgroundColor",RU,t=>{this._engine.parseColor(t)?this._modules.dom.refresh():(mu(`Invalid background color "${t}" specified; will default to black.`),this._modules.settings.set("backgroundColor","black"))}),this._modules.settings.register("texts.hideUntilFontsLoaded",!0,t=>{this._fontManager.setHideUntilFontsLoaded(!!t)}),this._modules.settings.register("texts.cornerRadius",B1,t=>{this._engine.getTextManager().setCornerRadius(typeof t=="number"?t:B1),this._modules.dom.refresh()}),this._modules.settings.register("imgCrossOrigin",NU,this._updateImageCrossOrigin),this._modules.settings.register("cursor.default",OU,this._applyCursorStyle),this._modules.dom.setLayer("graphics",this._domWrapper),this._engine.setGlobalBoundaries(IU),this._modules.dom.beforeNextFrame().then(()=>{this._initDone=!0,this._fireRendererStateChangeEvent()}),this._imageManager.onFetch(()=>{this._engine.notifyPatternUpdate(),this._modules.dom.refresh()}),this._fontManager.onFontLoaded(t=>{this._fontsNewlyLoaded.push(t),this._engine.notifyPatternUpdate(),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}),this._modules.dom.addMediaListener("(min-resolution: 2dppx)",()=>this._modules.dom.refresh()),this._visibleAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${cx})`,tag:cx,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._dataAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${fx})`,tag:fx,nodeDependencies:void 0,edgeDependencies:void 0}),S1(this._engine,this._attributesManager.getFlexArrays()),this._modules.events.on("move",()=>this._modules.dom.refresh()).on("frame",this._onNewFrame).on("viewExportStart",()=>{this._renderOnNewFrame=!1}).on("viewExportEnd",()=>{this._renderOnNewFrame=!0}).on("clearGraph",()=>{this._nextGeIndex=1,this._availableGeIndexes=[],this._engine.clear(),this._attributesManager.clear(),this._modules.dom.refresh(),this._animations=[],this._nodeAnimationMap.clear(),this._edgeAnimationMap.clear()}).on("viewChanged",({type:t})=>{if(t==="rotate"){const e=this._modules.graph.getEdges().filter(i=>i.getAttribute("adjustAnchors"));this._attributesManager.redrawElements(e)}}).on("addNodes",t=>{this._attributesManager.updateForAllAttributeLayers(t.nodes)}).on("addEdges",t=>{this._attributesManager.updateForAllAttributeLayers(t.edges)}).on("excludedStateChange",t=>{this._visibleAttributeLayer.updateElements(t.elements)}).on("setData",t=>{this._dataAttributeLayer.updateElements(t.elements)}),mv.clearCachedInitData(),this._modules.dom.addWindowEventListener("unload",()=>this.destroy())}onReady(t){t.renderer!==void 0&&this._ogma.setOptions({renderer:t.renderer}),t.imgCrossOrigin!==void 0&&this._ogma.setOptions({imgCrossOrigin:t.imgCrossOrigin})}getTransparentBackgroundColor(){const t=this._modules.settings.get("backgroundColor");return t?this._engine.transparentify(t):null}pauseRendering(){this._renderOnNewFrame=!1}resumeRendering(){this._renderOnNewFrame=!0}_render(){const t=this._modules.dom.getDimensions(),e=this._modules.camera.getView(),i=Do(),n=eo(),s=this._modules.settings.get("backgroundColor"),r=this._isBufferDisplayable;this._engine.setView({x:e.x,y:e.y,zoom:e.zoom,angle:e.angle,width:t.width,height:t.height,pixelRatio:i,currentTime:n,backgroundColor:s,isBufferDisplayable:r});try{this._engine.render(),this._rendererState.state==="requested"&&this._updateRendererState({state:"ok"})}catch(a){if(this._debug)throw a;const{message:u,code:h="OTHER"}=a,c=this._rendererState.type,g=eF(c);let _=this._rendererState.state==="requested"?`Error while initializing the ${g} renderer`:`The ${g} renderer encountered an unexpected runtime error`,m=null;c==="webgl"&&(_+="; fallbacking on canvas renderer",m="canvas"),mu(u||""),mu(_),this._updateRendererState({state:"error",code:h,message:u}),this._modules.settings.set("renderer",m)}}_fireRendererStateChangeEvent(){const t=this._rendererState;this._modules.events.fire("rendererStateChange",{type:t.type,state:t.state,code:t.code,message:t.message})}_updateRendererState({type:t,state:e,code:i,message:n}){let s=!1;t!==void 0&&this._rendererState.type!==t&&(this._rendererState.type=t,s=!0),e!==void 0&&this._rendererState.state!==e&&(this._rendererState.state=e,s=!0),i!==void 0&&this._rendererState.code!==i&&(this._rendererState.code=i,s=!0),n!==void 0&&this._rendererState.message!==n&&(this._rendererState.message=n,s=!0),s&&this._initDone&&this._fireRendererStateChangeEvent()}getImageData(){return this._modules.dom.afterNextFrame().then(()=>this._engine.getImageData())}getNodeAttributes(){return this._attributesManager.getFlexArrays().nodes.current}getEdgeAttributes(){return this._attributesManager.getFlexArrays().edges.current}getGraphicsEngine(){return this._engine}getImageManager(){return this._imageManager}getFontManager(){return this._fontManager}allocateGraphicsEngineBlockId(){return this._availableGeIndexes.length?this._availableGeIndexes.pop():this._nextGeIndex++*Op+mk}releaseGraphicsEngineBlockId(t){this._engine.freeBlock(t),this._availableGeIndexes.push(t),this._modules.dom.refresh()}addCursorStyle(t){t&&(this._cursorStyle.push(t),this._applyCursorStyle())}removeCursorStyle(t){if(!t)return;const e=this._cursorStyle.lastIndexOf(t);e!==-1&&(this._cursorStyle.splice(e,1),this._applyCursorStyle())}reloadFonts(){this._modules.events.fire("reloadFonts"),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}getDomElement(){return this._domWrapper}setTextHidden(t,e){this._attributesManager.setTextHidden(t,e)}resetTextHidden(){this._attributesManager.resetTextHidden(),this._modules.dom.refresh()}getAttributesManager(){return this._attributesManager}_checkFontsNewlyLoaded(){return!!this._fontsNewlyLoaded.length&&(this._fontsNewlyLoaded=[],!0)}_loadGraphInGraphicsEngine(){this._attributesManager.update(),this._checkFontsNewlyLoaded()&&this._attributesManager.redrawAll(),this._modules.events.fire("beforeUpdateAttributes");const{elementsToRedraw:t,elementsUpdated:e}=this._attributesManager.getUpdatedElements(),i=e.nodes.size>0||e.edges.size>0;(e.nodeAttributesSet.has("radius")||e.edgeAttributes.includes("width"))&&(this._boundaries.maxSize=tF(this._modules.graph)),(e.nodeAttributesSet.has("shape")||e.edgeAttributes.includes("shape.head")||e.edgeAttributes.includes("shape.tail"))&&S1(this._engine,this._attributesManager.getFlexArrays()),Z3({graph:this._modules.graph,elements:t,engine:this._engine,imageManager:this._imageManager,fontManager:this._fontManager,view:this._modules.camera.getView(),attributes:this._attributesManager.getFlexArrays(),boundaries:this._boundaries,formatText:this._formatText}),i&&this._modules.events.fire("updateAttributes",e)}_forceCompleteGraphRefresh(){this._attributesManager.redrawAll(),this._loadGraphInGraphicsEngine()}export(t,e,i,n){let s;return Promise.all([this._modules.graph.getNodes().addClass(od),this._modules.graph.getEdges().addClass(od)]).then(()=>this.resolveAtNextFrame()).then(()=>this._imageManager.whenReady()).then(()=>{i==="all"?(s=FU(this._modules.graph),this._forceCompleteGraphRefresh()):this._loadGraphInGraphicsEngine();const r=this._modules.camera.clone({...e});return this._modules.events.fire("viewExportStart",{preventOverlap:n.preventOverlap,camera:r,view:r.getView()}),this._ogma.view.afterNextFrame().then(()=>this._engine.export(t,e,n))}).then(r=>Promise.all([this._modules.graph.getNodes().removeClass(od),this._modules.graph.getEdges().removeClass(od)]).then(()=>r)).then(r=>(i==="all"&&(BU(s),this._forceCompleteGraphRefresh()),this._modules.events.fire("viewExportEnd"),r))}addAttributeLayer(t){return this._attributesManager.addAttributeLayer(t)}getAttributeValues(t,e,i,n){return this._attributesManager.getAttributeValues(t,e,i,n)}forceAttributesComputation(){this._attributesManager.update()}resolveAtNextFrame(t){return this._modules.dom.afterNextFrame().then(()=>t)}isMoving(t){return(t.isNode?this._movingNodes:this._movingEdges).has(t._index)}animate(t,e,i,n){const s=DU(n);return s.duration&&this._engine.ensureAnimationsReady(),this._animate(t,e,i,s)}isAnimating(){return this._animations.length>0}getAnimationInformation(t){return this._attributesManager.getAnimationInformation(t)}_toSubGraph(t){if(t instanceof wu||t instanceof al)return{nodes:t.toList(),edges:t.getAdjacentEdges()};if(t instanceof Ed||t instanceof vh)return{nodes:this._modules.graph.nodeList(),edges:t.toList()};const e=t,i={nodes:e.nodes||this._modules.graph.nodeList(),edges:e.edges||this._modules.graph.edgeList()};return i.nodes.size&&(i.edges.size?i.edges=i.edges.concat(i.nodes.getAdjacentEdges()).dedupe():i.edges=i.nodes.getAdjacentEdges()),i}_animate(t,e,i,{duration:n,easing:s}){if((!this._animations.length||i)&&!n)return e(t),Promise.resolve(t);const r=this._toSubGraph(t),a=r.nodes,u=r.edges;if(a.size===0&&u.size===0)return e(t),Promise.resolve(t);if(a.size){if(i)for(let m=0;m<a._indexes.length;m++)this._movingNodes.add(a._indexes[m]);this._modules.events.fire("animate",{elements:a,duration:n,updatesPositions:i,easing:s})}if(u.size){if(i)for(let m=0;m<u._indexes.length;m++)this._movingEdges.add(u._indexes[m]);this._modules.events.fire("animate",{elements:u,duration:n,updatesPositions:i,easing:s})}const h={id:this._nextAnimationId++,startTime:eo(),finished:!1,func:()=>e(t),duration:n,easing:s,nodes:a,edges:u,started:!1,updatesPositions:i,resolve:Ci};let c=h;const g=new Set;if(c=this._getLongestAnimation(c,h.nodes,g),c=this._getLongestAnimation(c,h.edges,g),c.updatesPositions){for(let m=0;m<a._indexes.length;m++)this._nodeAnimationMap.set(a._indexes[m],c);for(let m=0;m<u._indexes.length;m++)this._edgeAnimationMap.set(u._indexes[m],c);h.duration=c.duration,h.startTime=c.startTime}if(h.duration===0&&c.id===h.id)return e(t),Promise.resolve(t);const _=new Promise(m=>h.resolve=()=>m(t));return this._animations.push(h),this._modules.dom.refresh(),n||this._processAnimations(),_}_removeFinishedAnimations(){this._animations=this._animations.filter(t=>!t.finished)}_getAnimationElements(t){return{nodes:t.nodes,edges:t.edges}}_resetAnimationAttributes({nodes:t,edges:e}){this._attributesManager.resetAnimationAttributes({nodes:t,edges:e});for(let i=0;i<t._indexes.length;i++)this._nodeAnimationMap.delete(t._indexes[i]),this._movingNodes.delete(t._indexes[i]);for(let i=0;i<e._indexes.length;i++)this._edgeAnimationMap.delete(e._indexes[i]),this._movingEdges.delete(t._indexes[i])}_getLongestAnimation(t,e,i){const n=e.isNode?this._nodeAnimationMap:this._edgeAnimationMap;for(let s=0;s<e._indexes.length;s++){const r=n.get(e._indexes[s]);r&&!i.has(r.id)&&(i.add(r.id),(t.updatesPositions||!r.updatesPositions)&&r.duration+r.startTime<t.duration+t.startTime||(t=r))}return t}_processAnimations(){if(!this._animations.length)return;const t=eo(),e=[];this._attributesManager.update();for(const i of this._animations)i.started||(i.started=!0,e.push(i.func),this._attributesManager.setAnimationAttributes(this._getAnimationElements(i),i));for(const i of e)i();for(const i of this._animations)t>=i.startTime+i.duration&&(this._resetAnimationAttributes(this._getAnimationElements(i)),i.resolve(i.elements),i.finished=!0);this._removeFinishedAnimations(),this._animations.length&&this._modules.dom.refresh()}hideTexts(){this.setNodeTextsVisibility(!1),this.setEdgeTextsVisibility(!1)}showTexts(){this.setNodeTextsVisibility(!0),this.setEdgeTextsVisibility(!0)}setNodesVisibility(t){return this._updateVisibilityCounter("nodes",t)}setNodeTextsVisibility(t){return this._updateVisibilityCounter("nodeTexts",t)}setEdgesVisibility(t){return this._updateVisibilityCounter("edges",t)}setEdgeTextsVisibility(t){return this._updateVisibilityCounter("edgeTexts",t)}_updateVisibilityCounter(t,e){this._visibility[t]+=e?-1:1,this._modules.dom.refresh()}detectNode(t,e,i,n,s,r){return Jk(t,e,i,n,s,r,this._modules.graph,this._attributesManager,this._modules.camera,this._engine,this._movingNodes,this._formatText)}detectEdge(t,e,i,n,s){const{bentEnable:r,bentVertical:a}=this._modules.graphics.getGraphicsEngine().getBentEdges();return $k(t,e,i,n,s,this._modules.graph,this._modules.camera,this._movingNodes,this._attributesManager,r,a)}getVisibilityCounters(){return this._visibility}destroy(){this.getGraphicsEngine().destroy(),this.getImageManager().destroy(),this.getFontManager().destroy()}};function DU(t){return typeof t=="number"?t={duration:t}:typeof t=="object"&&t!==null||(t={duration:0}),{duration:kU(t.duration),easing:t.easing||"linear",chain:!!t.chain}}function kU(t){return typeof t!="number"||!isFinite(t)||t<0?0:t}function U1(t,e){const i=e?t.getNodeAttribute("excluded"):t.getEdgeAttribute("excluded"),n=(e?t.getNodes("all"):t.getEdges("all"))._indexes,s=i.getMultiple(n);return i.fill(n,0),{excludedList:i,indexes:n,values:s}}function G1({excludedList:t,indexes:e,values:i}){t.setMultiple(e,i)}function FU(t){return{nodes:U1(t,!0),edges:U1(t,!1)}}function BU({nodes:t,edges:e}){G1(t),G1(e)}var UU=250,GU=50,HU=class extends li{constructor(){super(...arguments),this._onAnyEvents=[],this._registeredEvents={},this.onIdle=_p(()=>this.fire("idle"),GU)}onMounted(){this._registeredEvents={},this.register(["idle"]),this._ogma.onReady(()=>{this.on(["viewChanged","layoutEnd","addNodes","addEdges","removeNodes","removeEdges","animate","setMultipleAttributes","transformationRefresh"],()=>{this._modules.dom.clearTimeout(this._idleTimeout),this._idleTimeout=this._modules.dom.setTimeout(this.onIdle,UU)})})}isRegistered(t){return!!this._registeredEvents[t]}register(t,e=[]){t.forEach(i=>{this._registeredEvents[i]||(this._registeredEvents[i]=new VU(!1,i))})}onAnyEvent(t){this._onAnyEvents.push(t)}on(t,e){return Array.isArray(t)?(t.forEach(i=>this.on(i,e)),this):this._registeredEvents[t]?(this._registeredEvents[t].on(e),this):this}off(t){return Object.values(this._registeredEvents).forEach(e=>{e.off(t)}),this}fire(t,e=null){const i=this._getEvent(t);return this._onAnyEvents.forEach(n=>n(e,t)),i.trigger(e),this}once(t,e){const i=this,n=function(){e.apply(null,arguments),i.off(n)};return this.on(t,n)}_getEvent(t){if(!(t in this._registeredEvents))throw new Error(`Event ${t} does not exist`);return this._registeredEvents[t]}destroy(){Object.values(this._registeredEvents).forEach(t=>{t.destroy()})}},VU=class{constructor(t,e){this._subscribers=[],this._handlers=[],this._reverseOrder=t,this._name=e}trigger(t){for(const e of this._handlers)e(t,this._name);return this}on(t){if(typeof t!="function")throw new Error("handler is not a function");const e=this._reverseOrder?0:this._subscribers.length;return this._handlers.splice(e,0,t),this._subscribers.splice(e,0,t),this}off(t){let e;for(;(e=this._subscribers.indexOf(t))!==-1;)this._subscribers.splice(e,1),this._handlers.splice(e,1);return this}destroy(){this._subscribers=[],this._handlers=[]}},YU=class extends li{onMounted(){this._graphics=this._modules.graphics,this._modules.events.register(["setMultipleAttributes"]),this._modules.events.on(["addNodes","addEdges"],({nodes:t,edges:e,objects:i})=>{this._onAddElements(t||e,i)}),this._originalAttributesLayer=this._graphics.addAttributeLayer({name:"original-attributes",priority:ND,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._individualAttributesLayer=this._graphics.addAttributeLayer({name:"individual-attributes",priority:ID,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0})}_onAddElements(t,e){const i=e.map(n=>n.attributes);this._originalAttributesLayer.setAttributeValues(t,i)}getOriginalAttributes(){return this._originalAttributesLayer.getFlexArrays()}getIndividualAttributes(){return this._individualAttributesLayer.getFlexArrays()}setMultipleAttributes(t,e,i){const n=Array.isArray(e)?e.length&&e[0]?op(e[0],t.isNode):[]:op(e,t.isNode),s=n.includes("x")||n.includes("y"),r=[];return this._modules.events.fire("setMultipleAttributes",{elements:t,values:e,updatedAttributes:n,options:i,promises:r}),this._graphics.animate(t,()=>{this._individualAttributesLayer.setAttributeValues(t,e)},s,i).then(a=>Promise.all(r).then(()=>a))}setSingleAttribute(t,e,i,n){const s={};return _u(s,e,i),this.setMultipleAttributes(t,s,n)}resetMultipleAttributes(t,e,i){const n=e||this._individualAttributesLayer.getUsedAttributeNames(t),s=n&&(n.includes("x")||n.includes("y")),r={};for(const a of n)_u(r,a,void 0);return this._graphics.animate(t,()=>{this._individualAttributesLayer.setAttributeValues(t,r)},s,i)}getMultipleAttributes(t,e){return this._graphics.getAttributeValues(t,e,!0,!1)}getSingleAttribute(t,e){return this._graphics.getAttributeValues(t,e,!1,!1)}replaceOriginalAttributes(t,e,i=[]){const n={},s=this._originalAttributesLayer.getUsedAttributeNames(t).filter(r=>!i.includes(r));for(let r=0;r<s.length;++r)_u(n,s[r],void 0);this._originalAttributesLayer.setAttributeValues(t,n),this._originalAttributesLayer.setAttributeValues(t,e)}getSinglePreviousAttribute(t,e){return this._graphics.getAttributeValues(t,e,!1,!0)}getMultiplePreviousAttributes(t,e){return this._graphics.getAttributeValues(t,e,!0,!0)}},XU=class extends li{constructor(){super(...arguments),this._currentValue={},this._onChange={},this._defaultValues={},this._keys=[]}onReady(t){t.renderer&&this.update({renderer:t.renderer}),t.options&&this.update(t.options)}register(t,e,i,n){return n===void 0&&(n=!0),this._keys.push(t),this._currentValue[t]=e,this._defaultValues[t]=e,this._onChange[t]=i||Ci,i&&n&&i(e),this}update(t){t=xg(t);const e=this._keys,i={},n=this._currentValue;for(let r=0;r<e.length;++r){const a=e[r];if(a in t){let u=t[a];u===void 0&&(u=this._defaultValues[a]),i[a]=n[a],n[a]=u}}const s=Object.keys(i);for(let r=0;r<s.length;++r){const a=s[r],u=this._currentValue[a],h=i[a];u!==h&&this._onChange[a](u,h)}return Wv(i)}get(t){return arguments.length===0?Wv(this._currentValue):this._currentValue[t]}set(t,e){const i=this._currentValue[t],n=this._onChange[t];this._currentValue[t]=e,n&&n(e,i)}},ZU=class{constructor(e,i){this._classes=e,this._name=i}getName(){return this._name}getIndex(){return this._classes.getIndex(this._name)}setIndex(e){return this._classes.setIndex(this._name,e)}update(e){return this._classes.update(this._name,e),this}getDefinition(){return this._classes.getDefinition(this._name)}getNodes(e){return this._classes.getElementsByClass(this._name,e).nodes}getEdges(e){return this._classes.getElementsByClass(this._name,e).edges}clearNodes(e){this.getNodes(e).removeClass(this._name)}clearEdges(e){this.getEdges(e).removeClass(this._name)}add(e){e.addClass(this._name)}remove(e){e.removeClass(this._name)}destroy(){const e=this._classes.getElementsByClass(this._name);return Promise.all([e.nodes.removeClass(this._name),e.edges.removeClass(this._name)]).then(()=>this._classes.removeClass(this._name))}},WU=1e3,qU=.5/WU,QU=class extends li{constructor(){super(...arguments),this._builtinClasses=[],this._userClasses=[],this._classesByName={},this._onExcludedStateChange=({elements:t,value:e})=>{if(e){const i=this._builtinClasses.map(n=>n.name);this._addOrRemoveClassesToElements(i,t,!1)}},this._onClearGraph=()=>{this._builtinClasses.concat(this._userClasses).forEach(t=>t.elementSet.clear())},this._onRemoveElements=({nodes:t,edges:e})=>{const i=t||e;this._builtinClasses.concat(this._userClasses).forEach(n=>n.elementSet.removeElements(i))}}onMounted(){this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on("clearGraph",this._onClearGraph).on("removeEdges",this._onRemoveElements).on("removeNodes",this._onRemoveElements)}_getClassList(t){return t?this._builtinClasses:this._userClasses}createClass({name:t,isBuiltin:e=!1,after:i,nodeAttributes:n,nodeDependencies:s,nodeOutput:r,edgeAttributes:a,edgeDependencies:u,edgeOutput:h}={}){if(typeof t!="string")throw new Error('the "name" argument should be a string');const c=this._getClassList(e),g=i?KU(c,i)+1:c.length;if(g===-1)throw new Error(`createClass: class specified as \`after\` parameter "${i}" does not exist`);if(e&&!t.startsWith("_"))throw new Error(`invalid builtin class name "${t}": builtin classes should start with '_'`);const _=new Kg(this._modules.graph),m=new ZU(this,t),v={name:t,elementSet:_,attributeLayer:this._modules.graphics.addAttributeLayer({name:`class(${t})`,tag:t,standaloneSelectors:!0,nodeAttributes:n||void 0,edgeAttributes:a||void 0,nodeSelector:(b,x)=>x.hasElement(b),edgeSelector:(b,x)=>x.hasElement(b),nodeContext:_,edgeContext:_,nodeOutput:r,edgeOutput:h,nodeDependencies:s,edgeDependencies:u}),isBuiltin:e,wrapper:m};return c.splice(g,0,v),e&&c.sort((b,x)=>SA.indexOf(b.name)-SA.indexOf(x.name)),this._updatePriorities(e),this._classesByName[t]=v,this._modules.events.register([lc(t,!0,!0),lc(t,!0,!1),lc(t,!1,!0),lc(t,!1,!1)]),m}removeClass(t){const e=this._get(t),i=this._getClassList(e.isBuiltin),n=i.indexOf(e);if(n===-1)throw new Error(`class "${t}" does not exist`);return i.splice(n,1),e.attributeLayer.destroy(),delete this._classesByName[t],this._updatePriorities(e.isBuiltin),Promise.resolve(void 0)}_updatePriorities(t){const e=this._getClassList(t),i=PD+(t?.5:0);for(let n=0;n<e.length;++n){const s=e[n],r=i+qU*n;s.attributeLayer.update({priority:r})}}_get(t){const e=this._classesByName[t];if(!e)throw new Error(`class "${t}" does not exist`);return e}getIndex(t){const e=this._get(t);return this._getClassList(e.isBuiltin).indexOf(e)}setIndex(t,e){const i=this._get(t),n=this._getClassList(i.isBuiltin),s=n.indexOf(i),r=Ia(e,0,n.length-1);n.splice(s,1),n.splice(r,0,i),this._updatePriorities(i.isBuiltin)}update(t,{nodeAttributes:e,edgeAttributes:i,nodeDependencies:n,edgeDependencies:s,nodeOutput:r,edgeOutput:a,fullOverwrite:u}={}){this._get(t).attributeLayer.update({nodeAttributes:e,edgeAttributes:i,nodeDependencies:n,edgeDependencies:s,nodeOutput:r,edgeOutput:a,fullOverwrite:u})}getDefinition(t){const e=this._get(t),{nodeAttributes:i,nodeDependencies:n,nodeOutput:s,edgeAttributes:r,edgeDependencies:a,edgeOutput:u}=e.attributeLayer.getDefinition();return{nodeAttributes:i||void 0,edgeAttributes:r||void 0,nodeDependencies:n,edgeDependencies:a,nodeOutput:s,edgeOutput:u}}_addOrRemoveClassesToElements(t,e,i){const n=e.isNode;for(let s=0;s<t.length;++s){const r=t[s],{elementSet:a,attributeLayer:u}=this._get(r),h=a.addOrRemoveElements(e,i),c=lc(r,n,i);h.size&&(u.updateElements(h),this._modules.events.fire(c,n?{nodes:h}:{edges:h}))}}_animatedAttributesUpdatePositions(t,e){for(let i=0;i<t.length;++i){const n=t[i],s=this.getDefinition(n);if(e.isNode&&s.nodeAttributes&&(s.nodeAttributes.x||s.nodeAttributes.y))return!0}return!1}_getAnimatedAtrributes(t,e){return t.reduce((i,n)=>{const s=this.getDefinition(n);return e.isNode&&s.nodeAttributes&&i.push(...op(s.nodeAttributes,!0)),!e.isNode&&s.edgeAttributes&&i.push(...op(s.edgeAttributes,!1)),i},[])}addClassesToElements(t,e,i){const n=e.toList(),s=this._animatedAttributesUpdatePositions(t,n);return this._modules.graphics.animate(e,()=>{this._addOrRemoveClassesToElements(t,n,!0)},s,i)}removeClassesFromElements(t,e,i){const n=e.toList(),s=this._animatedAttributesUpdatePositions(t,n);return this._modules.graphics.animate(e,()=>{this._addOrRemoveClassesToElements(t,n,!1)},s,i)}hasSingleElementClass(t,e){return this._get(t).elementSet.hasElement(e)}getElementsClassList(t,e={}){const{includeBuiltinClasses:i=!1}=e,n=new Array(t.size);for(let s=0;s<n.length;++s)n[s]=[];return this._addClassNamesToList(n,t,this._userClasses),i&&this._addClassNamesToList(n,t,this._builtinClasses),n}_addClassNamesToList(t,e,i){const n=e.toList();for(let s=0;s<i.length;++s){const{name:r,elementSet:a}=i[s];for(let u=0;u<n.size;++u){const h=n.get(u);a.hasElement(h)&&t[u].push(r)}}}getClassByName(t,e=!1){const i=this._classesByName[t]||null;if(e&&!i)throw new Error(`class "${t}" does not exist`);return i&&i.wrapper}getClassList(){return this._userClasses.map(t=>t.wrapper)}getElementsByClass(t,e="visible"){const{elementSet:i}=this._get(t),n=i.getElements();let s=n.nodes,r=n.edges;return e==="visible"?(s=s.filter(a=>a.isVisible()),r=r.filter(a=>a.isVisible())):e==="raw"&&(s=s.filter(a=>!a.isVirtual()),r=r.filter(a=>!a.isVirtual())),{nodes:s,edges:r}}_onClassEvent(t,e,i,n){const s=lc(t,i,n);this._modules.events.on(s,e)}onNodeClassAdded(t,e){this._onClassEvent(t,e,!0,!0)}onNodeClassRemoved(t,e){this._onClassEvent(t,e,!0,!1)}onEdgeClassAdded(t,e){this._onClassEvent(t,e,!1,!0)}onEdgeClassRemoved(t,e){this._onClassEvent(t,e,!1,!1)}};function lc(t,e,i){return`${e?"node":"edge"}Class${i?"Added":"Removed"}_${t}`}function KU(t,e){for(let i=0;i<t.length;++i)if(t[i].name===e)return i;return-1}var BM=()=>({x:0,y:0,x1:0,y1:0,x2:0,y2:0});function H1(t,e,i,{cells:n=!0,boxes:s=!0,query:r=!0}={}){const a=e.keys().map(h=>e.keyToBBox(Number(h))),u=e.getBoxes();if(n&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#707070",a.forEach(h=>{t.rect(h[0],h[1],h[2]-h[0],h[3]-h[1])}),t.stroke()),s&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#ff7070",u.forEach(h=>{t.rect(h[0],h[1],h[2]-h[0],h[3]-h[1])}),t.closePath(),t.stroke()),r&&i){const h=i;t.beginPath(),t.lineWidth=2,t.strokeStyle="#3030ff",t.rect(h[0],h[1],h[2]-h[0],h[3]-h[1]),t.closePath(),t.stroke()}}function jU(t){const[e,i,n]=t.getNodeAttributes(["x","y","radius"]),[s,r,a]=t.getEdgeAttributes(["source","target","curvature"]),u=BM(),h=W0();return c=>{if(c<0){c=-c;const g=s.get(c),_=r.get(c),m=a.get(c),v=e.get(g),b=i.get(g),x=e.get(_),M=i.get(_);g===_?(Pp(v,b,m,n.get(g),0,u),kp(v,b,u.x1,u.y1,u.x2,u.y2,x,M,h)):m===0?(h.minX=Math.min(v,x),h.minY=Math.min(b,M),h.maxX=Math.max(v,x),h.maxY=Math.max(b,M)):(Sd(v,b,x,M,m,u),Q0(v,b,u.x,u.y,x,M,h))}else{const g=e.get(c),_=i.get(c),m=n.get(c);h.minX=g-m,h.minY=_-m,h.maxX=g+m,h.maxY=_+m}return[h.minX,h.minY,h.maxX,h.maxY]}}var JU=["x","y","radius"],$U=["width","curvature"],t4=.5,e4=class extends li{constructor(){super(...arguments),this._minCellSize=8,this._clear=()=>{this._index.clear(),this._elementsToUpdate.clear()},this._onGraphUpdate=t=>{if(t.nodes&&(!t.nodeAttributes||t.nodeAttributes.some(e=>JU.includes(e)))){const e=t.nodes.fastGetAdjacentElements().edges;this._elementsToUpdate.addElements(t.nodes),this._elementsToUpdate.addElements(e)}t.edges&&(t.edgeAttributes&&!t.edgeAttributes.some(e=>$U.includes(e))||this._elementsToUpdate.addElements(t.edges))}}onMounted(){this._index=new Iz(this._getIntersector(),jU(this._modules.graph),this._minCellSize,1e6),this._elementsToUpdate=new Kg(this._modules.graph),this._removedNodes=this._modules.graph.getNodeAttribute("removed"),this._removedEdges=this._modules.graph.getEdgeAttribute("removed"),this._excludedNodes=this._modules.graph.getNodeAttribute("excluded"),this._excludedEdges=this._modules.graph.getEdgeAttribute("excluded"),this._queryResult={edges:[],nodes:[]},this._queryBounds=[0,0,0,0],this._modules.events.on(["addNodes","addEdges","removeNodes","removeEdges","updateAttributes"],this._onGraphUpdate).on("excludedStateChange",({elements:t})=>{this._elementsToUpdate.addElements(t)}).on("clearGraph",this._clear)}_getIntersector(){const t=this._modules.graph,[e,i,n]=t.getNodeAttributes(["x","y","radius"]),[s,r,a,u]=t.getEdgeAttributes(["source","target","width","curvature"]),h=BM(),c=this._modules.camera.getAngle(),g=Math.cos(c),_=Math.sin(c);return(m,v,b,x,M)=>{const{bentEnable:N,bentVertical:O}=this._modules.graphics.getGraphicsEngine().getBentEdges();if(m<0){m=-m;const R=s.get(m),P=r.get(m),F=u.get(m),U=a.get(m)/2,V=e.get(R),Y=i.get(R),K=e.get(P),tt=i.get(P);return N?(zp(V*g-Y*_,Y*g+V*_,K*g-tt*_,tt*g+K*_,F,N,O,h),hx(V,Y,h.x1*g+h.y1*_,h.y1*g-h.x1*_,h.x2*g+h.y2*_,h.y2*g-h.x2*_,K,tt,v-U,b-U,x+U,M+U)):R===P?(Pp(V,Y,F,n.get(R),0,h),hx(V,Y,h.x1,h.y1,h.x2,h.y2,K,tt,v-U,b-U,x+U,M+U)):F===0?K0(V,Y,K,tt,v-U,b-U,x+U,M+U):(Sd(V,Y,K,tt,F,h),H2(V,Y,h.x,h.y,K,tt,v-U,b-U,x+U,M+U))}return N0(e.get(m),i.get(m),n.get(m),v,b,x,M)}}reindex(){this._modules.graphics.forceAttributesComputation(),this._index.clear(),this._elementsToUpdate.clear(),this._updateItems(this._modules.graph.getNodes("all")._indexes,this._modules.graph.getEdges("all")._indexes)}getSize(){return this._index.size}_updateIndex(){if(!this._elementsToUpdate.isEmpty()){const{nodes:t,edges:e}=this._elementsToUpdate.getElements();if(t._indexes.length/this._modules.graph.getNodes("all").size>t4)return void this.reindex();this._updateItems(t._indexes,e._indexes),this._elementsToUpdate.clear()}}_updateItems(t,e){const i=this._index,n=this._removedNodes,s=this._removedEdges,r=this._excludedNodes,a=this._excludedEdges,u=[],h=[];if(n&&r)for(let c=0;c<t.length;c++){const g=t[c];n.get(g)!==0||r.get(g)!==0?u.push(g):(i.has(g)&&u.push(g),h.push(g))}if(s&&a)for(let c=0;c<e.length;c++){const g=-e[c];s.get(-g)!==0||a.get(-g)!==0?u.push(g):(i.has(g)&&u.push(g),h.push(g))}for(const c of u)i.remove(c);for(const c of h)i.insert(c)}getNodesInScreenByDistance(t){const{x:e,y:i}=t.getPositionOnScreen();return this._modules.graph.getNodes().filter(n=>n.isInScreen()&&n!==t).sort((n,s)=>{const r=n.getPositionOnScreen(),a=s.getPositionOnScreen();return Gs(r.x,r.y,e,i)-Gs(a.x,a.y,e,i)})}getNearestNodesForNode(t,e=240,i){const{x:n,y:s}=t.getPosition();return this.getNearestNodes(n,s,e,i,t)}getNearestNodes(t,e,i,n,s){if(this._updateIndex(),n){const r=this._modules.camera.screenToGraphVector({x:i,y:i});i=Gs(0,0,r.x,r.y)}return this._getNearestNodes(t,e,i,s)}_getNearestNodes(t,e,i,n){const s=[],r=i*i,a=n?n._index:0,u=this._modules.graph.getNodes()._indexes,[h,c]=this._modules.graph.getNodeAttributes(["x","y"]);for(let g=0,_=u.length;g<_;g++){const m=u[g];if(m===a)continue;const v=t-h.get(m),b=e-c.get(m);v*v+b*b<=r&&s.push(m)}return this._modules.graph.nodeList(new Uint32Array(s))}queryRaw(t,e,i,n){this._updateIndex();const s=this._queryBounds;s[0]=t,s[1]=e,s[2]=i,s[3]=n;const r=this._index.query(t,e,i,n),{nodes:a,edges:u}=this._queryResult;a.length=u.length=0;for(let h=0;h<r.length;h++){const c=r[h];c<0?u.push(-c):a.push(c)}return this._queryResult}queryRawProjected(t,e,i,n){const s=this._queryBounds;s[0]=t,s[1]=e,s[2]=i,s[3]=n,this._modules.camera.projectBounds(s);const r=this.queryRaw(s[0],s[1],s[2],s[3]);return this._modules.labels.query(s[0],s[1],s[2],s[3],r),r}query(t,e,i,n){const s=this._modules.graph,{nodes:r,edges:a}=this.queryRaw(t,e,i,n);return{nodes:s.nodeList(new Uint32Array(r.slice())),edges:s.edgeList(new Uint32Array(a.slice()))}}queryProjected(t,e,i,n){const s=this._modules.graph,{nodes:r,edges:a}=this.queryRawProjected(t,e,i,n);return{nodes:s.nodeList(new Uint32Array(r)),edges:s.edgeList(new Uint32Array(a))}}getNodesByBoundingBox(t,e,i,n,s){if(this._updateIndex(),s){let _;_=this._modules.camera.screenToGraphVector({x:t,y:e}),t=_.x,e=_.y,_=this._modules.camera.screenToGraphVector({x:i,y:n}),i=_.x,n=_.y}const r=this._modules.graph,a=r.getNodes()._indexes,u=[],h=r.getNodeAttribute("excluded"),[c,g]=r.getNodeAttributes(["x","y"]);for(let _=0,m=a.length;_<m;_++){const v=a[_];if(h&&h.get(v))continue;const b=c&&c.get(v),x=g&&g.get(v);b>=t&&b<=i&&x>=e&&x<=n&&u.push(v)}return r.nodeList(new Uint32Array(u))}toggleDebug(t){t?(this._layer=this._modules.layers.addCanvasLayer(e=>{H1(e,this._index,this._queryBounds)},{isStatic:!1,noClear:!1}),this._layer.moveToTop()):this._layer&&(this._layer.destroy(),this._layer=null)}renderDebug(t){if(!this._layer)return this.toggleDebug(!0);this._layer.refresh(e=>{H1(e,this._index,this._queryBounds,t)})}},UM={};function Gp(t,e,i,n,s=0,r=Math.sin(s),a=Math.cos(s),u=[0,0,0,0]){const h=i/2,c=n/2,g=t+h,_=e+c;if(s===0)return u[0]=t,u[1]=e,u[2]=t+i,u[3]=e+n,u;let m,v,b,x,M,N,O,R;return b=-h,x=-c,m=g+b*a-x*r,v=_+b*r+x*a,M=O=m,N=R=v,b=-h,x=c,m=g+b*a-x*r,v=_+b*r+x*a,m<M?M=m:m>O&&(O=m),v<N?N=v:v>R&&(R=v),b=h,x=c,m=g+b*a-x*r,v=_+b*r+x*a,m<M?M=m:m>O&&(O=m),v<N?N=v:v>R&&(R=v),b=h,x=-c,m=g+b*a-x*r,v=_+b*r+x*a,m<M?M=m:m>O&&(O=m),v<N?N=v:v>R&&(R=v),u[0]=M,u[1]=N,u[2]=O,u[3]=R,u}function jg(t,e,i,n,s=0){const r=i/2,a=n/2,u=t+r,h=e+a;if(s===0)return[{x:t,y:e},{x:t+i,y:e},{x:t+i,y:e+n},{x:t,y:e+n}];const c=Math.sin(s),g=Math.cos(s);let _,m,v,b;v=-r,b=-a,_=u+v*g-b*c,m=h+v*c+b*g;const x={x:_,y:m};v=-r,b=a,_=u+v*g-b*c,m=h+v*c+b*g;const M={x:_,y:m};v=r,b=a,_=u+v*g-b*c,m=h+v*c+b*g;const N={x:_,y:m};return v=r,b=-a,_=u+v*g-b*c,m=h+v*c+b*g,[x,M,N,{x:_,y:m}]}function Ux(t,e=0,i=1,n=z2.slice()){const s=i*Math.sin(e),r=i*Math.cos(e);return n[0]=t[0]+s,n[1]=t[1]+r,n[2]=t[2]+s,n[3]=t[3]+r,n}function i4(t,e){return k2(t,e)}function n4(t,e){return GM(t[0],t[1],t[2],t[3],e[0],e[1],e[2],e[3])}function s4(t,e,i,n,s,r,a,u){return t>s&&t<a&&e>r&&e<u||i>s&&i<a&&n>r&&n<u}function GM(t,e,i,n,s,r,a,u){return n>=r&&e<=u&&i>=s&&t<=a}kg(UM,{angle:()=>Zk,circleCircleIntersection:()=>C0,circleContainsCircle:()=>hz,circleContainsPoint:()=>uz,circleIntersectsBox:()=>N0,circleLineIntersection:()=>F2,circleSortCompare:()=>M0,computeCentroid:()=>Q3,cubicBezierAABB:()=>hx,defaultAABB:()=>z2,degreesToRadians:()=>lz,distToSegmentSquared:()=>j0,distance:()=>Gs,distancePointSegment:()=>ZL,extendBounds:()=>k2,getAABB:()=>Gp,getBentEdgesControlPoints:()=>zp,getBezierCurveBoundingBox:()=>kp,getClosestPointOnLine:()=>qk,getClosestPointOnSegment:()=>WL,getNormalOnEdge:()=>Hk,getNormalOnQuadraticCurve:()=>HL,getOBBPoints:()=>jg,getPointOnBezierCurve:()=>Lg,getPointOnEdge:()=>Gk,getPointOnQuadraticCurve:()=>Dp,getQuadraticBezierCurveLength:()=>Yk,getQuadraticCurveBoundingBox:()=>Q0,getQuadraticCurveControlPoint:()=>Sd,getSelfLoopControlPoints:()=>Pp,getTangentOnEdge:()=>Vk,getTangentOnQuadraticCurve:()=>q0,intersects:()=>s4,isPointInLine:()=>YL,isPointInPolygon:()=>Mg,isPointOnBezierCurve:()=>wx,isPointOnQuadraticCurve:()=>VL,lineAABB:()=>K0,lineAngle:()=>Pc,lineIntersection:()=>Wk,lineLine:()=>Ec,minDisk:()=>Vg,move:()=>az,moveAABB:()=>Ux,normalize:()=>D2,overlaps:()=>GM,overlapsAABB:()=>n4,padBounds:()=>i4,polygonsIntersect:()=>dC,quadBezierAABB:()=>H2,radiansToDegrees:()=>lx,rotate:()=>Wm,segmentIntersection:()=>jf,segmentRectangleIntersection:()=>XL,squaredDistance:()=>wm,twoSegmentsIntersect:()=>Xk});var dm=40;function HM(t,e){const i=t.getAttribute("curvature"),n=t.getSource(),s=t.getTarget(),r=n.getPositionOnScreen();if(n===s){const x=(i+n.getAttribute("radius"))*tp*e,M=r.x,N=r.y,O=M-x,R=N,P=M,F=N+x;return[r,...[.2,.4,.6,.8].map(U=>Lg(U,M,N,M,N,O,R,P,F)),r]}const a=s.getPositionOnScreen();if(i===0)return[r,a];const u=a.x-r.x,h=a.y-r.y,c=Math.sqrt(u*u+h*h),g=(r.x+a.x)/2,_=(r.y+a.y)/2,m=i*(c/Mp)*2,v=g+h/c*m,b=_+-u/c*m;return[r,...[.25,.5,.75].map(x=>Dp(x,r.x,r.y,a.x,a.y,v,b)),a]}function r4(t,e,i){const n=t.getSource(),s=t.getTarget(),r=n.getPositionOnScreen(),a=s.getPositionOnScreen();if(Mg(r.x,r.y,e)||Mg(a.x,a.y,e))return!0;const u=HM(t,i);for(let h=0;h<u.length-1;++h){const c=u[h],g=u[h+1];for(let _=0;_<e.length-1;++_){const m=e[_],v=e[_+1];if(Ec(c.x,c.y,g.x,g.y,m.x,m.y,v.x,v.y))return!0}}return!1}function o4(t,e,i){const n=t.getPositionOnScreen(),s=Number(t.getAttribute("radius"))*i;return VM(n.x,n.y,s,e)}function VM(t,e,i,n){const s=t-i,r=e-i,a=e+i;return t+i>=n.minX&&s<=n.maxX&&a>=n.minY&&r<=n.maxY}function a4(t,e,i){const n=HM(t,i);for(let s=0;s<n.length-1;++s){const r=n[s],a=n[s+1];if(K0(r.x,r.y,a.x,a.y,e.minX,e.minY,e.maxX,e.maxY))return!0}return!1}function V1(t,e,i,n){typeof i=="number"&&(i={left:i,right:i,top:i,bottom:i});const s=i.left===void 0?dm:i.left,r=i.right===void 0?dm:i.right,a=i.top===void 0?dm:i.top,u=i.bottom===void 0?dm:i.bottom,h=s+r,c=a+u,g=t.width===0?t.maxFixedSize:t.width,_=t.height===0?t.maxFixedSize:t.height,m=MU([(e.width-h)/(g+t.maxScaledSize),(e.height-c)/(_+t.maxScaledSize),(e.width-h-t.maxFixedSize)/g,(e.height-c-t.maxFixedSize)/_,n/t.maxScaledSize||NaN]);return{x:t.cx+(r-s)/(2*m),y:t.cy+(u-a)/(2*m),zoom:m}}var l4="cubicOut",Y1=200,u4=class extends li{constructor(){super(...arguments),this._isLocating=!1,this._cacheValid=!0,this._cachedGraphBoundingBox=new So,this._onLocateStart=()=>{this._isLocating=!0},this._onLocated=()=>{this._isLocating=!1,this._modules.events.fire("locate")},this._invalidCache=()=>{this._cacheValid=!1}}onMounted(){this._modules.events.register(["locate"]),this._modules.events.on(["addNodes","removeNodes","addEdges","removeEdges","excludedStateChange","clearGraph","updateAttributes"],this._invalidCache)}onReady(){this.locateGraph({},!0)}locateGraph(t,e=!1){return this._onLocateStart(),e?this._locateGraph(t):this._modules.transformations.whenApplied().then(()=>this._locateGraph(t))}_locateGraph(t){return this._locateBoundingBox(this.getGraphBoundingBox(),t).then(this._onLocated)}locateElements(t,e){return this._modules.transformations.whenApplied().then(()=>this._locateBoundingBox(this.getBoundingBox(t),e)).then(this._onLocated)}locateRawGraph(t,e){return this._onLocateStart(),this._locateBoundingBox(this.getRawGraphBoundingBox(t),e).then(this._onLocated)}isLocating(){return this._isLocating}getGraphBoundingBox(t=!1){if(t){const e=this.getBoundingBox(this._ogma.getNodes(),!0,t),i=this.getBoundingBox(this._ogma.getEdges(),!1,t);return e.extend(i)}return this._cacheValid||this._updateCache(),this._cachedGraphBoundingBox.clone()}forceInvalidCache(){this._invalidCache()}_updateCache(){this._cacheValid=!0,this._cachedGraphBoundingBox=this.getBoundingBox(this._modules.graph.getNodes()).extend(this.getBoundingBox(this._modules.graph.getEdges()))}getBoundingBox(t,e=!1,i=!1,n){let s;if(s=t.isNode?this._getNodesBoundingBox(t.toList(),e):this._getEdgesBoundingBox(t.toList(),n),i){const r=this._ogma.modules.labels.getTextsBoundingBox(t.isNode?t.toList():null,t.isNode?null:t.toList());s=s.extend(r)}return s}_getNodesBoundingBox(t,e=!1){this._modules.graphics.forceAttributesComputation();const i=this._modules.graphics.getNodeAttributes(),n=[],s=[],r=[],a=[];for(let u=0;u<t.size;++u){const h=t._indexes[u];if(i.excluded.get(h)===0){const c=i.x.get(h),g=i.y.get(h),_=i.radius.get(h),m=2*_;i.scalingMethod.get(h)==="scaled"?r.push(m):a.push(m),e?(n.push(c-_,c+_),s.push(g-_,g+_)):(n.push(c),s.push(g))}}return new So({xValues:n,yValues:s,scaledSizeValues:r,fixedSizeValues:a})}_getEdgesBoundingBox(t,e=!1){return this._getEdgesBoundingBoxInternal(t._indexes,e)}_getEdgesBoundingBoxInternal(t,e=!1,i,n){this._modules.graphics.forceAttributesComputation();const s=this._modules.graphics.getEdgeAttributes(),r=this._modules.graphics.getNodeAttributes(),a={x1:0,y1:0,x2:0,y2:0},u={x:0,y:0},h={minX:0,minY:0,maxX:0,maxY:0},c=[],g=[],_=[],m=[],v=i||r.x,b=n||r.y;for(let x=0;x<t.length;++x){const M=t[x],N=s.source.get(M),O=s.target.get(M),R=s.curvature.get(M),P=v.get(N),F=b.get(N),U=r.scalingMethod.get(N)==="scaled",V=2*r.radius.get(N),Y=v.get(O),K=b.get(O),tt=r.scalingMethod.get(O)==="scaled",j=2*r.radius.get(O);U?_.push(V):m.push(V),tt?_.push(j):m.push(j),e||R===0?(c.push(P,Y),g.push(F,K)):N===O?(J0(P,F,R,V/2,0,a),kp(P,F,a.x1,a.y1,a.x2,a.y2,Y,K,h),c.push(h.minX,h.maxX),g.push(h.minY,h.maxY)):(Fp(P,F,Y,K,R,u),Q0(P,F,u.x,u.y,Y,K,h),c.push(h.minX,h.maxX),g.push(h.minY,h.maxY))}return new So({xValues:c,yValues:g,scaledSizeValues:_,fixedSizeValues:m})}getRawGraphBoundingBox(t){const e=t.nodes.length,i=new Array(e),n=new Array(e),s=new Array(e);for(let r=0;r<e;r++){const a=t.nodes[r].attributes||{};i[r]=a.x||0,n[r]=a.y||0,s[r]=a.radius||5}return new So({xValues:i,yValues:n,scaledSizeValues:s})}_locateBoundingBox(t,e={}){if(isNaN(t.cx))return Promise.resolve();const{padding:i={},easing:n=l4,duration:s=0,maxNodeSizeOnScreen:r=Y1,ignoreZoomLimits:a=!1}=e,u=V1(t,this._modules.dom.getDimensions(),i,r),h=u.x,c=u.y,g=u.zoom,_=g/this._modules.camera.getZoom();return this._moveCamera(h,c,g,s,n,_,a)}_moveCamera(t,e,i,n,s,r,a){const u={duration:n,easing:s,ignoreZoomLimits:a},h=this._modules.camera.setCenter({x:t,y:e},u);return r>1.01||r<.99?this._modules.camera.setZoom(i,u):h}computeConfigForBounds(t,e={}){const{padding:i={},maxNodeSizeOnScreen:n=Y1}=e;return V1(t,this._modules.dom.getDimensions(),i,n)}layoutDataBoundingBox({x:t,y:e,indexes:i}){const n=this._modules.graphics.getNodeAttributes(),s=[],r=[],a=[],u=[],h=new Map,c=new Map;for(let m=0;m<i.length;++m){const v=i[m],b=t[m],x=e[m];h.set(v,b),c.set(v,x);const M=2*n.radius.get(v),N=n.scalingMethod.get(v)==="scaled";s.push(b),r.push(x),N?a.push(M):u.push(M)}const g=this._modules.graph.topology.getAdjacentElements(!1,i,{bothExtremities:!0}),_=this._getEdgesBoundingBoxInternal(g,!1,h,c);return new So({xValues:s,yValues:r,scaledSizeValues:a,fixedSizeValues:u}).extend(_)}isEdgeInPolygon(t,e){return r4(t,e,this._modules.camera.getZoom())}isElementInView(t,{margin:e=0}={}){const{width:i,height:n}=this._modules.camera.getSize(),s={minX:-e,minY:-e,maxX:i+e,maxY:n+e};return t.isNode?this.isNodeInRectangle(t,s):this.isEdgeInRectangle(t,s)}isNodeInRectangle(t,e){if(this._modules.geo.isEnabled()){const i=this._modules.geo.getContainerCoord(t);return VM(i.x,i.y,Number(t.getAttribute("radius")),e)}return o4(t,e,this._modules.camera.getZoom())}isNodeInPolygon(t,e){const i=t.getPositionOnScreen();return Mg(i.x,i.y,e)}isEdgeInRectangle(t,e){return a4(t,e,this._modules.camera.getZoom())}},h4=yh&&typeof navigator<"u"&&"msLaunchUri"in navigator&&xu&&!("documentMode"in document);function d4(t){return h4?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Do():t.deltaY&&t.deltaMode===1?20*-t.deltaY:t.deltaY&&t.deltaMode===2?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var c4=6,f4=class extends li{constructor(){super(...arguments),this._px=0,this._py=0,this._pressX=0,this._pressY=0,this._left=!1,this._middle=!1,this._right=!1,this._clickCounter={left:0,middle:0,right:0},this._buttons={left:!1,middle:!1,right:!1},this._skipNextMove=!1,this._onMouseWheel=t=>{this._isEnabled()&&this._isWheelEnabled()&&(!this._disableWheelUntilMouseDown()||this._modules.dom.hasFocus())&&(t.preventDefault(),t.stopPropagation(),this._applyMouseWheelZoom(t))},this._onMouseMove=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,i=this._modules.position.y,n=e-this._px,s=i-this._py;n===0&&s===0||(this._skipNextMove?this._skipNextMove=!1:Gs(e,i,this._pressX,this._pressY)>=c4&&(this._resetClickCounter(),this._modules.events.fire("mousemoveInternal",{x:e,y:i,dx:n,dy:s,domEvent:this._evt})))},this._onDocumentMouseMove=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,i=this._modules.position.y,n=this._bounds,s=e-this._px,r=i-this._py;(e<0||e>n.width||i<0||i>n.height)&&this._modules.events.fire("documentMouseMove",{x:e,y:i,dx:s,dy:r,domEvent:this._evt})},this._onMouseUp=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,i=this._modules.position.y,n=this._button,s=this._evt;this._buttons[n]=!1,this._clickCounter[this._button]===1?this._modules.events.fire("clickInternal",{button:n,x:e,y:i,domEvent:s}):this._clickCounter[n]>1&&(this._modules.events.fire("doubleclickInternal",{button:n,x:e,y:i,domEvent:s}),this._resetClickCounter(n)),this._modules.events.fire("mouseupInternal",{button:n,x:e,y:i,domEvent:s})},this._onDocumentMouseup=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,i=this._modules.position.y,n=this._button;this._buttons[n]=!1;const s=this._modules.dom;this._modules.events.fire("documentMouseUp",{button:n,x:e,y:i,domEvent:this._evt}),s.removeDirectWindowEventListener("mousemove",this._onDocumentMouseMove),s.removeDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onMouseDown=t=>{if(!this._isEnabled()||!this._setXY(t))return;const e=this._modules.position.x,i=this._modules.position.y,n=this._button,s=this._modules.dom;this._skipNextMove=!0,this._pressX=e,this._pressY=i,this._lastMouseDownTarget=t.target,s.focus(),this._buttons[n]=!0,this._clickCounter[n]+=1;const r=n;this._dbclickTimer=s.setTimeout(()=>{this._resetClickCounter(r,0)},this._getDoubleClickTimer()),this._modules.events.fire("mousedownInternal",{button:n,x:e,y:i,domEvent:this._evt}),s.addDirectWindowEventListener("mousemove",this._onDocumentMouseMove),s.addDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onDrop=t=>{if(!this._isEnabled()||!this._setXY(t))return;t.preventDefault();const{x:e,y:i}=this._modules.camera.screenToGraphCoordinates(this._modules.position);this._modules.events.fire("drop",{domEvent:this._evt,x:e,y:i})}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("mouse.enabled",!0),this._modules.settings.register("mouse.wheelEnabled",!0),this._modules.settings.register("mouse.disableWheelUntilMouseDown",!1),this._modules.settings.register("mouse.doubleClickTimer",500),this._modules.events.register(["mousedownInternal","mouseupInternal","mousemoveInternal","mousewheelInternal","clickInternal","doubleclickInternal","mouseoverInternal","mouseoutInternal","documentMouseUp","documentMouseMove","drop"]),this._modules.dom.afterNextFrame().then(()=>this._initializeListeners())}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get left(){return this._left}get right(){return this._right}get middle(){return this._middle}_isEnabled(){return this._modules.settings.get("mouse.enabled")}_isWheelEnabled(){return this._modules.settings.get("mouse.wheelEnabled")}_disableWheelUntilMouseDown(){return this._modules.settings.get("mouse.disableWheelUntilMouseDown")}_getDoubleClickTimer(){return this._modules.settings.get("mouse.doubleClickTimer")}_resetClickCounter(t,e=0){t?this._clickCounter[t]=e:(this._clickCounter.left=e,this._clickCounter.middle=e,this._clickCounter.right=e),this._modules.dom.clearTimeout(this._dbclickTimer),this._lastMouseDownTarget=null}_setXY(t){const e=this._domElt.getBoundingClientRect();return this._bounds=e,!!e&&(this._evt=t,this._button=v0[t.button],this._px=this._modules.position.x,this._py=this._modules.position.y,this._modules.position.x=t.clientX-e.left,this._modules.position.y=t.clientY-e.top,this._left=this._buttons.left,this._right=this._buttons.right,this._middle=this._buttons.middle,!0)}_applyMouseWheelZoom(t){this._setXY(t)&&this._modules.events.fire("mousewheelInternal",{delta:d4(t),dx:t.deltaX,dy:t.deltaY,x:this._modules.position.x,y:this._modules.position.y,domEvent:this._evt})}_initializeListeners(){const t=this._domElt,e=this._modules.dom;xp&&this._modules.dom.addElementEventListener(document,"contextmenu",n=>{this._lastMouseDownTarget&&n.target!==this._lastMouseDownTarget&&n.preventDefault()}),e.addElementEventListener(t,"contextmenu",n=>{this._setXY(n),this._modules.dom.hasFocus()&&this._modules.settings.get("mouse.enabled")&&n.preventDefault()},!1);const i="onwheel"in t?"wheel":t.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";e.addElementEventListener(t,i,this._onMouseWheel,{passive:!1}),e.addElementEventListener(t,"mousemove",this._onMouseMove),e.addElementEventListener(t,"mouseleave",n=>{if(!this._isEnabled())return;this._modules.dom.blur();const s=t.getBoundingClientRect();n.clientX>=s.left+1&&n.clientX<=s.right-1&&n.clientY>=s.top+1&&n.clientY<=s.bottom-1||this._modules.events.fire("mouseout",{domEvent:this._evt})}),e.addElementEventListener(t,"mousedown",this._onMouseDown),e.addElementEventListener(t,"mouseup",this._onMouseUp),e.addElementEventListener(t,"dragover",n=>{n.preventDefault()}),e.addElementEventListener(t,"drop",this._onDrop)}},g4={doubleTapTimer:500},_4=class extends li{constructor(){super(...arguments),this._pressed=!1,this._addEvent=(t,e,i,n)=>{this._modules.dom.addElementEventListener(t,e,i,n)},this._addWinEvent=(t,e,i,n)=>{this._modules.dom.addDirectWindowEventListener(e,i,n)},this._removeWinEvent=(t,e,i)=>{this._modules.dom.removeDirectWindowEventListener(e,i)}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("touch.enabled",!0),this._modules.events.register(["touchDown","touchUp","touchTap","touchDoubleTap","touchMove","touchStartGesture","touchProgressGesture","touchEndGesture","documentTouchMove","documentTouchUp"]),this._modules.dom.afterNextFrame().then(()=>{this._initialize(this)})}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get pressed(){return this._pressed}_listen(t,e,i){if(eL){if(e==="touchstart")return fD(this._addEvent,t,i);if(e==="touchmove")return _D(this._addWinEvent,t,i);if(e==="touchend")return mD(this._addWinEvent,t,i);if(e==="touchcancel")return gD(this._addWinEvent,t,i)}return this._modules.dom.addElementEventListener(t,e,i)}_initialize(t){let e=0,i=0,n=0,s=0,r=!1,a="left",u=0,h=!1,c=!1,g=0,_=1,m=null,v=null;const b=()=>{this._modules.position.x=e,this._modules.position.y=i,this._pressed=r},x=(F,U)=>{const V=this._domElt.getBoundingClientRect();if(!V||F.touches==null)return null;const[Y,K]=F.touches,tt=Y.clientX-V.left,j=Y.clientY-V.top,lt=K.clientX-V.left,pt=K.clientY-V.top,ft=(tt+lt)/2,ht=(j+pt)/2,W=ft-e,st=ht-i,_t=Gs(tt,j,lt,pt),Vt=_t/_,X=Pc(tt,j,lt,pt),et={dx:W,dy:st,rotation:X-g,scale:Vt};return((Dt,Mt,At,Xt)=>{_=Dt,g=Mt,e=At,i=Xt,b()})(_t,X,ft,ht),et},M=F=>{if(F.touches&&F.touches.length===2&&c){const U=x(F);if(U){const{dx:V,dy:Y,rotation:K,scale:tt}=U;this._modules.events.fire("touchProgressGesture",{dx:V,dy:Y,rotation:K,scale:tt,x:e,y:i,domEvent:m,button:a})}}},N=F=>{if(a=v0[F.button],!F.touches)return!1;if(F.touches.length!==1)return r=!1,F.touches.length>1&&this._modules.events.fire("touchUp",{x:e,y:i,domEvent:m,button:a}),!1;const U=this._domElt.getBoundingClientRect();return U&&(n=e,s=i,e=F.touches[0].clientX-U.left|0,i=F.touches[0].clientY-U.top|0,r=!0,m=F,b()),!0},O=()=>{u=0,this._modules.dom.clearTimeout(v)},R=F=>{if(F.preventDefault(),!F.touches)return;if(F.touches.length!==2&&c&&(c=!1,this._modules.events.fire("touchEndGesture",{domEvent:m})),N(F),F.touches.length===0){const V={x:e,y:i,domEvent:m,button:a};u===1&&this._modules.events.fire("touchTap",V),u>1&&(this._modules.events.fire("touchDoubleTap",V),O()),this._modules.events.fire("touchUp",V)}const U=bu().documentElement;fA(this._removeWinEvent,U,"touchmove",this._onMove),fA(this._removeWinEvent,U,"touchend",this._onEnd)},P=F=>{M(F),h?h=!1:(O(),N(F)&&this._modules.events.fire("touchMove",{x:e,y:i,dx:e-n,dy:i-s,domEvent:m,button:a}))};this._listen(this._domElt,"touchstart",F=>{if(!F.touches)return;F.touches.length!==2||c||(_=1,x(F)&&(c=!0,this._modules.events.fire("touchStartGesture",{domEvent:m}))),N(F)&&(this._modules.dom.focus(),this._modules.events.fire("touchDown",{x:e,y:i,domEvent:m,button:a}),u+=1,v=this._modules.dom.setTimeout(O,g4.doubleTapTimer),h=!0);const U=bu().documentElement;this._onMove=this._listen(U,"touchmove",P),this._onEnd=this._listen(U,"touchend",R)})}},m4=class{getHoveredElement(){return this.modules.captor.getPointedElement()}getPointerInformation(){return this.modules.captor.getCursorInformation()}},p4=class{getNodesByClassName(t,e){return this.modules.classes.getClassByName(t,!0).getNodes(e)}getEdgesByClassName(t,e){return this.modules.classes.getClassByName(t,!0).getEdges(e)}},fb={};kg(fb,{gexf:()=>YM,gexfFromUrl:()=>gb,graphml:()=>qM,graphmlFromUrl:()=>QM,janus:()=>XM,json:()=>ZM,jsonFromUrl:()=>_b,mtx:()=>y4,mtxFromUrl:()=>v4,neo4j:()=>WM});var Hl=u0(yw()),YM=t=>Promise.resolve(Hl.gexf(t)),gb=t=>Uc(t).then(e=>Hl.gexf(e)),XM=t=>Promise.resolve(Hl.janus(t)),ZM=(t,e)=>Promise.resolve(Hl.json(t,e)),_b=(t,e)=>Uc(t).then(i=>Hl.json(i,e)),WM=t=>Promise.resolve(Hl.neo4j(t)),qM=(t,e)=>Promise.resolve(Hl.graphml(t,e)),QM=(t,e)=>Uc(t).then(i=>Hl.graphml(i,e)),y4=t=>Promise.resolve(Hl.mtx(t)),v4=t=>Uc(t).then(e=>Hl.mtx(e)),x4=class extends jn{constructor(){super(...arguments),this.wait=t=>new Promise(e=>setTimeout(e,t)),this.initRandomGraph=t=>this._ogma.generate.random(t).then(this._ogma.setGraph).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.initGrid=t=>{const e=Math.ceil(Math.sqrt(t));return this._ogma.generate.grid({rows:e,columns:e}).then(i=>this._ogma.setGraph(i)).then(()=>this._ogma.view.locateGraph())},this.initLine=t=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}},{id:1,attributes:t?{x:0,y:50}:{x:50,y:0}}],edges:[{id:0,source:1,target:0}]}),this._ogma.view.locateGraph()),this.initSingleNode=()=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}}],edges:[]}),this._ogma.view.locateGraph()),this.initContinuousRenderLoop=({triggerKey:t="r",start:e=!0}={})=>{let i=e;const n=()=>{i&&this._ogma.modules.dom.beforeNextFrame().then(n)};document.addEventListener("keydown",({key:s})=>{s===t&&(i=!i,n())}),n()},this.appendToBody=()=>{const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.bottom="0",t.style.right="0",document.body.appendChild(t),this._ogma.setContainer(t)},this.loadFile=t=>(t.endsWith(".gexf")?gb(t):_b(t)).then(e=>this._ogma.setGraph(e)).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.enableLasso=t=>{this._ogma.events.on("dragStart",()=>{this._ogma.keyboard.isKeyPressed("ctrl")&&this._ogma.tools.lasso.enable(t)})},this.randomizeGraph=({minX:t=0,minY:e=0,maxX:i=500,maxY:n=500}={})=>this._ogma.getNodes().setAttributes(this._ogma.getNodes().map(()=>({x:t+Math.random()*(i-t),y:e+Math.random()*(n-e)})))}},b4=class{setContainer(t){this.modules.dom.setContainer(t)}getContainer(){return this.modules.dom.getContainer()}},E4=class extends jn{constructor(){super(...arguments),this.once=(t,e)=>(this._ogma.modules.events.once(t,e),this),this.removeListener=t=>{this._ogma.modules.events.off(t)},this.onNodesAdded=t=>(this._ogma.events.on("addNodes",t),this._ogma),this.onBeforeNodesRemoved=t=>(this._ogma.events.on("beforeRemoveNodes",t),this._ogma),this.onNodesRemoved=t=>(this._ogma.events.on("removeNodes",t),this._ogma),this.onEdgesAdded=t=>(this._ogma.events.on("addEdges",t),this._ogma),this.onBeforeEdgesRemoved=t=>(this._ogma.events.on("beforeRemoveEdges",t),this._ogma),this.onEdgesRemoved=t=>(this._ogma.events.on("removeEdges",t),this._ogma),this.onGraphCleared=t=>(this._ogma.events.on("clearGraph",t),this._ogma),this.onNodesClassAdded=(t,e)=>(this._ogma.modules.classes.onNodeClassAdded(t,e),this._ogma),this.onNodesClassRemoved=(t,e)=>(this._ogma.modules.classes.onNodeClassRemoved(t,e),this._ogma),this.onEdgesClassAdded=(t,e)=>(this._ogma.modules.classes.onEdgeClassAdded(t,e),this._ogma),this.onEdgesClassRemoved=(t,e)=>(this._ogma.modules.classes.onEdgeClassRemoved(t,e),this._ogma),this.onNodeDragStart=t=>(this._ogma.events.on("nodesDragStart",t),this._ogma),this.onNodeDragProgress=t=>(this._ogma.events.on("nodesDragProgress",t),this._ogma),this.onNodeDragEnd=t=>(this._ogma.events.on("nodesDragEnd",t),this._ogma),this.onDrop=t=>(this._ogma.events.on("drop",t),this._ogma),this.onNodesSelected=t=>this.onNodesClassAdded(ss,t),this.onNodesUnselected=t=>this.onNodesClassRemoved(ss,t),this.onEdgesSelected=t=>this.onEdgesClassAdded(ss,t),this.onEdgesUnselected=t=>this.onEdgesClassRemoved(ss,t),this.onNodeDataChange=t=>(this._ogma.events.on("updateNodeData",t),this._ogma),this.onEdgeDataChange=t=>(this._ogma.events.on("updateEdgeData",t),this._ogma),this.onAnimate=t=>(this._ogma.events.on("animate",t),this._ogma),this.onMouseMove=t=>(this._ogma.events.on("mousemove",t),this._ogma),this.onMouseButtonDown=t=>(this._ogma.events.on("mousedown",t),this._ogma),this.onMouseButtonUp=t=>(this._ogma.events.on("mouseup",t),this._ogma),this.onClick=t=>(this._ogma.events.on("click",t),this._ogma),this.onDoubleClick=t=>(this._ogma.events.on("doubleclick",t),this._ogma),this.onMouseWheel=t=>(this._ogma.events.on("mousewheel",t),this._ogma),this.onHover=t=>(this._ogma.events.on("mouseover",t),this._ogma),this.onUnhover=t=>(this._ogma.events.on("mouseout",t),this._ogma),this.onDragStart=t=>(this._ogma.events.on("dragStart",t),this._ogma),this.onDragProgress=t=>(this._ogma.events.on("dragProgress",t),this._ogma),this.onDragEnd=t=>(this._ogma.events.on("dragEnd",t),this._ogma),this.onGestureStart=t=>(this._ogma.events.on("gestureStart",t),this._ogma),this.onGestureProgress=t=>(this._ogma.events.on("gestureProgress",t),this._ogma),this.onGestureEnd=t=>(this._ogma.events.on("gestureEnd",t),this._ogma),this.onRendererStateChange=t=>(this._ogma.events.on("rendererStateChange",t),this._ogma),this.onZoomProgress=t=>(this._ogma.events.on("zoom",t),this._ogma),this.onViewChanged=t=>(this._ogma.events.on("viewChanged",t),this._ogma),this.onNodesConnected=t=>(this._ogma.events.on("connectNodes",t),this._ogma),this.onGeoModeEnabled=t=>(this._ogma.events.on("geoEnabled",t),this._ogma),this.onGeoModeDisabled=t=>(this._ogma.events.on("geoDisabled",t),this._ogma),this.onGeoModeLoaded=t=>(this._ogma.events.on("geoLoaded",t),this._ogma),this.onLayoutStart=t=>(this._ogma.events.on("layoutStart",t),this._ogma),this.onLayoutComplete=t=>(this._ogma.events.on("layoutEnd",t),this._ogma),this.onLayoutComputed=t=>(this._ogma.events.on("layoutComputed",t),this._ogma),this.onTooltipShown=t=>(this._ogma.events.on("tooltipShow",t),this._ogma),this.onTooltipHidden=t=>(this._ogma.events.on("tooltipHide",t),this._ogma),this.onTransformationEnabled=t=>(this._ogma.events.on("transformationEnabled",t),this._ogma),this.onTransformationDisabled=t=>(this._ogma.events.on("transformationDisabled",t),this._ogma),this.onTransformationSetIndex=t=>(this._ogma.events.on("transformationSetIndex",t),this._ogma),this.onTransformationDestroyed=t=>(this._ogma.modules.events.on("transformationDestroyed",t),this._ogma),this.onTransformationRefreshed=t=>(this._ogma.events.on("transformationRefresh",t),this._ogma)}on(t,e){return this._ogma.modules.events.on(t,e),this}off(t){return this._ogma.modules.events.off(t),this}onKeyPress(t,e){return this._ogma.modules.keyboard.onKeyPress(t,e),this._ogma}};function lp(t,e,i){if(t!=null)return Array.isArray(t)?t[0]:t}function Gx(t){return t==null?null:typeof t=="string"||typeof t=="number"?`${t}`:t&&Gx(t.content)}function S4(t){if(t!=null)return typeof t=="string"?t:t.style||"line"}var A4=["color","radius","shape","text.content","x","y"],T4=["color","width","shape.body","text.content"];function w4(t){return t!=="all"?{nodes:["x","y"],edges:[]}:{nodes:A4,edges:T4}}function L4(t,{nodes:e,edges:i}){const n=t.getOriginalAttributes();return{nodes:e.reduce((s,r)=>(s[r.getId()]={x:n.nodes.x.get(r._index),y:n.nodes.y.get(r._index),color:lp(n.nodes.color.get(r._index)),radius:n.nodes.radius.get(r._index),shape:n.nodes.shape.get(r._index),text:{content:n.nodes.text.content.get(r._index)}},s),{}),edges:i.reduce((s,r)=>(s[r.getId()]={color:lp(n.edges.color.get(r._index)),width:n.edges.width.get(r._index),shape:{type:n.edges.shape.body.get(r._index)},text:{content:n.edges.text&&n.edges.text.content&&n.edges.text.content.get(r._index)}},s),{})}}function C4(t){return{nodes:t.nodes.map(({id:e,attributes:i={},data:n})=>{const{color:s,radius:r,shape:a,text:u,x:h,y:c}=i;return{id:e,x:h,y:c,color:lp(s),size:r,shape:a,text:Gx(u),data:n}}),edges:t.edges.map(({id:e,source:i,target:n,attributes:s={},data:r})=>{const{color:a,width:u,text:h,shape:c}=s;return{id:e,source:i,target:n,color:lp(a),size:u,shape:S4(c),text:Gx(h),data:r}})}}function X1(t){return t instanceof al?t.getId():t}function Z1(t){return t instanceof vh?t.getId():t}function W1(t){return t instanceof wu?t.getId():t instanceof al?[t.getId()]:Ir(t)?t.map(X1):[X1(t)]}function q1(t){return t instanceof Ed?t.getId():t instanceof vh?[t.getId()]:Ir(t)?t.map(Z1):[Z1(t)]}var mb="visible";function M4(t,e){return t?W1(t):typeof e=="object"?W1(e.nodes):e||mb}function N4(t,e){return t?q1(t):typeof e=="object"?q1(e.edges):e||mb}function KM(t,e,i,n){const s=M4(e,n),r=N4(i,n);return{nodes:t.getNodes(s),edges:t.getEdges(r)}}function jM(t,{nodeAttributes:e,edgeAttributes:i,nodes:n,edges:s,filter:r,nodeData:a,edgeData:u}){const h=KM(t,n,s,r);return{nodes:h.nodes.toJSON({attributes:e,data:a}),edges:h.edges.toJSON({attributes:i,data:u})}}function Hp(t,e,{styles:i,nodes:n,edges:s,filter:r,nodeData:a,edgeData:u}){const{nodes:h,edges:c}=w4(i),g=jM(t,{nodeAttributes:h,edgeAttributes:c,nodes:n,edges:s,filter:r,nodeData:a,edgeData:u});if(i==="original"){const _=L4(e,KM(t,n,s,r));for(const m of g.nodes)m.id!=null&&(m.attributes=_[m.id]);for(const m of g.edges)m.id!=null&&(m.attributes=_[m.id])}return i==="all"&&g.edges.forEach(({source:_,target:m,attributes:v})=>{if(v){const b=t.getNode(_);if(v.color==="source"&&b){const M=b.getAttribute("color");v.color=Array.isArray(M)?M[0]:M}const x=t.getNode(m);if(v.color==="target"&&x){const M=x.getAttribute("color");v.color=Array.isArray(M)?M[0]:M}}}),C4(g)}function R4(t,e){for(let i=0;i<e.length;++i){if(t==null)return;t=t[e[i]]}return t}function O4(t,e,i){for(let n=0;n<e.length-1;++n){const s=e[n];let r=t[s];r===void 0&&(r={},t[s]=r),t=r}t[e[e.length-1]]=i}function I4(t){const e={...t[0]};for(const i of t)for(const n of Object.keys(i))n in e||(e[n]=void 0);return Object.keys(e)}function Q1(t,e){return t==null||Array.isArray(t)&&!t.length?e:t}function P4(t){return typeof t=="string"}function z4(t,e,i,n,s){const r=e==="edges",a={};return t.forEach((u,h)=>{const c=s.get(h),g=Yv(Q1(i(c),e));if(!g.every(P4))throw Error(`The tab ${e} function returned an invalid value.`);const _=Yv(n(u.data,g));g.forEach((m,v)=>{const b=Q1(_[v],{}),x=Up({internal___id:u.id,...r?{internal___source:u.source,internal___target:u.target}:{},...b}).reduce((M,{path:N,value:O})=>(M[N.join(".")]=O,M),{});a[m]=a[m]||[],a[m].push(x)})}),a}function D4(t){if(!t.length)return[];const e=I4(t),i=[e];for(const n of t)i.push(e.map(s=>n[s]));return i[0]=i[0].map(n=>n.replace("internal___","")),i}function k4(t,e,i){const n=new bC;let s=e?1:3;const r=[];for(let u=0;u<t.length;++u){const h=t[u],c=new Array(s);let g=h.data;if(i){const m={};i.forEach(v=>{const b=pd(v),x=R4(g,b);O4(m,b,x)}),g=m}const _=Up(g);c[0]=h.id,e||(c[1]=h.source,c[2]=h.target);for(let m=0;m<_.length;++m){const{path:v,value:b}=_[m];v.length&&(n.has(v)?c[n.get(v)]=b:(n.set(v,s),c[s]=b,s++))}r.push(c)}const a=[];return a.push("id"),e||(a.push("source"),a.push("target")),n.keys().forEach(u=>a.push(u[u.length-1])),r.unshift(a),r.forEach(u=>u.length=s),r}var F4=/[=+\-@|%]/,B4=t=>t.length>0&&F4.test(t[0])?`'${t=t.replace("|","|")}`:t;function JM(t){return t===void 0?"":t instanceof Date?t.toISOString():B4(""+t)}var U4={what:void 0,dataProperties:void 0,separator:",",textSeparator:'"',download:!0,filename:"graph.csv",filter:"visible",nodes:void 0,edges:void 0,nodeData:ll,edgeData:ll,styles:"none"};function G4(t,e){const{what:i,dataProperties:n,nodes:s,edges:r,separator:a,textSeparator:u,download:h,nodeData:c,edgeData:g,filename:_,filter:m}=ua(typeof e=="string"?{what:e}:e,U4),v=Hp(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:s,edges:r,filter:m,nodeData:c,edgeData:g});try{const b=H4(v,{what:i,separator:a,textSeparator:u,dataProperties:n});return h&&Ah(b,_,"text","text/csv"),Promise.resolve(b)}catch(b){return Promise.reject(b)}}function H4(t,{what:e,separator:i,textSeparator:n,dataProperties:s}){const r=new RegExp(n,"g");if(n&&n!=='"'&&n!=="'")throw new TypeError(`Invalid argument :"textSeparator" is not single-quote or double-quote, was ${n}`);if(e!=="nodes"&&e!=="edges")throw new TypeError('missing argument: "what": should have value "nodes" or "edges"');const a=e==="nodes";return k4(a?t.nodes:t.edges,a,s).map(u=>u.map(h=>function(g){return n+JM(g).replace(r,`${n}${n}`).replace(/\n/g,"\\n").replace(/\r/g,"")+n}(h))).map(u=>u.join(i)).join(`
`)}var uc=t=>Math.round(255*t);function K1(t,e){if(e==="integer"&&typeof t=="number"){if(t%1!=0)return"float"}else if(typeof t!="number")return typeof t=="boolean"?"boolean":"string";return e}var Hx=t=>typeof t=="object"&&t!==null&&t.constructor===Object;function Vx(t,e={}){return Bl(t,(i,n)=>{Hx(i)?Vx(i,e):e[n]=i}),e}var V4={creator:void 0,description:void 0,styles:"all",download:!0,filename:"graph.gexf",nodes:void 0,edges:void 0,nodeData:t=>t,edgeData:t=>t,filter:"visible"};function Y4(t,e={}){const{styles:i,nodes:n,edges:s,download:r,filename:a,creator:u,description:h,filter:c,nodeData:g,edgeData:_}=ua(e,V4),m=X4(Hp(t.modules.graph,t.modules.individualAttributes,{styles:i,nodes:n,edges:s,filter:c,nodeData:g,edgeData:_}),{creator:u,description:h});return r&&Ah(m,a,"text","text/xml"),Promise.resolve(m)}function X4(t,e){const i=CC(),n={},s={};let r,a=0,u=0;const h=i.createElement("gexf");h.setAttribute("xmlns","http://www.gexf.net/1.2draft"),h.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),h.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),h.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),h.setAttribute("version","1.2");const c=i.createElement("meta");if(c.setAttribute("lastmodifieddate",ww()),e.creator){const x=i.createElement("creator");r=i.createTextNode(""+e.creator),x.appendChild(r),c.appendChild(x)}if(e.description){const x=i.createElement("description");r=i.createTextNode(""+e.description),x.appendChild(r),c.appendChild(x)}const g=i.createElement("graph");g.setAttribute("mode","static");const _=i.createElement("nodes");t.nodes.forEach(x=>{const M=i.createElement("node");if(M.setAttribute("id",String(x.id)),x.text&&M.setAttribute("label",mc(x.text)),Hx(x.data)){const O=Vx(x.data),R=i.createElement("attvalues");Object.keys(O).forEach(P=>{P in n||(n[P]={id:a,type:"integer"},a++);const F=O[P];n[P].type=K1(F,n[P].type);const U=i.createElement("attvalue");U.setAttribute("for",n[P].id),U.setAttribute("value",mc(F)),R.appendChild(U)}),M.appendChild(R)}if(x.color){const O=io(x.color);if(O){const R=i.createElement("viz:color");R.setAttribute("r",uc(O[0])),R.setAttribute("g",uc(O[1])),R.setAttribute("b",uc(O[2])),R.setAttribute("a",O[3]),M.appendChild(R)}}const N=i.createElement("viz:position");if(N.setAttribute("x",x.x),N.setAttribute("y",-x.y),M.appendChild(N),x.size){const O=i.createElement("viz:size");O.setAttribute("value",x.size),M.appendChild(O)}_.appendChild(M)});const m=i.createElement("attributes");m.setAttribute("class","node"),Object.keys(n).forEach(x=>{const M=i.createElement("attribute");M.setAttribute("id",n[x].id),M.setAttribute("title",x),M.setAttribute("type",n[x].type),m.appendChild(M)});const v=i.createElement("edges");t.edges.forEach(x=>{const M=i.createElement("edge");if(M.setAttribute("id",x.id.toString()),M.setAttribute("source",x.source),M.setAttribute("target",x.target),x.size&&M.setAttribute("weight",x.size),x.text&&M.setAttribute("label",mc(x.text)),Hx(x.data)){const N=Vx(x.data),O=i.createElement("attvalues");Object.keys(N).forEach(R=>{R in s||(s[R]={id:u,type:"integer"},u++);const P=N[R];s[R].type=K1(P,s[R].type);const F=i.createElement("attvalue");F.setAttribute("for",s[R].id),F.setAttribute("value",mc(P)),O.appendChild(F)}),M.appendChild(O)}if(x.color){const N=io(x.color);if(N){const O=i.createElement("viz:color");O.setAttribute("r",uc(N[0])),O.setAttribute("g",uc(N[1])),O.setAttribute("b",uc(N[2])),O.setAttribute("a",N[3]),M.appendChild(O)}}if(x.size){const N=i.createElement("viz:size");N.setAttribute("value",x.size),M.appendChild(N)}v.appendChild(M)});const b=i.createElement("attributes");return b.setAttribute("class","edge"),Object.keys(s).forEach(x=>{const M=i.createElement("attribute");M.setAttribute("id",s[x].id),M.setAttribute("title",x),M.setAttribute("type",s[x].type),b.appendChild(M)}),g.appendChild(m),g.appendChild(b),g.appendChild(_),g.appendChild(v),h.appendChild(c),h.appendChild(g),i.appendChild(h),`<?xml version="1.0" encoding="UTF-8"?>${i.serialize()}`}var Z4={graphId:"G",directedEdges:!0,styles:"all",download:!0,filename:"graph.graphml",nodes:void 0,edges:void 0,nodeData:t=>t,edgeData:t=>t,filter:"visible"};function W4(t,e){const{styles:i,nodes:n,edges:s,download:r,filename:a,graphId:u,directedEdges:h,filter:c,nodeData:g,edgeData:_}=ua(e,Z4),m=q4(Hp(t.modules.graph,t.modules.individualAttributes,{styles:i,nodes:n,edges:s,filter:c,nodeData:g,edgeData:_}),{graphId:u,directedEdges:h,noStyles:i==="none"});return r&&Ah(m,a,"text","text/xml"),Promise.resolve(m)}function q4(t,e){const i=MC();function n(m,v,b,x,M){b=b||{};const N=i.createElement(v);for(const O in b){if(!Object.prototype.hasOwnProperty.call(b,O))continue;const R=b[O];R!==void 0&&N.setAttribute(O,R)}return(x!==void 0||M)&&(Object.prototype.toString.call(x)==="[object Object]"&&(x=JSON.stringify(x)),N.appendChild(i.createTextNode(x))),m.appendChild(N),N}const s=["id","source","target"],r=["size","x","y","shape","text","color"],a={size:{for:"all",type:"double"},x:{for:"node",type:"double"},y:{for:"node",type:"double"},shape:{for:"all",type:"string"},color:{for:"all",type:"string"},r:{for:"all",type:"int"},g:{for:"all",type:"int"},b:{for:"all",type:"int"},a:{for:"all",type:"double"},text:{for:"all",type:"string"}};e.noStyles&&(delete a.color,delete a.r,delete a.g,delete a.b,delete a.a,delete a.shape,r.pop());const u=[],h=[];function c(m,v){const b={id:m.id};r.forEach(x=>{let M=m[x];x==="y"&&M&&(M=-parseFloat(M)),M!==void 0&&(b[(v==="edge"?"edge_":"")+x]=M,x==="color"&&function(O,R){const P=io(R);P&&(O.r=P[0],O.g=P[1],O.b=P[2])}(b,M))}),Bl(m.data||{},(x,M)=>{r.indexOf(M)===-1&&s.indexOf(M)===-1&&(a[M]?a[M].for!==v&&(a[M].for="all"):a[M]={for:v,type:"string"},b[M]=x)}),v==="edge"?(b.source=m.source,b.target=m.target,h.push(b)):u.push(b)}t.nodes.forEach(m=>c(m,"node")),t.edges.forEach(m=>c(m,"edge"));const g=n(i,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});Bl(a,(m,v)=>{m.for!=="node"&&m.for!=="all"||n(g,"key",{"attr.name":v,"attr.type":m.type,for:"node",id:v}),m.for!=="edge"&&m.for!=="all"||n(g,"key",{"attr.name":v,"attr.type":m.type,for:"edge",id:"edge_"+v})}),n(g,"key",{id:"nodegraphics",for:"node","yfiles.type":"nodegraphics","attr.type":"string"}),n(g,"key",{id:"edgegraphics",for:"edge","yfiles.type":"edgegraphics","attr.type":"string"});const _=n(g,"graph",{edgedefault:e.directedEdges||e.directedEdges===void 0?"directed":"undirected",id:e.graphId?e.graphId:"G","parse.nodes":t.nodes.length,"parse.edges":t.edges.length,"parse.order":"nodesfirst"});return u.forEach(m=>{const v=n(_,"node",{id:m.id});(function(x,M){const N=n(x,"data",{key:"nodegraphics"}),O=n(N,"y:ShapeNode");n(O,"y:Geometry",{x:M.x,y:M.y,width:M.size,height:M.size}),e.noStyles||n(O,"y:Fill",{color:bx(M.color),transparent:!1}),n(O,"y:NodeLabel",null,M.text||""),n(O,"y:Shape",{type:M.shape})})(v,m),Bl(m,(b,x)=>{s.indexOf(x)===-1&&n(v,"data",{key:x},b,!0)})}),h.forEach(m=>{const v=n(_,"edge",{id:m.id,source:m.source,target:m.target});(function(x,M){const N=n(x,"data",{key:"edgegraphics"}),O=n(N,"y:PolyLineEdge");n(O,"y:LineStyle",{type:M.edge_type,color:e.noStyles?void 0:bx(M.edge_color),width:M.edge_size}),n(O,"y:EdgeLabel",null,M.edge_label)})(v,m),Bl(m,(b,x)=>{s.indexOf(x)===-1&&n(v,"data",{key:x},b,!0)})}),`<?xml version="1.0" encoding="UTF-8"?>
${nb(i)}`}var Q4={nodeAttributes:["x","y","color","radius","shape","text"],edgeAttributes:["color","width","text"],nodeData:ll,edgeData:ll,filter:"visible",pretty:!1,download:!0,filename:"graph.json",anonymize:!1};function K4(t,e={}){e.anonymize&&(e={nodeAttributes:"all",edgeAttributes:"all",nodeData:km,edgeData:km,filter:e.filter||"all",download:e.download,pretty:e.pretty,filename:e.filename});const{nodeAttributes:i,edgeAttributes:n,nodeData:s,edgeData:r,filter:a,pretty:u,download:h,filename:c}=ua(e,Q4),g=jM(t.modules.graph,{nodeAttributes:i,edgeAttributes:n,filter:a,nodeData:s,edgeData:r}),_=u?JSON.stringify(g,null," "):JSON.stringify(g);return h&&Ah(_,c,"text","application/json"),Promise.resolve(g)}function j4(t,e){return t.getBoundingBox().computeForZoom(e).extend(So.fromValues(t.getAttribute("x"),t.getAttribute("y"),t.map(i=>i.getAttribute("radius")+i.getAttribute("innerStroke.width")+i.getAttribute("outerStroke.width"))))}function J4(t,e,i){const n=e.view.graphToScreenCoordinates(i.bottomLeft()),s=e.view.graphToScreenCoordinates(i.topRight()),r=Math.abs(s.x-n.x),a=Math.abs(s.y-n.y),u=Math.min(t.width/r,t.height/a);t.width=r*u,t.height=a*u}function $M(t,e={}){const i=t.view.get(),n=typeof e.margin=="number"?e.margin:0,s={pixelRatio:e.pixelRatio||Do(),angle:0,backgroundColor:null,zoom:0,x:0,y:0,width:0,height:0,hideImages:!1,renderBackground:!0,isBufferDisplayable:Dm};if(e.width&&e.height?(s.width=e.width,s.height=e.height):(s.width=i.width,s.height=i.height),e.clip)s.zoom=i.zoom,s.x=i.x,s.y=i.y;else{const r=j4(t.getNodes(e.filter),i.zoom);if(e.texts){const a=t.modules.labels.getTextsBoundingBox();a.isValid()&&r.extend(a)}e.width!=null&&isFinite(e.width)&&e.height!=null&&isFinite(e.height)||J4(s,t,r),s.width=Math.max(s.width,2*n),s.height=Math.max(s.height,2*n),s.x=r.cx,s.y=r.cy,s.zoom=Math.min((s.width-2*n)/r.width,(s.height-2*n)/r.height)}return t.modules.geo.isEnabled()?s.backgroundColor=null:e.background!==void 0&&(s.backgroundColor=e.background),s}function Yx(t,e,i,n,s=!1){const r={...i,hideImages:s,angle:i.angle||0,currentTime:eo(),isBufferDisplayable:h=>e.texts||!sC(h),bentEnable:!1,bentVertical:!1},a={};if(e.badges===!1){const h={text:null,image:null};a.badges={topLeft:h,topRight:h,bottomRight:h,bottomLeft:h}}const u=t.styles.getClass(od);return u&&u.update({nodeAttributes:a}),t.modules.graphics.export(n,r,e.filter||mb,e)}var cm=t=>({download:!0,filter:"visible",filename:`graph.${t}`,clip:!1,margin:10,width:void 0,height:void 0,background:null,badges:!0,legend:void 0,texts:!0,preventOverlap:!0,images:!0,textWatermark:{content:"",fontFamily:"Arial",fontSize:48,fontStyle:void 0,fontColor:"red",repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageWatermark:{url:void 0,width:void 0,height:void 0,repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageCrossOrigin:void 0,layers:!0,pixelRatio:void 0}),$4={png:cm("png"),jpg:cm("jpg"),tiff:cm("tiff"),gif:cm("gif")};function t5(t){const{canvas:e,parameters:i}=t;return i.textWatermark.content&&j1(e,i.textWatermark,l5,u5),i.imageWatermark.url?f2(i.imageWatermark.url).then(n=>(n&&(i.imageWatermark.content=n,j1(e,i.imageWatermark,d5,h5)),t)):t}function e5(t){const{ogma:e,canvas:i,parameters:n}=t,s=e.modules.legend;let r=null;return n.legend===void 0&&(r=!!s.enabled()&&s.getCurrentOptions()),n.legend===!0&&(r={}),r&&s.exportOnCanvas(i,r,t.parameters.pixelRatio),t}function i5(t){const{canvas:e,parameters:i,view:n}=t;if(!n.renderBackground)return t;n.renderBackground=!1;const s=e.getContext("2d");return s.fillStyle=i.background,s.fillRect(0,0,e.width,e.height),t}function n5(t){const{ogma:e,view:i}=t;return e.modules.geo.isEnabled()?e.modules.geo.exportBackground(i).then(n=>{const s=i.width*i.pixelRatio,r=i.height*i.pixelRatio,a=Pr(s,r),u=a.getContext("2d");return u.drawImage(n,(s-n.width)/2,(r-n.height)/2),u.drawImage(t.canvas,0,0),t.canvas=a,t}):t}function s5(t){const{ogma:e,view:i,canvas:n,parameters:s}=t;return s.layers?e.modules.layers.export({view:i,canvas:n,below:!0}).then(()=>t):t}function r5(t){const{ogma:e,view:i,canvas:n,parameters:s}=t;return s.layers?e.modules.layers.export({view:i,below:!1,canvas:n}).then(()=>t):t}function o5(t){const{ogma:e,parameters:i,canvas:n,view:s}=t,r=n.getContext("2d");return Yx(e,i,s,"canvas",!i.images).then(a=>{try{const u=a.getContext("2d");if(!u)throw new Error("Failed to render graph");return u.getImageData(0,0,1,1),r.drawImage(a,0,0,n.width,n.height),t}catch(u){return mu(u),Yx(e,i,s,"canvas",!0).then(h=>(r.drawImage(h,0,0,n.width,n.height),t))}})}function a5({canvas:t,parameters:e,type:i}){const n=t.toDataURL("image/"+i);return e.download&&Ah(n,e.filename,"dataURL","image/"+i),n}function fm(t,e,i){const n=ua(e,$4[i]);n.filename.endsWith(i)||(n.filename+="."+i),n.background===null&&(n.background=t.modules.graphics.getTransparentBackgroundColor());const s=$M(t,n);n.pixelRatio=s.pixelRatio;const r=Pr(s.width*s.pixelRatio,s.height*s.pixelRatio),a={ogma:t,parameters:n,canvas:r,view:s,type:i};return Promise.resolve().then(()=>a).then(i5).then(n5).then(s5).then(o5).then(r5).then(t5).then(e5).then(a5).then(u=>(t.modules.events.fire("afterImageExport"),u))}function l5(t,e,i,n){t.textAlign="center",t.textBaseline="middle",t.fillText(e,i,n)}function u5(t,e,i){return{width:t.measureText(e).width,height:i}}function h5(t,e,i,n,s){return{width:n===void 0?e.width:n,height:s===void 0?e.height:s}}function d5(t,e,i,n,s,r){t.drawImage(e,i-s/2,n-r/2,s,r)}function j1(t,e,i,n){if(!e)return;if(typeof e!="object")e={content:e};else if(!e.content)return;const{fontFamily:s,fontSize:r,fontStyle:a,fontColor:u,repeat:h,alpha:c,space:g,content:_}=e;let m=e.angle;const v=t.getContext("2d"),b=t.width,x=t.height,M=e.x===void 0?b/2:e.x,N=e.y===void 0?x/2:e.y,O=e.height,R=e.width;m=m/180*Math.PI,Eh(v,s,r,a),v.fillStyle=u,v.globalAlpha=c;const P=n(v,_,r,R,O);if(h){const F=P.width+g,U=P.height+g,V=Math.sqrt(b*b+x*x);v.save(),v.translate(0,0),v.rotate(m);for(let Y=0;Y<V;Y+=F)for(let K=0;K<V;K+=U)i(v,_,Y,K,P.width,P.height),K!==0&&i(v,_,Y,-K,P.width,P.height);v.restore()}else v.save(),v.translate(M,N),v.rotate(m),i(v,_,0,0,P.width,P.height),v.restore()}var c5={download:!0,filename:"graph.svg",width:void 0,height:void 0,background:null,texts:!0,preventOverlap:!0,groupSemantically:!0,images:!0,badges:!0,embedFonts:!1,layers:!0,clip:!1,margin:10,prefix:"ogma"};function f5(t,e){const i=ua(e,c5),{background:n,filename:s,download:r,layers:a}=i,u=t.modules.graphics;n===null&&(i.background=u.getTransparentBackgroundColor());const h=$M(t,i);return Yx(t,i,h,"svg",!i.images).then(c=>(c.removeAttribute("pointer-events"),c.setAttribute("version","1.1"),c.setAttributeNS(Kv,"xmlns",p0),c.setAttributeNS(Kv,"xmlns:xlink",c2),c)).then(c=>i.groupSemantically?_5(t,c,i):c).then(c=>p5(c,i)).then(c=>g5(t,h,c)).then(c=>J1(t,h,c,a,!0)).then(c=>J1(t,h,c,a,!1)).then(c=>(t.modules.events.fire("afterImageExport"),c)).then(c=>{const g=`<?xml version="1.0" encoding="utf-8"?>${nb(c)}`;return r&&Ah(g,s,"text","image/svg+xml"),g})}function g5(t,e,i){return t.modules.geo.isEnabled()?t.modules.geo.exportBackground({...e,pixelRatio:1}).then(n=>{const s=un("image",{width:n.width,height:n.height,x:0,y:0,href:n.toDataURL()});return i.insertBefore(s,i.children[0]),i}):Promise.resolve(i)}function J1(t,e,i,n,s=!1){return n?t.modules.layers.export({view:e,svg:i,below:s}).then(()=>i):Promise.resolve(i)}function _5(t,e,i){const n=e.childNodes[2],s=n.childNodes,r={},a=i.prefix;for(let v=0;v<s.length;v++){const b=s[v],x=b.getAttribute(Ma);x!=null&&(r[x]=r[x]||[],r[x].push(b))}const u=Object.keys(r),h=t.modules.graph,c=h.getNodeAttribute("id"),g=h.getEdgeAttribute("id"),_=un("g",{class:`${a}-edges`}),m=un("g",{class:`${a}-nodes`});for(let v=0;v<u.length;v++){const b=u[v],x=b.charAt(0)==="n",M=parseInt(b.substring(1)),N=r[b],O=mc((x?c:g).get(M).toString()),R=un("g");R.setAttribute(`data-${x?"node":"edge"}-id`,O),R.setAttribute("class",`${a}-${x?"node":"edge"}`);for(let P=0;P<N.length;P++){const F=N[P];R.appendChild(F),F.removeAttribute(Ma)}(x?m:_).appendChild(R)}return n.appendChild(_),n.appendChild(m),e}function m5(t){const e=[].concat(Array.prototype.slice.call(t.getElementsByTagName("text")||[])),i=[],n={};for(let s=0;s<e.length;s++){const r=e[s].parentNode.getAttribute("font-family");if(typeof r=="string"){const a=r.split(",");for(let u=0;u<a.length;u++){const h=a[u].replace(/['"]/g,"");h===""||n[h]||(n[h]=!0,i.push(h))}}}return{list:i,map:n}}function p5(t,e){const i=m5(t).map;return yC().then(n=>n.filter(s=>i[s.name])).then(n=>vC(n,!!e.embedFonts)).then(n=>{if(n.length!==0){const s=un("style");for(let r=0;r<n.length;r++)s.appendChild(y0(n[r]));t.childNodes[0].appendChild(s)}return t})}var y5={what:void 0,dataProperties:void 0,filter:"visible",nodes:void 0,edges:void 0,download:!0,filename:"graph.xlsx",tab:void 0,nodeData:void 0,edgeData:void 0};function v5(t,e={}){typeof e=="string"&&(e={what:e});const{what:i,nodes:n,edges:s,tab:r={nodes:()=>"nodes",edges:()=>"edges"},download:a,filename:u,dataProperties:h,filter:c,nodeData:g,edgeData:_}=ua(e,y5);r.nodes||(r.nodes=()=>"nodes"),r.edges||(r.edges=()=>"edges");const m=Hp(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:n,edges:s,filter:c,nodeData:b=>b,edgeData:b=>b}),v=x5(m,{what:i,tabFunctions:r,tabContentFunctions:{nodes:g||(b=>qv(xg(b||{}),h)),edges:_||(b=>qv(xg(b||{}),h))}},{nodes:t.modules.graph.getNodes(m.nodes.map(({id:b})=>b)),edges:t.modules.graph.getEdges(m.edges.map(({id:b})=>b))});return a&&Ah(v,u,"blob","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),Promise.resolve(v)}function x5(t,{what:e,tabFunctions:i,tabContentFunctions:n},s){const r=Oa("XLSX")||Oa("xlsx",{throwOnError:!0});if(!r)throw Error('The xlsx exports requires the "xlsx" peer dependency to be associated');const a=new E5;if(e){if(e!=="nodes"&&e!=="edges")throw new TypeError(`Invalid argument: "what" is not "nodes" or "edges", was ${e}`);e==="nodes"&&(t.edges=[]),e==="edges"&&(t.nodes=[])}const u={};for(const h of["nodes","edges"]){const c=z4(t[h],h,i[h],n[h],s[h]);for(const g of Object.keys(c))u[g]=[...u[g]||[],...c[g]]}for(const h of Object.keys(u))a.SheetNames.push(h),a.Sheets[h]=b5(r,D4(u[h]));return a.SheetNames.length===0&&(a.SheetNames=["nodes","edges"],a.Sheets.nodes={},a.Sheets.edges={}),bg([S5(r.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"}))],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}function b5(t,e){const i={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let s=0;s!==e.length;++s){const r=e[s];for(let a=0;a!==r.length;++a){const u=r[a];n.s.r>s&&(n.s.r=s),n.s.c>a&&(n.s.c=a),n.e.r<s&&(n.e.r=s),n.e.c<a&&(n.e.c=a);const h={v:JM(u)};i[t.utils.encode_cell({c:a,r:s})]=h}}return n.s.c<1e7&&(i["!ref"]=t.utils.encode_range(n)),i}var E5=class{constructor(){this.SheetNames=[],this.Sheets={}}};function S5(t){const e=new ArrayBuffer(t.length),i=new Uint8Array(e);for(let n=0;n!==t.length;++n)i[n]=255&t.charCodeAt(n);return e}var A5=class extends jn{constructor(t){super(t),this.csv=e=>G4(this._ogma,e),this.xlsx=e=>(e&&e.dataProperties&&void 0,v5(this._ogma,e)),this.gexf=e=>Y4(this._ogma,e),this.graphml=(e={})=>W4(this._ogma,e),this.json=(e={})=>K4(this._ogma,e),this.svg=(e={})=>f5(this._ogma,e),this.png=(e={})=>fm(this._ogma,e,"png"),this.jpg=(e={})=>fm(this._ogma,e,"jpg"),this.tiff=(e={})=>fm(this._ogma,e,"tiff"),this.gif=(e={})=>fm(this._ogma,e,"gif"),t.styles.createClass({name:od,isBuiltin:!0})}},Jr=u0(hO()),T5=class extends jn{constructor(){super(...arguments),this.balancedTree=t=>Promise.resolve(Jr.balancedTree.generate(Jr.balancedTree.configure(t))),this.barabasiAlbert=t=>Promise.resolve(Jr.barabasiAlbert.generate(Jr.barabasiAlbert.configure(t))),this.erdosRenyi=t=>Promise.resolve(Jr.erdosRenyi.generate(Jr.erdosRenyi.configure(t))),this.flower=t=>Promise.resolve(Jr.flower.generate(Jr.flower.configure(t))),this.grid=t=>Promise.resolve(Jr.grid.generate(Jr.grid.configure(t))),this.path=t=>Promise.resolve(Jr.path.generate(Jr.path.configure(t))),this.random=t=>Promise.resolve(Jr.random.generate(Jr.random.configure(t))),this.randomTree=t=>Promise.resolve(Jr.randomTree.generate(Jr.randomTree.configure(t)))}},w5=class extends jn{constructor(){super(...arguments),this.enable=t=>this._ogma.modules.geo.enable(t),this.disable=t=>this._ogma.modules.geo.disable(t),this.setOptions=t=>this._ogma.modules.geo.setOptions(t),this.getOptions=()=>this._ogma.modules.geo.getOptions(),this.getMap=()=>this._ogma.modules.geo.getMap(),this.enabled=()=>this._ogma.modules.geo.isEnabled(),this.getCenter=()=>this._ogma.modules.geo.getCenter(),this.getView=()=>this._ogma.modules.geo.getView(),this.getZoom=()=>this._ogma.modules.geo.getZoom(),this.setZoom=t=>this._ogma.modules.geo.setZoom(t),this.setView=(t,e,i)=>this._ogma.modules.geo.setView(t,e,i),this.setCenter=(t,e)=>this._ogma.modules.geo.setCenter(t,e),this.toggle=t=>this._ogma.modules.geo.toggle(t),this.resetCoordinates=()=>this._ogma.modules.geo.resetCoordinates(),this.getUnprojectedCoordinates=t=>this._ogma.modules.geo.getUnprojectedCoordinates(this._ogma.getNodes(t)),this.runLayout=async({type:t,nodes:e,latitudePath:i=Dl,longitudePath:n=kl,options:s,center:r})=>{if(t===void 0||s===void 0)throw new Error("Ogma.geo.runLayout: Both layout type and options are required");if(e=this._ogma.getNodes(e),r===void 0){let a=0;if(r=e.reduce((u,h)=>{const c=h.getData(i),g=h.getData(n);return isNaN(c)||isNaN(g)||(u.latitude+=c,u.longitude+=g,a++),u},{latitude:0,longitude:0}),isNaN(r.latitude)||isNaN(r.longitude))throw new Error("Ogma.geo.runLayout: No valid center coordinates found");r.latitude/=a,r.longitude/=a}return this._ogma.modules.geo.runLayout({center:r,nodes:e,type:t,options:s,latitudePath:i,longitudePath:n})}}},L5=class{reloadFonts(){this.modules.graphics.reloadFonts()}},C5=class extends jn{constructor(){super(...arguments),this.gexf=t=>YM(t),this.gexfFromUrl=t=>gb(t),this.janus=t=>XM(t),this.json=(t,e)=>ZM(t,e),this.jsonFromUrl=(t,e)=>_b(t,e),this.neo4j=t=>WM(t),this.graphml=(t,e)=>qM(t,e),this.graphmlFromUrl=(t,e)=>QM(t,e)}},M5=class extends jn{constructor(){super(...arguments),this.isKeyPressed=t=>this._ogma.modules.keyboard.isPressed(t),this.resetKeys=()=>{this._ogma.modules.keyboard.resetKeys()}}},N5=class extends jn{addLayer(t,e){return this._ogma.modules.layers.addLayer(t,"layer",e)}addCanvasLayer(t,e,i){return this._ogma.modules.layers.addCanvasLayer(t,e,i)}addOverlay(t,e){if(!t.position)throw new Error("options.position argument is required");return this._ogma.modules.layers.addOverlay(t,e)}addSVGLayer(t,e){return t.element||(t.element=document.createElementNS("http://www.w3.org/2000/svg","svg")),t.draw||(t.draw=()=>{}),this._ogma.modules.layers.addSVGLayer(t,e)}},$1={name:"concentric",configure:function(t,{graph:e,data:i}){if(t.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');const n={...t,centralNode:function(P,F){return F instanceof al?F:P.getNode(F)}(e,t.centralNode)},{centralNode:s,nodes:r}=n,a=e.getNode(s);if(a===void 0)throw new Error('concentric layout: "centralNode" parameter is not valid');const u=a._index,{x:h,y:c}=a.getPosition(),g=r.getAttribute("layoutable"),_=e.getNodes(r)._indexes,m=Array.from(_.filter((R,P)=>g[P]));m.indexOf(u)===-1&&m.push(u);const v=e.getNodeAttribute("radius").getMultiple(_),b=function(P,F,U,V){if(F)return F==="random"?"random":F==="radius"?V.slice():F==="degree"?U.getDegree():P.getProperty(U,F)}(i,n.sortBy,r,v),x=m.reduce((R,P,F)=>(R[P]=F,R),{}),M=m.map((R,P)=>P),N=new Set(t.edges.getExtremities()._indexes),O=m.map(R=>e.topology.getAdjacentElements(!0,new Uint32Array([R])).filter(P=>N.has(P)).map(P=>x[P]));return{sourceNodeIndex:m.indexOf(u),centerX:typeof n.centerX=="number"?n.centerX:h,centerY:typeof n.centerY=="number"?n.centerY:c,list:m,indexes:M,size:m.length,totalSize:m.length,attributes:{adjacentNodes:O,size:v},sortAttr:b,clockwise:n.clockwise===void 0||n.clockwise,circleHopRatio:n.circleHopRatio||5,allowOverlap:!!n.allowOverlap}},context:function(){return{dijkstra:function(t,e,i,n,s){const r=Math.pow(2,31)-1,a=new Int32Array(n),u=new Int32Array(n),h=new Int8Array(n);a.fill(r),u.fill(-1);for(let g=0;g<n;++g){const _=e[g];_!==void 0&&(a[_]=r,u[_]=-1)}a[s]=0;let c=0;for(;c!==-1;){let g=r;c=-1;for(let _=0;_<i;++_){const m=e[_],v=a[m];!h[m]&&v<g&&(g=v,c=m,h[m]=1)}if(c>-1){const _=t[c],m=g+1;_.forEach(v=>{const b=a[v];m<b&&(a[v]=m,u[v]=c)})}}return a},determinePropertyType:function(t,e,i){return e.some(n=>t[n]!=="number")?"string":"number"}}},update:function(t,e){const{attributes:i,indexes:n,size:s}=t,{sourceNodeIndex:r,centerX:a,centerY:u,sortAttr:h}=t,c=i.adjacentNodes,g=i.size,_=new Array(t.totalSize),m=new Array(t.totalSize),v=e.dijkstra(c,n,t.size,t.totalSize,r);let b=0;const x={};for(let U=0;U<s;U++){const V=g[n[U]];V>b&&(b=V)}const M=b*t.circleHopRatio;let N=0,O=0;const R=Math.PI/9;for(let U=0;U<s;U++){const V=n[U],Y=v[V];let K=x[Y];K||(K=[],x[Y]=K),K.push(V)}const P=function(V,Y,K){if(V==="random")return function(){return Math.random()-.5};if(V)return K.determinePropertyType(V,Y,Y.length)==="number"?function(tt,j){return V[tt]-V[j]}:function(tt,j){return V[tt]<V[j]?-1:1}}(h,n,e),F=h==="random"||h;return Object.keys(x).sort((U,V)=>parseInt(U)-parseInt(V)).forEach((U,V)=>{const Y=x[U],K=Y.length;let tt=0,j=O;const lt=2*Math.PI/K;if(V!==0&&!t.allowOverlap){const pt=2*Math.PI*N;let ft=0;tt+=Y.reduce((ht,W)=>ht+g[W],0),ft=2*tt*Math.SQRT2,ft>pt&&(N+=ft/(2*Math.PI)-N)}F&&(Y.sort(P),t.clockwise||Y.reverse());for(let pt=0;pt<K;pt++){const ft=Y[pt];_[ft]=Math.cos(j)*N+a,m[ft]=Math.sin(j)*N+u;const ht=g[ft];j+=lt*(t.allowOverlap?1:ht/tt*K)}N+=M,O+=R}),{x:_,y:m,indexes:t.list}},isRunning:function(){return!1},onSync:function({indexes:t,x:e,y:i}){return{indexes:t,x:e,y:i}}},R5=t=>(t.modules.layouts.register($1),e=>t.modules.layouts.start($1.name,e)),O5=Object.defineProperty,ze=(t,e)=>O5(t,"name",{value:e,configurable:!0}),I5=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),P5=ze(()=>({[WebGL2RenderingContext.FLOAT]:"uniform1f",[WebGL2RenderingContext.FLOAT_VEC2]:"uniform2fv",[WebGL2RenderingContext.FLOAT_VEC3]:"uniform3fv",[WebGL2RenderingContext.FLOAT_VEC4]:"uniform4fv",[WebGL2RenderingContext.INT]:"uniform1i",[WebGL2RenderingContext.INT_VEC2]:"uniform2iv",[WebGL2RenderingContext.INT_VEC3]:"uniform3iv",[WebGL2RenderingContext.INT_VEC4]:"uniform4iv",[WebGL2RenderingContext.UNSIGNED_INT]:"uniform1ui",[WebGL2RenderingContext.UNSIGNED_INT_VEC2]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC3]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC4]:"uniform2uiv",[WebGL2RenderingContext.FLOAT_MAT2]:"uniformMatrix2fv",[WebGL2RenderingContext.FLOAT_MAT3]:"uniformMatrix3fv",[WebGL2RenderingContext.FLOAT_MAT4]:"uniformMatrix4fv",[WebGL2RenderingContext.SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.UNSIGNED_INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.SAMPLER_CUBE]:"uniform1i"}),"ne"),hd=new Map,Sv=new Map,z5=ze((t,e,i,n)=>{hd.has(t)||hd.set(t,hd.size);const s=`${hd.get(t)}:${e}:${i}`;return Sv.has(s)||Sv.set(s,n()),Sv.get(s)},"ie"),Av=new Map,D5=ze((t,e)=>(hd.has(t)||hd.set(t,hd.size),Av.has(t)||Av.set(t,e()),Av.get(t)),"ae"),Ul=ze((t,e)=>()=>([t,e]=[e,t],t),"A"),k5=ze(t=>{const e=t.createBuffer();if(!e)throw new Error("Could not create buffer");return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,I5,t.STATIC_DRAW),e},"ce"),Eu=ze((t,e)=>D5(t,()=>{const i=t.getAttribLocation(e,"position");return t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),i}),"b"),tT=ze((t,e,i)=>{const n=t.createShader(e);if(n===null)throw new Error("Cannot create WebGL shader.");return t.shaderSource(n,i),t.compileShader(n),n},"J"),Su=ze((t,e,i)=>z5(t,e,i,()=>{const n=t.createProgram();if(n===null)throw new Error("Cannot create WebGL program.");if(t.attachShader(n,tT(t,t.VERTEX_SHADER,e)),t.attachShader(n,tT(t,t.FRAGMENT_SHADER,i)),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){const s=t.getProgramInfoLog(n);throw t.deleteProgram(n),new Error(`Could not link WebGL program: 
${s}`)}return n}),"M"),dl=ze((t,{size:e,data:i,type:n,internalFormat:s=t.RGBA32F,format:r=t.RGBA})=>{const a=t.createTexture();if(!a)throw new Error("Cannot create WebGL texture.");const[u,h]=e.map(c=>Math.max(1,c));return i instanceof Float32Array&&i.byteLength===0?i=new Float32Array(u*h*4):i instanceof Uint32Array&&i.byteLength===0&&(i=new Uint32Array(u*h*4)),t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,s,u,h,0,r,n,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),{size:e,data:i,type:n,format:r,handle:a}},"R"),zo=ze((t,e)=>{const i=t.createFramebuffer();if(!i)throw new Error("Cannot create WebGL frame buffer.");t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("Framebuffer: Attachment is NOT complete.");case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("Framebuffer: No valid attachment.");case t.FRAMEBUFFER_UNSUPPORTED:throw new Error("Framebuffer: Attachment types are not supported.");default:throw new Error(`Framebuffer: Unknown reason (status: ${n}).`)}return i},"T"),Au=ze((t,e,i)=>{t.useProgram(e);const n={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<s;r++){const a=t.getActiveUniform(e,r);if(!a)throw new Error(`Cannot get GL active uniform ${r}.`);const{name:u,size:h,type:c}=a,g=t.getUniformLocation(e,u);if(!g)throw new Error(`Cannot get GL uniform location ${u}.`);n[u]={size:h,data:i[u],type:c,location:g}}return n},"S");function Gl(t,e,i={}){let n=0;const s=P5();return Object.entries(e).forEach(([r,{location:a,type:u,data:h}])=>{let c=i[r]!==void 0?i[r]:h;(u===t.SAMPLER_2D||u===t.INT_SAMPLER_2D||u===t.UNSIGNED_INT_SAMPLER_2D)&&(t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,c),c=n,n++),t[s[u]](a,c)})}ze(Gl,"C");var Vp=ze(t=>Math.ceil(Math.sqrt(t)),"k"),pb=ze(t=>Math.ceil(Math.sqrt(2*t)),"X"),F5=ze((t,e,i,n)=>{const s=Vp(e),r=new Float32Array(4*s**2);for(let a=0;a<e;a++){const u=4*a;r[u]=i[a],r[u+1]=n[a]}return dl(t,{size:[s,s],data:r,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"se"),B5=ze((t,e,i,n)=>{const s=Vp(e),r=pb(i),a=new Uint32Array(3*s**2);let u=0;for(let h=0;h<e;h++){const c=3*h,g=u,_=Math.floor(g/r),m=g%r;a[c]=m,a[c+1]=_,a[c+2]=n[h],u+=n[h]}return dl(t,{size:[s,s],data:a,type:t.UNSIGNED_INT,format:t.RGB_INTEGER,internalFormat:t.RGB32UI})},"fe"),U5=ze((t,e,i,n)=>{const s=Vp(e),r=pb(i),a=new Uint32Array(2*r**2);let u=0;for(let h=0;h<e;h++)for(const c of n[h]){const g=Math.floor(c/s),_=c%s;a[u]=_,a[u+1]=g,u+=2}return dl(t,{size:[r,r],data:a,type:t.UNSIGNED_INT,format:t.RG_INTEGER,internalFormat:t.RG32UI})},"_e"),G5=ze((t,e,i,n=new Float32Array(e),s=new Uint8Array(e))=>{const r=Vp(e),a=new Float32Array(4*r**2);for(let u=0;u<e;u++){const h=4*u;a[h]=i[u],a[h+1]=n[u],a[h+2]=s[u],a[h+3]=0}return dl(t,{size:[r,r],data:a,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"xe"),H5=ze((t,e,i,n)=>{const s=pb(i),r=new Float32Array(s**2);let a=0;for(let u=0;u<e;u++)for(const h of n[u])r[a]=h,a++;return dl(t,{size:[s,s],data:r,type:t.FLOAT,format:t.RED,internalFormat:t.R32F})},"ve"),eT=ze((t,e)=>Array.from({length:t},(i,n)=>e(n)),"Q"),tN=ze(t=>{const e=new Map,i={nodes:[],edges:[]};return t.nodes.forEach((n,s)=>{e.has(n.id)&&console.warn(`Duplicated ID ${n.id}@${s}`),i.nodes.push({...n,id:s}),e.set(n.id,s)}),t.edges.forEach(n=>{const s=e.get(n.source),r=e.get(n.target);return s===void 0||r===void 0?console.warn(`Missing source ${n.source}`):void i.edges.push({...n,source:Math.min(s,r),target:Math.max(s,r)})}),i.edges.sort((n,s)=>n.source-s.source||n.target-s.target),i},"je"),eN=ze(({nodes:t,edges:e},[i,n]=[0,0])=>{const s=Math.PI*(3-Math.sqrt(5)),r=t.map(u=>(u.x=(u.x||0)-i,u.y=(u.y||0)-n,u)).map(u=>({n:u,key:u.pinned?0:1+1e6*u.y+u.x})).sort((u,h)=>u.key-h.key);let a=0;return r.forEach(({n:u,key:h},c)=>{if(h*c==0||h!==r[c-1].key)return a=c;const g=Math.sqrt(c-a);u.x=r[a].n.x+g*Math.cos(s*(c-a)),u.y=r[a].n.y+g*Math.sin(s*(c-a))}),{nodes:t,edges:e}},"He"),iT=ze((t,e)=>{const{nodes:i,edges:n}=e,s=i.length,r=n.length,a=new Uint32Array(r),u=new Uint32Array(r),h=new Uint32Array(s);for(let M=0;M<r;M++){const{source:N,target:O}=n[M];a[M]=N,u[M]=O,h[N]++,h[O]++}const c=eT(s,()=>[]);a.forEach((M,N)=>{c[M].push(u[N]),c[u[N]].push(M)});const g=eT(s,()=>[]);a.forEach((M,N)=>{if(n[N].stiffness!==void 0)g[M].push(n[N].stiffness),g[u[N]].push(n[N].stiffness);else{const O=h[M],R=h[u[N]],P=O*R/(Math.min(O,R)*(O+R));g[M].push(P),g[u[N]].push(P)}});const _=new Float32Array(i.map(({x:M})=>M||0)),m=new Float32Array(i.map(({y:M})=>M||0)),v=new Float32Array(i.map(({r:M})=>isNaN(M)?1:M)),b=new Float32Array(i.map(({mass:M},N)=>M||h[N]+1)),x=new Uint8Array(i.map(({pinned:M})=>M?1:0));return{N:s,E:r,bodyTexture:F5(t,s,_,m),nodeTexture:B5(t,s,r,h),topologyTexture:U5(t,s,r,c),propertyTexture:G5(t,s,b,v,x),edgePropertyTexture:H5(t,s,r,g)}},"Ke"),nT=ze((t,e)=>{t.deleteTexture(e.bodyTexture.handle),t.deleteTexture(e.nodeTexture.handle),t.deleteTexture(e.topologyTexture.handle),t.deleteTexture(e.propertyTexture.handle),t.deleteTexture(e.edgePropertyTexture.handle)},"Ye"),Tu=`#version 300 es

in vec2 position;

void main() {
  gl_Position = vec4(position, 0.0f, 1.0f);
}`,V5=`#version 300 es
precision highp float;uniform int u_0;uniform lowp sampler2D u_1,u_2;uniform int u_3,u_4;out vec4 outColor;void main(){ivec2 o=ivec2(gl_FragCoord.xy);if(outColor=vec4(1e9,1e9,-1e9,-1e9),u_3>0)for(int e;e<4;e++){ivec2 u=(o<<1)+ivec2(e&1,e>>1);vec4 t=texelFetch(u_2,u,0);outColor=vec4(min(outColor.xy,t.xy),max(outColor.zw,t.zw));}else if(textureSize(u_1,0).x*o.y+o.x<u_0)outColor.xy=outColor.zw=texelFetch(u_1,o,0).xy;if(u_3==u_4){vec2 o=outColor.zw-outColor.xy;o=vec2(max(o.x,o.y),max(o.x,o.y)),outColor=vec4(outColor.xy-vec2(1),o+vec2(2));}}`,Y5=ze(t=>1<<Math.ceil(Math.log2(Math.sqrt(t))),"me"),sT=ze((t,e,i)=>{const n=Y5(e),s=new Float32Array(4*n**2);return i&&i.forEach((r,a)=>s[a]=r),dl(t,{size:[n,n],data:s,type:t.FLOAT,format:t.RGBA,internalFormat:t.RGBA32F})},"Z"),X5=ze(t=>Math.ceil(Math.log2(Math.sqrt(t)))+1,"he"),Z5=ze((t,e,i)=>{const n=Su(t,Tu,V5);Eu(t,n);const s=sT(t,e),r=sT(t,e),a=Ul(s,r),u=zo(t,r.handle),h=zo(t,s.handle),c=Ul(u,h),g=Au(t,n,{u_0:e,u_1:i().handle,u_2:s.handle,u_3:0,u_4:0});let _=s;return{step:(m=X5(e))=>{t.viewport(0,0,s.size[0],s.size[1]),t.useProgram(n);for(let v=0;v<m;v++){t.bindFramebuffer(t.FRAMEBUFFER,c()),t.viewport(0,0,s.size[0]>>v,s.size[1]>>v);const b=a();_=b===s?r:s,Gl(t,g,{u_2:b.handle,u_1:i().handle,u_4:m-1,u_3:v}),t.drawArrays(t.TRIANGLES,0,6)}},texture:()=>_,destroy:()=>{t.deleteFramebuffer(u),t.deleteFramebuffer(h),t.deleteTexture(r.handle),t.deleteTexture(s.handle)}}},"pe"),W5=`#version 300 es
precision lowp float;vec2 i(vec2 i,vec2 e){return vec2(i.x*e.x-i.y*e.y,i.x*e.y+i.y*e.x);}vec2 i(vec2 i){return i.y=-i.y,i;}vec2 i(vec2 u[8],vec2 r,vec2 c){vec2 t,o=r-c,e=vec2(1,0);for(int r;r<8;++r)t+=i(u[r],e),e=i(e,o);return t;}vec2 i(vec2 e,vec4 i){return(e-i.xy)/i.zw;}uniform float u_8,u_9,u_a,u_b,u_c,u_d,u_5,u_6,u_7;uniform int u_0;uniform lowp sampler2D u_1;uniform lowp usampler2D u_e,u_f;uniform lowp sampler2D u_g,u_h;uniform int u_i,u_j;uniform lowp sampler2D u_2;uniform lowp usampler2D u_k,u_l;uniform lowp sampler2D u_m;out vec4 outColor;void main(){uint c=uint(textureSize(u_1,0).x);int h=textureSize(u_f,0).x;ivec2 r=ivec2(gl_FragCoord.xy);if(int(c)*r.y+r.x>=u_0)return;vec3 o=texelFetch(u_g,r,0).xyz;if(o.z>0.)return;vec4 n=texelFetch(u_1,r,0);vec2 u=n.xy,e=n.zw;ivec4 t=ivec4(texelFetch(u_e,r,0));vec4 v=texelFetch(u_2,ivec2(0),0);uint a=uint(textureSize(u_k,0).x);float x=float(1<<u_j-1);ivec2 d=ivec2(u_i,1),l=ivec2(x*i(u,v));vec2 g=(vec2(l)+.5)/x;ivec2 m=l-ivec2(1);for(int i;i<9;++i){ivec2 t=m+ivec2(i%3,i/3);if(t>>u_j-1!=ivec2(0))continue;uvec2 r=texelFetch(u_l,t,0).xy;for(uint i=r.x;i<r.y;i++){uint n=texelFetch(u_k,ivec2(i%a,i/a),0).x;ivec2 v=ivec2(n%c,n/c);vec2 t=texelFetch(u_1,v,0).xy-u;float l=dot(t,t)+1e-4;if(u_c>0.&&u_5<.5){float u=texelFetch(u_g,v,0).y,i=max(o.y+u+u_d,.01);if(l<i*i){float r=sqrt(l);e-=(i-r)*u_c*u/i*t/r;}}float x=texelFetch(u_g,v,0).x;e-=u_5*u_8*x*t/l;}}vec2 y[8];for(int i;i<8;i++)y[i]=i<u_i?texelFetch(u_m,d*l+ivec2(i,0),0).xy:vec2(0);vec2 s=i(i(y,g,i(u,v))/v.z);e-=u_5*u_8*s;ivec2 p;for(int r;r<t.z;r++){p=ivec2(texelFetch(u_f,t.xy,0).xy);float c=texelFetch(u_h,t.xy,0).x;vec2 i=texelFetch(u_1,p,0).xy-u;if(i*=1.-u_b/(length(i)+1e-4),e+=u_5*u_a*c*i/o.x,t.x+=1,t.x>=h)t.x=0,t.y+=1;}e=u_6*(e-u_5*u_9*u);float f=dot(e,e);if(f>u_7)e*=sqrt(u_7/f);outColor=vec4(u+e,e);}`,q5=ze((t,e,i,n,s,{handle:r},{handle:a},{N:u,bodyTexture:h,nodeTexture:c,topologyTexture:g,propertyTexture:_,edgePropertyTexture:m},{charge:v,gravity:b,inertia:x,edgeStrength:M,edgeLength:N,elasticity:O,margin:R,maxDisplacement:P})=>{const F=Su(t,Tu,W5);Eu(t,F);const U=dl(t,{type:t.FLOAT,size:h.size,data:new Float32Array(h.data.buffer.slice(0)),format:t.RGBA,internalFormat:t.RGBA32F}),V=Ul(h,U),Y=zo(t,U.handle),K=zo(t,h.handle),tt=Ul(Y,K),j=Au(t,F,{u_5:1,u_6:x,u_7:P**2,u_8:v,u_9:b,u_a:M,u_b:N,u_c:O,u_d:R,u_0:u,u_1:h.handle,u_e:c.handle,u_f:g.handle,u_g:_.handle,u_h:m.handle,u_i:i,u_j:e,u_2:n().handle,u_k:s().handle,u_l:r,u_m:a});let lt=h;return{step:pt=>{t.viewport(0,0,h.size[0],h.size[1]),t.useProgram(F),t.bindFramebuffer(t.FRAMEBUFFER,tt());const ft=V();lt=ft===h?U:h,Gl(t,j,{u_5:pt,u_1:ft.handle,u_2:n().handle,u_k:s().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>lt,destroy:()=>{t.deleteFramebuffer(Y),t.deleteFramebuffer(K),t.deleteTexture(U.handle)}}},"le"),Q5=ze((t,e)=>t.map(i=>e*i),"Fe"),K5=ze((t,e)=>Q5([e,1],1<<t),"Te"),iN=ze((t,e,i,n)=>{const s=K5(e,i),r=new Float32Array(2*s[0]*s[1]);return n&&n.forEach((a,u)=>r[u]=a),dl(t,{size:s,data:r,type:t.FLOAT,format:t.RG,internalFormat:t.RG32F})},"ee"),j5=`#version 300 es
precision lowp float;vec2 c(vec2 c,vec2 u){return vec2(c.x*u.x-c.y*u.y,c.x*u.y+c.y*u.x);}vec2 u(vec2 u,vec2 c){return vec2(dot(u,c),u.y*c.x-u.x*c.y)/dot(c,c);}vec2 c(vec2 c){return u(vec2(1,0),c);}const float n[64]=float[64](1.,1.,1.,1.,1.,1.,1.,1.,1.,2.,3.,4.,5.,6.,7.,8.,1.,3.,6.,10.,15.,21.,28.,36.,1.,4.,10.,20.,35.,56.,84.,120.,1.,5.,15.,35.,70.,126.,210.,330.,1.,6.,21.,56.,126.,252.,462.,792.,1.,7.,28.,84.,210.,462.,924.,1716.,1.,8.,36.,120.,330.,792.,1716.,3432.);uniform int u_i,u_n;uniform lowp sampler2D u_p,u_q;out vec2 outColor;void main(){float f=float(1<<u_n);ivec2 i=ivec2(u_i,1),v=ivec2(gl_FragCoord.xy)/i;vec2 x=(vec2(v)+.5)/f;uint o=uint(gl_FragCoord.x)%uint(u_i);if(u_n>2){ivec2 m=v>>1;vec2 e=(vec2(v&65534)+1.)/f-x,u=vec2(1,0);for(uint v;v<uint(u_i-int(o));++v)outColor+=n[v+(o<<3)]*c(texelFetch(u_p,i*m+ivec2(v+o,0),0).xy,u),u=c(u,e);}ivec2 m=(v&65534)-2;for(int r;r<36;r++){ivec2 t=m+ivec2(r%6,r/6);vec2 d=texelFetch(u_q,i*t,0).xy;if(d.x==0.)continue;vec2 a=vec2(t-v);if(dot(a,a)<=2.||t>>u_n!=ivec2(0))continue;vec2 l=(vec2(t)+.5)/f-x,e=vec2(1,0);for(uint u;u<o;++u)e=c(e,-l);if(dot(e,e)<1e-20)continue;vec2 p=c(l),y=n[o<<3]*u(d,e);e=c(e,l);for(uint v=1u;v<uint(u_i);++v){if(dot(e,e)<1e-20)break;y+=n[v+(o<<3)]*u(texelFetch(u_q,i*t+ivec2(v,0),0).xy,e),e=c(e,l);}outColor+=c(y,p);}}`,J5=ze((t,e,i,n)=>{const s=Su(t,Tu,j5);Eu(t,s);const r=Array.from({length:e},(h,c)=>iN(t,c,i)),a=r.map(({handle:h})=>zo(t,h)),u=Au(t,s,{u_i:i,u_n:e-1,u_p:null,u_q:null});return{step:()=>{t.useProgram(s);for(let h=2;h<e;h++){const{handle:c}=r[h-1],g=n(h);t.viewport(0,0,g.size[0],g.size[1]),t.bindFramebuffer(t.FRAMEBUFFER,a[h]),Gl(t,u,{u_n:h,u_p:c,u_q:g.handle}),t.drawArrays(t.TRIANGLES,0,6)}},texture:h=>r[h],destroy:()=>{a.forEach(h=>t.deleteFramebuffer(h)),r.forEach(({handle:h})=>t.deleteTexture(h))}}},"we"),$5=`#version 300 es
precision lowp float;vec2 e(vec2 e,vec2 t){return vec2(e.x*t.x-e.y*t.y,e.x*t.y+e.y*t.x);}vec2 n(vec2 t,vec2 e){return vec2(dot(t,e),t.y*e.x-t.x*e.y)/dot(e,e);}const vec2 t[8]=vec2[8](vec2(1,0),vec2(-1,0),vec2(2,0),vec2(-6,0),vec2(24,0),vec2(-120,0),vec2(720,0),vec2(-5040,0));const float x[16]=float[16](1.,1.,2.,6.,24.,120.,720.,5040.,40320.,362880.,3628800.,39916800.,479001600.,6.227021e9,8.717829e1,1.3076744e12);vec2 e(vec2 t,vec4 e){return(t-e.xy)/e.zw;}uniform int u_i,u_j,u_n;uniform lowp sampler2D u_o,u_2;uniform lowp usampler2D u_k;uniform lowp sampler2D u_g,u_1;uniform lowp usampler2D u_l;out vec2 outColor;void main(){float i=float(1<<u_n);ivec2 v=ivec2(u_i,1),u=ivec2(gl_FragCoord.xy)/v;vec2 l=(vec2(u)+.5)/i;uint c=uint(gl_FragCoord.x)%uint(u_i);if(u_n==u_j-1){uint t=uint(textureSize(u_1,0).x),n=uint(textureSize(u_k,0).x);vec4 i=texelFetch(u_2,ivec2(0),0);uvec2 x=texelFetch(u_l,u,0).xy;for(uint u=x.x;u<x.y;u++){uint o=texelFetch(u_k,ivec2(u%n,u/n),0).x;ivec2 r=ivec2(o%t,o/t);vec2 d=l-e(texelFetch(u_1,r,0).xy,i),v=vec2(1,0);for(uint t;t<c;++t)v=e(v,d);outColor+=texelFetch(u_g,r,0).x*v;}}else for(int o;o<4;++o){ivec2 d=2*u+ivec2(o&1,o>>1);vec2 f=(vec2(d)+.5)/i/2.-l,r=vec2(1,0),y;for(uint u;u<=c;++u)y+=n(e(texelFetch(u_o,v*d+ivec2(c-u,0),0).xy,r),t[c-u]*x[u]),r=e(r,f);outColor+=e(y,t[c]);}}`,tG=ze((t,e,i,n,s,{handle:r},a,{handle:u})=>{const h=Su(t,Tu,$5);Eu(t,h);const c=Array.from({length:e},(m,v)=>iN(t,v,i)),g=c.map(({handle:m})=>zo(t,m)),_=Au(t,h,{u_i:i,u_j:e,u_n:e-1,u_o:c[0].handle,u_2:n().handle,u_k:s().handle,u_g:r,u_1:a().handle,u_l:u});return{step:()=>{t.useProgram(h);for(let m=e-1;m>=2;m--){const{handle:v}=c[(m+1)%e],b=c[m];t.viewport(0,0,b.size[0],b.size[1]),t.bindFramebuffer(t.FRAMEBUFFER,g[m]),Gl(t,_,{u_2:n().handle,u_k:s().handle,u_1:a().handle,u_n:m,u_o:v}),t.drawArrays(t.TRIANGLES,0,6)}},texture:m=>c[m],destroy:()=>{g.forEach(m=>t.deleteFramebuffer(m)),c.forEach(({handle:m})=>t.deleteTexture(m))}}},"Re"),eG=`#version 300 es
uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 r){return u(r.y)<<1|u(r.x);}uniform uint u_0;uniform lowp usampler2D u_k;out uvec2 outColor;uint u(uint n,uint i){uint u,r=u_0;for(;u<r;){uint t=u+r>>1,e=texelFetch(u_k,ivec2(t%i,t/i),0).y;e<n?u=t+1u:r=t;}return u;}void main(){uint r=uint(textureSize(u_k,0).x),i=u(uvec2(gl_FragCoord.xy));outColor=uvec2(u(i,r),u(i+1u,r));}`,iG=ze(t=>1<<t-1,"Me"),nG=ze((t,e,i)=>{const n=iG(e);return dl(t,{size:[n,n],data:i||new Uint32Array(2*n**2),type:t.UNSIGNED_INT,format:t.RG_INTEGER,internalFormat:t.RG32UI})},"Se"),sG=ze((t,e,i,n)=>{const s=Su(t,Tu,eG);Eu(t,s);const r=nG(t,i),a=zo(t,r.handle),u=Au(t,s,{u_0:e,u_k:n()});return{step:()=>{t.viewport(0,0,r.size[0],r.size[1]),t.useProgram(s),t.bindFramebuffer(t.FRAMEBUFFER,a),Gl(t,u,{u_k:n().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>r,destroy:()=>{t.deleteFramebuffer(a),t.deleteTexture(r.handle)}}},"Ce"),rG=`#version 300 es
precision lowp float;uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 e){return u(e.y)<<1|u(e.x);}vec2 u(vec2 e,vec4 u){return(e-u.xy)/u.zw;}uniform int u_0,u_j;uniform ivec2 u_r;uniform lowp sampler2D u_2,u_1;out uvec2 outColor;void main(){ivec2 o=ivec2(gl_FragCoord.xy);int e=u_r.x*o.y+o.x;if(e>=u_0){outColor=uvec2(uint(e),4294967295u);return;}int t=textureSize(u_1,0).x;o=ivec2(e%t,e/t);vec4 i=texelFetch(u_2,ivec2(0),0);vec2 n=u(texelFetch(u_1,o,0).xy,i);outColor=uvec2(uint(e),u(uvec2(float(1<<u_j-1)*n)));}`,oG=ze(t=>{for(let e=0;e<t.length/2;e++)t[2*e]=e,t[2*e+1]=4294967295;return t},"Ge"),yb=ze(t=>1<<Math.ceil(Math.log2(t)),"q"),vb=ze(t=>{const e=32-Math.clz32(t-1);return[1<<(e>>>1)+(1&e),1<<(e>>>1)]},"j"),xb=ze((t,e,i)=>{const[n,s]=vb(yb(e)),r=oG(new Uint32Array(2*n*s));return i&&i.forEach((a,u)=>r[u]=a),dl(t,{size:[n,s],data:r,type:t.UNSIGNED_INT,format:t.RG_INTEGER,internalFormat:t.RG32UI})},"V"),rT=ze((t,e)=>{const[i,n]=vb(yb(e)),s=new Uint32Array(4*i*n);return dl(t,{size:[i,n],data:s,type:t.UNSIGNED_INT,format:t.RGBA_INTEGER,internalFormat:t.RGBA32UI})},"g"),aG=ze((t,e,i,n,s)=>{const r=Su(t,Tu,rG);Eu(t,r);const a=xb(t,e),u=zo(t,a.handle),h=Au(t,r,{u_0:e,u_j:i,u_r:a.size,u_2:n().handle,u_1:s().handle});return{step:()=>{t.viewport(0,0,a.size[0],a.size[1]),t.useProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,u),Gl(t,h,{u_2:n().handle,u_1:s().handle}),t.drawArrays(t.TRIANGLES,0,6)},texture:()=>a,destroy:()=>{t.deleteFramebuffer(u),t.deleteTexture(a.handle)}}},"Le"),lG=`#version 300 es
precision highp int;uniform uint u_s,u_t;uniform highp usampler2D u_u;out uvec2 outColor;uvec2 u(uvec2 u,uvec2 e,bool n,uint i){uvec2 t=u.x<4294967295u?texelFetch(u_u,ivec2(u.x%i,u.x/i),0).xy:u,c=e.x<4294967295u?texelFetch(u_u,ivec2(e.x%i,e.x/i),0).xy:e;if(n)return t.y<c.y?t:c;return t.y>c.y?t:c;}void main(){uint e=uint(textureSize(u_u,0).x);uvec2 t=uvec2(gl_FragCoord.xy);uint i=uint(t.x+e*t.y),x=texelFetch(u_u,ivec2(t),0).x,c=i^1u<<u_s-u_t,o=texelFetch(u_u,ivec2(c%e,c/e),0).x;bool n=(i>>u_s-u_t&1u)==0u;(i>>u_s&2u)==2u&&(n=!n),outColor=u(uvec2(i,x),uvec2(c,o),n,e);}`,uG=ze(t=>Math.max(0,Math.ceil(Math.log2(t))),"Pe"),hG=ze(t=>t*(t+1)/2,"Ne"),dG=ze((t,e,i)=>{const n=Su(t,Tu,lG);Eu(t,n);const s=xb(t,e),r=i,a=Ul(s,r),u=zo(t,r.handle),h=zo(t,s.handle),c=Ul(u,h),g=Au(t,n,{u_s:0,u_t:0,u_u:r.handle}),_=uG(e);let m=0,v=0,b=r;return{step:(x=hG(_))=>{t.useProgram(n),t.viewport(0,0,s.size[0],s.size[1]),b!==i&&(c(),a(),b=i);for(let M=0;M<x;M++){t.bindFramebuffer(t.FRAMEBUFFER,c());const N=a();b=N===s?r:s,Gl(t,g,{u_s:m,u_t:v,u_u:N.handle}),t.drawArrays(t.TRIANGLES,0,6),v=(v+1)%(m+1),v===0&&(m=(m+1)%_)}},texture:()=>b,destroy:()=>{t.deleteFramebuffer(u),t.deleteFramebuffer(h),t.deleteTexture(s.handle)}}},"Be"),cG=`#version 300 es
precision highp int;uniform uint u_s,u_t;uniform highp usampler2D u_u,u_v;out uvec4 outColor;uint v(uint v,uint t,uint u,uint n,uint e){uint i=v<u?t+v:n-u+v;uvec2 c=texelFetch(u_u,ivec2(i%e,i/e),0).xy;return c.y;}void main(){ivec2 x=ivec2(gl_FragCoord.xy);uint o=u_s-u_t;uvec2 n=uvec2(textureSize(u_u,0)),t=n.x==n.y?uvec2(0u,1u):uvec2(1u,0u);t=(o&1u)==1u?1u-t:t;uvec2 s=n>>uvec2(o+t.y>>1u,o+t.x>>1u);uint y=s.x*uint(x.y)+uint(x.x);uvec4 u;if(u_t==0u)u=uvec4(y&4294967294u,1u,(y&4294967294u)+1u,1u)<<u_s;else{uint v=y>>1u,e=s.x>>t.x;u=texelFetch(u_v,ivec2(v%e,v/e),0);}uint e=u.y+u.w>>1u,c=u.y<e?0u:u.y-e,r=u.y<e?u.y:e;for(;c<r;){uint i=c+(r-c>>1u);v(i,u.x,u.y,u.z,uint(n.x))<v(i+e,u.x,u.y,u.z,uint(n.x))?c=i+1u:r=i;}uint i=e-c;if((x.x&1)==0)outColor=uvec4(u.x,e-i,u.z+u.w-i,i);else outColor.zw=uvec2(u.z,u.w-i),outColor.xy=u.y<u.w?uvec2(u.x+e-i,u.y-e+i):uvec2(u.x+u.y-e+u.w-i,e-u.w+i);}`,fG=`#version 300 es
precision highp int;uniform uint u_s;uniform highp usampler2D u_u,u_v;out uvec2 outColor;void main(){uvec2 t=uvec2(gl_FragCoord.xy);uint u=uint(textureSize(u_v,0).x),e=t.y*u+t.x;bool o=(e>>u_s+1u&1u)==1u;if(o){uint u=1u<<u_s+1u;e+=u-2u*(e%u)-1u;}uvec4 i=texelFetch(u_v,ivec2(e%u,e/u),0);uint n=i.y>0u?i.x:i.z;outColor=texelFetch(u_u,ivec2(n%u,n/u),0).xy;}`,gG=ze(t=>Math.max(0,Math.ceil(Math.log2(t))),"We"),_G=ze(t=>t*(t+1)/2,"$e"),mG=ze((t,e,i)=>{e=yb(e);const n=Su(t,Tu,cG),s=Su(t,Tu,fG);Eu(t,n),Eu(t,s);const r=xb(t,e),a=i,u=Ul(r,a),h=zo(t,a.handle),c=zo(t,r.handle),g=Ul(h,c),_=rT(t,e),m=rT(t,e),v=Ul(_,m),b=zo(t,m.handle),x=zo(t,_.handle),M=Ul(b,x),N=Au(t,n,{u_s:0,u_t:0,u_u:a.handle,u_v:m.handle}),O=Au(t,s,{u_s:0,u_u:a.handle,u_v:m.handle}),R=gG(e);let P=0,F=0,U=a;return{step:(V=_G(R))=>{U!==i&&(g(),u(),U=i);for(let Y=0;Y<V;Y++){if(Y*F==0&&t.useProgram(n),t.bindFramebuffer(t.FRAMEBUFFER,M()),t.viewport(0,0,...vb(e>>>P-F)),Gl(t,N,{u_s:P,u_t:F,u_v:v().handle,u_u:U.handle}),t.drawArrays(t.TRIANGLES,0,6),F===P){t.useProgram(s),t.bindFramebuffer(t.FRAMEBUFFER,g());const K=u();U=K===r?a:r,t.viewport(0,0,K.size[0],K.size[1]),M(),Gl(t,O,{u_s:P,u_u:K.handle,u_v:v().handle}),t.drawArrays(t.TRIANGLES,0,6)}F=(F+1)%(P+1),F===0&&(P=(P+1)%R)}},texture:()=>U,destroy:()=>{t.deleteFramebuffer(h),t.deleteFramebuffer(c),t.deleteTexture(r.handle),t.deleteFramebuffer(b),t.deleteFramebuffer(x),t.deleteTexture(m.handle),t.deleteTexture(_.handle)}}},"Xe"),pG=ze(t=>{let e;return()=>e||t().finally(()=>e=void 0)},"qe"),yG=ze((t,e)=>Math.max(.1,1-(t/Math.max(1,e-20))**7.39),"te"),vG=ze((t,e=25,i=24e3)=>{const n=(i-e)/(e-1);return Math.ceil(e*n*4/(n+t))},"re"),oT={charge:10,edgeStrength:.5,edgeLength:30,elasticity:.9,margin:1,gravity:.01,inertia:.9,maxDisplacement:1e3,steps:200},xG=ze((t,e,i)=>{let[n,s]=[0,0];const r=k5(t),a=ze(()=>{t.bindBuffer(t.ARRAY_BUFFER,r),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);for(let h=0;h<e;h++,n++)if(!i(n))return!0},"a"),u=ze(h=>{a()?h(n):s=requestAnimationFrame(()=>u(h))},"i");return{start:pG(()=>new Promise(h=>(n=0)||u(h))),step:a,stop:()=>cancelAnimationFrame(s)}},"ue"),Tv=ze((t,e,i)=>{let{bodyTexture:n}=e;const{N:s,propertyTexture:r}=e,{steps:a,batch:u,sortingMethod:h}=i,c=i.order??4;if(c<2||c>8)throw new Error("Order must be between 2 and 8");const g=Math.max(1,i.depth??Math.ceil(Math.log2(s)/2)),{step:_,texture:m,destroy:v}=Z5(t,s,()=>n),{step:b,texture:x,destroy:M}=aG(t,s,g,m,()=>n),N=h==="ibr"?mG:dG,{step:O,texture:R,destroy:P}=N(t,s,x()),{step:F,texture:U,destroy:V}=sG(t,s,g,R),{step:Y,texture:K,destroy:tt}=tG(t,g,c,m,R,r,()=>n,U()),{step:j,texture:lt,destroy:pt}=J5(t,g,c,K),{step:ft,texture:ht,destroy:W}=q5(t,g,c,m,R,U(),lt(g-1),e,i);return{...xG(t,u??vG(s),st=>(n=ht(),_(),b(),O(),F(),Y(),j(),ft(yG(st,a)),st<a)),destroy:()=>{v(),M(),P(),V(),tt(),pt(),W()}}},"Ze"),bG=ze(({nodes:t,edges:e})=>{const i=t.length,n=e.length,s=new Uint32Array(i);for(let r=0;r<n;r++){const{source:a,target:u}=e[r];s[a]++,s[u]++}return s},"degrees"),EG=ze((t,e)=>({nodes:t.nodes.map((i,n)=>{const s=i.mass||1;return{...i,mass:s*(e[n]+1)}}),edges:t.edges.map(i=>{const n=i.weight||1,s=e[i.target]+1,r=e[i.source]+1,a=n*(s*r)/Math.min(s,r)/(s+r);return{...i,stiffness:a}})}),"defaultSettings"),SG=ze((t,e)=>{const i=eN(tN(t),e);return EG(i,bG(i))},"cleanGraph"),aT=0,nN=typeof window>"u",AG=typeof performance<"u"&&performance.now?performance:Date,TG=nN?t=>{const e=AG.now(),i=Math.max(0,16-(e-aT)),n=setTimeout(()=>t(e+i),i);return aT=e+i,n}:window.requestAnimationFrame,wG=nN?t=>clearTimeout(t):window.cancelAnimationFrame;function sN(t,e,i){for(let n=0;n<t.length;n++){const s=t[n];s.x=e[n],s.y=i[n]}}ze(sN,"defaultUpdate");var LG=ze(()=>{},"noop"),wv={movementRatio:7e-8,surfaceRatio:.0025},Xx=class{constructor(t={}){this.onUpdate=ze(e=>{},"onUpdate"),this.update=sN,this.nextTick=TG,this.cancelTick=wG,this.onEnd=LG,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=wv,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in t?t.autoStop&&(typeof t.autoStop=="boolean"?t.autoStop=wv:t.autoStop={...t.autoStop,...wv}):t.steps;for(const e in t)t[e]===void 0&&e!=="order"&&e!=="depth"||(this[e]=t[e])}};ze(Xx,"Settings");var lT=class{constructor(t){this.promise=new Promise(t)}then(t){return this.promise.then(t)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function Om(t,e,i={}){var b;let n,s;e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_color_buffer_float")||((b=e.getExtension("WEBGL_lose_context"))==null||b.loseContext());let r=new Xx({...oT,...i});const a=t.nodes.length,u=i.cx||t.nodes.reduce((x,M)=>x+(M.x||0),0)/a,h=i.cy||t.nodes.reduce((x,M)=>x+(M.y||0),0)/a,c=[u,h],g=ze(x=>{if(!n)throw new Error("No graph has been set");const{size:M}=n.bodyTexture;if(M[0]*M[1]<=1)return{X:[0],Y:[0]};const N=new Float32Array(4*M[0]*M[1]);e.readPixels(0,0,M[0],M[1],e.RGBA,e.FLOAT,N),x&&(_(),m());const O=N.filter((P,F)=>F%4==0).map(P=>P+u),R=N.filter((P,F)=>F%4==1).map(P=>P+h);return{X:O,Y:R}},"readLayoutData"),_=ze(()=>{s&&(s.stop(),s.destroy(),s=void 0)},"simulationCleanup"),m=ze(()=>{n&&(nT(e,n),n=void 0)},"graphLayoutCleanup"),v={setOptions:(x={})=>(r=new Xx({...oT,...x}),n&&(_(),s=Tv(e,n,r)),v),setGraph:(x={nodes:[],edges:[]})=>(n&&nT(e,n),n=iT(e,eN(tN(x),c)),r&&(_(),s=Tv(e,n,r)),v),start:()=>{if(!s)throw new Error("No graph has been set");return s.start().finally(()=>{var x;return(x=i.onEnd)==null?void 0:x.call(i,1)}),v},stop:()=>(s&&s.stop(),v),step:()=>{if(!s)throw new Error("No graph has been set");return s.step(),v},data:x=>g(x),iterations:()=>1};return n=iT(e,SG(t,c)),s=Tv(e,n,r),v}/**
* @preserve
* @linkurious/force-layout@0.7.3
* Ogma general-purpose force-directed layout
*/function uT(){var t=(()=>{var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,r=(ot,at)=>e(ot,"name",{value:at,configurable:!0}),a={};((ot,at)=>{for(var it in at)e(ot,it,{get:at[it],enumerable:!0})})(a,{IntegratorType:()=>Fn,default:()=>en});var u=class{constructor(ot){let at=h();this.c=1,this.s0=at(" "),this.s1=at(" "),this.s2=at(" "),this.s0-=at(String(ot)),this.s0<0&&(this.s0+=1),this.s1-=at(String(ot)),this.s1<0&&(this.s1+=1),this.s2-=at(ot),this.s2<0&&(this.s2+=1),at=null}next(){return()=>{const ot=2091639*this.s0+23283064365386963e-26*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=ot-(this.c=0|ot)}}nextDouble(){const ot=this.next();return()=>ot()+11102230246251565e-32*(2097152*ot()|0)}nextInt32(){const ot=this.next();return()=>4294967296*ot()|0}};function h(){let ot=4022871197;return at=>{at=at.toString();for(let it=0;it<at.length;it++){ot+=at.charCodeAt(it);let ut=.02519603282416938*ot;ot=ut>>>0,ut-=ot,ut*=ot,ot=ut>>>0,ut-=ot,ot+=4294967296*ut}return 23283064365386963e-26*(ot>>>0)}}function c(ot){return new u(ot.toString()).next()}r(u,"Alea"),r(h,"Mash"),r(c,"impl");var g=c(42);function _(ot){g=c(ot)}function m(){return 1e-6*(g()-.5)}function v(ot,at,{sources:it,targets:ut,X:yt,Y:bt,R:vt,fx:St,fy:Tt,degrees:Wt,masses:wt,weights:Nt},{edgeStrength:Ft,edgeLength:te}){for(let Ot=0;Ot<at.length;Ot++){const oe=at[Ot],he=it[oe],Kt=ut[oe],le=1,ge=Wt[he]+le,ue=Wt[Kt]+le,_e=Ft*Nt[oe];let me=yt[Kt]+St[Kt]-yt[he]-St[he]||m(),Te=bt[Kt]+Tt[Kt]-bt[he]-Tt[he]||m();const Ie=me*me+Te*Te,Le=Math.sqrt(Ie),We=te+vt[he]+vt[Kt];if(Le<=We)continue;const $e=We-Le,Ei=$e*(ue*ge/Math.min(ue,ge)/(ue+ge)),Si=Math.min(1,ot*_e*$e/Ie*(Ei*(ue+ge)/(ue*ge))),ui=ue*ge/(ue+ge);me*=Si,Te*=Si,St[he]+=me*ui/wt[he],Tt[he]+=Te*ui/wt[he],St[Kt]-=me*ui/wt[Kt],Tt[Kt]-=Te*ui/wt[Kt]}}r(_,"setSeed"),r(m,"randomize"),r(v,"attraction");var b=r((ot,{edgeIds:at,sources:it,targets:ut,degrees:yt,weights:bt})=>{for(let vt=0;vt<ot.length;vt++){const{source:St,target:Tt,weight:Wt=1}=ot[vt];it[vt]=St,ut[vt]=Tt,bt[vt]=Wt,yt[St]++,yt[Tt]++,at[vt]=vt,bt[vt]=Wt===void 0?1:Wt}},"initialize");function x(ot,at,{X:it,Y:ut,fx:yt,fy:bt},{gravity:vt,cx:St,cy:Tt}){const Wt=at.length;for(let wt=0;wt<Wt;wt++){const Nt=at[wt],Ft=St-it[Nt]||m(),te=Tt-ut[Nt]||m(),Ot=vt*ot;yt[Nt]+=Ft*Ot,bt[Nt]+=te*Ot}}v.initialize=b,r(x,"center");var M=r((ot,at,it)=>{const{X:ut,Y:yt}=at;let bt=it.cx,vt=it.cy;const St=ot.length;if(bt===void 0||vt===void 0){bt=vt=0;for(let Tt=0;Tt<St;Tt++)bt+=ut[Tt],vt+=yt[Tt];bt/=St,vt/=St}it.cx=bt,it.cy=vt},"initialize");x.initialize=M;var N=class{constructor(ot,at,it,ut){this.left=null,this.right=null,this.data=null,this.code=ot,this.data=at,this.left=it,this.right=ut}};function O(ot,at,it,ut,yt){const bt=new N(null,null,null,null),vt=[bt],St=[ut,yt];for(;vt.length!==0;){const Tt=St.pop(),Wt=St.pop(),wt=vt.pop();if(Tt-Wt==0)wt.code=it[Wt],wt.data=ot[at[Wt]];else{const Nt=F(at,it,Wt,Tt);wt.code=Nt,Wt<=Nt&&(wt.left=new N(null,null,null,null),vt.push(wt.left),St.push(Wt,Nt)),Tt>Nt&&(wt.right=new N(null,null,null,null),vt.push(wt.right),St.push(Nt+1,Tt))}}return bt}function R(ot,at,it,ut,yt,bt){const vt=new N(null,null,null,null),St=[vt],Tt=[ut,yt];for(;St.length!==0;){const Wt=Tt.pop(),wt=Tt.pop(),Nt=St.pop();if(Wt-wt<bt){const Ft=new Array(Wt-wt+1);for(let te=wt,Ot=0;te<=Wt;te++,Ot++)Ft[Ot]=ot[at[te]];Nt.code=it[wt],Nt.data=Ft}else{const Ft=F(at,it,wt,Wt);Nt.code=Ft,wt<=Ft&&(Nt.left=new N(null,null,null,null),St.push(Nt.left),Tt.push(wt,Ft)),Wt>Ft&&(Nt.right=new N(null,null,null,null),St.push(Nt.right),Tt.push(Ft+1,Wt))}}return vt}r(N,"Node"),r(O,"buildIterative"),r(R,"buildIterativeBuckets");var P=Math.clz32||r(function(at){let it=-2147483648;for(let ut=0;ut<31;ut+=1){if(it&at)return ut;it>>>=1}return 32},"clz");function F(ot,at,it,ut){const yt=at[ot[it]],bt=at[ot[ut]];if(yt===bt)return it;const vt=P(yt^bt);let St,Tt,Wt,wt=it,Nt=ut-it;do Nt=Nt+1>>1,St=wt+Nt,St<ut&&(Tt=at[ot[St]],Wt=P(yt^Tt),Wt>vt&&(wt=St));while(Nt>1);return wt}function U(ot,at){let it=ot^at,ut=65535^it,yt=65535^(ot|at),bt=ot&(65535^at),vt=it|ut>>1,St=it>>1^it,Tt=yt>>1^ut&bt>>1^yt,Wt=it&yt>>1^bt>>1^bt;it=vt,ut=St,yt=Tt,bt=Wt,vt=it&it>>2^ut&ut>>2,St=it&ut>>2^ut&(it^ut)>>2,Tt^=it&yt>>2^ut&bt>>2,Wt^=ut&yt>>2^(it^ut)&bt>>2,it=vt,ut=St,yt=Tt,bt=Wt,vt=it&it>>4^ut&ut>>4,St=it&ut>>4^ut&(it^ut)>>4,Tt^=it&yt>>4^ut&bt>>4,Wt^=ut&yt>>4^(it^ut)&bt>>4,it=vt,ut=St,yt=Tt,bt=Wt,Tt^=it&yt>>8^ut&bt>>8,Wt^=ut&yt>>8^(it^ut)&bt>>8,it=Tt^Tt>>1,ut=Wt^Wt>>1;let wt=ot^at,Nt=ut|65535^(wt|it);return wt=16711935&(wt|wt<<8),wt=252645135&(wt|wt<<4),wt=858993459&(wt|wt<<2),wt=1431655765&(wt|wt<<1),Nt=16711935&(Nt|Nt<<8),Nt=252645135&(Nt|Nt<<4),Nt=858993459&(Nt|Nt<<2),Nt=1431655765&(Nt|Nt<<1),(Nt<<1|wt)>>>0}r(F,"findSplit"),r(U,"hilbert");var V=[0,1],Y=[0,2];for(let ot=4;ot<65535;ot<<=2)for(let at=0,it=V.length;at<it;at++)V.push(V[at]|ot),Y.push((V[at]|ot)<<1);function K(ot,at){return(Y[255&at]|V[255&ot])+65536*(Y[at>>8&255]|V[ot>>8&255])+4294967296*(Y[at>>16&255]|V[ot>>16&255])}r(K,"morton");var tt=new Uint32Array(1024);function j(ot,at){const it=new Uint32Array(at.length);for(let yt=0;yt<1024;yt++)tt[yt]=0;const ut=255;for(let yt=0;yt<at.length;yt++){const bt=at[yt];tt[bt&ut]++,tt[256+(bt>>8&ut)]++,tt[512+(bt>>16&ut)]++,tt[768+(bt>>24&ut)]++}for(let yt=0;yt<4;yt++){let bt=0,vt=0;const St=256*yt;for(let Tt=0;Tt<256;Tt++)bt=tt[Tt+St],tt[Tt+St]=vt,vt+=bt}for(let yt=0;yt<at.length;yt++){const bt=at[yt];it[tt[bt&ut]++]=yt}for(let yt=0;yt<at.length;yt++){const bt=it[yt],vt=at[bt];ot[tt[256+(vt>>8&ut)]++]=bt}for(let yt=0;yt<at.length;yt++){const bt=ot[yt],vt=at[bt];it[tt[512+(vt>>16&ut)]++]=bt}for(let yt=0;yt<at.length;yt++){const bt=it[yt],vt=at[bt];ot[tt[768+(vt>>24&ut)]++]=bt}}r(j,"radixSort");var lt=class{constructor(ot,{getX:at,getY:it,bucketSize:ut=0,sfc:yt=1}={}){this.bucketSize=0,this._root=null;const bt=ot.length,vt=new Uint32Array(bt);let St=1/0,Tt=1/0,Wt=-1/0,wt=-1/0;this._x=at,this._y=it;const Nt=yt===1?U:K;this._project=Nt;const Ft=new Uint32Array(bt);for(let oe=0;oe<bt;oe++){const he=ot[oe],Kt=at(he),le=it(he);Kt<St&&(St=Kt),le<Tt&&(Tt=le),Kt>Wt&&(Wt=Kt),le>wt&&(wt=le),Ft[oe]=oe}this._minX=St,this._minY=Tt,this._maxX=Wt,this._maxY=wt;const te=65535/Math.max(Wt-St,1),Ot=65535/Math.max(wt-Tt,1);this._hw=te,this._hh=Ot;for(let oe=0;oe<bt;oe++){const he=ot[oe];vt[oe]=Nt(te*(at(he)-St),Ot*(it(he)-Tt))}j(Ft,vt),this._root=ut===0?O(ot,Ft,vt,0,bt-1):R(ot,Ft,vt,0,bt-1,ut),this.bucketSize=ut}get root(){return this._root}inOrder(ot,at){let it=this._root;const ut=[];let yt=!1;for(;!yt;)if(it)ut.push(it),it=it.left;else if(ut.length!==0){if(it=ut.pop(),ot.call(at,it))break;it=it.right}else yt=!0;return this}preOrder(ot,at){const it=[this._root];for(;it.length!==0;){const ut=it.pop();ot.call(at,ut)||(ut.right&&it.push(ut.right),ut.left&&it.push(ut.left))}return this}postOrder(ot,at){const it=[];let ut,yt=this._root;do{for(;yt;)yt.right&&it.push(yt.right),it.push(yt),yt=yt.left;yt=it.pop(),ut=it.length-1,yt.right&&it[ut]===yt.right?(it[ut]=yt,yt=yt.right):(ot.call(at,yt),yt=null)}while(it.length!==0);return this}map(ot,at){const it=[];return this.inOrder(ut=>{it.push(ot.call(at,ut))}),it}height(){return pt(this._root)}toString(ot=at=>at.code.toString()){const at=[];return ft(this._root,"",!0,it=>at.push(it),ot),at.join("")}size(){let ot=0;return this.preOrder(()=>{ot++}),ot}destroy(){return this._root=null,this}};function pt(ot){return ot?1+Math.max(pt(ot.left),pt(ot.right)):0}function ft(ot,at,it,ut,yt){if(ot){ut(at+(it?"^-- ":"|-- ")+yt(ot)+`
`);const bt=at+(it?"    ":"|   ");ot.left&&ft(ot.left,bt,!1,ut,yt),ot.right&&ft(ot.right,bt,!0,ut,yt)}}function ht(ot){for(let at=ot.length-1;at>=0;at--){let it=Math.floor(Math.random()*(at+1));it=Math.max(Math.min(it,at),0);const ut=ot[at];ot[at]=ot[it],ot[it]=ut}return ot}r(lt,"BVH"),r(pt,"treeHeight"),r(ft,"row"),r(ht,"shuffle");var W,st,_t,Vt,X,et,Dt,Mt,At,Xt=r(ot=>ot.x,"getX"),jt=r(ot=>ot.y,"getY"),Ge=r(ot=>ot.r,"getR");function Se(ot,at=Xt,it=jt,ut=Ge){const yt=ht(ot.slice()),bt=yt.length;let vt,St=[],Tt=0;for(;Tt<bt;){const Wt=yt[Tt];vt&&ie(vt,at(Wt),it(Wt),ut(Wt))?Tt++:(St=Lt(St,Wt,at,it,ut),vt=$t(St,at,it,ut),Tt=0)}return vt}function Lt(ot,at,it,ut,yt){const bt=it(at),vt=ut(at),St=yt(at),Tt={x:bt,y:vt,r:St};if(kt(Tt,ot,it,ut,yt))return[at];for(let Wt=0;Wt<ot.length;++Wt){const wt=ot[Wt],Nt=it(wt),Ft=ut(wt),te=yt(wt);if(!Gt(Tt,Nt,Ft,te)&&kt(ee(Nt,Ft,te,bt,vt,St),ot,it,ut,yt))return[ot[Wt],at]}for(let Wt=0;Wt<ot.length-1;Wt++)for(let wt=Wt+1;wt<ot.length;wt++){const Nt=ot[Wt],Ft=ot[wt],te=it(Nt),Ot=ut(Nt),oe=yt(Nt),he=it(Ft),Kt=ut(Ft),le=yt(Ft);if(!Gt(ee(te,Ot,oe,he,Kt,le),bt,vt,St)&&!Gt(ee(te,Ot,oe,bt,vt,St),he,Kt,le)&&!Gt(ee(he,Kt,le,bt,vt,St),te,Ot,oe)&&kt(se(te,Ot,oe,he,Kt,le,bt,vt,St),ot,it,ut,yt))return[ot[Wt],ot[wt],at]}throw new Error}function Gt(ot,at,it,ut){const yt=ot.r-ut,bt=at-ot.x,vt=it-ot.y;return yt>=0&&yt*yt>bt*bt+vt*vt}function ie(ot,at,it,ut){const yt=ot.r-ut+1e-6,bt=at-ot.x,vt=it-ot.y;return yt>0&&yt*yt>bt*bt+vt*vt}function kt(ot,at,it,ut,yt){for(let bt=0;bt<at.length;++bt){const vt=at[bt];if(!ie(ot,it(vt),ut(vt),yt(vt)))return!1}return!0}function $t(ot,at,it,ut){return ot.length===1?ne(at(ot[0]),it(ot[0]),ut(ot[0])):ot.length===2?ee(at(ot[0]),it(ot[0]),ut(ot[0]),at(ot[1]),it(ot[1]),ut(ot[1])):se(at(ot[0]),it(ot[0]),ut(ot[0]),at(ot[1]),it(ot[1]),ut(ot[1]),at(ot[2]),it(ot[2]),ut(ot[2]))}function ne(ot,at,it){return{x:ot,y:at,r:it}}function ee(ot,at,it,ut,yt,bt){const vt=ut-ot,St=yt-at,Tt=bt-it,Wt=Math.sqrt(vt*vt+St*St);return{x:(ot+ut+vt/Wt*Tt)/2,y:(at+yt+St/Wt*Tt)/2,r:(Wt+it+bt)/2}}function se(ot,at,it,ut,yt,bt,vt,St,Tt){const Wt=(ot+ut+vt)/3,wt=(at+yt+St)/3,Nt=ot-Wt,Ft=at-wt,te=ut-Wt,Ot=yt-wt,oe=vt-Wt,he=St-wt,Kt=Nt-te,le=Nt-oe,ge=Ft-Ot,ue=Ft-he,_e=bt-it,me=Tt-it,Te=Nt*Nt+Ft*Ft-it*it,Ie=Te-te*te-Ot*Ot+bt*bt,Le=Te-oe*oe-he*he+Tt*Tt,We=le*ge-Kt*ue,$e=(ge*Le-ue*Ie)/(2*We)-Nt,Ei=(ue*_e-ge*me)/We,Si=(le*Ie-Kt*Le)/(2*We)-Ft,ui=(Kt*me-le*_e)/We,Zi=Ei*Ei+ui*ui-1,En=2*(it+$e*Ei+Si*ui),Wi=$e*$e+Si*Si-it*it,Vi=-(Math.abs(Zi)>1e-6?(En+Math.sqrt(En*En-4*Zi*Wi))/(2*Zi):Wi/En);return{x:Wt+Nt+$e+Ei*Vi,y:wt+Ft+Si+ui*Vi,r:Vi}}function ve(ot,at,it,{X:ut,Y:yt,R:bt,fx:vt,fy:St,bucketSize:Tt},{elasticity:Wt}){if(Wt===0)return it;it||(it=new lt(at,{getX:W,getY:st,bucketSize:Tt})).postOrder(Vt);for(let wt=0;wt<at.length;wt++)et=at[wt],Dt=ut[et]+vt[et],Mt=yt[et]+St[et],At=bt[et],it.preOrder(X);return it}r(Se,"med"),r(Lt,"extend"),r(Gt,"contains"),r(ie,"containsWeak"),r(kt,"containsWeakAll"),r($t,"enclose"),r(ne,"from1"),r(ee,"from2"),r(se,"from3"),r(ve,"collisionForce");var Oe,ke,Xe,Be,Ae,Ze,ki,ei,qe,hi,Ji,Mi=r(({X:ot,Y:at,R:it,bucketSize:ut})=>yt=>{let bt,vt,St,Tt;const Wt=yt.data;if(Wt!==null)if(ut!==0){const wt=Se(Wt,W,st,_t);bt=wt.x,vt=wt.y,St=wt.r}else{const wt=Wt;bt=ot[wt],vt=at[wt],St=it[wt]}else if(yt.left&&yt.right){const wt=yt.left.cx,Nt=yt.left.cy,Ft=yt.right.cx,te=yt.right.cy,Ot=yt.left.r,oe=yt.right.r,he=Ft-wt,Kt=te-Nt,le=oe-Ot,ge=Math.sqrt(he*he+Kt*Kt);bt=(wt+Ft+he/ge*le)/2,vt=(Nt+te+Kt/ge*le)/2,St=(ge+Ot+oe)/2}else Tt=yt.left||yt.right,Tt&&(bt=Tt.cx,vt=Tt.cy,St=Tt.r);yt.cx=bt,yt.cy=vt,yt.r=St},"getMeasureBodies"),Vs=r(({X:ot,Y:at,R:it,fx:ut,fy:yt,bucketSize:bt},{elasticity:vt,margin:St})=>Tt=>{const Wt=Tt.data;if(Wt===null){const wt=Tt.cx-Dt,Nt=Tt.cy-Mt,Ft=Tt.r+At;return wt*wt+Nt*Nt>Ft*Ft}if(bt!==0){const wt=Wt;for(let Nt=0;Nt<wt.length;Nt++){const Ft=wt[Nt];if(Ft>et){const te=it[Ft];let Ot=Dt-ot[Ft]-ut[Ft],oe=Mt-at[Ft]-yt[Ft];const he=At+te+St;let Kt=Ot*Ot+oe*oe;if(Kt<he*he){Ot===0&&(Ot=m(),Kt+=Ot*Ot),oe===0&&(oe=m(),Kt+=oe*oe);const le=Math.sqrt(Kt),ge=(he-le)*vt/le,ue=te/he;ut[et]+=Ot*ge*ue,yt[et]+=oe*ge*ue,ut[Ft]-=Ot*ge*(1-ue),yt[Ft]-=oe*ge*(1-ue)}}}}else{const wt=Tt.data;if(wt>et){const Nt=it[wt];let Ft=Dt-ot[wt],te=Mt-at[wt];const Ot=At+Nt+St;let oe=Ft*Ft+te*te;if(oe<Ot*Ot){Ft===0&&(Ft=m(),oe+=Ft*Ft),te===0&&(te=m(),oe+=te*te);const he=Math.sqrt(oe),Kt=(Ot-he)*vt/he,le=Nt/Ot;ut[et]+=Ft*Kt*le,yt[et]+=te*Kt*le,ut[wt]-=Ft*Kt*(1-le),yt[wt]-=te*Kt*(1-le)}}}},"getApplyForce"),ls=r((ot,at,it)=>{const{X:ut,Y:yt,R:bt}=at;W=r(vt=>ut[vt],"getX"),st=r(vt=>yt[vt],"getY"),_t=r(vt=>bt[vt],"getR"),Vt=Mi(at),X=Vs(at,it)},"initialize");function Is(ot,at,{masses:it,X:ut,Y:yt,fx:bt,fy:vt},{charge:St}){const Tt=at.length;let Wt,wt,Nt,Ft,te,Ot,oe,he,Kt;for(let le=0;le<Tt;le++){Wt=at[le];for(let ge=le+1;ge<Tt;ge++)if(le!==ge){if(wt=at[ge],Wt===wt)continue;Nt=ut[Wt]-ut[wt]||m(),Ft=yt[Wt]-yt[wt]||m(),te=Nt*Nt+Ft*Ft,te<1&&(te=Math.sqrt(1*te)),Ot=St*it[wt],oe=ot*Ot/te,he=St*it[Wt],Kt=ot*he/te,bt[Wt]+=Nt*oe,vt[Wt]+=Ft*oe,bt[wt]-=Nt*Kt,vt[wt]-=Ft*Kt}}}ve.initialize=ls,r(Is,"repulsion"),Is.initialize=()=>{};var Jn=0;function Cn(ot,at,it,{X:ut,Y:yt,R:bt,masses:vt,bucketSize:St}){Jn=ot,it===null&&(it=new lt(at,{getX:Xe,getY:Be,bucketSize:St})).postOrder(Oe);const Tt=at.length;for(let Wt=0;Wt<Tt;Wt++)Ze=at[Wt],ki=ut[Ze],ei=yt[Ze],qe=bt[Ze],hi=vt[Ze],Ji=hi,it.preOrder(ke);return it}r(Cn,"repulsion");var bn=r(({fx:ot,fy:at,X:it,Y:ut,R:yt,masses:bt,bucketSize:vt},{charge:St,theta:Tt})=>Wt=>{let wt=0,Nt=0,Ft=ki-Wt.cx||m(),te=ei-Wt.cy||m(),Ot=Ft*Ft+te*te,oe=qe+Wt.r;const he=Wt.data;if(he!==null){if(he===Ze)return!1;if(vt!==0){const Kt=he;for(let le=0;le<Kt.length;le++){const ge=Kt[le];if(ge===Ze)continue;Ft=ki-it[ge]||m(),te=ei-ut[ge]||m(),Ot=Ft*Ft+te*te,oe=qe+yt[ge],Ot<1&&(Ot=Math.sqrt(1*Ot));const ue=bt[ge];wt=St*ue*Ji,Nt=Jn*wt/Ot,ot[Ze]+=Ft*Nt/hi,at[Ze]+=te*Nt/hi}}else Ot<1&&(Ot=Math.sqrt(1*Ot)),wt=St*Wt.mass*Ji,Nt=Jn*wt/Ot,ot[Ze]+=Ft*Nt/hi,at[Ze]+=te*Nt/hi}else{const Kt=oe/Tt;if(Ot>Kt*Kt)return Ot<1&&(Ot=Math.sqrt(1*Ot)),wt=St*Wt.mass*Ji,Nt=Jn*wt/Ot,ot[Ze]+=Ft*Nt/hi,at[Ze]+=te*Nt/hi,!0}},"getApplyForce"),di=r(({X:ot,Y:at,R:it,masses:ut,bucketSize:yt})=>bt=>{let vt,St,Tt=0,Wt=0,wt=0,Nt=0;const Ft=bt.data;if(Ft!==null)if(yt!==0){const te=Ft,Ot=Se(te,Xe,Be,Ae);Tt=Ot.x,Wt=Ot.y,wt=Ot.r;for(let oe=0;oe<te.length;oe++)Nt+=ut[te[oe]]}else St=Ft,Tt=ot[St],Wt=at[St],wt=it[St],Nt=ut[St];else if(bt.left&&bt.right){const te=bt.left.cx,Ot=bt.left.cy,oe=bt.right.cx,he=bt.right.cy,Kt=bt.left.r,le=bt.right.r,ge=oe-te,ue=he-Ot,_e=le-Kt,me=Math.sqrt(ge*ge+ue*ue);Tt=(te+oe+ge/me*_e)/2,Wt=(Ot+he+ue/me*_e)/2,wt=(me+Kt+le)/2,Nt=bt.left.mass+bt.right.mass}else vt=bt.left||bt.right,Tt=vt.cx,Wt=vt.cy,wt=vt.r,Nt=vt.mass;bt.cx=Tt,bt.cy=Wt,bt.r=wt,bt.mass=Nt},"getAccumulateBodies"),gi=r((ot,at,it)=>{const ut=ot.length,{X:yt,Y:bt,R:vt,degrees:St,pinned:Tt,masses:Wt,nodeIds:wt}=at,{scaling:Nt,defaultRadius:Ft,bucketSize:te}=it;at.bucketSize=te===void 0?Math.floor(Math.log(ut)):te;let Ot=1/0,oe=1/0,he=-1/0,Kt=-1/0;const le=Math.PI*(3-Math.sqrt(5));let ge=0;for(let ue=0;ue<ot.length;ue++){const _e=ot[ue];let{x:me,y:Te,r:Ie}=_e;const{mass:Le=1}=_e;if(isNaN(me)||isNaN(Te)){const We=5*Math.sqrt(ue),$e=ue*le;me=We*Math.cos($e),Te=We*Math.sin($e)}Ie=Ie||Ft,yt[ue]=me,bt[ue]=Te,vt[ue]=Ie,Tt[ue]=_e.pinned?1:0,Wt[ue]=Le*(1+St[ue])*Nt,wt[ue]=ue,Ie>ge&&(ge=Ie),me<Ot&&(Ot=me),Te<oe&&(oe=Te),me>he&&(he=me),Te>Kt&&(Kt=Te)}if(ot.length>1&&(he-Ot<2*ge||Kt-oe<2*ge)){const ue=(Ot+he)/2,_e=(oe+Kt)/2;for(let me=0;me<ut;me++)if(!Tt[me]){const Te=5*Math.sqrt(me),Ie=me*le,Le=ue+Te*Math.cos(Ie),We=_e+Te*Math.sin(Ie);yt[me]=Le,bt[me]=We,Le<Ot&&(Ot=Le),We<oe&&(oe=We),Le>he&&(he=Le),We>Kt&&(Kt=We)}}Xe=r(ue=>yt[ue],"getX"),Be=r(ue=>bt[ue],"getY"),Ae=r(ue=>vt[ue],"getR"),Oe=di(at),ke=bn(at,it)},"initialize");function lr(ot,at,{X:it,Y:ut,fx:yt,fy:bt,vx:vt,vy:St,masses:Tt,pinned:Wt},wt){let Nt=0,Ft=0;const te=ot.length,Ot=1/8;for(let oe=0;oe<te;oe++){const he=ot[oe],Kt=Tt[he],le=yt[he]/Kt,ge=bt[he]/Kt;vt[he]+=le*Ot,St[he]+=ge*Ot;const ue=.2*vt[he]*Ot+.5*le*Ot*Ot,_e=.2*St[he]*Ot+.5*ge*Ot*Ot;yt[he]=bt[he]=0,Wt[he]||(it[he]+=ue,ut[he]+=_e,Nt+=Math.abs(ue)*Kt,Ft+=Math.abs(_e)*Kt)}return(Nt*Nt+Ft*Ft)/te}function ys(ot,at,{X:it,Y:ut,fx:yt,fy:bt,vx:vt,vy:St,pinned:Tt,masses:Wt},wt){const Nt=ot.length;let Ft=0;for(let te=0;te<Nt;te++){const Ot=ot[te],oe=Wt[Ot],he=yt[Ot]/oe,Kt=bt[Ot]/oe,le=vt[Ot]+1*he,ge=St[Ot]+1*Kt;let ue=1*le,_e=1*ge;ue>1e4&&(ue=.1),_e>1e4&&(_e=.1),vt[Ot]=at*(le+vt[Ot])/2,St[Ot]=at*(ge+St[Ot])/2,yt[Ot]=bt[Ot]=0,Tt[Ot]||(it[Ot]+=ue,ut[Ot]+=_e),Ft+=.5*(ue*ue+_e*_e)}return Ft}function Hi(ot,at,{X:it,Y:ut,fx:yt,fy:bt,pinned:vt,layer:St,layers:Tt,surfaces:Wt,movements:wt},{maxDisplacement:Nt}){wt.fill(0);let Ft=0;const te=ot.length;let Ot=1/0,oe=1/0,he=-1/0,Kt=-1/0;const le=Nt*Nt;for(let _e=0;_e<te;_e++){const me=ot[_e],Te=yt[me]*=at,Ie=bt[me]*=at,Le=St[me];let We=Te,$e=Ie;const Ei=it[me],Si=ut[me];if(We*We+$e*$e>le){const Zi=Math.sqrt(We*We+$e*$e)/Nt;$e/=Zi,We/=Zi}vt[me]||(it[me]+=We,ut[me]+=$e);const ui=Math.sqrt(We*We+$e*$e);vt[me]||(Ei<Ot&&(Ot=Ei),Si<oe&&(oe=Si),Ei>Ot&&(he=Ei),Si>oe&&(Kt=Si),wt[Le-1]+=ui),Ft+=Le*ui}const ge=Math.max(he-Ot,0),ue=Math.max(Kt-oe,0);for(let _e=0;_e<Tt.length;_e++){const me=Tt[_e],Te=me.length;let Ie=1/0,Le=1/0,We=-1/0,$e=-1/0,Ei=0;for(let Vi=0;Vi<Te;Vi++){const hn=me[Vi];if(vt[hn])continue;const Nn=it[hn],Ai=ut[hn];Nn<Ie&&(Ie=Nn),Ai<Le&&(Le=Ai),Nn>We&&(We=Nn),Ai>$e&&($e=Ai),Ei++}const Si=We-Ie,ui=$e-Le,Zi=Math.max(1,Math.sqrt(Si**2+ui**2));Wt[_e]=Zi;const En=Ei===0?0:wt[_e]/Ei,Wi=ge*ue||1;wt[_e]=En>Ei?En/Wi:0}return Ft}function $i(ot,at,it){Mn(ot,at,it),zr(it)}function Mn(ot,at,{sources:it,targets:ut,degrees:yt,nodeIds:bt,edgeIds:vt}){const St={};for(let Tt=0;Tt<ot.length;Tt++)St[Tt]=bt[Tt]=Tt;for(let Tt=0;Tt<at.length;Tt++){const{source:Wt,target:wt}=at[Tt],Nt=St[Wt],Ft=St[wt];vt[Tt]=Tt,it[Tt]=Nt,ut[Tt]=Ft,yt[Nt]++,yt[Ft]++}}function zr({nodeIds:ot,edgeIds:at,sources:it,targets:ut,degrees:yt,layer:bt,layers:vt,component:St,components:Tt,cluster:Wt,parent:wt}){let Nt=0,Ft=1;const te=new Uint32Array(ot.length);for(let ge=0;ge<ot.length;ge++)te[ge]=yt[ge];const Ot=new Array(ot.length);for(let ge=0;ge<at.length;ge++){const ue=at[ge],_e=it[ue],me=ut[ue];Ot[_e]=Ot[_e]||[],Ot[me]=Ot[me]||[],Ot[_e].push(me),Ot[me].push(_e)}const oe=new Uint8Array(ot.length),he=new Uint8Array(ot.length);wt.fill(-1);let Kt=0;for(let ge=0;ge<ot.length;ge++)if(oe[ge]===0){const ue=[ge];for(;ue.length!==0;){const _e=ue.pop();if(oe[_e]===0&&Ot[_e]!==void 0){const me=Ot[_e];for(let Te=0;Te<me.length;Te++)ue.push(me[Te])}oe[_e]=1,St[_e]=Kt}Kt++}const le=new Array(ot.length);for(let ge=0;ge<ot.length;ge++)bt[ge]=0,le[ge]=ge;for(;le.length!==0;){const ge=[],ue=[];for(let _e=0;_e<le.length;_e++)te[le[_e]]<=Nt&&(ge.push(_e),ue.push(le[_e]));for(let _e=0;_e<ue.length;_e++){const me=ue[_e];he[me]=Nt,bt[me]=Ft;const Te=Ot[me];if(Te)for(let Ie=0;Ie<Te.length;Ie++)te[Te[Ie]]--}for(let _e=0;_e<ue.length;_e++){const me=ue[_e],Te=Ot[me];if(Te)for(let Ie=0;Ie<Te.length;Ie++){const Le=Te[Ie],We=bt[Le];if(We===void 0||We>Ft){wt[me]=Le;break}}}ge.reverse();for(let _e=0;_e<ge.length;_e++)le.splice(ge[_e],1);if(Ft+=1,le.length>0){let _e=1/0;for(let me=0;me<le.length;me++){const Te=te[le[me]];Te<_e&&(_e=Te)}_e>=Nt+1&&(Nt=_e,Ft=1)}}oe.fill(0);for(let ge=0;ge<ot.length;ge++){const ue=ot[ge],_e=bt[ue];if(wt[ue]===-1||bt[wt[ue]]===_e){const me=[ue];for(oe.fill(0);me.length!==0;){const Te=me.pop();if(oe[Te])continue;if(bt[Te]>_e){wt[ue]=Te;break}const Ie=Ot[Te];if(oe[Te]=1,Ie)for(let Le=0;Le<Ie.length;Le++)me.push(Ie[Le])}}}for(let ge=0;ge<ot.length;ge++){const ue=ot[ge],_e=St[ue];Tt[_e]=Tt[_e]||[],Tt[_e].push(ue);const me=bt[ue]-1;vt[me]=vt[me]||[],vt[me].push(ue),Wt[ue]=wt[ue]}}Cn.initialize=gi,r(lr,"euler"),r(ys,"leapfrog"),r(Hi,"velocityVerlet"),r($i,"default"),r(Mn,"initTopology"),r(zr,"decomposition");var ur=class{constructor(ot,at=!0){this.bucketSize=0;const it=ot.nodes.length,ut=ot.edges.length;_(it+ut),this.X=new Array(it),this.Y=new Array(it),this.R=new Array(it),this.fx=new Float32Array(it),this.fy=new Float32Array(it),this.vx=new Float32Array(it),this.vy=new Float32Array(it),this.pinned=new Uint8Array(it),this.masses=new Float32Array(it),this.weights=new Float32Array(ut),this.lengths=new Float32Array(ut),this.sources=new Uint32Array(ut),this.targets=new Uint32Array(ut),this.degrees=new Uint32Array(it),this.layer=new Uint32Array(it),this.parent=new Int32Array(it),this.cluster=new Int32Array(it),this.component=new Uint32Array(it),this.components=[],this.layers=[],this.nodeIds=new Array(it),this.edgeIds=new Array(ut),at&&$i(ot.nodes,ot.edges,this),this.movements=new Array(this.layers.length).fill(0),this.surfaces=new Array(this.layers.length).fill(0),this.movementsPrev=new Array(this.layers.length).fill(0),this.surfacesPrev=new Array(this.layers.length).fill(0)}};function Xi(ot,at){return ot<at?ot*at+Math.pow(at-ot-1,2)/4:ot*at+Math.pow(ot-at-1,2)/4}function us(ot,at){return(ot+at)*(ot+at+1)/2+at}function vi({edgeIds:ot,sources:at,targets:it,pinned:ut,degrees:yt,X:bt,Y:vt,R:St},Tt=0,Wt=.5){const wt={},Nt={};for(const Ft of ot){const te=at[Ft],Ot=it[Ft];te!==Ot&&(wt[te]=wt[te]||{},wt[Ot]=wt[Ot]||{},wt[te][Ot]=!0,wt[Ot][te]=!0)}Object.keys(wt).forEach(Ft=>{const te=Number(Ft),Ot=Object.keys(wt[Number(te)]);if(Ot.length===2){const[oe,he]=Ot,Kt=Xi(Number(oe),Number(he));Kt in Nt||(Nt[Kt]=[Number(he),Number(oe)]),ut[te]||Nt[Kt].push(te)}}),Object.keys(Nt).forEach(Ft=>{const[te,Ot,...oe]=Nt[Number(Ft)];if(oe.length<3)return;const he=bt[te],Kt=vt[te],le=bt[Ot],ge=vt[Ot],ue=yt[te],_e=.25+.5*ue/(ue+yt[Ot]);let me=he+(le-he)*_e,Te=Kt+(ge-Kt)*_e,Ie=-(ge-Kt),Le=le-he;const We=Math.sqrt(Math.pow(he-le,2)+Math.pow(Kt-ge,2));Ie=-2*Ie/We,Le=-2*Le/We;const $e=Math.acos(Ie/Math.sqrt(Ie*Ie+Le*Le));Tt>0&&($e<Tt||$e>Math.PI-Tt&&$e<=Math.PI?(Ie=2*Math.cos(Math.PI-Tt),Le=2*Math.sin(Math.PI-Tt)):($e>2*Math.PI-Tt||$e>=Math.PI&&$e<Math.PI+Tt)&&(Ie=2*Math.cos(Tt),Le=2*Math.sin(Tt)));let Ei=0,Si=1;oe.sort((Vi,hn)=>St[hn]-St[Vi]);let ui=0,Zi=0;const En=Math.max(St[oe[0]],St[oe[1]])/2;oe.length%2==1&&(Ei=1,me-=Ie*En,Te-=Le*En);const Wi=1+Wt;for(let Vi=0;Vi<oe.length;Vi++){const hn=(Ei+Vi)%2,Nn=oe[Vi],Ai=Vi>=2?St[Nn]:En,vs=(hn?ui:Zi)+Ai;bt[Nn]=me+Ie*Si*vs,vt[Nn]=Te+Le*Si*vs,hn?ui+=Ai*Wi:Zi+=Ai*Wi,Si=-Si}})}function pn(ot){let at=0,it=0;for(const vt of ot)at+=vt.w*vt.h,it=Math.max(it,vt.w);ot.sort((vt,St)=>St.h-vt.h);const ut=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(at/.95)),it),h:1/0}];let yt=0,bt=0;for(const vt of ot)for(let St=ut.length-1;St>=0;St--){const Tt=ut[St];if(!(vt.w>Tt.w||vt.h>Tt.h)){if(vt.x=Tt.x,vt.y=Tt.y,bt=Math.max(bt,vt.y+vt.h),yt=Math.max(yt,vt.x+vt.w),vt.w===Tt.w&&vt.h===Tt.h){const Wt=ut.pop();St<ut.length&&(ut[St]=Wt)}else vt.h===Tt.h?(Tt.x+=vt.w,Tt.w-=vt.w):vt.w===Tt.w?(Tt.y+=vt.h,Tt.h-=vt.h):(ut.push({x:Tt.x+vt.w,y:Tt.y,w:Tt.w-vt.w,h:vt.h}),Tt.y+=vt.h,Tt.h-=vt.h);break}}}function Ni(ot,at=1){return pn(ot.map(it=>(it.w+=it.maxr+at,it.h+=it.maxr+at,it)).sort((it,ut)=>it.w*it.h-ut.w*ut.h))}r(ur,"LayoutData"),r(Xi,"unorderedPair"),r(us,"orderedPair"),r(vi,"alignSiblings"),r(pn,"potpack"),r(Ni,"boxpack");var yn=class{constructor(){this.ids=[],this.xmin=1/0,this.ymin=1/0,this.xmax=-1/0,this.ymax=-1/0,this.x=0,this.y=0,this.w=0,this.h=0,this.cx=0,this.cy=0,this.radius=0,this.mx=0,this.my=0,this.m=0,this.maxr=0}add(ot,at,it,ut){this.ids.push(ot),at-ut<this.xmin&&(this.xmin=at-ut),it-ut<this.ymin&&(this.ymin=it-ut),at+ut>this.xmax&&(this.xmax=at+ut),it+ut>this.ymax&&(this.ymax=it+ut),ut>this.maxr&&(this.maxr=ut),this.mx+=ut*at,this.my+=ut*it,this.m+=ut}measure(ot=0){return this.w=this.xmax-this.xmin+2*ot,this.h=this.ymax-this.ymin+2*ot,this.cx=this.mx/this.m,this.cy=this.my/this.m,this.x=this.xmin,this.y=this.ymin,this.radius=Math.sqrt(this.w*this.w+this.h*this.h)/2,this}};function Ii(ot,at=20,it,ut,yt){for(const Ot of ot){const{x:oe,y:he,r:Kt}=Se(Ot.ids,le=>it[le],le=>ut[le],le=>yt[le]);Ot.cx=oe,Ot.cy=he,Ot.radius=Kt+at}const bt=ot.slice().sort((Ot,oe)=>Ot.radius-oe.radius),vt=bt.map(Ot=>({x:Ot.cx,y:Ot.cy,r:Ot.radius})),St=bt.pop();let Tt=3*Math.PI/2,Wt=St.radius;const wt=2*Math.PI,{cx:Nt,cy:Ft}=St,te=[St];for(;bt.length!==0;){const Ot=bt[bt.length-1],oe=Wt+Ot.radius,he=Nt+Math.cos(Tt)*oe,Kt=Ft+Math.sin(Tt)*oe;te.some(le=>{const ge=le.cx-he,ue=le.cy-Kt;return Math.sqrt(ge*ge+ue*ue)<le.radius+Ot.radius})?Wt+=1:(Ot.x=he-Ot.w/2,Ot.y=Kt-Ot.h/2,Ot.cx=he,Ot.cy=Kt,vt[bt.length-1].x=he,vt[bt.length-1].y=Kt,te.push(bt.pop()),Tt+=(2*Ot.radius+1)/oe*1%wt)}}function Fe(ot,at,it,ut){let yt=0;const bt=[];for(const vt of ut){const St=new yn;for(const Tt of vt)St.add(Tt,ot[Tt],at[Tt],it[Tt]);bt.push(St.measure()),vt.length>bt[yt].ids.length&&(yt=bt.length-1)}return{boxes:bt,biggest:yt}}function $n(ot,at,{X:it,Y:ut,R:yt,components:bt,pinned:vt,degrees:St,sources:Tt,targets:Wt,edgeIds:wt},{update:Nt,onUpdate:Ft,placement:te,placementOffset:Ot,alignSiblings:oe,siblingsMinAngle:he,siblingsOffset:Kt}){if(oe&&(vi({X:it,Y:ut,R:yt,degrees:St,pinned:vt,sources:Tt,targets:Wt,edgeIds:wt},he,Kt),Nt(ot,it,ut)),te){const{boxes:le,biggest:ge}=Fe(it,ut,yt,bt);if(te==="spiral")Ii(le,Ot,it,ut,yt);else{if(te!=="box")return;Ni(le,Ot)}const ue=le[ge].xmin-le[ge].x,_e=le[ge].ymin-le[ge].y;for(const me of le){const{xmin:Te,ymin:Ie,x:Le,y:We,ids:$e}=me,Ei=Te-Le-ue,Si=Ie-We-_e;for(const ui of $e)it[ui]-=Ei,ut[ui]-=Si}Nt(ot,it,ut),Ft()}}r(yn,"Component"),r(Ii,"spiralpack"),r(Fe,"groupAndMeasure"),r($n,"postprocessing");var Fn=(ot=>(ot[ot.verlet=0]="verlet",ot[ot.euler=1]="euler",ot))(Fn||{}),Ee=0,xi=typeof window>"u",Dr=typeof performance<"u"&&performance.now?performance:Date,er=xi?ot=>{const at=Dr.now(),it=Math.max(0,16-(at-Ee)),ut=setTimeout(()=>ot(at+it),it);return Ee=at+it,ut}:window.requestAnimationFrame,ci=xi?ot=>clearTimeout(ot):window.cancelAnimationFrame;function Fi(ot,at,it){for(let ut=0;ut<ot.length;ut++){const yt=ot[ut];yt.x=at[ut],yt.y=it[ut]}}r(Fi,"defaultUpdate");var ts=r(()=>{},"noop"),Bi={movementRatio:7e-8,surfaceRatio:.0025},Ss=class{constructor(ot={}){this.onUpdate=r(at=>{},"onUpdate"),this.update=Fi,this.nextTick=er,this.cancelTick=ci,this.onEnd=ts,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=Bi,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in ot?ot.autoStop&&(typeof ot.autoStop=="boolean"?ot.autoStop=Bi:ot.autoStop={...ot.autoStop,...Bi}):ot.steps;for(const at in ot)ot[at]===void 0&&at!=="order"&&at!=="depth"||(this[at]=ot[at])}};function tn(ot,at,{X:it,Y:ut,R:yt,degrees:bt,nodeIds:vt,edgeIds:St,layers:Tt,layer:Wt,cluster:wt,masses:Nt,weights:Ft,sources:te,targets:Ot},{cx:oe,cy:he,nextTick:Kt,cancelTick:le,update:ge,onUpdate:ue,batch:_e,maxIterations:me,steps:Te,minMovement:Ie},Le,We){const $e=Tt.slice();_e=_e??1;let Ei,Si=0;function ui(){le(Ei),ge(ot,it,ut),ue(),We(Si)}r(ui,"stop");const Zi={};for(let Pe=0;Pe<at.length;Pe++)Zi[Number(at[Pe].id)||Pe]=Pe;const En=new Map;for(let Pe=0;Pe<St.length;Pe++){const dn=St[Pe];En.set(us(te[dn],Ot[dn]),dn)}for(let Pe=0;Pe<Tt.length;Pe++){const dn=Tt[Pe],Me=Pe;for(let rn=0;rn<dn.length;rn++){const qi=dn[rn],Ri=wt[qi];Ri!==-1&&(Nt[Ri]+=Nt[qi])}for(let rn=0;rn<at.length;rn++){const qi=at[rn],Ri=Number(qi.id)||rn,cn=qi.source,Bn=qi.target,Ys=Ft[Zi[Ri]];if(Wt[cn]===Me&&Wt[Bn]===Me){const Xs=wt[cn],Ui=wt[Bn];if(Xs!==Ui){const As=En.get(us(Xs,Ui));As!==void 0&&(Ft[As]+=Ys)}}}}vt.length=0,St.length=0,me=1/0;let Wi=1;const Vi=1-Math.pow(.1,1/Te/2),hn=(Wi-.1)/Te;let Nn,Ai,vs=.5;function Ao(){Wi+=(0-Wi)*Vi;const Pe=Le(Wi,vt,St);let dn=Wi<=vs||Pe<Ie;if(Si===0||dn){const Me=$e.pop();if(Me){Nn&&(Ai=Nn.reduce((qi,Ri)=>Math.max(qi,oe-it[Ri],he-ut[Ri]),0)),vt.push.apply(vt,Me);for(let qi=0;qi<Me.length;qi++){const Ri=Me[qi],cn=wt[Ri];if(cn!==-1){const Bn=bt[Ri]>1?2:1,Ys=yt[cn]+yt[Ri];Nt[cn]-=Nt[Ri],it[Ri]=it[cn]+Bn*Ys*(2*g()-1),ut[Ri]=ut[cn]+Bn*Ys*(2*g()-1)}else Nn&&(it[Ri]=oe+2*Ai*(1-2*g()),ut[Ri]=he+2*Ai*(1-2*g()))}Nn=Me;const rn=vt.reduce((qi,Ri)=>(qi[Ri]=!0,qi),{});St.length=0;for(let qi=0;qi<at.length;qi++){const{source:Ri,target:cn,id:Bn}=at[qi];rn[Ri]&&rn[cn]&&St.push(Zi[Number(Bn)])}dn=!1,$e.length===0?(Wi=.2,vs=.1):(Wi=.1+2*hn,vs=.1)}}Si%_e==0&&(ge(ot,it,ut),ue()),++Si>=me||dn?ui():Ei=Kt(Ao)}return r(Ao,"simulationStep"),{done:!1,start(){return Ei=setTimeout(Ao),this},stop(){return ui(),this},get iterations(){return Si}}}r(Ss,"Settings"),r(tn,"multiLevel");var ro=class{constructor(ot){this.promise=new Promise(ot)}then(ot){return this.promise.then(ot)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function oo(ot,at,{X:it,Y:ut,nodeIds:yt,edgeIds:bt,layers:vt,movements:St,movementsPrev:Tt,surfaces:Wt,surfacesPrev:wt},Nt,Ft,te){const{nextTick:Ot,cancelTick:oe,steps:he,minMovement:Kt,update:le,onUpdate:ge,autoStop:ue}=Nt,_e=Nt.batch??1;let me=0,Te=1,Ie,Le=1-Math.pow(.05,1/he),We=!1;const $e=r(()=>{We=!0,oe(Ie),ge(),te(me)},"stop");let Ei=!1;const Si=r(()=>{Te+=(.001-Te)*Le;const ui=Ft(Te,yt,bt),Zi=vt.length;let En=!1,Wi=!1;if(ue){En=Wi=!0;const{movementRatio:hn,surfaceRatio:Nn}=ue;for(let Ai=0;Ai<Zi;Ai++)En&&Math.abs(1-Wt[Ai]/wt[Ai])>Nn&&(En=!1),Wi&&Math.abs(St[Ai]-Tt[Ai])>hn&&(Wi=!1)}En&&Wi&&!Ei&&(Le=1-Math.pow(.001,1/Math.max(10,me)),Ei=!0);const Vi=We||Te<.05||ui!==0&&ui<=Kt;if(me%_e==0&&(le(ot,it,ut),ge()),++me>=he||Vi)return $e();for(let hn=0;hn<Zi;hn++)Tt[hn]=St[hn],wt[hn]=Wt[hn];Ie=Ot(Si)},"simulationStep");return{done:!1,start(){return Ie=setTimeout(Si),this},stop(){return $e(),this},get iterations(){return me}}}r(ro,"SimulationPromise"),r(oo,"singleLevel");var ir,hr={euler:lr,verlet:Hi,leapfrog:ys};function en(ot,at={}){let it,ut;const yt=r((Ft={nodes:[],edges:[]})=>(it=Ft.nodes,ut=Ft.edges,_(us(it.length,ut.length)),new ur(Ft,!0)),"setGraph"),bt=r((Ft={})=>new Ss(Ft),"setOptions");let vt=yt(ot),St=bt(at);b(ut,vt),gi(it,vt,St),ls(it,vt,St),M(it,vt,St);const Tt=hr[St.integrator]||Hi;let Wt=null;const wt=r((Ft,te,Ot)=>(Wt&&(Wt.destroy(),Wt=null),te.length<=1?0:(St.barnesHutOptimization?Wt=Cn(Ft,te,Wt,vt):Is(Ft,te,vt,St),v(Ft,Ot,vt,St),Wt&&St.elasticity!==0&&ve(0,te,Wt,vt,St),x(Ft,te,vt,St),Tt(te,St.inertia,vt,St))),"step");let Nt;return{setOptions:(Ft={})=>(St=bt(Ft),this),setGraph:({nodes:Ft,edges:te})=>(vt=yt(ot),b(te,vt),gi(Ft,vt,St),ls(Ft,vt,St),M(Ft,vt,St),this),start(){return Nt=(St.multilevel?tn:oo)(it,ut,vt,St,wt,Ft=>{Nt.done||$n(it,0,vt,St),St.onEnd(Ft),Nt.done=!0}).start(),this},iterations:()=>Nt.iterations,data:()=>vt,stop(){return Nt&&Nt.stop(),this},step(Ft=1){return wt(Ft,vt.nodeIds,vt.edgeIds),St.update(it,vt.X,vt.Y),this}}}return r(en,"force"),en.run=(ot,at)=>{let it;const ut=new ro(yt=>{at.onEnd=yt,it=en(ot,at).start()});return ut.simulation=it,ut.stop=()=>(it.stop(),ut),ut},ir=a,((ot,at,it,ut)=>{if(at&&typeof at=="object"||typeof at=="function")for(let yt of n(at))s.call(ot,yt)||yt===it||e(ot,yt,{get:()=>at[yt],enumerable:!(ut=i(at,yt))||ut.enumerable});return ot})(e({},"__esModule",{value:!0}),ir)})();return t.default.apply(this,arguments)}ze(lT,"SimulationPromise"),ze(Om,"gpuLayout"),Om.run=(t,e,i)=>{let n;const s=new lT(r=>{i.onEnd=r,n=Om(t,e,i).start()});return s.simulation=n,s.stop=()=>(n.stop(),s),s};var CG=2,MG=.001,NG=1.25,hT=t=>1,dT={name:"force",imports:{force:uT},configure(t,{graph:e,events:i}){const n=t.nodes._indexes,s=e.getNodeAttribute("x").getMultiple(n),r=e.getNodeAttribute("y").getMultiple(n),a=e.getNodeAttribute("radius").getMultiple(n),u=e.getNodeAttribute("layoutable").getMultiple(n),h=t.edges,c=[],g=[],_={},m=t.nodeMass||hT,v=t.edgeWeight||hT;t.edgeStrength===void 0&&(t.edgeStrength=.5),t.gpu&&(t.edgeStrength/=CG),t.gravity==null&&(t.gravity=.01),t.siblingsOffset==null&&(t.siblingsOffset=0),t.theta==null&&(t.theta=.62),t.autoStop=!!t.autoStop,t.alignSiblings=!!t.alignSiblings;const b=t.radiusRatio||NG;for(let M=0;M<t.nodes._indexes.length;M++){const N=t.nodes._indexes[M];_[N]=M,c.push({id:M,x:s[M],y:r[M],r:a[M]*b,mass:Math.max(MG,m(t.nodes.get(M))),pinned:!u[M]})}h.forEach(M=>{const N=_[M.getSource()._index],O=_[M.getTarget()._index];N!==O&&N!==void 0&&O!==void 0&&g.push({source:N,target:O,weight:v(M)})});const x=yp({...t});return delete x.nodes,delete x.edges,{graph:{nodes:c,edges:g},options:x,indexes:t.nodes._indexes,done:!1,x:s,y:r,chunkPeriod:250}},update:function(t,e){if(!e.simulation&&t){let i;e.done=!1,e.graph=t.graph,e.options=t.options,e.indexes=t.indexes;let n=!1;if(t.options.gpu){const h=kL("webgl2",{},()=>{mu("GPU layout: WebGL context not available. Falling back on CPU."),e.simulation=void 0,e.options.gpu=!1,e.cleanUp&&e.cleanUp(),this._update(t,e)});h&&(i=h.context,e.cleanUp=h.cleanUp),n=!!i}let s=Date.now();n||(t.options.nextTick=h=>Date.now()-s<=e.chunkPeriod?h():(s=Date.now(),setTimeout(h,0))),t.options.update=(h,c,g)=>{e.x=c,e.y=g},t.options.onEnd=()=>{if(n&&i){const{X:h,Y:c}=e.simulation.data(!0);e.x=h,e.y=c}e.done=!0,e.simulation=void 0,e.cleanUp&&e.cleanUp()},t.options.bucketSize=0;const r=n&&i?Om(t.graph,i,t.options).start():uT(t.graph,t.options).start();e.simulation=r;const{X:a,Y:u}=n&&i?{X:new Float32Array(t.graph.nodes.length),Y:new Float32Array(t.graph.nodes.length)}:r.data();e.x=a,e.y=u}return{graph:e.graph,indexes:e.indexes,x:e.x,y:e.y}},context:function(){return{done:!1,graph:{nodes:[],edges:[]},x:null,y:null,indexes:null,chunkPeriod:250}},stop:function(t){t.done=!0,t.simulation&&(t.simulation.stop(),delete t.simulation)},isRunning:function(t){return!t.done||(t.done=!1,!1)},onSync:function({indexes:t,x:e,y:i}){return{indexes:t,x:e,y:i}}};function RG(t,e,i,n=t.getNodes()){if(!e)return i?t.nodeList():n.filter(s=>s.getMetaNode()===null);if(!(e instanceof wu)){if(Array.isArray(e)&&e.length>0)return t.getNodes(e);throw Error("[Layout]: 'nodes' must be a NodeList or an NodeId[]")}return e}function OG(t,e,i=t.getEdges()){if(!e)return i;if(!(e instanceof Ed)){if(Array.isArray(e)&&e.length>0)return t.getEdges(e);throw Error("[Layout]: 'edges' must be a EdgeList or a valid EdgeId[]")}return e}function IG(t){if(!t.size)return;const e=new Set(t.getId());return t.getAdjacentEdges().filter(i=>i.getExtremities().getId().every(n=>e.has(n)))}function rN(t,e={},i=!0){i||(e.edges=void 0);const n=RG(t,e.nodes,e.edges),s=OG(t,e.edges,IG(n));return{...e,nodes:n.concat(s.getExtremities()).dedupe(),edges:s}}function PG(t,e,i,n,s){return{x:t+s*(i-t),y:e+s*(n-e)}}var zG=10;function DG(t,e,i){let n,s,r=1/0;for(let a=0,u=e.length;a<u;a++){const h=e[a],c=e[(a+1)%u],g=j0(t[0],t[1],h[0],h[1],c[0],c[1]);g<r&&(r=g,n=h,s=c)}return kG(t[0],t[1],n[0],n[1],s[0],s[1],i)}function kG(t,e,i,n,s,r,a){const u=WL(t,e,i,n,s,r);let h=-(n-r),c=i-s;const g=Math.sqrt(h*h+c*c);return h/=g,c/=g,[u.x-a*h,u.y-a*c]}function FG(t,e,i,n){for(let s=0;s<t.length;s++){const[r,a]=t[s],u=Math.abs(r-e),h=Math.abs(a-i);if(u+h<=n||!(u>n||h>n)&&u*u+h*h<=n*n)return!0}return!1}function BG(t,e,i){const n=XL(i.cx,i.cy,t,e,i.minX,i.minY,i.maxX,i.maxY);let s,r=1/0,a={x:i.maxX,y:e};for(const u of n)s=Gs(t,e,u.x,u.y),s<r&&(r=s,a=u);return a}function UG(t){const e=t.bottomLeft(),i=t.topRight();return[[e.x,e.y],[e.x,i.y],[i.x,i.y],[i.x,e.y]]}function GG(t,e,i,n){const s=[],r=[],a=[];return t.forEach((u,h)=>{n[h]&&(s.push(u),r.push(e[h]),a.push(i[h]))}),{ids:s,subgraphPositions:r,radii:a}}function HG(t,e,i){const{duration:n=0,margin:s=5,referenceNodes:r,nodes:a}=e,{ids:u,subgraphPositions:h,radii:c}=GG(a.getId(),i,a.getAttribute("radius"),a.getAttribute("layoutable")),g=t.getNodes(u);let _=r;!_||_ instanceof wu||(_=t.getNodes(_));const m=_||g.inverse(),v=m.getPosition().map(Y=>[Y.x,Y.y]),b=g.getBoundingBox(),x=m.getBoundingBox();x.pad(x.maxScaledSize);const M={layoutName:"incremental",ids:g.getId(),positions:{before:h,current:h}};if(!g.size)return Promise.resolve(M);const N=Vg(h.map(Y=>Y.x),h.map(Y=>Y.y),c),[O,R]=N,P=N[2]+x.maxScaledSize+s;let F,U=0,V=0;if(FG(v,O,R,P))if(m.size<=3){if(N0(O,R,N[2],x.minX,x.minY,x.maxX,x.maxY)){const Y=BG(O,R,x);F=Gs(x.cx,x.cy,Y.x,Y.y);const K=PG(x.cx,x.cy,Y.x,Y.y,(F+P)/F);U=K.x-O,V=K.y-R}}else{const Y=w0.from(v,pt=>pt[0],pt=>pt[1]),K=vg(Y.triangles,v),tt=v.length>3?vg(Y.hull,v):UG(x),j=P2(m.getPosition(),zG,P,K,tt);let lt=DG([O,R],tt,P);if(j.length>0){let pt=Math.pow(O-lt[0],2)+Math.pow(R-lt[1],2);for(const ft of j)U=O-ft[0],V=R-ft[1],F=U*U+V*V,F<pt&&(pt=F,lt=ft.slice(0,2));U=lt[0]-O,V=lt[1]-R}else U=lt[0]-b.cx,V=lt[1]-b.cy}if(U||V){const Y=h.map(K=>(K.x+=U,K.y+=V,K));if(e.locate){typeof e.locate=="boolean"&&(e.locate={});const K=t.modules.locate.layoutDataBoundingBox({x:[...v.map(j=>j[0]),...Y.map(j=>j.x)],y:[...v.map(j=>j[1]),...Y.map(j=>j.y)],indexes:t.getNodes()._indexes}),tt=t.modules.locate.computeConfigForBounds(K,e.locate);t.modules.camera.setView(tt,{duration:n,easing:e.locate.easing,ignoreZoomLimits:!0})}return M.positions.current=Y,g.setAttributes(Y,n).then(()=>M)}return g.setAttributes(h,n).then(()=>M)}function VG(t,e,i){const n=ps(e);return n.duration=0,n.dryRun=!0,n.locate=!1,delete n.incremental,i(n).then(s=>HG(t,e,s.positions.current))}function YG(t,e,i){const{nodes:n,duration:s,centralNode:r}=e,a=n,u=a.reduce((c,g)=>(c[g._index]=!0,c),{}),h=t.getNodes();if(e.focusOnGroupShape)return i({nodes:a,duration:0}).then(()=>{const c=a.concat(r),g=c.getAttribute("layoutable");return c.setAttributes({layoutable:!1}),i({nodes:t.getNodes(),duration:s}).then(()=>c.setAttributes(g))});{const c=ps(e);return delete c.centralNode,c.incremental=!1,c.nodes=h,c.nodeMass=(g,_)=>(_+1)*(u[g._index]?1:2),i(c)}}function oN(t,e,i){const n=rN(e.modules.graph,t);if(typeof n.incremental!="boolean"&&"margin"in n.incremental&&!isFinite(n.incremental.margin))throw new Error("Incremental layout: margin has to be a positive number");const s=ps(n);return typeof n.incremental!="boolean"&&(s.margin=n.incremental.margin,s.referenceNodes=n.incremental.referenceNodes),s.centralNode&&!s.centralNode.getAttribute("layoutable")?YG(e,s,i):VG(e,s,i)}var XG=t=>(t.modules.layouts.register(dT),(e={})=>{if(e.incremental)return oN(e,t,t.layouts.force);if(e.edgeStrength!==void 0&&(!isFinite(e.edgeStrength)||e.edgeStrength<0))throw new Error("force layout: edgeStrength must be a positive number");if(e.steps!==void 0&&(!isFinite(e.steps)||e.steps<=0))throw new Error("force layout: 'steps' must be a positive integer");if(e.edgeLength!==void 0&&(!isFinite(e.edgeLength)||e.edgeLength<=0))throw new Error("force layout: 'edgeLength' must be positive");if(e.gravity!==void 0&&(!isFinite(e.gravity)||e.gravity<0||e.gravity>=1))throw new Error("force layout: 'gravity' must be between 0 and 1");if(e.charge!==void 0&&!isFinite(e.charge))throw new Error("force layout: 'charge' must be a number");if(e.radiusRatio!==void 0&&(!isFinite(e.radiusRatio)||e.radiusRatio<0))throw new Error("force layout: 'radiusRatio' must be a positive number");if(e.theta!==void 0&&(!isFinite(e.theta)||e.theta<0||e.theta>1))throw new Error("force layout: 'theta' must be between 0 and 1");if(!(e.cx===void 0&&e.cy===void 0||typeof e.cx=="number"&&typeof e.cy=="number"))throw new Error("force layout: both 'cx' and 'cy' must be numbers");if(e.siblingsOffset!==void 0&&!isFinite(e.siblingsOffset))throw new Error("force layout: 'siblingsOffset' must be a number");return e.gpu=!!e.gpu,e.gpu&&(e.useWebWorker=!1),t.modules.layouts.start(dT.name,e)}),cT={name:"forceLink",configure:function(t,{graph:e,camera:i,graphics:n}){const s=t.nodes._indexes,r=t.edges._indexes,a={},u={},h=s.length,c=r.length;let g;var _=e.getObjectList(!0),m=e.getObjectList(!1);(t.nodes||t.edges)&&(delete(t=ps(t)).nodes,delete t.edges);const v=e.getNodeAttribute("innerStroke.width").getMultiple(s),b=e.getNodeAttribute("outerStroke.width").getMultiple(s),x=e.degrees(s),M=e.getNodeAttribute("x").getMultiple(s),N=e.getNodeAttribute("y").getMultiple(s),O=e.getNodeAttribute("radius").getMultiple(s),R=e.nodeList(s).getAttribute("layoutable"),P=typeof t.nodeMass=="function"?t.nodeMass:function(ht,W,st){return W+1};delete t.nodeMass;const F=typeof t.edgeWeight=="function"?t.edgeWeight:function(ht){return 1};delete t.edgeWeight,isFinite(t.scalingRatio)||delete t.scalingRatio;const U=s.reduce((ht,W,st)=>(R[st]||(ht[W]=!0),ht),{});let V=0,Y=0,K=0;const tt=i.getZoom();for(g=0;g<s.length;++g){const ht=s[g],W=M[g],st=N[g],_t=O[g]+(v[g]+b[g])/tt;a[ht]={id:ht,x:W,y:st,degree:x[g],size:_t,pinned:!!U[ht],mass:P(_.get(ht),x[g],g)},K=Math.max(_t,K)}if(h>1)for(g=0;g<h;g++){const ht=a[s[g]];V+=ht.x,Y+=ht.y}V/=h,Y/=h;const j={x:V,y:Y},lt=e.edgeList(r),pt=lt.getSource()._indexes,ft=lt.getTarget()._indexes;for(g=0;g<c;g++){const ht=r[g],W=pt[g],st=ft[g];a[W]&&a[st]&&(u[ht]={source:W,target:st},u[ht].weight=F(m.get(ht)))}return{nodes:a,edges:u,maxSize:K,config:yp(t),barycentre:j}},context:function(){return{chunkPeriod:250}},update:function(t,e){let i;!e.W&&t?(i={ppn:10,ppe:3,ppr:9,MAX_SUBDIVISION_RETRIES:3,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:100,strongGravityMode:!0,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:10,iterationsPerRender:10,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!0,alignNodeSiblings:!0,nodeSiblingsScale:5,nodeSiblingsAngleMin:0}},e.W=i,function(c,g){const _=function(v,b){let x,M,N,O=v.nodes,R=v.edges,P=v.maxSize,F=Object.keys(v.nodes),U=Object.keys(v.edges),V=F.length*i.ppn,Y=U.length*i.ppe,K={};const tt=Math.pow(10,Math.log(Math.max(P,1))-6),j=tt/2,lt=Math.random,pt=b.randomizeFactor||1;let ft;ft=b.randomize==="locally"?st=>st+lt()*pt:b.randomize==="globally"?st=>lt()*pt:st=>st+lt()*tt-j;const ht=new Float32Array(V),W=new Float32Array(Y);for(x=M=0,N=F.length;x<N;x++){const st=F[x],_t=O[st];let Vt=_t.x,X=_t.y;_t.pinned||(Vt=ft(Vt),X=ft(X)),K[st]=M,ht[M]=Vt,ht[M+1]=X,ht[M+2]=0,ht[M+3]=0,ht[M+4]=0,ht[M+5]=0,ht[M+6]=_t.mass,ht[M+7]=1,ht[M+8]=_t.size,ht[M+9]=_t.pinned||0,M+=i.ppn}for(x=M=0,N=U.length;x<N;x++){const st=R[U[x]];W[M]=K[st.source],W[M+1]=K[st.target],W[M+2]=st.weight||0,M+=i.ppe}return{nodes:ht,edges:W}}(c,g);e.NodeMatrix=_.nodes,e.EdgeMatrix=_.edges,i.nodesLength=e.NodeMatrix.length,i.edgesLength=e.EdgeMatrix.length}(t,t.config),i.settings=function(c,g){for(const _ in c)g[_]=c[_];return g}(t.config,i.settings),e.nodes=t.nodes,e.edges=t.edges,e.barycentre=t.barycentre):i=e.W;let n,s=e.NodeMatrix,r=e.EdgeMatrix;function a(){let h,c,g,_,m,v,b,x,M,N,O,R,P,F,U,V,Y;for(g=0;g<i.nodesLength;g+=i.ppn)s[g+4]=s[g+2],s[g+5]=s[g+3],s[g+2]=0,s[g+3]=0;if(i.settings.outboundAttractionDistribution){for(M=0,g=0;g<i.nodesLength;g+=i.ppn)M+=s[g+6];M/=i.nodesLength}if(i.settings.barnesHutOptimize){let ft,ht,W,st,_t=1/0,Vt=-1/0,X=1/0,et=-1/0;for(n=[],g=0;g<i.nodesLength;g+=i.ppn)_t=Math.min(_t,s[g+0]),Vt=Math.max(Vt,s[g+0]),X=Math.min(X,s[g+1]),et=Math.max(et,s[g+1]);const Dt=Vt-_t,Mt=et-X;for(Dt>Mt?(X-=(Dt-Mt)/2,et=X+Dt):(_t-=(Mt-Dt)/2,Vt=_t+Mt),n[0]=-1,n[1]=(_t+Vt)/2,n[2]=(X+et)/2,n[3]=Math.max(Vt-_t,et-X),n[4]=-1,n[5]=-1,n[6]=0,n[7]=0,n[8]=0,h=1,g=0;g<i.nodesLength;g+=i.ppn)for(c=0,W=i.MAX_SUBDIVISION_RETRIES;;){if(!(n[c+5]>=0)){if(n[c+0]<0){n[c+0]=g;break}if(n[c+5]=h*i.ppr,b=n[c+3]/2,x=n[c+5],n[x+0]=-1,n[x+1]=n[c+1]-b,n[x+2]=n[c+2]-b,n[x+3]=b,n[x+4]=x+i.ppr,n[x+5]=-1,n[x+6]=0,n[x+7]=0,n[x+8]=0,x+=i.ppr,n[x+0]=-1,n[x+1]=n[c+1]-b,n[x+2]=n[c+2]+b,n[x+3]=b,n[x+4]=x+i.ppr,n[x+5]=-1,n[x+6]=0,n[x+7]=0,n[x+8]=0,x+=i.ppr,n[x+0]=-1,n[x+1]=n[c+1]+b,n[x+2]=n[c+2]-b,n[x+3]=b,n[x+4]=x+i.ppr,n[x+5]=-1,n[x+6]=0,n[x+7]=0,n[x+8]=0,x+=i.ppr,n[x+0]=-1,n[x+1]=n[c+1]+b,n[x+2]=n[c+2]+b,n[x+3]=b,n[x+4]=n[c+4],n[x+5]=-1,n[x+6]=0,n[x+7]=0,n[x+8]=0,h+=4,st=c+0,ft=s[n[st]+0]<n[c+1]?s[n[st]+1]<n[c+2]?n[c+5]:n[c+5]+i.ppr:s[n[st]+1]<n[c+2]?n[c+5]+2*i.ppr:n[c+5]+3*i.ppr,n[c+6]=s[n[st]+6],n[c+7]=s[n[st]+0],n[c+8]=s[n[st]+1],n[ft+0]=n[c+0],n[c+0]=-1,ht=s[g+0]<n[c+1]?s[g+1]<n[c+2]?n[c+5]:n[c+5]+i.ppr:s[g+1]<n[c+2]?n[c+5]+2*i.ppr:n[c+5]+3*i.ppr,ft===ht){if(W--){c=ft;continue}W=i.MAX_SUBDIVISION_RETRIES;break}n[ht+0]=g;break}ft=s[g+0]<n[c+1]?s[g+1]<n[c+2]?n[c+5]:n[c+5]+i.ppr:s[g+1]<n[c+2]?n[c+5]+2*i.ppr:n[c+5]+3*i.ppr,n[c+7]=(n[c+7]*n[c+6]+s[g+0]*s[g+6])/(n[c+6]+s[g+6]),n[c+8]=(n[c+8]*n[c+6]+s[g+1]*s[g+6])/(n[c+6]+s[g+6]),n[c+6]+=s[g+6],c=ft}}if(i.settings.barnesHutOptimize)for(N=i.settings.scalingRatio,g=0;g<i.nodesLength;g+=i.ppn)for(c=0;;)if(n[c+5]>=0){if(V=Math.sqrt((s[g+0]-n[c+7])*(s[g+0]-n[c+7])+(s[g+1]-n[c+8])*(s[g+1]-n[c+8])),2*n[c+3]/V<i.settings.barnesHutTheta){if(O=s[g+0]-n[c+7],R=s[g+1]-n[c+8],i.settings.adjustSizes?V>0?(Y=N*s[g+6]*n[c+6]/V/V,s[g+2]+=O*Y,s[g+3]+=R*Y):V<0&&(Y=-N*s[g+6]*n[c+6]/V,s[g+2]+=O*Y,s[g+3]+=R*Y):V>0&&(Y=N*s[g+6]*n[c+6]/V/V,s[g+2]+=O*Y,s[g+3]+=R*Y),n[c+4]<0)break;c=n[c+4];continue}c=n[c+5]}else{if(n[c+0]>=0&&n[c+0]!==g&&(O=s[g+0]-s[n[c+0]+0],R=s[g+1]-s[n[c+0]+1],V=Math.sqrt(O*O+R*R),i.settings.adjustSizes?V>0?(Y=N*s[g+6]*s[n[c+0]+6]/V/V,s[g+2]+=O*Y,s[g+3]+=R*Y):V<0&&(Y=-N*s[g+6]*s[n[c+0]+6]/V,s[g+2]+=O*Y,s[g+3]+=R*Y):V>0&&(Y=N*s[g+6]*s[n[c+0]+6]/V/V,s[g+2]+=O*Y,s[g+3]+=R*Y)),n[c+4]<0)break;c=n[c+4]}else for(N=i.settings.scalingRatio,_=0;_<i.nodesLength;_+=i.ppn)for(m=0;m<_;m+=i.ppn)O=s[_+0]-s[m+0],R=s[_+1]-s[m+1],i.settings.adjustSizes?(V=Math.sqrt(O*O+R*R)-s[_+8]-s[m+8],V>0?(Y=N*s[_+6]*s[m+6]/V/V,s[_+2]+=O*Y,s[_+3]+=R*Y,s[m+2]+=O*Y,s[m+3]+=R*Y):V<0&&(Y=100*N*s[_+6]*s[m+6],s[_+2]+=O*Y,s[_+3]+=R*Y,s[m+2]-=O*Y,s[m+3]-=R*Y)):(V=Math.sqrt(O*O+R*R),V>0&&(Y=N*s[_+6]*s[m+6]/V/V,s[_+2]+=O*Y,s[_+3]+=R*Y,s[m+2]-=O*Y,s[m+3]-=R*Y));for(x=i.settings.gravity/i.settings.scalingRatio,N=i.settings.scalingRatio,g=0;g<i.nodesLength;g+=i.ppn)Y=0,O=s[g+0],R=s[g+1],V=Math.sqrt(O*O+R*R),i.settings.strongGravityMode?V>0&&(Y=N*s[g+6]*x):V>0&&(Y=N*s[g+6]*x/V),s[g+2]-=O*Y,s[g+3]-=R*Y;for(N=1*(i.settings.outboundAttractionDistribution?M:1),v=0;v<i.edgesLength;v+=i.ppe)_=r[v+0],m=r[v+1],b=r[v+2],U=Math.pow(b,i.settings.edgeWeightInfluence),O=s[_+0]-s[m+0],R=s[_+1]-s[m+1],i.settings.adjustSizes?(V=Math.sqrt(O*O+R*R)-s[_+8]-s[m+8],i.settings.linLogMode?i.settings.outboundAttractionDistribution?V>0&&(Y=-N*U*Math.log(1+V)/V/s[_+6]):V>0&&(Y=-N*U*Math.log(1+V)/V):i.settings.outboundAttractionDistribution?V>0&&(Y=-N*U/s[_+6]):V>0&&(Y=-N*U)):(V=Math.sqrt(O*O+R*R),i.settings.linLogMode?i.settings.outboundAttractionDistribution?V>0&&(Y=-N*U*Math.log(1+V)/V/s[_+6]):V>0&&(Y=-N*U*Math.log(1+V)/V):i.settings.outboundAttractionDistribution?(V=1,Y=-N*U/s[_+6]):(V=1,Y=-N*U)),V>0&&(s[_+2]+=O*Y,s[_+3]+=R*Y,s[m+2]-=O*Y,s[m+3]-=R*Y);let K,tt,j,lt,pt=0;if(i.settings.adjustSizes)for(g=0;g<i.nodesLength;g+=i.ppn)s[g+9]||(K=Math.sqrt(s[g+2]*s[g+2]+s[g+3]*s[g+3]),K>i.maxForce&&(s[g+2]=s[g+2]*i.maxForce/K,s[g+3]=s[g+3]*i.maxForce/K),tt=s[g+6]*Math.sqrt((s[g+4]-s[g+2])*(s[g+4]-s[g+2])+(s[g+5]-s[g+3])*(s[g+5]-s[g+3])),j=Math.sqrt((s[g+4]+s[g+2])*(s[g+4]+s[g+2])+(s[g+5]+s[g+3])*(s[g+5]+s[g+3]))/2,lt=.1*Math.log(1+j)/(1+Math.sqrt(tt)),P=s[g+0],F=s[g+1],s[g+0]=s[g+0]+s[g+2]*(lt/i.settings.slowDown),s[g+1]=s[g+1]+s[g+3]*(lt/i.settings.slowDown),O=s[g+0],R=s[g+1],V=Math.sqrt((O-P)*(O-P)+(R-F)*(R-F)),pt+=V);else for(g=0;g<i.nodesLength;g+=i.ppn)s[g+9]||(tt=s[g+6]*Math.sqrt((s[g+4]-s[g+2])*(s[g+4]-s[g+2])+(s[g+5]-s[g+3])*(s[g+5]-s[g+3])),j=Math.sqrt((s[g+4]+s[g+2])*(s[g+4]+s[g+2])+(s[g+5]+s[g+3])*(s[g+5]+s[g+3]))/2,lt=s[g+7]*Math.log(1+j)/(1+Math.sqrt(tt)),s[g+7]=Math.min(1,Math.sqrt(lt*(s[g+2]*s[g+2]+s[g+3]*s[g+3])/(1+Math.sqrt(tt)))),P=s[g+0],F=s[g+1],s[g+0]=s[g+0]+s[g+2]*(lt/i.settings.slowDown),s[g+1]=s[g+1]+s[g+3]*(lt/i.settings.slowDown),O=s[g+0],R=s[g+1],V=Math.sqrt((O-P)*(O-P)+(R-F)*(R-F)),pt+=V);if(i.iterations++,i.settings.autoStop&&(i.converged=i.iterations>i.settings.maxIterations||pt/i.nodesLength<i.settings.avgDistanceThreshold,i.converged&&i.settings.alignNodeSiblings)){let ft,ht,W={},st={};for(v=0;v<i.edgesLength;v+=i.ppe)_=r[v+0],m=r[v+1],_!==m&&(W[_]=W[_]||{},W[m]=W[m]||{},W[_][m]=!0,W[m][_]=!0);Object.keys(W).forEach(ne=>{var ee=~~ne;ht=Object.keys(W[ee]),ht.length==2&&(ft=ht[0]+";"+ht[1],ft in st||(ft=ht[1]+";"+ht[0],st[ft]||(st[ft]=[~~ht[1],~~ht[0]])),st[ft].push(ee))});let _t,Vt,X,et,Dt,Mt,At,Xt,jt,Ge,Se,Lt,Gt,ie,kt,$t=i.settings.nodeSiblingsAngleMin;Object.keys(st).forEach(ne=>{if(Vt=st[ne].shift(),X=st[ne].shift(),_t=st[ne].filter(Oe=>!s[Oe+9]),_t.length==1)return;if(Mt=s[Vt+0],At=s[Vt+1],Xt=s[X+0],jt=s[X+1],et=Object.keys(W[Vt]).length,Dt=Object.keys(W[X]).length,Ge=function(ke,Xe,Be,Ae,Ze){return(Ze-Ae)*(ke-Xe)/(Be-Xe)+Ae}(et/(et+Dt),0,1,1/4,3/4),Lt=function(ke,Xe,Be,Ae,Ze){return{x:ke+(Be-ke)*Ze,y:Xe+(Ae-Xe)*Ze}}(Mt,At,Xt,jt,Ge),Gt=function(ke,Xe,Be,Ae){return{xi:-(Ae-Xe),yi:Be-ke,xiPrime:Ae-Xe,yiPrime:-(Be-ke)}}(Mt,At,Xt,jt),Se=function(ke,Xe,Be,Ae){const Ze=Be-ke,ki=Ae-Xe;return Math.sqrt(Ze*Ze+ki*ki)}(Mt,At,Xt,jt),ie=function(ke,Xe){return{x:(ke.xiPrime-ke.xi)/Xe,y:(ke.yiPrime-ke.yi)/Xe}}(Gt,Se),kt=function(ke){return Math.acos(ke.x/Math.sqrt(ke.x*ke.x+ke.y*ke.y))}(ie),2*$t>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");$t>0&&(kt<$t||kt>Math.PI-$t&&kt<=Math.PI?ie={x:2*Math.cos(Math.PI-$t),y:2*Math.sin(Math.PI-$t)}:(kt>2*Math.PI-$t||kt>=Math.PI&&kt<Math.PI+$t)&&(ie={x:2*Math.cos($t),y:2*Math.sin($t)}));let ee=0,se=1,ve=1;_t.length%2==1&&(ve=0,ee=1);for(let Oe=0;Oe<_t.length;Oe++)s[_t[Oe]+0]=Lt.x+se*ie.x*ve*(ee||Oe>=2?i.settings.nodeSiblingsScale:2*i.settings.nodeSiblingsScale/3),s[_t[Oe]+1]=Lt.y+se*ie.y*ve*(ee||Oe>=2?i.settings.nodeSiblingsScale:2*i.settings.nodeSiblingsScale/3),se=-se,ve+=(Oe+ee)%2})}}function u(h){const c=Object.keys(h),g={};for(let _=0;_<s.length;_+=i.ppn){const m=c[_/i.ppn];g[m]={id:m,x:s[_+0],y:s[_+1],pinned:s[_+9]}}return g}return function(){if(i.settings.autoStop){const c=Date.now();for(;!(i.converged||Date.now()-c>=e.chunkPeriod);)a()}else{const c=i.iterations===0?i.settings.startingIterations:i.iterations+i.settings.iterationsPerRender;for(;i.iterations!==c;)a()}return{nodes:u(e.nodes),barycentre:e.barycentre}}()},isRunning:function(t){return!t.W.settings.autoStop||!t.W.converged||(t.W=void 0,!1)},stop:function(t){t.W&&(t.W.converged=!0)},onSync:function({nodes:t,barycentre:e},{graph:i}){const n=Object.keys(t),s=n.length;let r,a,u,h,c,g,_,m,v=0,b=0;const x=new Array(s),M=new Array(s),N=new Array(s),O=new Array(s),[R,P]=i.getAttributes(!0,["x","y"]);for(r=0;r<s;r++)a=n[r],u=t[a],m=parseInt(a),x[r]=m,O[r]=u.pinned,u.pinned?(h=R.get(m),c=P.get(m)):(h=u.x,c=u.y),M[r]=h,N[r]=c,v+=h,b+=c;for(g=v/s-e.x,_=b/s-e.y,r=0;r<s;r++)O[r]||(M[r]-=g,N[r]-=_);return{indexes:x,x:M,y:N}}},ZG=t=>(t.modules.layouts.register(cT),(e={})=>e.incremental?oN(e,t,t.layouts.forceLink):t.modules.layouts.start(cT.name,e)),fT={name:"grid",configure:function(t,{graph:e,camera:i}){function n(F){return F===void 0||typeof F=="number"&&isFinite(F)&&F>0}const s=t.sortBy,r=t,a=r.nodes,u=Array.from(a._indexes),h=u.length,{rows:c,cols:g,rowDistance:_,colDistance:m}=function(U,V,Y,K,tt){if(!n(V))throw new TypeError('"rows" should be a positive integer');if(!n(Y))throw new TypeError('"cols" should be a positive integer');if(!n(K))throw new TypeError('"rowDistance" should be a positive number');if(!n(tt))throw new TypeError('"colDistance" should be a positive number');if(V)return{rows:V,cols:Math.ceil(U/V),rowDistance:K,colDistance:tt};if(Y)return{cols:Y,rows:Math.ceil(U/Y),rowDistance:K,colDistance:tt};const j=Math.ceil(Math.sqrt(U));return{cols:j,rows:Math.ceil(U/j),rowDistance:K,colDistance:tt}}(h,r.rows,r.cols,r.colDistance,r.rowDistance),v=function(U,V,Y,K,tt){return typeof U!="string"?K.map((j,lt)=>lt):U==="radius"?V.getAttribute(!0,"radius").getMultiple(K):U==="degree"?Y.getDegree():U==="random"?K.map(()=>Math.random()):Y.getData(U).map(j=>j||tt)}(s,e,a,u,t.sortFallbackValue),b=a.getAttribute("layoutable"),x=u.reduce((F,U,V)=>(b[V]&&F.push({id:U,attr:v[V]}),F),[]),M=a.getAttribute("x"),N=a.getAttribute("y"),O=a.getAttribute("radius");let R=1/0,P=1/0;for(let F=0;F<u.length;F++)R=Math.min(R,M[F]),P=Math.min(P,N[F]);return{sort:!!s,nodes:x,reverse:!!r.reverse,cols:g,rows:c,minX:R,minY:P,rs:O,rowDistance:_,colDistance:m}},update:function({sort:t,nodes:e,minX:i,rs:n,minY:s,reverse:r,cols:a,rowDistance:u,colDistance:h}){const c=e.map((N,O)=>O);t&&c.sort((N,O)=>e[N].attr-e[O].attr),r&&c.reverse();let g=0;for(let N=0;N<e.length;N++){const O=N>0&&(N+1)%a==0,R=N%a==0,P=O?0:n[c[N+1]]||0,F=R?0:n[c[N+a-1]]||0,U=n[c[N+a]]||0,V=O?0:n[c[N+a+1]]||0,Y=n[c[N]]||0;g=Math.max(g,Y+P,Y+F,Y+U,Y+V)}let _=g+5,m=g+5;const v=i,b=s;isFinite(_)||(_=0),isFinite(m)||(m=0),u!==void 0&&isFinite(u)&&(_=g+u),h!==void 0&&isFinite(h)&&(m=g+h);let x=0,M=0;return c.forEach(N=>{const O=e[N];O.x=v+x*_,O.y=b+M*m,x+=1,x===a&&(M+=1,x=0)}),e},onSync:function(t){return{indexes:t.map(({id:e})=>e),x:t.map(({x:e})=>e),y:t.map(({y:e})=>e)}}},WG=t=>(t.modules.layouts.register(fT),(e={})=>t.modules.layouts.start(fT.name,e));function qG(t){let e=0,i=0;for(const a of t)e+=a.w*a.h,i=Math.max(i,a.w);t.sort((a,u)=>u.h-a.h);const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let s=0,r=0;for(const a of t)for(let u=n.length-1;u>=0;u--){const h=n[u];if(!(a.w>h.w||a.h>h.h)){if(a.x=h.x,a.y=h.y,r=Math.max(r,a.y+a.h),s=Math.max(s,a.x+a.w),a.w===h.w&&a.h===h.h){const c=n.pop();u<n.length&&(n[u]=c)}else a.h===h.h?(h.x+=a.w,h.w-=a.w):a.w===h.w?(h.y+=a.h,h.h-=a.h):(n.push({x:h.x+a.w,y:h.y,w:h.w-a.w,h:a.h}),h.y+=a.h,h.h-=a.h);break}}return{w:s,h:r,fill:e/(s*r)||0}}var QG={down:()=>{},up:t=>t.y=-t.y,left:t=>{const e=t.x;t.x=-t.y,t.y=e},right:t=>{const e=t.x;t.x=t.y,t.y=-e}},Lv=(t,e)=>isFinite(t)&&t>0?t:e;function KG(t){return{nodesSeparation:Lv(t.nodesSeparation,0),componentsSeparation:Lv(t.componentsSeparation,25),layerSeparation:Lv(t.layerSeparation,50)}}function jG(t,{componentsSeparation:e,packing:i}){const n=[];for(let s=0;s<t.length;s++){const r=t[s],a=r.nodes;if(r.isFake&&r.w!==void 0&&r.h!==void 0){n.push({w:r.w,h:r.h,x:void 0,y:void 0,dag:r});continue}if(r.nodes.length===1){const m=2*a[0].data.radius;n.push({w:m+e/2,h:m+e/2,x:void 0,y:void 0,dag:r});continue}const{minX:u,maxX:h,minY:c,maxY:g}=a.reduce((m,{x:v,y:b,data:x})=>{const M=x.radius||0;return m.minX=Math.min(m.minX,v-M),m.maxX=Math.max(m.maxX,v+M),m.minY=Math.min(m.minY,b-M),m.maxY=Math.max(m.maxY,b+M),m},{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),_=(h+u)/2;a.forEach(m=>{m.x-=_}),n.push({w:Math.abs(h-u)+e/2,h:Math.abs(g-c)+e/2,minX:u,x:void 0,y:void 0,dag:r})}if(i!=="singleline")qG(n);else{let s=0;for(let r=0;r<n.length;r++){const a=n[r];a.x=s,a.y=0,s+=a.w}}return n}function JG(t,e={}){const{componentsSeparation:i}=KG(e);e.direction===void 0&&(e.direction="down");const n=jG(t,{componentsSeparation:i,packing:e.packing});for(let s=0;s<n.length;s++){const{x:r=0,y:a=0,dag:u}=n[s];for(const h of u.nodes)h.x+=r,h.y+=a,QG[e.direction](h)}}var bb={id:"__SENTINEL__",layer:-1,sink:!1,fixed:!1,siblingIndex:-1,parentIds:[],children:[],radius:0,ref:null},ng=t=>t.data===bb||!1,Zx=t=>!ng(t),$G=[],t6=(t,e)=>({id:t,layer:e,data:bb,children:$G,ref:void 0,x:0,y:0}),e6=(t,e)=>({id:t,layer:-1,data:e,children:[],x:0,y:0}),gT=class{constructor(t,e,i){this.data=t,this.prev=e,this.next=i}toString(){return this.data}},aN=t=>t.reduce((e,i)=>(e[i]=!0,e),{});function i6(t,e){const i=[t],n=aN(i),s=[t];for(;i.length;){const r=i.shift();for(const a of e.get(r))n[a]||(n[a]=!0,s.push(a),i.push(a))}return s}function Eb(t){return t.reduce((e,{source:i,target:n})=>(e.set(i,e.get(i)||[]),e.set(n,e.get(n)||[]),e.get(i).push(n),e.get(n).push(i),e),new Map)}function n6(t){return t.reduce((e,{source:i,target:n})=>(e[i]=e[i]||[],e[i].push(n),e),{})}function s6(t,e,i){const n=i||Eb(e||[]);return t.filter(({id:s})=>!n.has(s))}function r6(t,e){const i=aN(e);return t.filter(n=>!(n in i))}function wa(t,e){t.forEach((i,n)=>{i.forEach((s,r,a)=>{e(s,r,a,n)})})}var _T=t=>{let e=Math.floor(t.length/2);return(t=[...t].sort((i,n)=>i-n)).length%2!=0?t[e]:(t[e-1]+t[e])/2};function o6(t,e,i){const n=Eb(e);let s=Array.from(n.keys());const r=[];for(;s.length;){const a=i6(s[0],n);r.push(a),s=r6(s,a)}return i.skipSingletons?r:r.concat(s6(t,e,n).map(({id:a})=>[a]))}var a6=t=>t.reduce((e,{radius:i})=>Math.max(e,2*i),0);function l6(t,e){return{nodes:t.map(i=>({...i,data:i})),isFake:!0,...e}}function u6(t,e,i){const n=Eb(e||[]),s=t.filter(({id:v})=>!n.has(v)).sort((v,b)=>b.radius-v.radius),r=Math.sqrt(s.length);let a=Math.floor(r),u=Math.ceil(r);a*u<s.length&&(a<u?a++:u++);const h=Math.max(1,a6(s)),c=Math.max(i.nodesGridSeparation||0,1),g=h*u+c*(u-1),_=h*a+c*Math.max(a-1,0),m=l6(s,{w:g,h:_});return m.nodes.forEach((v,b)=>{const x=b%u,M=Math.floor(b/u);v.x=g*x/u,v.y=_*M/a}),m}function mT(t,e,i){const n=e.reduce((a,u)=>(a.set(u.source,a.get(u.source)||[]),a.get(u.source).push(u),a),new Map),{result:s}=t.reduce(function a(u,h){const{visited:c,stack:g,result:_}=u;if(c.has(h.id))return u;g.add(h.id),c.add(h.id);const m=n.get(h.id)||[];for(const v of m)g.has(v.target)?_.push(v):a(u,i.get(v.target));return g.delete(h.id),u},{visited:new Set,stack:new Set,result:[]}),r=s.reduce((a,{source:u,target:h})=>(a.set(u,a.get(u)||new Set),a.get(u).add(h),a),new Map);return e.map(a=>{const{source:u,target:h,id:c}=a;return r.has(u)&&r.get(u).has(h)?{id:c,source:h,target:u}:a})}function h6(t){if(!t||!t.length)throw Error("Cannot stratify empty data");for(const s of t){if(!s)throw Error('Node data is "null"');if(s.id==null)throw Error('Node id contains a "null" value')}const e=t.map(s=>e6(s.id,s)),i=e.reduce((s,r)=>{if(s[r.id])throw Error(`The connected component contains id duplicates: ${r.id}`);return s[r.id]=r,s},{}),n=[];for(let s=0;s<e.length;s++){const r=e[s];for(let a=0;a<r.data.parentIds.length;a++){const u=r.data.parentIds[a],h=i[u];if(!h)throw Error(`The node ${r.id} has a missing parent id ${u}`);h.children.push(r)}r.data.parentIds.length||n.push(r)}return{isFake:!1,nodes:d6(n)}}function d6(t){const e={},i=[];for(;t.length;){const n=t.pop();e[n.id]||(i.push(n),e[n.id]=!0,t.push(...n.children))}return i}var c6=class{constructor(){this.byId={},this.byIndex={},this.length=0}append(t,e){let i;return this.head?(i=new gT(t,this.tail),this.tail=this.tail.next=i):(i=new gT(t),this.tail=this.head=i),this.byId[e]=i,this.byIndex[this.length++]=i,i}find(t){let e=this.head;do{if(e.data===t)return e;e=e.next}while(e)}forEach(t){let e=this.head,i=0;do t(e,i),i++;while(e=e.next)}},La=-1,tr=1e-5,Cv=[],f6=class{constructor(t,e,i){this.edges=[],this.nodeMap={},this.nodeIndexTopDown={},this.nodeToLayer={},this.longEdges={},this.virt={},this.height={},this.breadth={},this.first=[],this.totalW={},this.mDist={},this.X={},this.block={},this.nodeList=new c6,this.nodeDistance=e,this.layerDistance=i,this.layers=t;const{breadth:n,virt:s,height:r,nodeToLayer:a,nodeIndexTopDown:u,nodeMap:h,longEdges:c,edges:g}=this;let _=0;wa(this.layers,(x,M,N,O)=>{if(u[x.id]=_++,h[x.id]=x,a[x.id]=O,this.nodeList.append(x,x.id),x.children.forEach(P=>{const F=ng(P)||ng(x);g.push({source:x.id,target:P.id,virtual:F,id:g.length})}),c[x.id])return;const R=[x.id];if(c[x.id]=R,!Zx(x))for(let P=0;P<x.children.length;P++){const F=x.children[P];if(Zx(F))continue;let U=F;for(;ng(U);)R.push(U.id),c[U.id]=R,U=U.children[0]}});const m=this.adjacencyList=n6(g);this.N=t.reduce((x,M)=>x+M.length,0),this.Y=new Float32Array(t.length),this.first=t.map(x=>x[0]),t.forEach((x,M)=>r[M]=0),wa(this.layers,(x,M,N,O)=>{const R=m[x.id]?m[x.id].length:0;s[x.id]=ng(x)&&R===1,this.nodeToLayer[x.id]=O,s[x.id]?n[x.id]=0:(n[x.id]=2*x.data.radius,r[O]=Math.max(r[O]||0,2*x.data.radius))});const v={},b={};g.forEach(x=>{const M=x.source,N=x.target;v[N]=v[N]||[],v[N].push(M),b[M]=b[M]||[],b[M].push(N)}),Object.values(v).forEach(x=>{x.sort((M,N)=>this.nodeIndexTopDown[M]-this.nodeIndexTopDown[N])}),Object.values(b).forEach(x=>{x.sort((M,N)=>this.nodeIndexTopDown[M]-this.nodeIndexTopDown[N])}),this.neighbours={prev:v,next:b}}computeMinNodeDistances(){const{layers:t,totalW:e}=this;wa(t,i=>{e[i.id]=0}),wa(t,i=>e[i.data.id]=0),this.layers.forEach(i=>{e[i[0].id]=0,i.slice(1).forEach((n,s)=>{const r=i[s],a=n.id;e[a]=e[r.id]+r.data.radius+n.data.radius+this.nodeDistance})})}decrossVirtualEdges(){this.layers.forEach(t=>{let e=-1;t.forEach(i=>{if(!this.virt[i.id])return;const n=this.neighbours.next[i.id][0];if(this.virt[n])if(e!==-1&&e>this.nodeIndexTopDown[n]){const s=this.longEdges[i.id];let r=0;for(r=0;r<s.length&&s[r]!==n;r++);const a=s.slice(r);a.forEach(h=>this.longEdges[h]=a);const u=s.slice(0,r);u.forEach(h=>this.longEdges[h]=u)}else e=this.nodeIndexTopDown[n]})})}placeLongEdges(){const{X:t,layers:e}=this;wa(e,i=>t[i.id]=0);for(let i=1;i>=-1;i-=2){const n={};let s=0;const r={};wa(e,c=>r[c.id]=0),r[bb.id]=0;const a=i;e.forEach(c=>{let g=a===1?c[0]:c[c.length-1];r[g.id]||(this.longEdges[g.id].forEach(v=>{r[v]=s}),s++);let _=a===1?0:c.length-1,m=_+a;for(;m>=0&&m<c.length;)g=c[m],r[g.id]||this.longEdges[g.id].forEach(v=>{r[v]=r[c[_].id]}),_=m,m+=a});const u={};e.forEach(c=>{for(let g=a===1?0:c.length-1;a===1?g<c.length:g>=0;g+=a){const _=c[g],m=r[_.id];u[m]=u[m]||[],u[m].push(_.id)}});const h={};this.nodeList.forEach(c=>h[c.data.id]=0);for(let c=0;c<s;c++){const g={done:!1,dist:0},_=u[c];for(let m=0;m<_.length;m++){const v=_[m];this.sortLongEdges(v,i,h,g,r,n)}if(!g.done){const m=this.layers[this.nodeToLayer[u[c][0]]],v=[];m.forEach(b=>{for(const x of this.neighbours.prev[b.id]||Cv){const M=Math.abs(h[x]-h[b.id]);v.push(M)}}),v.length!==0&&(g.dist=_T(v))}for(let m=0;m<_.length;m++)h[_[m]]-=i*g.dist}wa(e,c=>t[c.id]+=h[c.id]/2)}}sortLongEdges(t,e,i,n,s,r){if(r[t])return!1;let a=!1,u=0;const{nodeToLayer:h,totalW:c}=this,g=this.longEdges[t];g.forEach(_=>r[_]=!0),g.forEach(_=>{const m=this.nodeList.byIndex[this.nodeIndexTopDown[_]-e];if(!m)return;const v=m.data.id,b=_,x=h[v]===h[b],M=s[v]===s[b];!x||!M||(this.sortLongEdges(v,e,i,n,s,r),(!a||e*(u-i[v])<e*(c[b]-c[v]))&&(a=!0,u=i[v]+c[b]-c[v]))}),g.forEach(_=>{i[_]=u;const m=this.nodeList.byId[_],v=e===1?m.next:m.prev;if(!v)return;const b=v.data.id,x=_,M=h[b]===h[x],N=s[b]!==s[x],O=e*(c[b]-c[x]-i[b]+i[x]);M&&N&&(!n.done||O>n.dist)&&(n.dist=O,n.done=!0)})}placeNonVirtualNodes(){const t={};wa(this.layers,h=>t[h.id]=-1);const{X:e,totalW:i,virt:n,nodeIndexTopDown:s,mDist:r,nodeList:a}=this,u={};wa(this.layers,(h,c,g,_)=>{if(!n[h.id])return void(u[h.id]=!1);let m=this.nodeList.byId[h.id].next;for(;m&&this.nodeToLayer[m.data.id]===_&&!n[m.data.id];)m=m.next;u[h.id]=this.nodeToLayer[m.data.id]===_&&e[m.data.id]-e[h.id]<i[m.data.id]-i[h.id]+tr}),wa(this.layers,({id:h})=>{u[h]&&t[h]===-1&&this.longEdges[h].forEach(c=>{c!==h&&(t[c]=s[c]<s[h]?1:0)})}),wa(this.layers,({id:h})=>r[h]=i[h]);for(let h=0;h<2;h++)for(let c=h?this.layers.length-1:0;c>=0&&c<this.layers.length;h?c--:c++){let g=La;const _=this.layers[c];if(_.forEach(({id:m},v,b)=>{if(n[m]){if(g===La){this.placeSequence(La,m,b[0].id,a.byId[m].prev.data.id,h);for(let x=0;x<v;x++){const M=b[x].id;r[M]=r[m]-e[m]+e[M]}}else if(t[g]!==1-h){u[g]||this.placeSequence(g,m,a.byId[g].next.data.id,a.byId[m].prev.data.id,h);const x=h===1?this.neighbours.prev:this.neighbours.next,M=x[g][0],N=x[m][0];if(n[M]&&n[N])for(let O=s[M]+1;O<s[N];O++)t[a.byIndex[O].data.id]=h}g=m}}),g===La)this.placeSequence(La,La,_[0].id,_[_.length-1].id,h),_.forEach(({id:m})=>r[m]=e[m]);else{this.placeSequence(g,La,a.byId[g].next.data.id,_[_.length-1].id,h);for(let m=_.length-1;m>=0;m--){const v=_[m].id;if(v===g)break;r[v]=r[g]-e[g]+e[v]}}}}placeSequence(t,e,i,n,s,r=0){if(r===2048)return;const a=this.nodeIndexTopDown[i],u=this.nodeIndexTopDown[n],{X:h,nodeIndexTopDown:c,mDist:g}=this;if(a===u)h[i]=this.placeNode(i,t,e,h[i],s);else if(a<u){const _=Math.floor((c[i]+c[n])/2),m=this.nodeList.byIndex[_],v=m.next.data.id,b=g[v]-g[m.data.id];this.placeSequence(t,e,i,m.data.id,s,r+1),this.placeSequence(t,e,v,n,s,r+1),this.combineSequences(t,e,i,n,v,m.data.id,s,b)}}calculateBends(t,e,i,n,s,r,a,u){let h=0;const c=[],{X:g,mDist:_,neighbours:m}=this,v=this.nodeIndexTopDown[i],b=this.nodeIndexTopDown[n];for(let x=this.nodeList.byId[r],M=this.nodeIndexTopDown[x.data.id];M>=v&&M<=b&&x;x=t===-1?x.prev:x.next,M=x&&this.nodeIndexTopDown[x.data.id]){const N=x.data.id,O=(e===0?m.prev[N]:m.next[N])||Cv;let R=0;for(let F=0;F<O.length;F++){const U=O[F];if(t*(g[U]-g[N])<tr)R++;else{R--;const V=g[U]+_[r]-_[N];t*(g[r]-V)>-1e-5?h++:(u===La||t*(V-g[u]+_[u]-_[r])<tr)&&t*(V-g[s])<a-tr&&c.push({value:2,key:V})}}const P=g[N]+_[r]-_[N];t*(g[r]-P)>-1e-5?h+=R:(u===La||t*(P-g[u]+_[u]-_[r])<tr)&&t*(P-g[s])<a-tr&&c.push({value:R,key:P})}return u!==La&&c.push({value:this.edges.length,key:g[u]-_[u]+_[r]}),c.sort(({key:x},{key:M})=>x-M),{res:h,bends:c.reduce((x,M,N)=>{if(N<c.length-1){const O=c[N+1];Math.abs(M.key-O.key)>tr?M.value>0&&x.push(M):M.value+=O.value}else M.value>0&&x.push(M);return x},[])}}combineSequences(t,e,i,n,s,r,a,u){const{X:h,mDist:c,nodeIndexTopDown:g}=this;let{res:_,bends:m}=this.calculateBends(-1,a,i,n,s,r,u,t),{res:v,bends:b}=this.calculateBends(1,a,i,n,r,s,u,e);for(m.length>0&&m.reverse();h[s]-h[r]<u-tr;){let N=0,O=0;if(_<v){const R=m.length;if(R>0){const P=m.pop();N=P.value,h[r]=P.key}(R===0||h[s]-h[r]>u+tr)&&(h[r]=h[s]-u)}else if(_>v){const R=b.length;if(R>0){const P=b.pop();O=P.value,h[s]=P.key}(R===0||h[s]-h[r]>u+tr)&&(h[s]=h[r]+u)}else{let R=(u-h[s]+h[r])/2;const P=m.length===0?R+1:h[r]-m[m.length-1].key,F=b.length===0?R+1:b[b.length-1].key-h[s];P<R+tr&&P<F+tr&&(N=m.pop().value),F<R+tr&&F<P+tr&&(O=b.pop().value),R=Math.min(R,P,F),h[r]-=R,h[s]+=R}_+=N,v+=O}let x,M=this.nodeList.byId[r].prev;for(;M&&g[x=M.data.id]>=g[i]&&h[r]-h[x]<c[r]-c[x];)h[x]=h[r]-c[r]+c[x],M=M.prev;for(M=this.nodeList.byId[s].next;M&&g[x=M.data.id]<=g[n]&&h[s]-h[x]>c[s]-c[x];)h[x]=h[s]-c[s]+c[x],M=M.next}placeNode(t,e,i,n,s){const{X:r,neighbours:a,mDist:u}=this,h=((s===0?a.prev:a.next)[t]||Cv).map(c=>r[c]);return h.length===0?r[t]:(n=_T(h),e!==La&&(n=Math.max(n,r[e]+u[t]-u[e])),i!==La&&(n=Math.min(n,r[i]+u[t]-u[i])),n)}moveLongEdge(t,e,i){const{X:n,virt:s,totalW:r,nodeList:a}=this,{id:u}=t.data;if(i[u]||!s[u])return;const h=this.longEdges[u];if(!h)return;h.forEach(x=>i[x]=!0);const c=h[0],g=h[h.length-1],_=[];e<0?_.push(n[c]<n[g]?n[c]:n[g],n[c]<n[g]?n[g]:n[c]):e>0?_.push(n[c]<n[g]?n[g]:n[c],n[c]<n[g]?n[c]:n[g]):_.push(n[c],n[g]);const m=_[0];let v,b=!1;for(;!b&&_.length!==0;)v=_.pop(),b=!0,h.forEach(x=>{const M=this.layers[this.nodeToLayer[x]];if(x!==M[0].id){const N=a.byId[x].prev.data;v-n[N.data.id]<r[x]-r[N.data.id]&&this.moveLongEdge(N,-1,i),b=b&&v-n[N.data.id]>=r[x]-r[N.data.id]-tr}if(x!==M[M.length-1].id){const N=a.byId[x].next.data;v-n[N.data.id]>r[x]-r[N.data.id]&&this.moveLongEdge(N,1,i),b=b&&v-n[N.data.id]<=r[x]-r[N.data.id]+tr}});b||(v=m,h.forEach(x=>{const M=this.layers[this.nodeToLayer[x]];if(x!==M[0].id){const N=a.byId[x].prev.data;v=Math.max(v,n[N.data.id]+r[x]-r[N.data.id])}if(x!==M[M.length-1].id){const N=a.byId[x].next.data;v=Math.min(v,n[N.data.id]+r[x]-r[N.data.id])}})),h.forEach(x=>n[x]=v)}moveLongEdges(){const t={};this.layers.forEach(e=>{const i=Math.floor(e.length/2);for(let n=i;n<e.length;n++)this.moveLongEdge(e[n],0,t);for(let n=i-1;n>=0;n--)this.moveLongEdge(e[n],0,t)})}computeY(){const{Y:t,layers:e,height:i}=this;t[0]=0,e.slice(1).forEach((n,s)=>{t[s+1]=t[s]+(i[s]+i[s+1])/2+this.layerDistance})}straightenLongEdge(t,e){const{nodeList:i,longEdges:n,neighbours:s,X:r,Y:a,nodeToLayer:u,totalW:h}=this,c=n[t.id];if(e[t.id]||!s.prev[t.id]||s.prev[t.id].length!==1||!s.next[t.id]||s.next[t.id].length!==1||!(c&&c.length<2))return;e[t.id]=!0;const g=s.prev[t.id][0],_=s.next[t.id][0];if(u[_]===u[g])return;const m=r[g]+(r[_]-r[g])*(a[u[t.id]]-a[u[g]])/(a[u[_]]-a[u[g]]);if(t!==this.first[u[t.id]]){const b=i.byId[t.id].prev.data;if(m-r[b.id]<h[t.id]-h[b.id]-tr&&this.straightenLongEdge(b,e),m-r[b.id]<h[t.id]-h[b.id]-tr)return}const v=this.layers[u[t.id]];if(t!==v[v.length-1]){const b=i.byId[t.id].next.data;if(r[b.id]-m<h[b.id]-h[t.id]-tr&&this.straightenLongEdge(b,e),r[b.id]-m<h[b.id]-h[t.id]-tr)return}r[t.id]=m}straightenEdges(){const t={};this.layers.forEach(e=>{const i=Math.floor(e.length/2);for(let n=i;n<e.length;n++)this.straightenLongEdge(e[n],t);for(let n=i-1;n>=0;n--)this.straightenLongEdge(e[n],t)})}run(){this.computeMinNodeDistances(),this.decrossVirtualEdges(),this.placeLongEdges(),this.placeNonVirtualNodes(),this.moveLongEdges(),this.computeY(),this.straightenEdges(),wa(this.layers,(t,e,i,n)=>{t.x=this.X[t.id],t.y=this.Y[n]})}},g6=(t,e=20,i=50)=>new f6(t,e,i).run();function _6(t){if(t.sort((n,s)=>n-s),t.length===0)return 0;const e=Math.floor(t.length/2),i=Math.floor(t.length/2);return(t[e]+t[i])/2}function Wx(t,e,i){const n={};return e.forEach((s,r)=>n[s.id]=r),t.map(s=>(i[s.id]||[]).map(r=>n[r]).sort()).reduce((s,r,a,u)=>{const h=r.length?r[r.length-1]:-1;for(let c=a+1;c<u.length;c++)s+=u[c].filter(g=>g<h).length;return s},0)}function m6(t,e,i,n,s){const r={};for(let a=0;a<t.length;a++)r[t[a].id]=_6((e[t[a].id]||[]).map(u=>i[u]))||0;s?t.sort((a,u)=>{const h=r[a.id]-r[u.id],c=n[a.id]===n[u.id],g=a.data.siblingIndex,_=u.data.siblingIndex;return c&&g>-1&&_>-1?g-_:h===0?i[u.id]-i[a.id]:h}):t.sort((a,u)=>{const h=r[a.id]-r[u.id];return h===0?i[u.id]-i[a.id]:h})}function pT({layers:t,topDown:e,topDownAdj:i,bottomUpAdj:n,idToIndex:s,crossings:r,sortSiblings:a}){const u=e?i:n;for(let h=e?0:t.length-1;e?h<t.length:h>=0;e?h++:h--){m6(t[h],u[h]||{},s,n[h],a);const c=h>0?Wx(t[h-1],t[h],i[h-1]):0,g=h<t.length-1?Wx(t[h],t[h+1],i[h]):0;g+c<(r[h]||0)+(r[h-1]||0)?(r[h]=g,h>0&&(r[h-1]=c),t[h].forEach((_,m)=>s[_.id]=m)):t[h].sort((_,m)=>s[_.id]-s[m.id])}}var p6=(t,e,i)=>{if(!i&&!e)return;const n={},s=t.map(()=>({})),r=t.map(()=>({}));t.forEach((g,_)=>{g.forEach((m,v)=>{n[m.id]=i?m.data.siblingIndex:v,m.children.forEach(b=>{const x=b.layer;x>_?(s[_][m.id]=s[_][m.id]||[],s[_][m.id].push(b.id),r[x][b.id]=r[x][b.id]||[],r[x][b.id].push(m.id)):(s[x][b.id]=s[x][b.id]||[],s[x][b.id].push(m.id),r[_][m.id]=r[_][m.id]||[],r[_][m.id].push(b.id))})})}),n[-1]=-1,i&&t.forEach(g=>g.sort((_,m)=>n[_.id]-n[m.id]));const a=t.slice(1).map((g,_)=>Wx(t[_],g,s[_])),u=[[50,100],[100,10],[1e3,1],[5e3,0]],h=Math.max(...t.map(g=>g.length)),c=(u.find(([g])=>h<g)||u[u.length-1])[1];for(let g=0;g<c;g++)pT({layers:t,topDown:!0,topDownAdj:s,bottomUpAdj:r,idToIndex:n,crossings:a,sortSiblings:i}),pT({layers:t,topDown:!1,topDownAdj:s,bottomUpAdj:r,idToIndex:n,crossings:a,sortSiblings:i})};function y6(t){const e={},i={},n={};t.nodes.forEach(a=>{n[a.id]=a});const s=a=>{if(e[a.id])return i[a.id];e[a.id]=!0;let u=1/0;for(const h of a.children)u=Math.min(u,s(n[h.id])-1);return u===1/0&&(u=0),i[a.id]=u,u};t.nodes.forEach(a=>{a.data.parentIds.length===0&&s(a)});let r=1/0;t.nodes.forEach(a=>{r=Math.min(r,i[a.id])}),t.nodes.forEach(a=>{i[a.id]-=r,a.layer=i[a.id]}),t.nodes.forEach(a=>{typeof a.data.layer=="number"&&!isNaN(a.data.layer)&&(a.layer=a.data.layer)})}function v6(t){const e=t.nodes.reduce((i,n)=>n.data.fixed&&(i===null||i.layer>n.layer)?n:i,null);return e&&t.nodes.forEach(i=>i.ref=e.id),t}function x6(t){if(t.nodes.every(e=>e.layer)){const e=t.nodes.reduce((i,n)=>Math.min(i,n.layer),1/0);t.nodes.forEach(i=>i.layer-=e)}}function b6(t){if(t.nodes.some(e=>e.data.sink)){const e=t.nodes.reduce((i,n)=>Math.max(i,n.layer),-1/0);t.nodes.forEach(i=>{i.data.sink&&(i.layer=e+1)})}}function E6(t){const e=[];t.nodes.forEach(n=>e[n.layer]=0);const i=Array.from(e).reduce((n,s,r)=>{if(r===0)return n.push(0),n;const a=n[r-1];return s!==void 0?(n.push(a),n):(n.push(a-1),n)},[]);t.nodes.forEach(n=>n.layer+=i[n.layer])}function S6(t){return y6(t),b6(t),x6(t),E6(t),t.nodes.forEach(e=>{const{below:i,above:n}=e.children.reduce((s,r)=>(e.layer>r.layer?s.above.push(r):s.below.push(r),s),{above:[],below:[]});n.forEach(s=>s.children.push(e)),e.children=i}),v6(t)}var A6=(t,{nodeDistance:e,layerDistance:i,nodeLookup:n,customSort:s,customLayering:r,sortSiblings:a,shouldDecross:u=!0})=>{S6(t),r&&r(t);const h=T6(t);return t.nodes.length>1?(p6(h,u,a),s&&h.forEach(c=>{c.sort((g,_)=>s(n.get(g.id),n.get(_.id)))}),g6(h,e,i)):(t.nodes[0].x=0,t.nodes[0].y=0),w6(t),t};function T6(t){return t.nodes.reduce((e,i)=>(e[i.layer]=e[i.layer]||[],e[i.layer].push(i),i.children=i.children.map(n=>{if(n.layer===i.layer+1)return n;let s=n;for(let r=n.layer-1;r>i.layer;r--){const a=t6(`${i.id}->${n.id}@${r}`,r);a.children=[s],e[r]=e[r]||[],e[r].push(a),s=a}return s}),e),[])}function w6(t){t.nodes.forEach(e=>{e.data&&(e.children=e.children.filter(Zx))})}var Mv=({id:t,layer:e,sink:i,siblingIndex:n,radius:s,layoutable:r})=>({id:t,layer:e!==void 0?e:void 0,sink:i,siblingIndex:n||0,radius:s||0,fixed:r===!1,parentIds:[],children:[],ref:null});function L6(t){const e={x:0,y:0};let i=0;for(let n=0;n<t.length;n++){const s=t[n];for(let r=0;r<s.nodes.length;r++){const a=s.nodes[r];e.x+=a.x||0,e.y+=a.y||0,i++}}return e.x/=i,e.y/=i,e}function C6(t){const e={x:0,y:0};let i=0;for(const[n,{x:s,y:r}]of t)e.x+=s||0,e.y+=r||0,i++;return e.x/=i,e.y/=i,e}function M6(t,e,i){const n=L6(i),s=t.x-n.x,r=t.y-n.y;for(let a=0;a<i.length;a++){const u=i[a];for(let h=0;h<u.nodes.length;h++){const c=u.nodes[h],g=e.get(c.id);!g||c.data&&c.data.fixed||(g.x=c.x+s,g.y=c.y+r)}}}var N6=t=>{var e,i,n;const s=[];if(t.nodes.forEach(v=>{if(v&&!isNaN(v.layer)&&v.layer!==null){if(v.layer<0)throw new Error("Layer must be greater than or equal to 0");s.push([v.id,v.layer])}}),s.length===0)return t.edges;s.sort((v,b)=>v[1]-b[1]);const r=new Set;for(let v=0;v<s.length;v++)s[v][1]!==0&&r.add(s[v][0]);const a=new Map;for(const v of t.nodes)a.set(v.id,[]);for(const v of t.edges)(e=a.get(v.source))==null||e.push(v.target),(i=a.get(v.target))==null||i.push(v.source);if(!s.map(([v,b])=>b).some(v=>v===0)){s.sort((M,N)=>M[1]-N[1]);const v=new Set,b=[s[0]];let x;for(;b.length>0;){const[M,N]=b.shift();if(N===0){x=M;break}v.add(M);const O=a.get(M)||[];for(const R of O)r.has(R)||v.has(R)||b.push([R,N-1])}if(x)s.push([x,0]);else{const M=s[0][1];for(let N=0;N<s.length;N++)s[N][1]-=M}}const u=s.filter(([v,b])=>b===0).map(([v])=>v),h=u.slice(),c=new Map,g=new Map,_=new Map;for(const v of u)c.set(v,0),g.set(v,[]);for(;h.length>0;){const v=h.shift(),b=c.get(v),x=a.get(v)||[];for(const M of x){const N=c.get(M);N===void 0?(c.set(M,b+1),g.set(M,[v]),h.push(M)):N===b+1&&((n=g.get(M))==null||n.push(v))}}for(const[v,b]of g.entries())for(const x of b)_.set(x,(_.get(x)||[]).concat(v));for(const[v,b]of s)if(c.get(v)!==b)if(b===0){const x=g.get(v)||[];g.set(v,[]),x.forEach(O=>{_.set(O,(_.get(O)||[]).filter(R=>R!==v))});const M=t.nodes.filter(O=>c.get(O.id)===0);c.clear(),M.forEach(O=>c.set(O.id,0));const N=M.map(O=>O.id);for(;N.length>0;){const O=N.shift(),R=c.get(O),P=_.get(O)||[];for(const F of P)c.get(F)===void 0&&(c.set(F,R+1),N.push(F))}}else{const x=t.nodes.find(R=>c.get(R.id)===b-1&&R.id!==v);if(!x)continue;const M=g.get(v)||[];g.set(v,[x.id]),M.forEach(R=>{_.set(R,(_.get(R)||[]).filter(P=>P!==v))}),_.set(x.id,(_.get(x.id)||[]).concat(v));const N=t.nodes.filter(R=>c.get(R.id)===0);c.clear(),N.forEach(R=>c.set(R.id,0));const O=N.map(R=>R.id);for(;O.length>0;){const R=O.shift(),P=c.get(R),F=_.get(R)||[];for(const U of F)c.get(U)===void 0&&(c.set(U,P+1),O.push(U))}}const m=[];for(const[v,b]of g.entries())if(b.length>0)for(const x of b)m.push({id:`${x}-${v}`,source:x,target:v});return m},R6=(t,e={})=>{const i=new Map,n=new Map;for(const c of t.nodes)i.set(c.id,c);const s=t.nodes.slice(),r=(t.edges||[]).filter(({source:c,target:g})=>c!==g),a=mT(s,r,i).filter(c=>{const g=n.get(c.source);if(!g){const _=new Map;return _.set(c.target,!0),n.set(c.source,_),!0}return!g.get(c.target)&&(g.set(c.target,!0),!0)}),u=o6(s,a,{skipSingletons:e.packing==="grid"}),h=u.map(c=>{const g=c.map(m=>i.get(m)),_=a.filter(m=>c.includes(m.source));return mT(g,N6({nodes:g,edges:_}),i)}).flat().reduce((c,g)=>(c.has(g.source)||c.set(g.source,Mv(i.get(g.source))),c.has(g.target)||c.set(g.target,Mv(i.get(g.target))),c.get(g.target).children.push(g.source),c.get(g.target).parentIds.push(g.source),c),new Map);return{components:u.map(c=>c.map(g=>h.get(g)||Mv(i.get(g)))),lookup:i}};function O6(t,e,i){const n=[];for(const s of t){const r=h6(s);n.push(r),A6(r,{nodeDistance:i.nodesSeparation,layerDistance:i.layerSeparation,shouldDecross:i.shouldDecross,customSort:i.customSort,customLayering:i.customLayering,sortSiblings:!!i.sortSiblings,nodeLookup:e})}return n}var yT=(t,e={})=>{if(!t||!t.nodes)return t;const i={direction:"down",packing:"fit",nodesGridSeparation:1,...e,shouldDecross:e.shouldDecross!==!1},{components:n,lookup:s}=R6(t,i),r=C6(s),a=O6(n,s,i);if(i.packing==="grid"){const u=u6(t.nodes,t.edges,i);a.push(u)}return JG(a,i),M6(r,s,a),t},Nv={direction:"TB",nodeDistance:5,levelDistance:50,componentDistance:50,gapWidth:1,arrangeComponents:"fit",gridDistance:50,layer:"layer",siblingIndex:""},qx={name:"hierarchical",imports:{sequential:yT},configure:function(t,{graph:e,data:i}){function n(O,R,P=O.getNodes()){return R?R instanceof wu?R:O.getNodes(R):P}const s={...Nv,...t,nodeList:t.nodes};s.direction=t.direction||Nv.direction,s.layerSeparation=s.levelDistance,s.nodesSeparation=s.nodeDistance,s.componentsSeparation=s.componentDistance,s.gapDistance=s.gapWidth,s.packing=s.arrangeComponents;const r={...s},a=s.edges,u=s.nodeList;if(["TB","BT","LR","RL"].indexOf(s.direction)===-1)throw new Error('direction should be one of the "TB", "BT", "LR", "RL"');if(["fit","grid","singleLine"].indexOf(s.packing)===-1)throw new Error('arrangeComponents should be one of the "fit", "grid", "singleLine"');s.nodesGridSeparation=t.gridDistance||Nv.gridDistance;const h=u.getId(),c=u.getAttribute("layoutable").reduce((O,R,P)=>(O[h[P]]=R,O),{}),g=u.getAttributes(["x","y"]).reduce((O,R,P)=>(O[h[P]]=R,O),{}),_=u.getAttribute("radius");if(typeof r.layer!="string")throw new Error("'layer' should be the valid data field name");if(r.siblingIndex===void 0&&(r.siblingIndex=""),typeof r.siblingIndex!="string")throw new Error("'siblingIndex' should be the valid data field name");const m=n(e,s.roots,e.nodeList()),v=i.getProperty(s.nodeList,r.layer),b=r.siblingIndex.length?i.getProperty(s.nodeList,r.siblingIndex):[],x=m.map(O=>{let R=-1;return s.nodeList.forEach((P,F)=>{P===O&&(R=F)}),R});for(const O of x)v[O]=0;const M=n(e,s.sinks,e.nodeList()).toArray().reduce((O,R)=>(O[R.getId()]=!0,O),{}),N=h.map(O=>M[O]);return{nodes:h,edges:a.map(O=>({id:O.getId(),source:O.getSource().getId(),target:O.getTarget().getId()})),options:yp(s),layoutable:c,radiuses:_,siblingIndexes:b,layers:v,sinks:N,coords:g}},context:Ci,update:function({nodes:t,edges:e,options:i,layoutable:n,radiuses:s,layers:r,siblingIndexes:a,sinks:u,coords:h}){const c=e.filter(({source:m,target:v})=>m in n&&v in n),g={nodes:t.map((m,v)=>({id:m,radius:s[v],layer:r[v],siblingIndex:a[v],sink:u[v],layoutable:n[m],x:h[m].x,y:h[m].y})),edges:c},{nodes:_}=yT(g,{packing:{fit:"fit",singleLine:"singleline",grid:"grid"}[i.arrangeComponents],direction:{TB:"down",BT:"up",RL:"left",LR:"right"}[i.direction],layerSeparation:i.layerSeparation,nodesSeparation:i.nodesSeparation,sortSiblings:a.length>0,componentsSeparation:i.componentsSeparation,nodesGridSeparation:i.nodesGridSeparation,evenDistribution:i.evenDistribution});return{positions:_}},isRunning:function(){return!1},onSync:function({positions:t},{graph:e}){return{indexes:t.map(({id:i})=>(e.getNode(i)||{_index:-1})._index),x:t.map(({x:i})=>i),y:t.map(({y:i})=>i)}}},I6=t=>(t.modules.layouts.register(qx),(e={})=>(e.useWebWorker=!1,t.modules.layouts.start(qx.name,e))),Qx=(t,e)=>t-e,vT={name:"radial",imports:{minHeap:Ap,bellmanFord:A0,dijkstra:T0,johnson:ax,distance:Gs,circleCircleIntersection:C0,circleSortCompare:M0,weightedStress:R2,distanceStress:O2,constrainedStress:rx,stressMinimizationStep:ox,removeRadialOverlap:ux,linear:sp,calculateRadii:$S},configure(t,{graph:e}){let i=t.nodes;const n=i.size;function s(U,V){return U!=null&&isFinite(U)?U:V}if(t.centralNode===void 0)throw new Error('radial layout: missing parameter "centralNode"');const r=e.getNode(t.centralNode);if(r===void 0)throw new Error('radial layout: parameter "centralNode" is not valid');t.radiusRatio=s(t.radiusRatio,Math.SQRT2),t.radiusDelta=s(t.radiusDelta,0),t.nodeGap=s(t.nodeGap,10),t.repulsion=n*s(t.repulsion,1);const a=r.getPosition(),u=s(t.centerX,a.x),h=s(t.centerY,a.y),c=r._index;i.includes(r)||(i=i.concat(r.toList()));let g=i._indexes;const _=i.getAttribute("layoutable");g=g.filter((U,V)=>_[V]||U===c),g.sort(Qx);const m=g.length,v=P6(g,e.getConnectedComponents(i,{internalIndexes:!0}),c),b=e.degrees(g),x=new Float32Array(e.getNodeAttribute("x").getMultiple(g)),M=new Float32Array(e.getNodeAttribute("y").getMultiple(g)),N=e.getNodeAttribute("radius").getMultiple(g),O=e.getEdges()._indexes,R=e.getEdgeAttribute("source").getMultiple(O),P=e.getEdgeAttribute("target").getMultiple(O),F=e.getAdjacencyList({internalIndexes:!0,weight:1,indexes:g});return{centerIndex:c,centerIndexPos:0,cx:u,cy:h,D:null,indexes:g,components:v,normIndexes:null,radii:null,rings:null,x,y:M,degree:b,size:m,attributes:{size:N,adjacency:F,weights:P.map(()=>1),sources:R,targets:P},sortAttr:null,allowOverlap:!!t.allowOverlap,nodeGap:t.nodeGap,radiusRatio:t.radiusRatio,radiusDelta:t.radiusDelta,repulsion:t.repulsion,randomize:!("randomize"in t)||!!t.randomize,renderSteps:!!t.renderSteps,epsilon:s(t.epsilon,.001),maxSteps:s(t.maxIterations,100),iterationsPerRender:s(t.iterationsPerRender,20),step:-1,stress:Number.POSITIVE_INFINITY,prevStress:0,converged:!1,overlapRemoved:!1,done:!1}},context:()=>({data:null,gridPlacement(t,e,i=8){const n=t.length,s=new Float32Array(n),r=new Float32Array(n);let a=0;for(let m=0,v=t.length;m<v;m++){const b=e[t[m]];b>a&&(a=b)}const u=a*i,h=Math.ceil(Math.sqrt(n)),c=Math.ceil(n/h),g=-Math.floor((c-1)*u/2),_=-Math.floor((h-1)*u/2);for(let m=0;m<h;m++)for(let v=0;v<c;v++)s[m*c+v]=g+v*u,r[m*c+v]=_+m*u;return{x:s,y:r}},connectComponents(t,e,i,n,s,r){let a;function u(h,c){const g=new Uint32Array(h.length+1);return g.set(h),g[h.length]=c,g}for(let h=1;h<t.length;h++){const c=t[h];let g=0,_=0;c.forEach((b,x)=>{const M=s.get(b);M!=null&&M>g&&(_=x,g=M)}),a=c[_];const m=e[r.get(a)];m.weights=m.weights||[],m.nodes=u(m.nodes,i),m.weights.push(n);const v=e[r.get(i)];v.weights=v.weights||[],v.nodes=u(v.nodes,a),v.weights.push(n)}},correctSubgraphsDistances(t,e,i,n,s){const r=Array.prototype.reduce.call(t[i],(u,h,c)=>(c!==i&&h<n&&h>u&&(u=h),u),0),a=n-r-1;for(let u=1;u<e.length;u++){const h=e[u];for(let c=0,g=h.length;c<g;c++){const _=s.get(h[c]);_!=null&&(t[i][_]-=a,t[_][i]-=a)}}},initialize(t,e){t.data=e,e.step=0;const i=new Map,n=new Map;e.normIndexes=e.indexes.reduce((c,g,_)=>(c[_]=_,i.set(g,_),n.set(g,e.degree[_]),t.data&&g===e.centerIndex&&(t.data.centerIndexPos=_),c),new Uint32Array(e.indexes.length));const s=e.centerIndexPos,r=e.components[0].length;t.connectComponents(e.components,e.attributes.adjacency,e.centerIndex,r,n,i);const a=ax({sources:e.attributes.sources,targets:e.attributes.targets,weights:e.attributes.weights,indexes:e.indexes,adjacency:e.attributes.adjacency,undirected:!0});t.correctSubgraphsDistances(a,e.components,s,r,i),e.D=a;const u=a[s],h={};for(let c=0,g=e.normIndexes.length;c<g;c++)if(c!==s){const _=u[c];h[_]=h[_]||[],h[_].push(e.normIndexes[c])}e.rings=h,e.radii=$S(s,e.rings,e.attributes.size,e.nodeGap,e.radiusRatio,e.radiusDelta)},removeOverlaps(t,e){if(!t.data)return;const i=t.data.centerIndexPos,n=e.attributes.size,{rings:s,radii:r}=e,a=e.x[i],u=e.y[i];for(const h in s){const c=s[h];for(let g=0;g<c.length;g++){const _=c[g],m=r[h];let v=e.x[_]-a,b=e.y[_]-u;v+b===0&&(v=Math.sin(_)*Math.random()*.001,b=Math.cos(_)*Math.random()*.001);const x=Math.sqrt(v*v+b*b);if(x-m<0){const M=m/x;e.x[_]=a+v*M,e.y[_]=u+b*M}}}for(const h in s){const c=s[h],g=Gs(a,u,e.x[c[0]],e.y[c[0]]);ux({X:e.x,Y:e.y,sizes:n,indexes:c,center:[a,u],R:g,gap:e.nodeGap,inPlace:!0})}}}),update(t,e){t||(t=e.data);const i=t.indexes,n=t.centerIndex;let s;t.x=t.x||new Float32Array(t.size),t.y=t.y||new Float32Array(t.size),t.step===-1&&e.initialize(e,t);const r=t.repulsion,a=u=>t.radii&&t.radii[u]||1;if(t.step===0&&t.randomize&&(s=e.gridPlacement(t.indexes,t.attributes.size),t.x=s.x,t.y=s.y),!t.converged){const u=t.maxSteps,h=t.iterationsPerRender;let c=t.step;const g=Math.min(c+h,u),{D:_,x:m,y:v,size:b,centerIndexPos:x,normIndexes:M}=t;for(;c<=g&&!t.converged;){const N=sp(Math.min(c,u)/u);t.step=c++,s=ox(_,m,v,b,x,r,N,M,a),t.x=s.x,t.y=s.y,t.prevStress=t.stress,t.stress=rx(_,m,v,b,x,r,N,M),t.converged=t.converged||Math.abs(t.stress-t.prevStress)<=t.epsilon}}if(t.converged)if(t.overlapRemoved||t.allowOverlap){t.done=!0;const u=t.rings||{};t.rings=Object.keys(u).reduce((h,c)=>(h[c]=u[c].map(g=>i[g]),h),{})}else e.removeOverlaps(e,t,n),t.overlapRemoved=!0;return t},isRunning:({data:t})=>!(!t||t.converged&&(t.allowOverlap||t.done))||(t&&(t.step=-1),!1),onSync(t){if(t.renderSteps||t.done)return xT(t)},onEnd:t=>xT(t)};function xT(t){const e=t.x,i=t.y,n=t.indexes.length,s=e[t.centerIndexPos]-t.cx,r=i[t.centerIndexPos]-t.cy;for(let a=0;a<n;a++)e[a]-=s,i[a]-=r;return{indexes:t.indexes,x:e,y:i}}function P6(t,e,i){const n=t.slice().sort(Qx),s=[];for(let r=0,a=e.length;r<a;r++){const u=[],h=e[r];let c=!1;for(let g=0,_=h.length;g<_;g++){const m=h[g];xw(n,m)!==-1&&(m===i&&(c=!0),u.push(m))}u.length!==0&&s[c?"unshift":"push"](u.sort(Qx))}return s}var z6=t=>(t.modules.layouts.register(vT),e=>{if(e.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');if(e.maxIterations=e.maxIterations&&isFinite(e.maxIterations)?Math.floor(e.maxIterations):100,e.maxIterations<1)throw new RangeError("maxIterations must be a positive integer");if(e.iterationsPerRender=e.iterationsPerRender&&isFinite(e.iterationsPerRender)?Math.floor(e.iterationsPerRender):20,e.iterationsPerRender<1)throw new RangeError("iterationsPerRender must be a positive integer");if(e.epsilon=e.epsilon&&isFinite(e.epsilon)?e.epsilon:.001,e.epsilon<=0)throw new RangeError("epsilon has to be a positive number");return t.modules.layouts.start(vT.name,e)}),bT={...qx,name:"sequential"},D6=t=>(t.modules.layouts.register(bT),(e={})=>{e.useWebWorker=!1;const i={...e,evenDistribution:!0};return t.modules.layouts.start(bT.name,i)}),k6=class extends jn{constructor(t){super(t),this.stop=()=>this._ogma.modules.layouts.stop(),this.concentric=R5(t),this.radial=z6(t),this.force=XG(t),this.forceLink=ZG(t),this.hierarchical=I6(t),this.sequential=D6(t),this.grid=WG(t)}},F6=class extends jn{constructor(){super(...arguments),this.move=t=>this._ogma.modules.virtualMouse.move(t),this.down=t=>this._ogma.modules.virtualMouse.down(t),this.up=t=>this._ogma.modules.virtualMouse.up(t),this.click=t=>this._ogma.modules.virtualMouse.click(t),this.rightClick=t=>this._ogma.modules.virtualMouse.rightClick(t),this.doubleclick=t=>this._ogma.modules.virtualMouse.doubleclick(t),this.drag=(t,e)=>this._ogma.modules.virtualMouse.drag(t,e),this.wheel=t=>this._ogma.modules.virtualMouse.wheel(t)}},B6=class extends jn{constructor(){super(...arguments),this.map=t=>this._ogma.modules.rules.createMapping(t),this.slices=t=>this._ogma.modules.rules.createSlices(t),this.template=t=>this._ogma.modules.rules.createTemplate(t)}},U6=class extends jn{constructor(){super(...arguments),this.watchNodeObjectProperty=t=>this._ogma.modules.watcher.watchNodeObjectProperty(t),this.watchEdgeObjectProperty=t=>this._ogma.modules.watcher.watchEdgeObjectProperty(t),this.watchNodeNonObjectProperty=t=>this._ogma.modules.watcher.watchNodeNonObjectProperty(t),this.watchEdgeNonObjectProperty=t=>this._ogma.modules.watcher.watchEdgeNonObjectProperty(t)}},G6=class{clearSelection(){return this.modules.selection.clear()}getSelectedNodes(){return this.modules.selection.getSelectedNodes()}getNonSelectedNodes(){return this.modules.selection.getNonSelectedNodes()}getSelectedEdges(){return this.modules.selection.getSelectedEdges()}getNonSelectedEdges(){return this.modules.selection.getNonSelectedEdges()}},H6=class{setOptions(t){return this.modules.settings.update(t)}getOptions(){return this.modules.settings.get()}},V6=class extends jn{constructor(){super(...arguments),this.setNodesVisibility=t=>this._ogma.modules.graphics.setNodesVisibility(t),this.setEdgesVisibility=t=>this._ogma.modules.graphics.setEdgesVisibility(t),this.setNodeTextsVisibility=t=>this._ogma.modules.graphics.setNodeTextsVisibility(t),this.setEdgeTextsVisibility=t=>this._ogma.modules.graphics.setEdgeTextsVisibility(t),this.addRule=(t={})=>this._ogma.modules.styleRules.addRule(t),this.getRuleList=()=>this._ogma.modules.styleRules.getRuleList(),this.addNodeRule=(t,e)=>{let i,n;return e===void 0?(i=t,n=void 0):(i=e,n=t),this.addRule({nodeAttributes:i,nodeSelector:n})},this.addEdgeRule=(t,e)=>{let i,n;return e===void 0?(i=t,n=void 0):(i=e,n=t),this.addRule({edgeAttributes:i,edgeSelector:n})},this.getNodeRules=()=>this.getRuleList().filter(t=>t.getDefinition().edgeAttributes===void 0),this.getEdgeRules=()=>this.getRuleList().filter(t=>t.getDefinition().nodeAttributes===void 0),this.createClass=t=>this._ogma.modules.classes.createClass(t),this.getClass=t=>this._ogma.modules.classes.getClassByName(t),this.getClassList=()=>this._ogma.modules.classes.getClassList(),this.setHoveredNodeAttributes=(t,e)=>{this._ogma.modules.hover.updateNodeAttributes(t,e)},this.setHoveredEdgeAttributes=(t,e)=>{this._ogma.modules.hover.updateEdgeAttributes(t,e)},this.setSelectedNodeAttributes=(t,e)=>this._ogma.modules.selection.setNodeAttributes(t,!!e),this.setSelectedEdgeAttributes=(t,e)=>this._ogma.modules.selection.setEdgeAttributes(t,!!e),this.setTheme=({nodeAttributes:t,edgeAttributes:e,selectedNodeAttributes:i,selectedEdgeAttributes:n,hoveredNodeAttributes:s,hoveredEdgeAttributes:r})=>{this._ogma.modules.pulses.setTheme(t&&t.pulse||{},e&&e.pulse||{}),this._ogma.modules.graphics.getAttributesManager().setDefaultAttributes(t||{},e||{}),this.setSelectedNodeAttributes(i||{}),this.setSelectedEdgeAttributes(n||{}),this.setHoveredNodeAttributes(s||{}),this.setHoveredEdgeAttributes(r||{})}}},Y6=class extends jn{constructor(){super(...arguments),this.set=(t,e)=>this._ogma.modules.brand.set(t,e),this.remove=()=>{this._ogma.modules.brand.remove()}}},X6=class extends jn{constructor(){super(...arguments),this.enable=t=>(this._ogma.modules.connectNodes.enable(t),this),this.disable=()=>(this._ogma.modules.connectNodes.disable(),this),this.enabled=()=>this._ogma.modules.connectNodes.enabled()}},ET={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:t})=>t.setSelected(!0),bothExtremities:!1},lN=class extends li{constructor(){super(...arguments),this._enabled=!1,this._points=[],this._bbox=new So,this._onStart=({x:t,y:e})=>{this._bbox.reset(),this.savePoint(t,e,!1)},this._onStop=()=>{const{minX:t,minY:e,maxX:i,maxY:n}=this._bbox,{nodes:s,edges:r}=this._modules.spatial.queryProjected(t,e,i,n),a={},u=s.filter(g=>{const _=g.isVisible(),m=g.getAttribute("detectable"),v=_&&m&&this._modules.locate.isNodeInPolygon(g,this._points);return a[g._index]=v,v});let h=r.filter(g=>{const _=g.isVisible(),m=g.getAttribute("detectable");return _&&m&&this._modules.locate.isEdgeInPolygon(g,this._points)});this._options.bothExtremities&&(h=this.filterByExtremities(h,a)),this._layer.clear();const c=this._points.slice();this._points=[],this.disable(),this._options.callback({nodes:u,edges:h,points:c})}}onMounted(){this._options=ps(ET),this._cachedCursor="",this._modules.events.isRegistered("lassoEnabled")||this._modules.events.register(["lassoEnabled","lassoDisabled"]),this._interaction=this._modules.interactions.onDrag({priority:"lasso",check:()=>this._enabled,onStart:this._onStart,onProgress:({x:t,y:e})=>this.savePoint(t,e,!0),onStop:this._onStop})}enable(t={}){var e;return this._enabled||(this._enabled=!0,this._modules.captor.setDetectionEnabled(!1),this._options=ua(t,ET),this._layer=this._modules.layers.addCanvasLayer(Ci,{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._cachedCursor=((e=this._layer.element.parentElement)==null?void 0:e.style.cursor)||"",Gm(this._layer.element.parentElement,this._options.cursorStyle),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorPosition()),this._modules.events.fire("lassoEnabled")),this}disable(){return this._enabled?(this._enabled=!1,this._modules.captor.setDetectionEnabled(!0),Gm(this._layer.element.parentElement,this._cachedCursor),this._layer.destroy(),this._modules.events.fire("lassoDisabled"),this):this}enabled(){return this._enabled}savePoint(t,e,i){const n=Do(),s=this._options,r=this._points;if(this._bbox.addPoint(t,e),r.push({x:t,y:e}),i){const a=r[0];this._layer.refresh(u=>{u.lineWidth=s.strokeWidth,u.lineJoin="bevel",u.strokeStyle=s.strokeColor,u.fillStyle=s.fillColor,u.beginPath(),u.moveTo(a.x*n,a.y*n);for(let h=1;h<r.length;++h){const c=r[h];u.lineTo(c.x*n,c.y*n)}u.stroke(),s.fillColor&&u.fill()})}}filterByExtremities(t,e){const i=this._modules.graph.getEdgeAttribute("source"),n=this._modules.graph.getEdgeAttribute("target");return t.filter(s=>{const r=s._index,a=i.get(r),u=n.get(r);return e[a]&&e[u]})}},Z6=class extends jn{constructor(){super(...arguments),this.enable=t=>(this._ogma.modules.lasso.enable(t),this),this.disable=()=>(this._ogma.modules.lasso.disable(),this),this.enabled=()=>this._ogma.modules.lasso.enabled()}},W6=class extends jn{constructor(){super(...arguments),this.enable=t=>this._ogma.modules.legend.enable(t),this.disable=()=>this._ogma.modules.legend.disable(),this.enabled=()=>this._ogma.modules.legend.enabled(),this.getOptions=()=>this._ogma.modules.legend.getOptions(),this.export=t=>this._ogma.modules.legend.export(t)}},ST={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:t,edges:e})=>{t.size?t.setSelected(!0):e.setSelected(!0)},bothExtremities:!1},q6=class extends lN{constructor(){super(...arguments),this._onStart=({x:t,y:e})=>{var i;this._rectangle.reset(),this._start={x:t,y:e},(i=this._layer)==null||i.refresh(n=>{n.fillStyle=this._options.fillColor,n.strokeStyle=this._options.strokeColor,n.lineWidth=this._options.strokeWidth})},this._onStop=()=>{var u;const t=this._modules.captor.getCursorPosition(),e=this._formatRectangle(t),{nodes:i,edges:n}=this._modules.spatial.queryProjected(e.minX,e.minY,e.maxX,e.maxY),s={},r=i.filter(h=>{const c=h.isVisible(),g=h.getAttribute("detectable"),_=c&&g&&this._modules.locate.isNodeInRectangle(h,e);return s[h._index]=_,_});let a=n.filter(h=>{const c=h.isVisible(),g=h.getAttribute("detectable");return c&&g&&this._modules.locate.isEdgeInRectangle(h,e)});this._options.bothExtremities&&(a=this.filterByExtremities(a,s)),(u=this._layer)==null||u.clear(),this.disable(),this._options.callback({nodes:r,edges:a,rectangle:{minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY,width:e.width,height:e.height,cx:e.cx,cy:e.cy}})}}onMounted(){this._options=ps(ST),this._enabled=!1,this._rectangle=new So,this._interaction=this._modules.interactions.onDrag({priority:"lasso",disableDetection:!0,check:()=>this._enabled,onStart:this._onStart,onProgress:({x:t,y:e})=>this._refreshRectangle({x:t,y:e}),onStop:this._onStop})}enable(t){return super.enable(ua(t,ST))}_formatRectangle(t){const e=this._start.x,i=this._start.y,n=t.x,s=t.y,r=Math.abs(e-n),a=Math.abs(i-s),u=e<n?e:n,h=i<s?i:s;return this._rectangle.reset().addPoint(u,h).addPoint(u+r,h+a)}_refreshRectangle(t){var a;const{minX:e,minY:i,width:n,height:s}=this._formatRectangle(t),r=Do();(a=this._layer)==null||a.refresh(u=>{u.strokeRect(e*r,i*r,n*r,s*r),this._options.fillColor&&u.fillRect(e*r,i*r,n*r,s*r)})}},Q6=class extends jn{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.rectangleSelect.enable(t)},this.disable=()=>{this._ogma.modules.rectangleSelect.disable()},this.enabled=()=>this._ogma.modules.rectangleSelect.enabled()}},K6=class extends jn{constructor(){super(...arguments),this.enable=t=>{this._ogma.modules.resizing.enable(t)},this.disable=()=>{this._ogma.modules.resizing.disable()},this.enabled=()=>this._ogma.modules.resizing.enabled()}},j6=class extends jn{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.rewiring.enable(t)},this.disable=()=>{this._ogma.modules.rewiring.disable()},this.enabled=()=>this._ogma.modules.rewiring.enabled()}},J6=class extends jn{constructor(){super(...arguments),this.enable=(t={})=>{this._ogma.modules.snapping.enable(t)},this.disable=()=>{this._ogma.modules.snapping.disable()},this.enabled=()=>this._ogma.modules.snapping.enabled()}},$6=class extends jn{constructor(){super(...arguments),this.onNodeHover=(t,e={})=>{this._ogma.modules.tooltip.setHandler("hover.node",t,e)},this.onNodeClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.node",t,e)},this.onNodeRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.node",t,e)},this.onNodeDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.node",t,e)},this.onEdgeHover=(t,e={})=>{this._ogma.modules.tooltip.setHandler("hover.edge",t,e)},this.onEdgeClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.edge",t,e)},this.onEdgeRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.edge",t,e)},this.onEdgeDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.edge",t,e)},this.onBackgroundClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.left.background",t,e)},this.onBackgroundRightClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("click.right.background",t,e)},this.onBackgroundDoubleClick=(t,e={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.background",t,e)},this.refresh=()=>this._ogma.modules.tooltip.refresh(),this.isShown=()=>this._ogma.modules.tooltip.isShown(),this.hide=()=>{this._ogma.modules.tooltip.hide()},this.show=(t,e)=>this._ogma.modules.tooltip.show(t,e)}},tH=class extends jn{constructor(t){super(t),this.lasso=new Z6(t),this.connectNodes=new X6(t),this.legend=new W6(t),this.rectangleSelect=new Q6(t),this.resize=new K6(t),this.rewire=new j6(t),this.snapping=new J6(t),this.tooltip=new $6(t),this.brand=new Y6(t)}},eH=class extends jn{constructor(t){super(t),this.getList=()=>this._ogma.modules.transformations.api.getList(),this.clear=()=>this._ogma.modules.transformations.api.clear().then(()=>{}),this.getById=e=>this._ogma.modules.transformations.api.getById(e),this.afterNextUpdate=()=>this._ogma.modules.transformations.afterNextUpdate(),this.onGroupsUpdated=e=>{this._ogma.modules.transformations.onGroupsUpdated(e)},this.layoutGroups=(e,i,n=!1)=>(mu('Deprecated method "Ogma.transformations.layoutGroups"; please use "ogma.transformations.triggerGroupsUpdated" instead.'),this._ogma.modules.transformations.api.layoutGroups(e,i,n)),this.triggerGroupUpdated=e=>this._ogma.modules.transformations.triggerGroupUpdated(e),this.triggerGroupsUpdated=()=>this._ogma.modules.transformations.api.triggerGroupsUpdated()}addNodeGrouping(t){return this._ogma.modules.transformations.api.addNodeGrouping(t)}addNodeClustering(t){return this._ogma.modules.transformations.api.addNodeClustering(t)}addEdgeGrouping(t){return this._ogma.modules.transformations.api.addEdgeGrouping(t)}addDrillDown(t){return this._ogma.modules.transformations.api.addDrilldown(t)}addNodeFilter(t){return this._ogma.modules.transformations.api.addNodeFilter(t)}addEdgeFilter(t){return this._ogma.modules.transformations.api.addEdgeFilter(t)}getNodeFilters(){return this._ogma.modules.transformations.getNodeFilters()}getEdgeFilters(){return this._ogma.modules.transformations.getEdgeFilters()}addNeighborGeneration(t){return this._ogma.modules.transformations.api.addNeighborGeneration(t)}addNeighborMerging(t){return this._ogma.modules.transformations.api.addNeighborMerging(t)}addNodeCollapsing(t){return this._ogma.modules.transformations.api.addNodeCollapsing(t)}addGeoClustering(t){return this._ogma.modules.transformations.api.addGeoClustering(t)}addVirtualProperties(t){return this._ogma.modules.transformations.api.addVirtualProperties(t)}getXYR(t){return this._ogma.modules.transformations.getXYR(t)}expandGroup({node:t,computeSubNodesPosition:e,onExpand:i}){return this._ogma.modules.transformations.api.fishEyeExpand(t,i,e)}collapseGroup({node:t,onCollapse:e}){return this._ogma.modules.transformations.api.fishEyeCollapse(t,e)}},iH=class extends jn{constructor(){super(...arguments),this.setZoom=(t,e)=>this._ogma.modules.camera.setZoom(t,e),this.zoomIn=t=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomIn():this._ogma.modules.camera.zoomIn(t),this.zoomOut=t=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomOut():this._ogma.modules.camera.zoomOut(t),this.getZoom=()=>this._ogma.modules.camera.getZoom(),this.setCenter=(t,e)=>this._ogma.modules.camera.setCenter(t,e),this.move=(t,e)=>this._ogma.modules.camera.move(t,e),this.moveToBounds=(t,e)=>{if(!(t&&t instanceof So)){if(!Ir(t)||t.length!==4)throw new Error("ogma.view.zoomToBounds requires a BoundingBox as a parameter");{const[i,n,s,r]=t;t=So.from({minX:i,minY:n,maxX:s,maxY:r})}}return this._ogma.modules.camera.moveToBounds(t,e)},this.moveTo=(t,e)=>this._ogma.modules.camera.moveTo(t,e),this.getCenter=()=>this._ogma.modules.camera.getCenter(),this.setAngle=(t,e)=>this._ogma.modules.camera.setAngle(t,e),this.rotate=(t,e)=>this._ogma.modules.camera.rotate(t,e),this.getAngle=()=>this._ogma.modules.camera.getAngle(),this.set=(t,e)=>this._ogma.modules.camera.setView(t,e),this.get=()=>this._ogma.modules.camera.getView(),this.graphToScreenCoordinates=t=>this._ogma.modules.camera.graphToScreenCoordinates(t),this.screenToGraphCoordinates=t=>this._ogma.modules.camera.screenToGraphCoordinates(t),this.getImageData=()=>this._ogma.modules.graphics.getImageData(),this.getElementAt=t=>this._ogma.modules.captor.detectElementAt(t.x,t.y,!1,!0),this.getElementsInView=()=>{const{width:t,height:e}=this.get(),i=this.screenToGraphCoordinates({x:0,y:0}),n=this.screenToGraphCoordinates({x:t,y:e});return this._ogma.modules.spatial.query(i.x,i.y,n.x,n.y)},this.getBounds=()=>{const{width:t,height:e}=this.getSize(),i=this.screenToGraphCoordinates({x:0,y:0}),n=this.screenToGraphCoordinates({x:t,y:e});return{cx:(i.x+n.x)/2,cy:(i.y+n.y)/2,width:n.x-i.x,height:n.y-i.y,minX:i.x,minY:i.y,maxX:n.x,maxY:n.y}},this.getElementsInside=(t,e,i,n,s=!0)=>{const{spatial:r,camera:a}=this._ogma.modules;if(s){const u=a.graphToScreenCoordinates({x:t,y:e}),h=a.graphToScreenCoordinates({x:i,y:n});return r.queryProjected(u.x,u.y,h.x,h.y)}return r.queryProjected(t,e,i,n)},this.beforeNextFrame=()=>this._ogma.modules.dom.beforeNextFrame(),this.afterNextFrame=()=>this._ogma.modules.dom.afterNextFrame(),this.setFullScreen=t=>this._ogma.modules.dom.setFullScreen(t),this.isFullScreen=()=>this._ogma.modules.dom.isFullScreen(),this.forceResize=()=>this._ogma.modules.dom.forceResize(),this.getSize=()=>this._ogma.modules.dom.getDimensions(),this.setSize=t=>{if(!t||isNaN(t.width)||isNaN(t.height))throw new Error("Size must follow the format { width: number, height: number }");if(t.width<0)throw new Error("width must be positive");if(t.height<0)throw new Error("height must be positive");return this._ogma.modules.dom.setDimensions(t),Promise.resolve()},this.locateGraph=t=>this._ogma.modules.locate.locateGraph(t),this.locateRawGraph=(t,e)=>this._ogma.modules.locate.locateRawGraph(t,e),this.getGraphBoundingBox=({withTexts:t=!1}={})=>this._ogma.modules.locate.getGraphBoundingBox(t),this.animationInProgress=()=>this._ogma.modules.locate.isLocating()||this._ogma.modules.camera.animationInProgress(),this.getTextBoundingBox=t=>{if(!t)throw new Error("ogma.view.getTextBoundingBox: item must be a Node or an Edge");const e=t.getAttribute("text");return e==null||e===""?null:t.isList?this._ogma.modules.labels.getTextsBoundingBox(t):this._ogma.modules.labels.getTextsBoundingBox(t.toList())},this.getNodeBadgeAt=(t,e)=>{if(!t)throw new Error("ogma.view.getNodeBadgeAt: node is not defined");return qL(e,t._index,this._ogma.modules.graphics.getAttributesManager(),this._ogma.modules.camera,this._ogma.modules.graphics.getGraphicsEngine())}}},nH=class{constructor(t,e){this._ogma=t,this.settings=new XU(t),this.events=new HU(t),this.dom=new vD(t),this.animations=new $H(t),this.camera=new CU(t),this.graph=new GD(t),this.data=new ED(t),this.graphics=new zU(t),this.layers=new L9(t),this.individualAttributes=new YU(t),this.algorithms=new C9(t),this.position=new p9(t),this.touch=new _4(t),this.mouse=new f4(t),this.virtualMouse=new k8(t),this.spatial=new e4(t),this.captor=new pV(t),this.interactions=new uV(t),this.classes=new QU(t),this.cameraInteractions=new wU(t,!!e.debug),this.hover=new m9(t),this.keyboard=new RV(t),this.selection=new XH(t),this.styleRules=new H8(t),this.legend=new g9(t),this.sync=new ZH(t),this.rules=new S9(t),this.transformations=new VH(t),this.locate=new u4(t),this.drag=new yV(t),this.pulses=new KH(t),this.curvatureManager=new m8(t),this.workers=new T8(t),this.layouts=new L8(t),this.watcher=new O8(t),this.rectangleSelect=new q6(t),this.labels=new lV(t,e),this.brand=new g8(t),this.lasso=new lN(t),this.rewiring=new xV(t),this.resizing=new bV(t),this.snapping=new F8(t),this.connectNodes=new SV(t),this.tooltip=new MV(t),this.geo=new _8(t),Object.keys(this).forEach(i=>{const n=this[i];n instanceof li&&(n._setModules(this),n.onMounted())}),t.onReady(()=>{Object.keys(this).forEach(i=>{const n=this[i];n instanceof li&&n.onReady(e)})})}destroy(){Object.keys(this).forEach(t=>{const e=this[t];e instanceof li&&e.destroy(this._ogma)})}},sH=1,rH=[p4,m4,b4,YP,L5,G6,H6],Kx={version:"5.2.6",commit:"095f89de9",buildTime:"Tue May 20 2025 11:22:28 GMT+0000 (Coordinated Universal Time)"},la,gc=(la=class{constructor(e={}){this.node=i=>new al(i,this),this.edge=i=>new vh(i,this),this.nodeList=i=>new wu(i||new Uint32Array(0),this),this.edgeList=i=>new Ed(i||new Uint32Array(0),this),this._onReady=[],this.build=Kx,this._init(e)}_init(e){this._initParameters=e,this._debug=!!e.debug,this._token=sH++,this.modules=new nH(this,e),this.styles=new V6(this),this.algorithms=new M9(this),this.export=new A5(this),this.keyboard=new M5(this),this.generate=new T5(this),this.layouts=new k6(this),this.parse=new C5(this),this.transformations=new eH(this),this.tools=new tH(this),this.view=new iH(this),this.mouse=new F6(this),this.events=new E4(this),this.schema=new U6(this),this.rules=new B6(this),this.geo=new w5(this),this.layers=new N5(this),this.debug=new x4(this),this._onReady.forEach(i=>i(this)),this.safelyBindToInstance(),this.modules.events.register(["destroy"]),this.build={version:"5.2.6",commit:"095f89de9",buildTime:"Tue May 20 2025 11:22:28 GMT+0000 (Coordinated Universal Time)"}}safelyBindToInstance(){for(const e of Object.getOwnPropertyNames(la.prototype))typeof la.prototype[e]=="function"&&(this[e]=this[e].bind(this))}onReady(e){this._onReady.push(e)}_destroy(){if(!this._token)throw new Error('"destroy" called twice on the same instance of Ogma');this._onReady=[],this.modules.destroy(),this.modules=null}destroy(){this.modules.events.fire("destroy",{}),this._destroy()}isDestroyed(){return!this.modules}reset(){const e=this._initParameters;this._destroy(),this._init(e)}isDebug(){return this._debug}},la.libraries=n2,la.geometry=UM,la.parse=fb,la.build=Kx,la.algorithms=S0,la.utils=ib,la);gc.algorithms=S0,gc.utils=ib,gc.parse=fb,gc.build=Kx,NI(gc,rH);var uN=gc,so=(t=>(t.NodeFilter="node-filter",t.EdgeFilter="edge-filter",t.NodeCollapsing="node-collapsing",t.VirtualProperties="virtual-properties",t.NeighborGeneration="neighbor-generation",t.NeighborMerging="neighbor-merging",t.NodeGrouping="node-grouping",t.EdgeGrouping="edge-grouping",t.NodeClustering="node-clustering",t.GeoClustering="geo-clustering",t.Unknown="unknown",t))(so||{}),Th=class{constructor({id:t,duration:e,easing:i,ogma:n,module:s}){this.animation=i?{duration:e,easing:i}:e===void 0?0:e,this.destroyed=!1,this.id=t,this.ogma=n,this.context={},this.module=s,this.resetContext()}setOptions(t){var e;let i=typeof this.animation=="number"?this.animation:(e=this.animation)==null?void 0:e.duration,n=typeof this.animation=="object"?this.animation.easing:void 0;return typeof t.duration=="number"&&(i=t.duration),t.easing!==void 0&&(n=t.easing),this.animation=n?{duration:i,easing:n}:i===void 0?0:i,this.module.setOptions(this),this.module.afterNextUpdate()}enable(t){return this.animation=t===void 0?this.animation:t,this.module.enable(this)}disable(t){return this.animation=t===void 0?this.animation:t,this.module.disable(this)}isEnabled(){return this.module.isEnabled(this)}getId(){return this.id}whenApplied(){return this.module.afterNextUpdate().then(()=>this)}toggle(t){return this.animation=t===void 0?this.animation:t,this.isEnabled()?this.module.disable(this):this.module.enable(this)}run(t=!0){return Promise.resolve()}undo(t=!0){return Promise.resolve()}cleanup(){return this.resetContext(),Promise.resolve()}refresh(){return this.module.refreshTransformation(this),this.module.afterNextUpdate()}getIndex(){return this.module.getIndex(this)}setIndex(t){return this.module.setIndex(this,t),this.module.afterNextUpdate()}getAnimation(){return typeof this.animation=="number"?{duration:this.animation,easing:"linear"}:this.animation}getContext(){return this.context}setContent(t){this.context=t}resetContext(){this.context={}}getName(){return so.Unknown}destroy(t){return t!==void 0&&(this.animation=t),this.module.remove(this)}},oH=class{constructor(t){this.xs=new Map,this.ys=new Map,this.rs=new Map,this.curvatures=new Map,this.hiddenNodes=new Set,this.hiddenEdges=new Set,this.animations=[],this.before=[],this.after=[],this.enabled=!1,this.applying=!1,this._onLayoutEnd=e=>{if(!this.enabled)return;const i=e.positions.current,n=e.ids;for(let s=0;s<n.length;s++){const r=this.ogma.getNode(n[s])._index,a=i[s];a&&(this.xs.set(r,a.x),this.ys.set(r,a.y))}},this._onLayoutPrepare=e=>{this.enabled&&(e.params.dryRun=!0)},this._onNodesRemoved=e=>{const i=e.nodes._indexes;for(const n of i)this.xs.delete(n),this.ys.delete(n),this.rs.delete(n)},this._onLayoutGetData=({name:e,data:i})=>{if(this.enabled){if(e==="force"){const n=i.graph.nodes,s=i.indexes;for(let r=0;r<s.length;r++)this.xs.has(s[r])&&(n[r].x=this.xs.get(s[r]),n[r].y=this.ys.get(s[r]),n[r].r=this.rs.get(s[r])!==void 0?1.25*this.rs.get(s[r]):n[r].r)}else if(e==="hierarchical"||e==="sequential"){const n=i.options.nodes._indexes;for(let s=0;s<n.length;s++)this.rs.has(n[s])&&(i.radiuses[s]=this.rs.get(n[s]))}else if(e==="concentric"){const n=i.list;for(let s=0;s<n.length;s++)this.rs.has(n[s])&&(i.attributes.size[s]=this.rs.get(n[s]))}else if(e==="forceLink")for(const n in i.nodes){const s=Number(n),r=i.nodes[s];this.xs.has(s)&&(r.x=this.xs.get(s),r.y=this.ys.get(s)),this.rs.has(s)&&(r.size=this.rs.get(s))}else if(e==="radial"){const n=i.indexes;for(let s=0;s<n.length;s++){const r=n[s];this.xs.has(r)&&(i.x[s]=this.xs.get(r),i.y[s]=this.ys.get(r)),this.rs.has(r)&&(i.attributes.size[s]=this.rs.get(r))}}else if(e!=="grid")throw new Error(`Ogma transformtaions: Unsupported layout: ${e}`)}},this.ogma=t,this.afterMod={nodesToHide:new Set,edgesToHide:new Set},this.layer=this.ogma.modules.graphics.addAttributeLayer({name:"ogma-transformations-animations",priority:5.99999,nodeOutput:{attributes:["radius"]},edgeOutput:{attributes:["curvature"]},nodeDependencies:void 0,edgeDependencies:void 0}),this.attributeLayerData=this.layer._attributesManager._getLayerById(this.layer._id),this.initEvents()}initEvents(){this.ogma.events.on("layoutPrepare",this._onLayoutPrepare).on("layoutEnd",this._onLayoutEnd).on("removeNodes",this._onNodesRemoved).on("layoutGetData",this._onLayoutGetData)}handleLayoutFunctions(t){this.enable();const e=!!this.ogma.modules.layouts.enableBatching;e&&this.ogma.modules.layouts.enableBatching();const i=t.map(s=>s()),n=e?this.ogma.modules.layouts.runBatch():Promise.resolve();return Promise.all(i).then(s=>{s.forEach(r=>{if(!r)return;const{res:a,subNodes:u}=r;if(!Array.isArray(a))return;const h=u._indexes;for(let c=0;c<h.length;c++){const g=a[c];g.radius!==void 0?this.setXYR(h[c],g.x,g.y,g.radius):this.setXY(h[c],g.x,g.y)}})}).then(()=>(this.disable(),n))}handleGlobalLayout(t,e){if(t)for(let i=0;i<e.length;i++)t[i].radius!==void 0?this.setXYR(e[i],t[i].x,t[i].y,t[i].radius):this.setXY(e[i],t[i].x,t[i].y)}apply(t){const e=Array.from(this.xs.values()),i=Array.from(this.ys.values()),n=Array.from(this.rs.values()).map(_=>({radius:_})),s=Array.from(this.curvatures.values()).map(_=>({curvature:_})),r=this.ogma.nodeList(Array.from(this.hiddenNodes)),a=this.ogma.edgeList(Array.from(this.hiddenEdges)),u=e.map((_,m)=>({x:_,y:i[m]})),h=this.ogma.nodeList(Array.from(this.xs.keys())),c=this.ogma.nodeList(Array.from(this.rs.keys())),g=this.ogma.edgeList(Array.from(this.curvatures.keys()));return this.xs.clear(),this.ys.clear(),this.rs.clear(),this.curvatures.clear(),this.hiddenNodes.clear(),this.hiddenEdges.clear(),this.before.forEach(_=>_()),this.initCurvature(g._indexes),this.applying=u.length>0||n.length>0||s.length>0,Promise.all([u.length?h.setAttributes(u,t):Promise.resolve(),n.length?this.ogma.modules.graphics.animate(c,()=>this.layer.setAttributeValues(c,n),!1,t):Promise.resolve(),s.length?this.ogma.modules.graphics.animate(g,()=>this.layer.setAttributeValues(g,s),!1,t):Promise.resolve(),...this.animations.map(_=>_())]).then(()=>(this.ogma.nodeList(Array.from(this.afterMod.nodesToHide)).setVisible(!1),this.ogma.edgeList(Array.from(this.afterMod.edgesToHide)).setVisible(!1),Promise.all(this.after.map(_=>_())))).then(()=>{this.deleteCurvatures(g._indexes),r.setVisible(!1),a.setVisible(!1),this.animations=[],this.before=[],this.after=[],this.afterMod.nodesToHide.clear(),this.afterMod.edgesToHide.clear(),this.applying=!1})}setXYR(t,e,i,n){if(typeof t=="number")this.xs.set(t,e),this.ys.set(t,i),n!==void 0&&this.rs.set(t,n);else for(const s of t)this.xs.set(s,e),this.ys.set(s,i),n!==void 0&&this.rs.set(s,n)}getOpenRadius(t){return this.attributeLayerData.nodes.outputFlexArrays.radius.get(t)}getInputFlexArrays(){return this.attributeLayerData.nodes.inputFlexArrays}getCloseRadius(t){return this.attributeLayerData.nodes.inputFlexArrays.radius.get(t)}deleteOpenRadius(t){this.layer.getFlexArrays().nodes.radius.set(t,void 0)}initCurvature(t){const e=this.attributeLayerData.edges.inputFlexArrays.curvature,i=this.attributeLayerData.edges.outputFlexArrays.curvature;for(let n=0;n<t.length;n++)i.set(t[n],e.get(t[n]))}deleteCurvatures(t){const e=this.layer.getFlexArrays().edges.curvature;for(let i=0;i<t.length;i++)e.set(t[i],void 0)}hideNode(t){this.hiddenNodes.add(t)}showNode(t){this.hiddenNodes.delete(t)}hideNodes(t){for(const e of t)this.hiddenNodes.add(e)}showNodes(t){for(const e of t)this.hiddenNodes.delete(e)}hideEdge(t){this.hiddenEdges.add(t)}showEdge(t){this.hiddenEdges.delete(t)}hideEdges(t){for(const e of t)this.hiddenEdges.add(e)}showEdges(t){for(const e of t)this.hiddenEdges.delete(e)}pushBefore(t){Array.isArray(t)?this.before.push(...t):this.before.push(t)}pushAfter(t){Array.isArray(t)?this.after.push(...t):this.after.push(t)}setXY(t,e,i){this.xs.set(t,e),this.ys.set(t,i)}getXYR(t){const e=this.xs,i=this.ys,n=this.rs,s=t.getAttributes(["x","y","radius"]);for(let r=0;r<t.size;r++){const a=t._indexes[r];e.has(a)&&(s[r].x=e.get(a)),i.has(a)&&(s[r].y=i.get(a)),n.has(a)&&(s[r].radius=n.get(a))}return s}setR(t,e){this.rs.set(t,e)}setRs(t,e){for(let i=0;i<t.length;i++)this.rs.set(t[i],e[i])}setCurvatures(t,e){for(let i=0;i<t.length;i++)this.curvatures.set(t[i],e[i])}setCurvature(t,e){this.curvatures.set(t,e)}hideNodesAfter(t){for(let e=0;e<t.length;e++)this.afterMod.nodesToHide.add(t[e])}hideEdgesAfter(t){for(let e=0;e<t.length;e++)this.afterMod.edgesToHide.add(t[e])}setOpenRadius(t,e){this.attributeLayerData.nodes.outputFlexArrays.radius.set(t,e)}push(t){Array.isArray(t)?this.animations.push(...t):this.animations.push(t)}enable(){this.enabled=!0}disable(){this.enabled=!1}getMaxAnimation(t,e){return(typeof t=="number"?t:t.duration)>(typeof e=="number"?e:e.duration)?t:e}isApplying(){return this.applying}},jx=(...t)=>{const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)n.hasOwnProperty(s)&&(Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=Array.from(new Set(e[s].concat(n[s]))):AT(e[s])&&AT(n[s])?e[s]=jx(e[s],n[s]):e[s]=n[s])}return e};function sg(t,e,i){const n=typeof e=="string"?e.split("."):e;for(let s=0;s<n.length-1;++s){const r=n[s];let a=t[r];a||(a={},t[r]=a),t=a}t[n[n.length-1]]=i}function aH(t){let e=0,i=0;const n=t.length;if(n===0)throw new Error("Ogma transformations: Compute centroid: at least one point is required");for(let s=0;s<n;++s){const r=t[s];e+=r.x,i+=r.y}return e/=n,i/=n,{x:e,y:i}}function lH(t,e){const i=t.get(0);return{data:i.getData(),attributes:i.getAttributes(e)}}function up(t,e){return`gen_grp_${e}_${t}`}function AT(t){return!(!t||t.constructor!==Object&&t.constructor)}function uH(t){return t.map(({id:e,source:i,target:n})=>({id:e,source:i,target:n}))}function hH(t,e,i,n){let s=e,r=i;return!n&&s.toString()>r.toString()&&(s=i,r=e),`${t}[${s}-${r}]`}function dH(t){if(t===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof t!="string"&&(typeof t!="number"||!isFinite(t)))throw new Error(`Ogma transformation: ${t} is not a valid id, expected string or number`);return t}function gm(t){return`data.${t}`}var cH=class{constructor(t){this.groupsByDepth=new Map,this.treeMap=new Map,this.dataMap=new Map,this.invalidEdges=new Map,this.edges=new Map,this.ogma=t.ogma,this.module=t.module,this.enabled=t.enabled===void 0||t.enabled,this.onGetSubgraph=t.onGetSubgraph,this.duration=t.duration||0,this.easing=t.easing||"quadraticOut",this.parentPath=t.parentPath||"parent",this.depthPath=t.depthPath||"depth",this.padding=t.padding||0,this.nodeGenerator=t.nodeGenerator||(()=>({})),this.showContents=t.showContents===void 0||t.showContents,this.onGroupUpdate=t.onGroupUpdate||(()=>Promise.resolve()),this.copyData=t.copyData===void 0||t.copyData,this.context={virtualEdges:this.ogma.edgeList()}}createGrouping(t){var e;const{ogma:i,groupsByDepth:n}=this,s=i.transformations.addNodeGrouping({selector:a=>a.getData(this.depthPath)===t,groupIdFunction:a=>a.getData(this.parentPath),showContents:a=>typeof this.showContents=="boolean"?this.showContents:this.showContents(a,t),onBeforeAddMetaEdges:(a,u)=>this.addEdges(a,u),onGroupUpdate:(a,u,h)=>this.onGroupUpdate(a,u,h,t),padding:a=>typeof this.padding=="number"?this.padding:this.padding(a,t),duration:this.duration,enabled:this.enabled,nodeGenerator:(a,u)=>{const h=this.nodeGenerator(a,u,s);return this.copyData&&(h.data||(h.data={}),h.data={...h.data,...this.dataMap.get(u)}),sg(h,gm(this.parentPath),this.treeMap.get(u)),sg(h,gm(this.depthPath),t-1),h.id=u,h}});if(!n.size)return n.set(t,s);const r=Array.from(n.keys()).reduce((a,u)=>Math.max(a,u));n.set(t,s),s.setIndex((e=n.get(r))==null?void 0:e.getIndex())}async drill(t){if(!this.treeMap.has(t.getId()))try{const{ogma:e,groupsByDepth:i}=this;e.modules.graphics.pauseRendering();const n=t.getId(),s=this.getGroupId(n);this.treeMap.set(s,t.getData(this.parentPath)),this.dataMap.set(s,t.getData());const r=t.getData(this.depthPath)||0,a=t.getPosition(),u=await this.onGetSubgraph(t);this.edges.set(s,t.getAdjacentEdges().map(c=>{const g=c.getSource().getId(),_=c.getTarget().getId();return{source:g===n?s:g,target:_===n?s:_,data:{...c.getData()}}})),u.nodes.forEach(c=>{sg(c,gm(this.parentPath),s),sg(c,gm(this.depthPath),r+1),c.attributes||(c.attributes={}),c.attributes.x=a.x,c.attributes.y=a.y}),this.module.pause(),e.removeEdges(t.getAdjacentEdges()),e.removeNode(t),await e.view.afterNextFrame(),await e.addNodes(u.nodes);const h=u.edges.filter(c=>{const g=c.source,_=c.target;if(e.getNode(g)&&e.getNode(_))return!0;const m=e.getNode(g)?_:g;return this.invalidEdges.has(m)?this.invalidEdges.get(m).push(c):this.invalidEdges.set(m,[c]),!1});u.nodes.forEach(c=>{if(!this.invalidEdges.has(c.id))return;const{valid:g,invalid:_}=this.invalidEdges.get(c.id).reduce((m,v)=>(e.getNode(v.source)&&e.getNode(v.target)?m.valid.push(v):m.invalid.push(v),m),{valid:[],invalid:[]});e.addEdges(g),_.length?this.invalidEdges.set(c.id,_):this.invalidEdges.delete(c.id)}),await e.addEdges(h),i.has(r+1)||this.createGrouping(r+1),this.module.resume(),e.modules.graphics.resumeRendering(),await this.module.afterNextUpdate()}catch(e){throw ogma.modules.graphics.resumeRendering(),e}}async addEdges(t,e){e.forEach(i=>{const n=this.edges.get(i.getId());n&&this.ogma.addEdges(n,{virtual:!0}).then(s=>{this.context.virtualEdges=this.context.virtualEdges.concat(s)})})}getGroupId(t){return`ogma-group-${t}`}getMaxDepth(){return this.groupsByDepth.size}disable(t){return this.enabled=!1,this.duration=typeof t=="number"?t:this.duration,this.easing=typeof t=="object"?t.easing:this.easing,this.groupsByDepth.forEach(e=>e.disable(t)),this.module.animations.hideEdges(this.context.virtualEdges._indexes),this.context.virtualEdges.setSelected(!0),this.module.afterNextUpdate()}enable(t){return this.enabled=!0,this.duration=typeof t=="number"?t:this.duration,this.easing=typeof t=="object"?t.easing:this.easing,this.groupsByDepth.forEach(e=>e.enable(t)),this.module.animations.showEdges(this.context.virtualEdges._indexes),this.module.afterNextUpdate().then(()=>this.context.virtualEdges.setVisible(!0))}toggle(t){return this.enabled?this.disable(t):this.enable(t)}setOptions(t){this.onGetSubgraph=t.onGetSubgraph?t.onGetSubgraph:this.onGetSubgraph,this.duration=t.duration!==void 0?t.duration:this.duration,this.easing=t.easing||this.easing,this.parentPath=t.parentPath||this.parentPath,this.depthPath=t.depthPath||this.depthPath,this.padding=t.padding!==void 0?t.padding:this.padding,this.nodeGenerator=t.nodeGenerator||this.nodeGenerator,this.showContents=t.showContents!==void 0?t.showContents:this.showContents,this.onGroupUpdate=t.onGroupUpdate||this.onGroupUpdate,this.copyData=t.copyData!==void 0?t.copyData:this.copyData;const e=this.enabled;return this.enabled=t.enabled!==void 0?t.enabled:this.enabled,this.enabled!==e&&this.groupsByDepth.forEach(i=>this.enabled?i.enable({duration:this.duration,easing:this.easing}):i.disable({duration:this.duration,easing:this.easing})),this.groupsByDepth.forEach(i=>i.refresh()),this.module.afterNextUpdate()}onRemove(t){this.context.virtualEdges=this.context.virtualEdges.filter(e=>!t.has(e._index))}},fH=class{constructor(t){this.drilldowns=[],this.module=t}addDrilldown(t){this.drilldowns.push(t)}removeDrilldown(t){this.drilldowns=this.drilldowns.filter(e=>e!==t)}onRemove(t,e){e||this.drilldowns.forEach(i=>i.onRemove(t))}},mg=2,gH=class{constructor(t,e){this.enabled=!1,this.relayouted=new Set,this.shouldRelayout=new Set,this.layoutPerGroup=new Map,this.nextLayout=new Map,this.nextOnGroupUpdate=null,this.ogma=t,this.module=e,this.ogma.events.on("layoutPrepare",i=>{if(!i.params.nodes)return;const n=i.params.nodes,s=Array.isArray(n)?this.ogma.getNode(n[0])._index:n._indexes[0],r=this.module.nodeToMeta.get(s);if(!r)return;const a={...i,params:{...i.params}};delete a.params.nodes,delete a.params.groups,this.layoutPerGroup.set(r._index,a)})}getNodesToRecompute(t){const e=Array.from(t),i=new Set,n=[];for(;e.length>0;){const s=e.shift();if(i.has(s))continue;n.push(s),i.add(s);const r=this.module.nodeToMeta.get(s);r&&e.push(r._index)}return this.ogma.nodeList(n)}async layoutGroups(t,e,i=!1){this.module.animations.enable(),this.enable();const n=new Map,s=this.ogma.getNodes(t.map(({groupId:u})=>u));t.forEach(({groupId:u,layout:h,params:c},g)=>{n.set(u,()=>this.ogma.layouts[h]({...c,nodes:this.module.metaToNodes.get(s.get(g)._index)}))});const r=this.getNodesToRecompute(s._indexes),a=new Map;r.forEach(u=>a.set(u._index,this.module.nodeToTransformation.get(u._index).getIndex())),r.sort((u,h)=>a.get(u._index)-a.get(h._index));for(let u=0;u<r.size;u++){const h=a.get(r._indexes[u]);let c;for(c=u+1;c<r.size&&a.get(r._indexes[c])===h;c++);const g=r.slice(u,c);u=c-1,await Promise.all(g.map(_=>{this.relayouted.add(_._index);let m=Promise.resolve();if(n.has(_.getId()))m=n.get(_.getId())();else if(i&&this.layoutPerGroup.has(_._index)){const v=this.module.metaToNodes.get(_._index),b=this.layoutPerGroup.get(_._index);m=this.ogma.layouts[b.name]({...b.params,nodes:v})}return m.then(()=>{this.module.groupController.setGroupXYR(_)})}))}return await this.module.groupController.onAfterLayouts(),this.module.animations.apply(e||0).finally(()=>{this.disable(),this.module.animations.disable(),this.relayouted.clear()})}setNextLayout(t,e){this.nextLayout.set(t,e)}getNextLayout(t){const e=this.nextLayout.get(t);return this.nextLayout.delete(t),e}setNextOnGroupUpdate(t){this.nextOnGroupUpdate=t}getNextOnGroupUpdate(){const t=this.nextOnGroupUpdate;return this.nextOnGroupUpdate=null,t}hasRelayouted(t){return this.relayouted.has(t)}enable(){this.enabled=!0}disable(){this.enabled=!1}clear(){this.relayouted.clear(),this.shouldRelayout.clear()}},_m=14,_H=class{constructor(t,e){this.subNodeOffsetX=new Map,this.subNodeOffsetY=new Map,this.openRadius=new Map,this.isExpanding=new Set,this.alreadyGrouped=new Set,this.openGroups=new Set,this.closeGroups=new Set,this.nodeGroupinCount=0,this.destroyed=!1,this.nodeLayer=new Map,this.edgeLayer=new Map,this.savedNodeLayer=new Map,this.savedEdgeLayer=new Map,this.padding=new Map,this.geoRadius=new Map,this.collapsedGroups=new Set,this.hasUpdated=new Set,this.onGroupsUpdate=()=>Promise.resolve(),this.shouldRunGroupUpdate=!1,this.runningLayouts=!1,this.onSetMultipleAttributes=({elements:n,values:s,options:r,updatedAttributes:a,promises:u})=>{if(this.module.isRefreshing()||this.destroyed||this.runningLayouts||this.module.animations.isApplying())return;const h=new Set(a),c=s;if(!n.isNode||!h.has("x")&&!h.has("y")&&!h.has("radius"))return Promise.resolve();const g=n.toList();if(!g.size)return Promise.resolve();const _=[],m=new Set,v=Array.from(g._indexes);for(;v.length;){const x=v.shift(),M=this.module.nodeToMeta.get(x);if(!M||m.has(M._index))continue;const N=this.getGroupXYR(M,this.module.getSubNodes(M),g,c);N.isGeo?_.push(M.setAttribute("radius",N.radius,r)):(delete N.isGeo,this.closeGroups.has(M._index)||this.collapsedGroups.has(M._index)?(this.openRadius.set(M._index,N.radius),this.module.animations.setXY(M._index,N.x,N.y)):this.module.animations.setXYR(M._index,N.x,N.y,N.radius),m.add(M._index)),v.push(M._index)}const b=g.map((x,M)=>{if(!this.openGroups.has(x._index))return null;const N=x.getPosition();return Array.isArray(c)&&c[M]?(c[M].x!==void 0&&(N.x=c[M].x),c[M].y!==void 0&&(N.y=c[M].y)):(c.x!==void 0&&(N.x=c.x),c.y!==void 0&&(N.y=c.y)),{group:x,position:N}}).filter(x=>x);b.length&&b.forEach(({group:x,position:M})=>this.animateChildren(x,M)),(m.size>0||b.length)&&_.push(this.module.animations.apply(r)),u.push(..._)},this.ogma=t,this.layoutController=new gH(t,e),this.groupLayer=this.ogma.modules.graphics.addAttributeLayer({name:"groups-layer",priority:5.98,edgeAttributes:{layer:n=>this.edgeLayer.get(n._index)},nodeAttributes:{layer:n=>this.nodeLayer.get(n._index)},nodeDependencies:void 0,edgeDependencies:void 0});const i=t.styles.getClass("_group-fading_");this.fadingClass=i||this.ogma.styles.createClass({name:"_group-fading_",nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this.module=e,t.events.on("setMultipleAttributes",this.onSetMultipleAttributes).on("beforeGeoCameraMove",({zoom:n})=>{const s=this.ogma.nodeList(Array.from(this.geoRadius.keys())).filter(r=>r&&!this.collapsedGroups.has(r._index)&&this.openGroups.has(r._index));s.forEach(r=>{const a=this.geoRadius.get(r._index)*2**n;this.module.animations.setOpenRadius(r._index,a)}),this.ogma.modules.geo._projection&&this.ogma.modules.geo._projection.updateElements(s)}).on(["geoEnabled","beforeGeoDisabled"],()=>this._onToggleGeo()).on("geoNodesMoved",({nodes:n})=>{const s=n._indexes;for(let r=0;r<s.length;r++){const a=this.module.getMetaNode(n.get(r));!a||!this.openGroups.has(a._index)||this.layoutController.shouldRelayout.add(a._index)}})}setSubEltsLayer(t,e,i){const n=i?mg:-2;if(!this.isOpen(t))return;const s=this.module.getSubNodes(t);s.forEach(a=>{this.nodeLayer.set(a._index,e+n),this.setSubEltsLayer(a,e+n,i)});const r=s.getAdjacentEdges({bothExtremities:!0});for(let a=0;a<r.size;a++)this.edgeLayer.set(r._indexes[a],e+n)}setNodeGroupingCount(t){this.nodeGroupinCount=t}getNodeGroupingCount(){return this.nodeGroupinCount}updateGroupLayer(t,e){this.groupLayer.updateElements(t||this.ogma.getNodes()),this.groupLayer.updateElements(e||this.ogma.getEdges())}closeGroup(t,e,i,n,s=!1){const r=[e],a=this.closeGroups.has(t._index)||this.collapsedGroups.has(t._index);this.openGroups.delete(t._index),this.closeGroups.add(t._index),this.hasUpdated.add(t._index);const u=this.module.animations,h=s?0:u.getCloseRadius(t._index),c=u.getOpenRadius(t._index);if(c!==void 0&&!a&&this.openRadius.set(t._index,c),u.setXYR(t._index,i,n,h),s)return;for(;r.length;){const _=r.shift(),m=_._indexes,v=_.getAdjacentEdges({bothExtremities:!0}),b=new Set;for(let M=0;M<v._indexes.length;M++)b.add(v._indexes[M]);const x=_.getAdjacentEdges({bothExtremities:!1}).filter(M=>!b.has(M._index));u.setXYR(m,i,n,h),u.hideNodesAfter(m),u.hideEdgesAfter(v._indexes),u.hideEdgesAfter(x._indexes),u.pushAfter(()=>{const M=[];for(let N=0;N<m.length;N++){const O=this.closeGroups.has(m[N]);u.deleteOpenRadius(t._index),M.push(O?h:this.openRadius.get(m[N]))}this.module.animations.setRs(_._indexes,M)});for(let M=0;M<m.length;M++){if(!this.openGroups.has(m[M]))continue;const N=_.get(M);this.collapsedGroups.add(N._index);const O=this.module.getSubNodes(_.get(M));O.size&&r.push(O)}}const g=this.module.getMetaNode(t);g&&this.openGroups.has(g._index)&&this.layoutController.shouldRelayout.add(g._index)}setGroupXYR(t){const e=this.getGroupXYR(t,this.module.getSubNodes(t),void 0,void 0);e.isGeo?(this.setGeoLatLng(t,e.y,e.x),this.module.animations.setR(t._index,e.radius)):this.module.animations.setXYR(t._index,e.x,e.y,e.radius)}setGeoLatLng(t,e,i){this.ogma.modules.data.setProperty(t,this.ogma.modules.geo.latitudePath,e,{virtual:!0}),this.ogma.modules.data.setProperty(t,this.ogma.modules.geo.longitudePath,i,{virtual:!0})}expandGroup(t,e,i=!1){const n=this.module.animations,s=t.getPosition();i||(this.openGroups.add(t._index),this.closeGroups.delete(t._index),this.collapsedGroups.delete(t._index)),this.isExpanding.add(t._index),this.hasUpdated.add(t._index);const r=[{subNodes:e,offset:this.getOffset(t._index),isClosed:!1,wasCollapsed:!0}];for(;r.length;){const{subNodes:u,offset:h,isClosed:c,wasCollapsed:g}=r.shift();if((c||g)&&n.pushBefore(()=>u.setAttributes({x:s.x+h.x,y:s.y+h.y},0)),c)continue;const _=u._indexes,m=u.getAdjacentEdges({bothExtremities:!0,filter:"all"});u.setVisible(!0),m.setVisible(!0);for(let v=0;v<_.length;v++){const b=this.closeGroups.has(_[v]),x=this.collapsedGroups.has(_[v]);n.setXYR(_[v],s.x+h.x+this.subNodeOffsetX.get(_[v])||0,s.y+h.y+this.subNodeOffsetY.get(_[v])||0,b?this.module.animations.getCloseRadius(_[v]):this.openRadius.get(_[v])),this.collapsedGroups.delete(_[v]);const M=this.module.getSubNodes(u.get(v));M.size&&r.push({subNodes:M,isClosed:b,wasCollapsed:x,offset:{x:h.x+this.subNodeOffsetX.get(_[v])||0,y:h.y+this.subNodeOffsetY.get(_[v])||0}})}}const a=this.module.getMetaNode(t);a&&this.openGroups.has(a._index)&&this.layoutController.shouldRelayout.add(a._index),n.setXYR(t._index,s.x,s.y,i?0:this.openRadius.get(t._index))}getOffset(t){return this.collapsedGroups.has(t)&&this.subNodeOffsetX.has(t)?{x:this.subNodeOffsetX.get(t),y:this.subNodeOffsetY.get(t)}:{x:0,y:0}}restorePositions(t,e){const i=t.getPosition(),n=(e=e.filter(a=>!a.isVirtual()))._indexes,s=this.getOffset(t._index),r=[];for(let a=0;a<n.length;a++)r.push({x:s.x+i.x+this.subNodeOffsetX.get(n[a])||0,y:s.x+i.y+this.subNodeOffsetY.get(n[a])||0});e.setAttributes(r,0)}animateChildren(t,e){const i=[{parent:t,position:e}];for(;i.length;){const{parent:n,position:s}=i.shift();if(!n.isNode)continue;const r=this.module.getSubNodes(n);r.size&&r.forEach(a=>{const u=this.subNodeOffsetX.get(a._index)||0,h=this.subNodeOffsetY.get(a._index)||0,c={x:s.x+u,y:s.y+h};this.module.animations.setXY(a._index,c.x,c.y),i.push({parent:a,position:c})})}}addOpenGroup(t){this.openGroups.add(t._index),this.closeGroups.delete(t._index)}isOpen(t){return this.openGroups.has(t._index)}isClose(t){return this.closeGroups.has(t._index)}setPadding(t,e){const i=new Set,n=isNaN(+e),s=e;return t.forEach(r=>{const a=n?s(r):+e;this.padding.get(r._index)!==a&&i.add(r._index),this.padding.set(r._index,a)}),i}getGroupXYR(t,e,i,n){let s,r,a;const u=this.module.animations,h=this.ogma.geo.enabled();if(s=new Array(e.size).fill(0),r=new Array(e.size).fill(0),a=new Array(e.size).fill(0),h){const b=e.getData(this.ogma.modules.geo.latitudePath),x=e.getData(this.ogma.modules.geo.longitudePath);s=[],r=[],a=[];for(let M=0;M<b.length;M++){const{x:N,y:O}=this.ogma.geo.getMap().project({lat:b[M],lng:x[M]},_m);s.push(N),r.push(O),a.push(2**_m*this.geoRadius.get(e._indexes[M])||10)}}else{const b=this.ogma.modules.graphics.getAttributesManager()._layerController.nodes._currentFlexArrays,x=this.openGroups.has(t._index),M=this.isExpanding.has(t._index),N=x&&!M?b.radius:u.getInputFlexArrays().radius;for(let O=0;O<e.size;O++)s[O]=b.x.get(e._indexes[O]),r[O]=b.y.get(e._indexes[O]),a[O]=N.get(e._indexes[O])}if(i&&n&&i.isNode){const b=i._indexes,x=new Map,M=new Map,N=new Map;for(let R=0;R<b.length;R++){const P=Array.isArray(n)?n[R]:n;!isNaN(P.x)&&x.set(b[R],P.x),!isNaN(P.y)&&M.set(b[R],P.y),!isNaN(P.radius)&&N.set(b[R],P.radius)}const O=e._indexes;for(let R=0;R<O.length;R++)x.has(O[R])&&(s[R]=x.get(O[R])),M.has(O[R])&&(r[R]=M.get(O[R])),N.has(O[R])&&(a[R]=N.get(O[R]))}const c=e._indexes;for(let b=0;b<c.length;b++)this.openRadius.has(c[b])&&(a[b]=this.openRadius.get(c[b]));if(!h)for(let b=0;b<c.length;b++)u.xs.get(c[b])!==void 0&&(s[b]=u.xs.get(c[b])),u.ys.get(c[b])!==void 0&&(r[b]=u.ys.get(c[b])),u.rs.get(c[b])!==void 0&&(a[b]=u.rs.get(c[b]));let g=0,_=0,m=0;const v=uN.algorithms.minDisk(s,r,a);if(g=v[0],_=v[1],m=v[2],m+=this.padding.get(t._index)||0,h){const{lat:b,lng:x}=this.ogma.geo.getMap().unproject({x:g,y:_},_m);g=x,_=b,m/=2**_m,this.geoRadius.set(t._index,m),m*=2**this.ogma.geo.getZoom()}else this.openRadius.set(t._index,m),e.forEach((b,x)=>{this.subNodeOffsetX.set(b._index,s[x]-g),this.subNodeOffsetY.set(b._index,r[x]-_)});return{x:g,y:_,radius:m,isGeo:h}}async onAfterLayouts(){const t=this.module.animations,e=this.module.getList().filter(r=>r.getName()===so.NodeGrouping&&r.isEnabled()),i=[];let n=!1;for(let r=e.length-1;r>=0;r--)e[r].getContext().metaNodes.forEach(a=>{if(a.getMetaNode())return;n||(n=this.hasUpdated.has(a._index)||this.layoutController.relayouted.has(a._index)||this.layoutController.shouldRelayout.has(a._index));const u=!this.collapsedGroups.has(a._index)&&!this.closeGroups.has(a._index);i.push({group:a,collapsed:!u})});if(n||this.shouldRunGroupUpdate){this.shouldRunGroupUpdate=!1;const r=this.ogma.getNodes().filter(c=>!this.module.nodeToMeta.has(c._index)),a=new Array(r.size);for(let c=0;c<r.size;c++)a[c]=this.openRadius.get(r._indexes[c])||this.module.animations.getCloseRadius(r._indexes[c])||0;const u=this.layoutController.getNextOnGroupUpdate();this.module.animations.enable();const h=u?await u(r,a):await this.onGroupsUpdate(r,a);this.module.animations.disable(),this.module.animations.handleGlobalLayout(h&&Array.isArray(h)?h:null,r._indexes)}const s=new Set;for(;i.length;){const{group:r,collapsed:a}=i.shift();if(s.has(r._index))continue;s.add(r._index);const u=this.module.getSubNodes(r),h=u._indexes,c=t.xs.get(r._index),g=t.ys.get(r._index);if(c!==void 0&&g!==void 0){if(a){t.deleteOpenRadius(r._index);for(let _=0;_<h.length;_++)t.setXY(h[_],c,g)}else for(let _=0;_<h.length;_++)t.setXY(h[_],c+this.subNodeOffsetX.get(h[_])||0,g+this.subNodeOffsetY.get(h[_])||0);for(let _=0;_<h.length;_++)this.module.isVirtual(h[_],!0)&&i.push({group:u.get(_),collapsed:this.collapsedGroups.has(h[_])||this.closeGroups.has(h[_])||a})}}this.hasUpdated.clear(),this.layoutController.clear(),this.isExpanding.clear()}cleanup(t,e,i){let n=t._indexes;for(let s=0;s<n.length;s++)this.padding.delete(n[s]),this.openGroups.delete(n[s]),this.closeGroups.delete(n[s]),this.nodeLayer.delete(n[s]),this.savedNodeLayer.delete(n[s]),this.savedEdgeLayer.delete(n[s]);for(let s=0;s<e.size;s++)this.edgeLayer.delete(e._indexes[s]);if(i){n=i._indexes;for(let s=0;s<n.length;s++)this.subNodeOffsetX.delete(n[s]),this.subNodeOffsetY.delete(n[s])}}getPositions(t,e){const{x:i,y:n}=t.getPosition();return e.map(s=>({x:i+(this.subNodeOffsetX.get(s._index)||0),y:n+(this.subNodeOffsetY.get(s._index)||0)}))}hideSubNodes(t){const e=[t];for(;e.length;){const i=e.pop();i.setVisible(!1);for(let n=0;n<i._indexes.length;n++)this.collapsedGroups.add(i._indexes[n]),this.openGroups.has(i._indexes[n])&&e.push(this.module.getSubNodes(i.get(n)))}}onRemove(t,e){if(!e)return;const i=[],n=new Set;for(let s=0;s<t.length;s++){const r=this.module.nodeToMeta.get(t[s]);if(!r)continue;const a=r._index;this.openRadius.delete(a),this.isExpanding.delete(a),this.alreadyGrouped.delete(a),this.collapsedGroups.delete(a),this.closeGroups.delete(a),this.openGroups.delete(a),this.padding.delete(a),this.geoRadius.delete(a),this.hasUpdated.delete(a),this.subNodeOffsetX.delete(a),this.subNodeOffsetY.delete(a),this.nodeLayer.delete(a),this.edgeLayer.delete(a),this.savedNodeLayer.delete(a),this.savedEdgeLayer.delete(a),this.openGroups.has(a)&&(this.layoutController.shouldRelayout.add(a),i.push(a))}for(;i.length;){const s=i.shift();if(n.has(s))continue;n.add(s);const r=this.module.nodeToMeta.get(s);r&&this.openGroups.has(r._index)&&(this.layoutController.shouldRelayout.add(r._index),i.push(r._index))}}async fishEyeExpand(t,e,i){if(!t.isVirtual())throw new Error("Focus node is not virtual.");const n=this.module.nodeToMeta.get(t._index);if(n&&n.isVisible())throw new Error("Focus node is not at top level.");const s=this.module.animations,r=this.ogma,a=s.getCloseRadius(t._index);i&&(this.layoutController.setNextLayout(t._index,i),this.layoutController.shouldRelayout.add(t._index)),this.layoutController.setNextOnGroupUpdate(async u=>{const h=s.getXYR(t.toList())[0].radius-a,c=s.getXYR(u);return await r.algorithms.fishEyeExpand({nodes:u,focusNode:t,dryRun:!0,deltaRadius:h,xyr:c})}),await e(),await this.module.afterNextUpdate()}setNodeLayer(t,e){this.nodeLayer.set(t,e),this.savedNodeLayer.set(t,e)}setEdgeLayer(t,e){this.edgeLayer.set(t,e),this.savedEdgeLayer.set(t,e)}async fishEyeCollapse(t,e){if(!t.isVirtual())throw new Error("Focus node is not virtual.");const i=this.module.nodeToMeta.get(t._index);if(i&&i.isVisible())throw new Error("Focus node is not at top level.");const n=this.module.animations,s=this.ogma,r=t.getAttribute("radius");this.layoutController.setNextOnGroupUpdate(async a=>{const u=n.getXYR(t.toList())[0].radius-r,h=n.getXYR(a);return await s.algorithms.fishEyeExpand({nodes:a,focusNode:t,dryRun:!0,deltaRadius:u,xyr:h})}),await e(),await this.module.afterNextUpdate()}triggerGroupsUpdate(){this.shouldRunGroupUpdate=!0}layoutGroups(t,e,i=!1){return this.runningLayouts=!0,this.layoutController.layoutGroups(t,e,i).finally(()=>{this.runningLayouts=!1})}_onToggleGeo(){this.geoRadius.clear();const t=this.module.getList().find(i=>i.getName()===so.NodeGrouping);if(!t)return;const e=Array.from(this.openGroups.keys());for(let i=0;i<e.length;i++)this.layoutController.shouldRelayout.add(e[i]);t.refresh()}startRefresh(){this.alreadyGrouped.clear()}clear(){this.subNodeOffsetX.clear(),this.subNodeOffsetY.clear(),this.openRadius.clear(),this.isExpanding.clear(),this.layoutController.clear(),this.alreadyGrouped.clear(),this.openGroups.clear(),this.closeGroups.clear(),this.nodeLayer.clear(),this.edgeLayer.clear(),this.padding.clear(),this.geoRadius.clear(),this.collapsedGroups.clear(),this.hasUpdated.clear()}destroy(){this.destroyed||(this.destroyed=!0,this.ogma.events.off(this.onSetMultipleAttributes))}},mH=class{constructor(t){this.ogma=t}save(){this.selectedNodes=this.ogma.getSelectedNodes(),this.selectedEdges=this.ogma.getSelectedEdges(),this.ogma.modules.selection.disableEvents()}restore(){const t=this.selectedNodes.filter(s=>!this.ogma.getNode(s.getId())),e=this.selectedEdges.filter(s=>!this.ogma.getEdge(s.getId())),i=new Set,n=new Set;if(t.size){this.ogma.modules.events.fire("nodesUnselected",{nodes:t});for(let s=0;s<t.size;s++)i.add(t._indexes[s])}if(e.size){this.ogma.modules.events.fire("edgesUnselected",{edges:e});for(let s=0;s<e.size;s++)n.add(e._indexes[s])}this.selectedNodes.filter(s=>!s.isSelected()&&!i.has(s._index)).setSelected(!0),this.selectedEdges.filter(s=>!s.isSelected()&&!n.has(s._index)).setSelected(!0),this.ogma.modules.selection.enableEvents()}cleanup(){this.selectedNodes=void 0,this.selectedEdges=void 0,this.ogma.modules.selection.enableEvents&&this.ogma.modules.selection.enableEvents()}},pH={setData:!1,addElement:!0,removeElement:!0,setOptions:!1,refresh:!1},yH=class Jx{constructor(){this.prev={},this.next={},this.prevorder=[],this.nextorder=[],this.shouldAnimate=!1,this.minRefreshIndex=0}addTransformation(e,i){this.next[e]=i,this.nextorder.push(e)}removeTransformation(e){delete this.next[e]}setIndex(e,i){const n=this.nextorder.indexOf(e);this.nextorder.splice(n,1),this.nextorder.splice(i,0,e),this.minRefreshIndex=Math.min(this.minRefreshIndex,n,i)}setEnabled(e,i){this.next[e]=i}isEnabled(e){return this.prev[e]||!1}static getDiff(e,i){const n=new Map;for(const s in e)i[s]!==void 0?i[s]!==e[s]&&n.set(+s,{shouldDo:i[s],shouldUndo:e[s]}):n.set(+s,{shouldDo:!1,shouldUndo:e[s],shouldCleanup:!0});for(const s in i)e[s]===void 0&&i[s]===!0&&n.set(+s,{shouldDo:!0,shouldUndo:!1});return n}getFirstChange(e){const{nextorder:i}=this;let n=i.length;for(let s=0;s<i.length;s++){const r=e.get(i[s]);if(r&&(r.shouldUndo||r.shouldDo)){n=s;break}}return n}refreshFrom(e,i){const{nextorder:n}=this;for(let s=i;s<this.nextorder.length;s++)e.set(n[s],{shouldUndo:this.prev[n[s]],shouldDo:this.prev[n[s]],...e.get(n[s])||{}});return e}isDirty(){const e=Jx.getDiff(this.prev,this.next),i=Math.min(this.minRefreshIndex,this.getFirstChange(e));return(e.size>0||i<this.nextorder.length)&&{reason:e.size>0?"diff":"refresh",index:i}}invalidateFrom(e,i){this.shouldAnimate||(this.shouldAnimate=pH[i]),this.minRefreshIndex=Math.min(this.minRefreshIndex,e)}step(){const e=Jx.getDiff(this.prev,this.next);this.prev={...this.next};const i=Math.min(this.minRefreshIndex,this.getFirstChange(e)),n=this.nextorder.reduce((a,u,h)=>a.set(u,h),new Map),s=this.prevorder.reduce((a,u,h)=>a.set(u,h),new Map);this.nextorder=this.nextorder.filter(a=>this.prev[a]!==void 0),this.prevorder=[...this.nextorder],this.minRefreshIndex=this.nextorder.length;const r=this.shouldAnimate;return this.shouldAnimate=!1,{diff:this.refreshFrom(e,i),nextorder:n,prevorder:s,shouldAnimate:r}}done(){}},vH=class{constructor(t){this.transformations=[],this.addingGraph=!1,this.addingElements=!1,this.nodeToTransformation=new Map,this.edgeToTransformation=new Map,this.nodeVirtual=new Set,this.edgeVirtual=new Set,this.nodeToMeta=new Map,this.edgeToMeta=new Map,this.metaToNodes=new Map,this.metaToEdges=new Map,this._onDestroy=()=>{this.destroy()},this._onAddElements=({nodes:e,edges:i,virtual:n})=>{if(n){if(e)for(let s=0;s<e.size;s++)this.nodeVirtual.add(e._indexes[s]);if(i)for(let s=0;s<i.size;s++)this.edgeVirtual.add(i._indexes[s])}else this.addingGraph||this.addingElements||(this.state.invalidateFrom(0,"addElement"),this.invalidate())},this._onSetData=({elements:e,virtual:i})=>{if(i)return;const{isNode:n,_indexes:s}=e;let r=1/0;for(const a of s){const u=this.getTransformation(a,n);if(!u){r=0;break}r=Math.min(r,u.getIndex())}return this.state.invalidateFrom(r,"setData"),this.invalidate(),r},this._onRequestElementsToDelete=e=>{const{elementsToRemove:i}=e,n=i.isNode,s=i._indexes,r=this.getLeafElements(s,n);e.elementsToRemove=n?this.ogma.nodeList(r):this.ogma.edgeList(r)},this._onAfterRemoveElements=({nodes:e,edges:i})=>{if(!this.ogma.isDestroyed()){if(e)for(let n=0;n<e.size;n++)this.nodeVirtual.delete(e._indexes[n]);if(i)for(let n=0;n<i.size;n++)this.edgeVirtual.delete(i._indexes[n])}},this._onRemoveElements=({nodes:e,edges:i,virtual:n})=>{n||this.ogma.isDestroyed()||this._refreshPromise.then(()=>{const s=!!e,r=s?e._indexes:i._indexes,a=new Set(r);this.transformations.forEach(u=>u.onRemove(a,s)),this.groupController.onRemove(r,s),this.drilldownController.onRemove(a,s),s?(this.nodeToMeta.clear(),this.metaToNodes.clear(),this.nodeToTransformation.clear()):(this.edgeToMeta.clear(),this.metaToEdges.clear(),this.edgeToTransformation.clear()),this.state.invalidateFrom(0,"removeElement"),this.invalidate()})},this._onClearGraph=()=>{this.transformations.forEach(e=>{e.cleanup()}),this.groupController.clear(),this.nodeToMeta.clear(),this.edgeToMeta.clear(),this.metaToNodes.clear(),this.metaToEdges.clear(),this.nodeToTransformation.clear(),this.edgeToTransformation.clear(),this.state.invalidateFrom(0,"removeElement"),this.invalidate()},this.ogma=t,this.state=new yH,this.animations=new oH(t),this._shouldRefresh=!1,this._refreshing=!1,this.isDestroyed=!1,this.isPaused=!1,this.selection=new mH(t),this._refreshPromise=Promise.resolve(),this.groupController=new _H(t,this),this.drilldownController=new fH(this),this.ogma.events.on("setData",this._onSetData).on("preAddGraph",()=>{this.addingGraph=!0}).on("postAddGraph",()=>{this.addingGraph=!1,this.state.invalidateFrom(0,"addElement"),this.invalidate()}).on("preAddElements",({virtual:e})=>{e||this.addingGraph||(this.addingElements=!0)}).on("postAddElements",({virtual:e})=>{e||this.addingGraph||(this.addingElements=!1,this.state.invalidateFrom(0,"addElement"),this.invalidate())}).on(["addNodes","addEdges"],this._onAddElements).on(["removeNodes","removeEdges"],this._onRemoveElements).on("clearGraph",this._onClearGraph).on(["afterRemoveNodes","afterRemoveEdges"],this._onAfterRemoveElements).on("requestElementsToDelete",this._onRequestElementsToDelete).on("destroy",this._onDestroy)}addTransformation(t,e=!0){this.state.addTransformation(t.getId(),e),this.transformations.push(t),this.invalidate()}removeTransformation(t){const e=this.transformations.indexOf(t);e!==-1&&this.transformations.splice(e,1),this.invalidate()}async step(t=0,e={fireEnabled:[],fireDisabled:[],fireRefresh:[],fireDestroy:[],fireSetIndex:[]}){var i;if(t>5)throw new Error("Ogma transformations: Transformations refresh in loop");const{diff:n,prevorder:s,nextorder:r}=this.state.step(),{fireEnabled:a,fireDisabled:u,fireRefresh:h,fireDestroy:c,fireSetIndex:g}=e,_=[],m=[],v=[];this.groupController.startRefresh();for(const x of this.transformations){const M=x.getId();if(!n.has(M))continue;const{shouldDo:N,shouldUndo:O,shouldCleanup:R}=n.get(M);N&&!O?a.push(x):O&&!N?u.push(x):N&&O&&h.push(x),s.has(M)&&s.get(M)!==r.get(M)&&g.push(x),O&&_.push(x),N&&m.push(x),R&&(c.push(x),v.push(x))}let b=0;_.sort((x,M)=>s.get(M.getId())-s.get(x.getId())||0);for(const x of _){const M=!((i=n.get(x.getId()))!=null&&i.shouldDo);M&&(b=this.animations.getMaxAnimation(b,x.getAnimation())),await x.undo(M)}m.sort((x,M)=>r.get(x.getId())-r.get(M.getId())||0),this.ogma.modules.graphics.pauseRendering();for(let x=0;x<m.length;x++){const M=m[x],N=x===m.length-1;N&&(b=this.animations.getMaxAnimation(b,M.getAnimation())),await M.run(N)}for(const x of v)await x.cleanup();if((_.length||m.length||v.length)&&(this.groupController.updateGroupLayer(),await this.groupController.onAfterLayouts()),this.ogma.modules.graphics.resumeRendering(),await this.animations.apply(b),!this.isDestroyed)return this.state.isDirty()?this.step(t+1,e):e}refresh(){this.isDestroyed||this.ogma.isDestroyed()||!this._shouldRefresh||!this.transformations.length||this._refreshing||this.addingGraph||this.addingElements||this.isPaused||(this._shouldRefresh=!1,this._refreshing=!0,this._refreshPromise=this._refreshPromise.then(()=>(this.selection.save(),this.step().then(t=>{this._refreshing=!1;const{fireEnabled:e,fireDisabled:i,fireRefresh:n,fireDestroy:s,fireSetIndex:r}=t,a=this.ogma.modules.events;i.reverse().forEach(u=>a.fire("transformationDisabled",{target:u})),e.forEach(u=>a.fire("transformationEnabled",{target:u})),r.forEach(u=>a.fire("transformationSetIndex",{target:u})),n.forEach(u=>a.fire("transformationRefresh",{target:u})),s.forEach(u=>a.fire("transformationDestroyed",{target:u}))}).finally(()=>{this.selection.restore(),this.selection.cleanup(),this.animations.disable(),this.ogma.modules.graphics.resumeRendering()}))).catch(t=>{const e=this.state.isDirty();if(!e)throw new Error(`Ogma transformations, refresh failed.
${t.stack}`);const i=e.reason==="diff"?"You are constantly adding/removing/changing index of a transformation":"You are constantly adding/removing/updating nodes or edges while transformations refresh";throw new Error(`Ogma transformations, refresh failed.
${i}`)}).catch(t=>{if(!this.onRefreshError)throw t;this.onRefreshError(t)}).finally(()=>{}))}enable(t){return this.state.setEnabled(t.getId(),!0),this.invalidate(),this.afterNextUpdate()}disable(t){return this.state.setEnabled(t.getId(),!1),this.invalidate(),this.afterNextUpdate()}remove(t){return this.disable(t),this.state.removeTransformation(t.getId()),this.afterNextUpdate().then(()=>{this.transformations.splice(this.getIndex(t),1)})}isEnabled(t){return this.state.isEnabled(t.getId())}getList(){return this.transformations.slice()}getIndex(t){for(let e=0;e<this.transformations.length;e++)if(this.transformations[e]===t)return e;return-1}setIndex(t,e){const i=this.getIndex(t);this.state.setIndex(t.getId(),e),this.transformations.splice(i,1),this.transformations.splice(e,0,t),this.invalidate()}setOptions(t){this.state.invalidateFrom(this.getIndex(t),"setOptions"),this.invalidate()}refreshTransformation(t){this.state.invalidateFrom(this.getIndex(t),"refresh"),this.invalidate()}clear(){return this.transformations.forEach(t=>t.destroy(0)),this.invalidate(),this.afterNextUpdate()}destroy(){this.transformations.forEach(t=>t.destroy(0)),this.groupController.destroy(),this._refreshPromise=Promise.resolve(),this.isDestroyed=!0}invalidate(){this.ogma.isDestroyed()||(this._shouldRefresh=!0,this.ogma.modules.dom.refresh(),this.ogma.modules.dom.onNextFrame().then(()=>{this.refresh()}))}afterNextUpdate(){return this.ogma.view.afterNextFrame().then(()=>this._refreshPromise)}getTransformation(t,e){return e?this.nodeToTransformation.get(t):this.edgeToTransformation.get(t)}setTransformation(t,e,i){i?this.nodeToTransformation.set(t,e):this.edgeToTransformation.set(t,e)}deleteTransformation(t){const e=t.isNode?this.nodeToTransformation:this.edgeToTransformation,i=t._indexes;for(const n of i)e.delete(n)}setMetaNode(t,e){this.nodeToMeta.set(t,e)}setSubNodes(t,e){this.metaToNodes.set(t,e)}removeMetaNodes(t){const e=t._indexes;for(const i of e){const n=this.metaToNodes.get(i);n&&n.forEach(s=>this.nodeToMeta.delete(s._index)),this.nodeToTransformation.delete(i),this.metaToNodes.delete(i)}}removeMetaEdges(t){const e=t._indexes;for(const i of e){const n=this.metaToEdges.get(i);n&&n.forEach(s=>this.edgeToMeta.delete(s._index)),this.edgeToTransformation.delete(i),this.metaToEdges.delete(i)}}clearSubNodes(t){this.metaToNodes.delete(t)}clearMetaNode(t){this.nodeToMeta.delete(t)}setMetaEdge(t,e){this.edgeToMeta.set(t,e)}setSubEdges(t,e){this.metaToEdges.set(t,e)}clearSubEdges(t){this.metaToEdges.delete(t)}clearMetaEdge(t){this.edgeToMeta.delete(t)}getMetaNode(t){return this.nodeToMeta.get(t._index)||null}getMetaEdge(t){return this.edgeToMeta.get(t._index)||null}getLeafElements(t,e){const i=[t],n=e?this.metaToNodes:this.metaToEdges,s=[];for(;i.length;){const r=i.pop();for(let a=0;a<r.length;a++){s.push(r[a]);const u=n.get(r[a]);u&&i.push(u._indexes)}}return s}getSubElements(t){const e=t.isNode?this.metaToNodes:this.metaToEdges,i=t.toList()._indexes;let n=t.isNode?this.ogma.nodeList():this.ogma.edgeList();for(let s=0;s<i.length;s++){const r=e.get(i[s]);r&&(n=n.concat(r))}return n}getSubNodes(t){return this.getSubElements(t)}getSubEdges(t){return this.getSubElements(t)}getById(t){return this.transformations.find(e=>e.getId()===t)}isIntraEdge(t){const e=t.getSource()._index;return this.nodeToMeta.has(e)&&this.nodeToMeta.get(e)===this.nodeToMeta.get(t.getTarget()._index)}isVirtual(t,e){return e?this.nodeVirtual.has(t):this.edgeVirtual.has(t)}isRefreshing(){return this._refreshing}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.refresh()}},vo="_transparent",kc=t=>!0,xH=()=>{};function hN(t){if(t.keys)return Array.from(t.keys());const e=[];return t.forEach((i,n)=>e.push(n)),e}function hp(t){if(t.values)return Array.from(t.values());const e=[];return t.forEach(i=>e.push(i)),e}function TT(t){return!(!t||t.constructor!==Object&&t.constructor)}var dd=(...t)=>{const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)n.hasOwnProperty(s)&&(Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=Array.from(new Set(e[s].concat(n[s]))):TT(e[s])&&TT(n[s])?e[s]=dd(e[s],n[s]):e[s]=n[s])}return e};function bH(t){return Array.isArray(t)?t:[t]}var $x=()=>!0,dN=()=>!1,EH=()=>null,SH=class extends Th{constructor(t){super(t),this.nodeSelector=t.criteria||kc}setOptions(t){return this.nodeSelector=t.criteria||this.nodeSelector,super.setOptions(t)}getName(){return so.NodeFilter}run(){const t=this.nodeSelector,e=this.ogma.getNodes().filter(u=>!t||!t(u)),i=e.getAdjacentEdges();this.module.animations.hideNodes(e._indexes),this.module.animations.hideEdges(i._indexes),e.setVisible(!1),i.setVisible(!1);const n=e.subtract(this.context.hiddenNodes),s=i.subtract(this.context.hiddenEdges),r=this.context.hiddenNodes.subtract(e),a=this.context.hiddenEdges.subtract(i);return this.module.animations.pushBefore(()=>{r.setVisible(!0),r.setVisible(!0),s.setVisible(!0),n.setVisible(!0),r.addClass(vo),a.addClass(vo)}),this.module.animations.push(()=>Promise.all([a.removeClass(vo,this.animation),r.removeClass(vo,this.animation),n.addClass(vo,this.animation),s.addClass(vo,this.animation)])),this.context={...this.context,hiddenNodes:e,hiddenEdges:i},Promise.resolve()}undo(t=!0){const{hiddenNodes:e,hiddenEdges:i}=this.context,n=t?this.animation:0;return e.setExcluded(!1),i.setExcluded(!1),t&&(e.addClass(vo),i.addClass(vo),this.module.animations.push(()=>Promise.all([e.removeClass(vo,n),i.removeClass(vo,n)])),this.context.hiddenNodes=this.ogma.nodeList(),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(t,e){e?this.context.hiddenNodes=this.context.hiddenNodes.filter(i=>!t.has(i._index)):this.context.hiddenEdges=this.context.hiddenEdges.filter(i=>!t.has(i._index))}resetContext(){this.context={...this.context,hiddenEdges:this.ogma.edgeList(),hiddenNodes:this.ogma.nodeList()}}},AH=class extends Th{constructor(t){super(t),this.edgeSelector=t.criteria||kc}setOptions(t){return this.edgeSelector=t.criteria||this.edgeSelector,super.setOptions(t)}getName(){return so.EdgeFilter}run(){const t=this.edgeSelector,e=this.ogma.getEdges().filter(r=>!t||!t(r)),i=this.module.animations;e.setVisible(!1);const n=e.subtract(this.context.hiddenEdges),s=this.context.hiddenEdges.subtract(e);return this.module.animations.pushBefore(()=>{n.setVisible(!0),s.setVisible(!0),s.addClass(vo)}),i.hideEdges(e._indexes),i.push(()=>Promise.all([s.removeClass(vo,this.animation),n.addClass(vo,this.animation)])),this.context={...this.context,hiddenEdges:e},Promise.resolve()}undo(t=!0){super.undo(t);const{hiddenEdges:e}=this.context,i=t?this.animation:0;return e.setExcluded(!1),t&&(e.addClass(vo),this.module.animations.push(()=>Promise.all([e.removeClass(vo,i)])),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(t,e){e||(this.context.hiddenEdges=this.context.hiddenEdges.filter(i=>!t.has(i._index)))}resetContext(){this.context={...this.context,hiddenEdges:this.ogma.edgeList()}}},Us="_faded",TH=class extends Th{constructor(t){super(t),this.selector=t.selector||dN,this.dataFunction=t.dataFunction||xH}getName(){return so.NeighborMerging}run(t=!0){const{ogma:e}=this,i=t?this.animation:0,n=e.getNodes().filter(this.selector),s=[],r=new Map;for(let m=0;m<n.size;++m){const v=n.get(m),b=v.getAdjacentEdges(),x=this.dataFunction(v);for(let M=0;M<b.size;++M){const N=b.get(M),O=N.getSource(),R=N.getTarget();if(O!==R&&x!==void 0){const P=O===v?R:O;let F=r.get(P);F||(F=[],r.set(P,F)),F.push(x)}s.push(N)}}const a=e.getEdges(s),u=e.getNodes(hN(r)),h=hp(r),c=u.getData(),g=new Array(u.size);for(let m=0;m<g.length;++m){const v=h[m];let b=c[m];for(let x=0;x<v.length;++x)b=dd(b,v[x]);g[m]=b}const _=this.module.animations;return _.hideNodes(n._indexes),_.hideEdges(a._indexes),_.push(()=>Promise.all([n.addClass(Us,i),a.addClass(Us,i)]).then(()=>{this.ogma.modules.data.setProperty(u,null,g,{dispatch:!0,virtual:!0})})),this.context={...this.context,hiddenNodes:n,hiddenEdges:a,nodesWithDataChange:u,oldDataList:c},Promise.resolve()}resetContext(){super.resetContext(),this.context={...this.context,hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),nodesWithDataChange:this.ogma.nodeList(),oldDataList:[]}}undo(t=!0){const{hiddenNodes:e,hiddenEdges:i,nodesWithDataChange:n,oldDataList:s}=this.context,r=t?this.animation:0,a=this.module.animations;return this.context.hiddenEdges=this.ogma.edgeList(),this.context.hiddenNodes=this.ogma.nodeList(),this.context.nodesWithDataChange=this.ogma.nodeList(),this.context.oldDataList=[],e.setVisible(!0),i.setVisible(!0),a.pushBefore(()=>{e.addClass(Us),i.addClass(Us)}),a.push(()=>Promise.all([e.removeClass(Us,r),i.removeClass(Us,r)]).then(()=>{this.ogma.modules.data.setProperty(n,null,s,{dispatch:!0,virtual:!0})})),Promise.resolve()}onRemove(t,e){e&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(i=>!t.has(i._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(i=>!t.has(i._index))}cleanup(){return Promise.resolve()}setOptions(t){return this.selector=t.selector||this.selector,this.dataFunction=t.dataFunction||this.dataFunction,super.setOptions(t)}};function wH(t){return t!=null}var LH=(t,e)=>({source:t.getId(),target:e.getId()}),CH=class extends Th{constructor(t){super(t);const{selector:e=$x,neighborIdFunction:i=EH,nodeGenerator:n=()=>({}),edgeGenerator:s=LH}=t;this.neighborIdFunction=i,this.selector=e,this.generateIds=r=>this.selector(r)&&this.neighborIdFunction(r)||null,this.nodeGenerator=n,this.edgeGenerator=s}getName(){return so.NeighborGeneration}run(t=!0){const{ogma:e,id:i}=this,n=t?this.animation:0,s=e.getNodes(),r=new Map;for(let m=0;m<s.size;++m){const v=s.get(m),b=(MH(this.generateIds(v))||[]).filter(wH);if(b)for(const x of b){let M=r.get(x);M||(M=[],r.set(x,M)),M.push(v)}}const a=new Array(r.size),u=[],h=hN(r),c=hp(r).map(m=>e.getNodes(m));for(let m=0;m<a.length;++m){const v=h[m],b=c[m],x=this.nodeGenerator(v,b);x.id=`_gen_${i}_${v}`;const M=aH(b.getPosition());x.attributes=x.attributes||{},x.attributes.x=M.x,x.attributes.y=M.y,a[m]=x}let g,_;return e.addNodes(a.map(m=>({id:m.id,attributes:m.attributes})),{virtual:!0}).then(()=>{g=e.getNodes(a.map(v=>v.id));const m=g._indexes;this.context.virtualNodes&&this.module.removeMetaNodes(this.context.virtualNodes);for(let v=0;v<g.size;v++)this.module.setTransformation(m[v],this,!0),this.module.setSubNodes(m[v],this.ogma.createNodeList());g.replaceOriginalAttributes(a.map(v=>v.attributes),["x","y"]),this.ogma.modules.data.setProperty(g,null,a.map(v=>v.data),{dispatch:!0,virtual:!0});for(let v=0;v<g.size;++v){const b=g.get(v),x=c[v];for(let M=0;M<x.size;++M){const N=x.get(M),O=this.edgeGenerator(N,b);!O.source&&!O.target&&(O.source=N.getId(),O.target=b.getId()),O.id||(O.id=`${O.source}-${O.target}`),u.push(O)}}return e.addEdges(u,{virtual:!0})}).then(()=>{_=e.getEdges(u.map(v=>v.id));const m=_._indexes;this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);for(let v=0;v<_.size;v++)this.module.setTransformation(m[v],this,!1),this.module.setSubEdges(m[v],this.ogma.createEdgeList());this.context={virtualEdges:_,virtualNodes:g},e.removeNodes(this.context.virtualNodes.subtract(g),{virtual:!0}),e.removeEdges(this.context.virtualEdges.subtract(_),{virtual:!0}),g.setVisible(!0),_.setVisible(!0),this.module.animations.pushBefore(()=>{g.addClass(Us),_.addClass(Us)}),this.module.animations.push(()=>Promise.all([g.removeClass(Us,n),_.removeClass(Us,n)]))})}undo(t=!0){const{virtualNodes:e,virtualEdges:i}=this.context;if(!i||!e)return Promise.resolve(this.context);const n=t?this.animation:0,s=this.module.animations;t?(s.hideNodes(e._indexes),s.hideEdges(i._indexes),s.push(()=>Promise.all([e.addClass(Us,n),i.addClass(Us,n)]))):(e.setVisible(!1),i.setVisible(!1))}onRemove(){}cleanup(){const{virtualEdges:t,virtualNodes:e}=this.context;return t&&e&&(this.module.removeMetaNodes(e),this.module.removeMetaEdges(t),this.ogma.removeNodes(e,{virtual:!0}),this.ogma.removeEdges(t,{virtual:!0}),this.context.virtualEdges=this.ogma.edgeList(),this.context.virtualNodes=this.ogma.nodeList()),Promise.resolve()}setOptions(t){const{selector:e,neighborIdFunction:i,nodeGenerator:n,edgeGenerator:s}=t;return this.selector=e||this.selector,this.neighborIdFunction=i||this.neighborIdFunction,this.generateIds=r=>this.selector(r)&&this.neighborIdFunction(r)||null,this.nodeGenerator=n||this.nodeGenerator,this.edgeGenerator=s||this.edgeGenerator,super.setOptions(t)}resetContext(){super.resetContext(),this.context={...this.context,virtualNodes:this.ogma.nodeList(),virtualEdges:this.ogma.edgeList()}}};function MH(t){return Array.isArray(t)?t:t?[t]:null}function NH(t,e){return t.size===e.size&&t.filter(i=>e.includes(i)).size>0}var RH=class extends Th{constructor(t){super(t),this.selector=t.selector||dN,this.edgeGenerator=t.edgeGenerator||(()=>({}))}getName(){return so.NodeCollapsing}resetContext(){this.context={hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),virtualEdges:this.ogma.edgeList()}}run(t=!0){const{ogma:e}=this,i=t?this.animation:0,n=e.getNodes().filter(this.selector),s=n.getAdjacentEdges(),r=[],a=n.map(h=>h.getAdjacentNodes().filter(c=>!this.selector(c)));for(let h=0;h<n.size;h++)for(let c=h;c<n.size;c++){const g=n.get(h),_=n.get(c);if(this.ogma.modules.graph.getEdgesBetweenTwoNodes(g,_).size>0&&(a[h].size||a[c].size)&&!NH(a[h],a[c]))throw Error(`addNodeCollapsing: invalid connected nodes [${g.getId()}] and [${_.getId()}] to be collapsed. The addNodeCollapsing function supports only disconnected nodes.`)}const u=new Map;for(let h=0;h<n.size;++h){const c=n.get(h),g=a[h];for(let _=0;_<g.size-1;++_){const m=g.get(_),v=this.ogma.modules.graph.getEdgesBetweenTwoNodes(c,m);if(m!==c)for(let b=_+1;b<g.size;++b){const x=g.get(b),M=this.ogma.modules.graph.getEdgesBetweenTwoNodes(c,x),N=this.edgeGenerator(c,m,x,v,M);if(N){const O=bH(N);for(let R=0;R<O.length;++R)r.push(OH(e,O[R],R,c,m,x,v,M)),u.set(r[r.length-1].id,v.concat(M))}}}}return e.addEdges(r,{virtual:!0}).then(()=>{const h=this.ogma.getEdges(r.map(_=>_.id));this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);const c=h._indexes;for(let _=0;_<h.size;_++){this.module.setTransformation(c[_],this,!1);const m=u.get(h.get(_).getId());this.module.setSubEdges(c[_],m);for(let v=0;v<m.size;v++)this.module.setMetaEdge(m._indexes[v],h.get(_))}e.removeEdges(this.context.virtualEdges.subtract(h),{virtual:!0});const g=this.module.animations;h.setVisible(!0),g.pushBefore(()=>h.addClass(Us)),g.push(()=>Promise.all([h.removeClass(Us,i),n.addClass(Us,i),s.addClass(Us,i)])),g.hideNodes(n._indexes),g.hideEdges(s._indexes),this.context={hiddenEdges:s,hiddenNodes:n,virtualEdges:h}})}undo(t=!0){const{hiddenNodes:e,hiddenEdges:i,virtualEdges:n}=this.context,s=t?this.animation:0,r=this.module.animations;return e.setVisible(!0),i.setVisible(!0),t?(r.hideEdges(n._indexes),r.pushBefore(()=>Promise.all([e.addClass(Us),i.addClass(Us)])),r.push(()=>Promise.all([n.addClass(Us,s),e.removeClass(Us,s),i.removeClass(Us,s)]))):n.setVisible(!1),Promise.resolve()}cleanup(){const t=this.context.virtualEdges||this.ogma.createEdgeList();return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>{this.resetContext()})}onRemove(t,e){e&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(i=>!t.has(i._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(i=>!t.has(i._index))}setOptions(t){return this.selector=t.selector||this.selector,this.edgeGenerator=t.edgeGenerator||this.edgeGenerator,super.setOptions(t)}};function OH(t,e,i,n,s,r,a,u){let h,c;if(e.source!==void 0&&(h=t.getNode(e.source),h!==s&&h!==r))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid source [${e.source}]`,`expected to be [${s.getId()}] or [${r.getId()}]`].join("; "));if(e.target!==void 0&&(c=t.getNode(e.target),c!==s&&c!==r))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid target [${e.target}]`,`expected to be [${s.getId()}] or [${r.getId()}]`].join("; "));if(h&&c&&h===c)throw new Error(`addNodeCollapsing: edge generator produced RawEdge with same source and target [${h.getId()}]`);if(h&&!c)c=h===s?r:s;else if(c&&!h)h=c===s?r:s;else if(!h&&!c){let g=!0;for(let _=0;_<a.size;++_)a.get(_).getSource()===s&&(g=!1);for(let _=0;_<u.size;++_)u.get(_).getTarget()===r&&(g=!1);g?(h=r,c=s):(h=s,c=r)}return h&&c?{...e,id:`_gen_${n.getId()}_${h.getId()}_${c.getId()}_${i}`,source:h.getId(),target:c.getId()}:{}}var IH=class extends Th{constructor(t){super(t),this.nodeSelector=t.nodeSelector||$x,this.edgeSelector=t.edgeSelector||$x,this.nodeDataFunction=t.nodeDataFunction||null,this.edgeDataFunction=t.edgeDataFunction||null}getName(){return so.VirtualProperties}resetContext(){this.context={nodes:this.ogma.nodeList(),oldNodesData:[],edges:this.ogma.edgeList(),oldEdgesData:[]}}run(){const{ogma:t,context:e}=this;return this.nodeDataFunction&&(e.nodes=t.getNodes().filter(this.nodeSelector),e.oldNodesData=wT(e.nodes,this.nodeDataFunction,this.ogma)),this.edgeDataFunction&&(e.edges=t.getEdges().filter(this.edgeSelector),e.oldEdgesData=wT(e.edges,this.edgeDataFunction,this.ogma)),Promise.resolve()}undo(){const{nodes:t,oldNodesData:e,edges:i,oldEdgesData:n}=this.context,s=this.ogma.modules.data;return t&&s.setProperty(t,null,e,{dispatch:!0,virtual:!0}),i&&s.setProperty(i,null,n,{dispatch:!0,virtual:!0}),Promise.resolve()}onRemove(t,e){e&&(this.context.nodes=this.context.nodes.filter(i=>!t.has(i._index))),this.context.edges=this.context.edges.filter(i=>!t.has(i._index))}cleanup(){return this.resetContext(),Promise.resolve()}setOptions(t){return this.nodeSelector=t.nodeSelector||this.nodeSelector,this.edgeSelector=t.edgeSelector||this.edgeSelector,this.nodeDataFunction=t.nodeDataFunction||this.nodeDataFunction,this.edgeDataFunction=t.edgeDataFunction||this.edgeDataFunction,super.setOptions(t)}};function wT(t,e,i){const n=[],s=[];for(let r=0;r<t.size;++r){const a=t.get(r),u=a.getData(),h=e(a);s.push(dd(u,h)),n.push(u)}return i.modules.data.setProperty(t,null,s,{dispatch:!0,virtual:!0}),n}var Fc=()=>"";function Ig(){return{}}var cN=class extends Th{constructor(t){super(t),this.nodeSelector=t.nodeSelector||kc,this.nodeGroupIdFunction=t.nodeGroupIdFunction||Fc,this.nodeGenerator=t.nodeGenerator||Ig,this.edgeSelector=t.edgeSelector||kc,this.edgeGroupIdFunction=t.edgeGroupIdFunction||Fc,this.edgeGenerator=t.edgeGenerator||Ig,this.separateEdgesByDirection=t.separateEdgesByDirection!==void 0&&t.separateEdgesByDirection,this.groupSelfLoopEdges=!!t.groupSelfLoopEdges,this.groupEdges=t.groupEdges===void 0||t.groupEdges,this.ogma.events.on("updateNodeData",({changes:e})=>this.checkChanges(e,!0)).on("updateEdgeData",({changes:e})=>this.checkChanges(e,!1))}computeNodeGroupId(t){if(this.nodeGroupIdFunction){if(!this.nodeSelector(t)||this.module.groupController.alreadyGrouped.has(t._index)||this.module.animations.hiddenNodes.has(t._index))return;const e=this.nodeGroupIdFunction(t);return e===void 0?void 0:e}}computeEdgeGroupId(t){if(this.edgeGroupIdFunction)return this.edgeSelector(t)&&!this.module.animations.hiddenEdges.has(t._index)?this.edgeGroupIdFunction(t):void 0}addMetaNodes(){const t=this.id,e=this.ogma,i=e.getNodes(),n=new Map;for(let c=0;c<i.size;++c){const g=i.get(c),_=this.computeNodeGroupId(g);if(_===void 0)continue;let m=n.get(_);m||(m={id:_,nodes:[]},n.set(_,m)),m.nodes.push(g)}const s=Array.from(n.values()),r=s.map(({nodes:c})=>e.getNodes(c)),a=[],u=[],{nodeDataUpdates:h}=this.context;for(let c=0;c<s.length;++c){const g=s[c].id,_=r[c],m=this.nodeGenerator(_,g,this);m?(m.id===void 0&&(m.id=up(g,t)),u.push(m.id),a.push(m)):(s.splice(c,1),r.splice(c,1),c--)}return e.addNodes(a.map(({id:c})=>({id:c})),{virtual:!0}).then(c=>{const g=e.getNodes(u);e.modules.individualAttributes.replaceOriginalAttributes(g,a.map(({attributes:v})=>v));const _=g.getData();for(let v=0;v<_.length;v++){const b=_[v],x=a[v];_[v]=dd(dd(b,x.data),h.get(g._indexes[v]))}e.modules.data.setProperty(g,null,_,{dispatch:!0,virtual:!0}),g.setVisible(!0);const m=g._indexes;this.context.metaNodes&&this.module.removeMetaNodes(this.context.metaNodes);for(let v=0;v<m.length;v++){const b=m[v],x=r[v];this.module.setSubNodes(b,x),this.module.setTransformation(b,this,!0);for(let M=0;M<x._indexes.length;M++)this.module.groupController.alreadyGrouped.add(x._indexes[M]),this.module.setMetaNode(x._indexes[M],g.get(v))}return{metaNodes:g,newNodes:c}})}addMetaEdges(t){const e=this.id,i=this.ogma;let n,s=!1;t?(n=this.module.getSubNodes(t).getAdjacentElements({bothExtremities:!1}).edges,s=!0):n=i.getEdges();const r=new Map,a=this.ogma.modules.graphics.getAttributesManager().getUsedEdgeAttributes().filter(v=>v!=="curvature"),u=new Map;for(let v=0;v<n.size;++v){const b=n.get(v),x=this.computeEdgeGroupId(b);if(x==null)continue;let M=b.getSource(),N=b.getTarget();if(s){let P=this.module.nodeToMeta.get(M._index);P&&P.getTransformation().getId()!==this.getId()&&(P=M);let F=this.module.nodeToMeta.get(N._index);if(F&&F.getTransformation().getId()!==this.getId()&&(F=N),M=P||M,N=F||N,M&&M===N){u.has(M._index)?u.get(M._index).push(b._index):u.set(M._index,[b._index]);continue}}const O=this.groupEdges?hH(x,M.getId(),N.getId(),this.separateEdgesByDirection):`${b.getId()}:${M.getId()}->${N.getId()}`;let R=r.get(O);R||(R={id:O,source:M,target:N,edges:[]},r.set(O,R)),R.edges.push(b)}const h=Array.from(r.values()),c=h.map(({edges:v})=>i.getEdges(v)),g=[],{edgeDataUpdates:_}=this.context,m=[];for(let v=0;v<h.length;++v){const b=h[v],x=b.id,M=c[v],N=this.groupEdges?this.edgeGenerator(M,x,this):lH(M,a);if(N){if(N.id===null)throw Error(`The id ${N.id} returned by the edgeGenerator function is not unique.`);N.id===void 0&&(N.id=up(x,e)),m.push(N.id),N.source=b.source.getId(),N.target=b.target.getId(),g.push(N)}}return i.addEdges(uH(g),{virtual:!0}).then(()=>{const v=i.getEdges(m);v.setVisible(!1),i.modules.individualAttributes.replaceOriginalAttributes(v,g.map(M=>M.attributes));const b=v.getData();for(let M=0;M<b.length;M++){const N=g[M],O=b[M];b[M]=dd(dd(O,N.data),_.get(v._indexes[M]))}i.modules.data.setProperty(v,null,b,{dispatch:!0,virtual:!0}),this.context.metaEdges&&this.module.removeMetaEdges(this.context.metaEdges);const x=v._indexes;for(let M=0;M<x.length;M++){const N=c[M]._indexes,O=x[M];for(let R=0;R<N.length;R++)this.module.setMetaEdge(N[R],v.get(M));this.module.setSubEdges(O,c[M]),this.module.setTransformation(O,this,!1)}return{intraEdges:u,metaEdges:v}})}removeMetaEdges(t){t.forEach(e=>{const i=this.module.getSubEdges(e);if(!i)return;const n=i._indexes;for(let r=0;r<n.length;r++)this.module.clearMetaEdge(n[r]);this.module.clearSubEdges(e._index);const s=this.module.getMetaEdge(e);if(s){for(let r=0;r<n.length;r++)this.module.setMetaEdge(n[r],s);this.module.setSubEdges(s._index,this.module.getSubEdges(s).filter(r=>r!==e).concat(i))}i.filter(r=>r.getTarget().isVisible()&&r.getSource().isVisible()).setVisible(!0)}),t.setVisible(!1)}removeMetaNodes(t){t.forEach(e=>{const i=this.module.getSubNodes(e);if(!i)return;const n=i._indexes;for(const s of n)this.module.clearMetaNode(s);this.module.clearSubNodes(e._index),i.setVisible(!0)}),t.setVisible(!1)}onRemove(t,e){}checkChanges(t,e){const i=e?this.context.nodeDataUpdates:this.context.edgeDataUpdates,n=this.module;for(let s=0;s<t.length;s++){const{property:r,newValues:a,virtual:u,nodes:h,edges:c}=t[s];if(u)continue;const g=e?h.filter(_=>n.getTransformation(_._index,e)===this):c.filter(_=>n.getTransformation(_._index,e)===this);if(g.size)for(let _=0;_<g._indexes.length;_++){let m=i.get(g._indexes[_])||{};const v=a[_];r?sg(m,r,v):m=v,i.set(g._indexes[_],m)}}}setOptions(t){return this.nodeSelector=t.nodeSelector||this.nodeSelector,this.nodeGroupIdFunction=t.nodeGroupIdFunction||this.nodeGroupIdFunction,this.nodeGenerator=t.nodeGenerator||this.nodeGenerator,this.edgeSelector=t.edgeSelector||this.edgeSelector,this.edgeGroupIdFunction=t.edgeGroupIdFunction||this.edgeGroupIdFunction,this.edgeGenerator=t.edgeGenerator||this.edgeGenerator,this.separateEdgesByDirection=t.separateEdgesByDirection!==void 0?!!t.separateEdgesByDirection:this.separateEdgesByDirection,this.groupSelfLoopEdges=t.groupSelfLoopEdges!==void 0?!!t.groupSelfLoopEdges:this.groupSelfLoopEdges,this.groupEdges=t.groupEdges!==void 0?!!t.groupEdges:this.groupEdges,super.setOptions(t)}resetContext(){super.resetContext(),this.context={...this.context,nodeDataUpdates:new Map,edgeDataUpdates:new Map}}},fN=class extends cN{constructor({duration:t,easing:e,id:i,ogma:n,module:s,enabled:r,padding:a=2,onBeforeAddMetaEdges:u,selector:h=kc,groupIdFunction:c=Fc,edgeGroupIdFunction:g=Fc,nodeGenerator:_=Ig,edgeGenerator:m=Ig,onGroupUpdate:v=()=>Promise.resolve(),separateEdgesByDirection:b=!1,groupSelfLoopEdges:x=!1,groupEdges:M=!0,restorePositions:N=!0,showContents:O=!1}){super({id:i,ogma:n,module:s,nodeSelector:h,nodeGroupIdFunction:c,edgeGroupIdFunction:g,nodeGenerator:_,edgeSelector:R=>!(!this.module.getMetaNode(R.getSource())&&!this.module.getMetaNode(R.getTarget())),edgeGenerator:m,separateEdgesByDirection:b,groupEdges:M,groupSelfLoopEdges:x,duration:t,easing:e,enabled:r}),this.onBeforeAddMetaEdges=u||(()=>Promise.resolve()),this.onGroupUpdate=v,this._padding=a,this._showContents=typeof O!="function"?()=>O:O,this._restorePositions=N,this.module.groupController.setNodeGroupingCount(this.module.groupController.getNodeGroupingCount()+1)}getName(){return so.NodeGrouping}get padding(){return this._padding}set padding(t){this._padding=t,this.refresh()}resetContext(){super.resetContext(),this.context={...this.context,metaNodes:this.ogma.nodeList(),metaEdges:this.ogma.edgeList(),subNodes:this.ogma.nodeList(),intraEdges:this.ogma.edgeList(),subNodesPerMetaNode:new Map,subEdges:this.ogma.edgeList()}}run(){let t,e;const i=this.ogma,n=this.module.groupController,s=n.layoutController;let r=i.createNodeList(),a=i.createEdgeList();const u=[];let h=i.createEdgeList();const c=new Map,g=-(this.getIndex()+mg),_=new Set,m=[];let v;const b=i.geo.enabled();return this.addMetaNodes().then(({metaNodes:x,newNodes:M})=>{v=n.setPadding(x,this._padding),t=x;for(let N=0;N<M.size;N++)_.add(M._indexes[N]);for(let N=0;N<t.size;N++)n.setNodeLayer(t._indexes[N],g);return this.onBeforeAddMetaEdges(t,M).then(()=>this.addMetaEdges(t))}).then(({intraEdges:x,metaEdges:M})=>{e=M,a=this.module.getSubEdges(e),e.filter(R=>R.getExtremities().map(P=>P.isVisible()).every(P=>P)).setVisible(!0);for(let R=0;R<e.size;R++)n.edgeLayer.set(e._indexes[R],g);a.setVisible(!1);const N=this.context.metaNodes.subtract(t),O=this.context.metaEdges.subtract(e);return this.module.removeMetaNodes(N),this.module.removeMetaEdges(O),n.cleanup(N,O),i.removeNodes(N,{virtual:!0}).then(()=>i.removeEdges(O,{virtual:!0})).then(()=>({intraEdges:x,metaEdges:M}))}).then(({intraEdges:x})=>{const M=t._indexes,N=[],O=t.getPosition();for(let R=0;R<M.length;R++){const P=t.get(R),F=n.isClose(P),U=!F&&!n.isOpen(P),V=n.collapsedGroups.has(P._index),Y=this._showContents(P),K=this.module.getSubNodes(P),tt=O[R],j=K._indexes,lt=new Set;if(U){const{x:st,y:_t}=n.getGroupXYR(P,this.module.getSubNodes(P),void 0,void 0);b?n.setGeoLatLng(P,_t,st):(P.setAttributes({x:st,y:_t},0),tt.x=st,tt.y=_t)}c.set(M[R],lt);const pt=x.has(P._index)&&i.edgeList(x.get(P._index));pt&&(h=h.concat(pt),pt.setVisible(Y&&!V)),r=r.concat(K);for(let st=0;st<j.length;st++)lt.add(j[st]);const ft=this.context.subNodesPerMetaNode.get(M[R]),ht=v.has(P._index);let W=!ft||s.shouldRelayout.has(P._index);if(!W&&ft)for(const st of ft.keys())W||(W=!lt.has(st));if(!W&&ft)for(let st=0;st<j.length;st++)W||(W=!ft.has(j[st]));if(W&&(s.shouldRelayout.add(P._index),N.push(this.getLayoutFunction(P,K,Y))),Y){if(F?n.expandGroup(P,K):n.addOpenGroup(P),W||ht||F){m.push(P);const st=this.module.getMetaNode(P);st&&s.shouldRelayout.add(st._index)}}else n.closeGroup(P,K,tt.x,tt.y)}return this.module.animations.handleLayoutFunctions(N).then(()=>{m.forEach(R=>n.setGroupXYR(R)),b&&this.ogma.modules.geo._updateNodesCoordinates(t)})}).then(()=>(this.context={metaNodes:t,metaEdges:e,subNodesPerMetaNode:c,subNodes:r,intraEdges:h,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:a},u))}undo(t=!0){super.undo(t);const{metaNodes:e,metaEdges:i,intraEdges:n,subNodes:s,subEdges:r}=this.context,a=this.module.animations,u=this.module.groupController;if(n.setVisible(!0),r.setVisible(!0),i.setVisible(!1),s.setVisible(!0),e.setVisible(!1),t){a.pushBefore(()=>{e.setVisible(!0),i.setVisible(!0)}),a.pushAfter(()=>{e.setVisible(!1),i.setVisible(!1)});for(let h=0;h<i.size;h++)this.module.isVirtual(i._indexes[h],!1)||u.edgeLayer.delete(i._indexes[h]);for(let h=0;h<r.size;h++)this.module.isVirtual(r._indexes[h],!1)||u.edgeLayer.delete(r._indexes[h]);for(let h=0;h<n.size;h++)this.module.isVirtual(n._indexes[h],!1)||u.edgeLayer.delete(n._indexes[h]);for(let h=0;h<s.size;h++)this.module.isVirtual(s._indexes[h],!0)||u.nodeLayer.delete(s._indexes[h]);e.forEach(h=>{const c=this.module.getSubNodes(h);if(u.nodeLayer.delete(h._index),u.isClose(h))u.expandGroup(h,c,!0);else{const g=h.getPosition();u.closeGroup(h,c,g.x,g.y,!0)}})}}onRemove(t,e){if(e){const i=this.context.metaNodes.size;this.context.metaNodes=this.context.metaNodes.filter(s=>!t.has(s._index));const n=this.context.subNodes.size;this.context.subNodes=this.context.subNodes.filter(s=>!t.has(s._index)),(this.context.subNodes.size!==i||this.context.metaNodes.size!==n)&&this.context.subNodesPerMetaNode.clear()}else this.context.subEdges=this.context.subEdges.filter(i=>!t.has(i._index)),this.context.metaEdges=this.context.metaEdges.filter(i=>!t.has(i._index))}cleanup(){const{ogma:t}=this,e=this.context,{metaNodes:i,metaEdges:n,subNodes:s}=e;return this.module.removeMetaNodes(i),this.module.removeMetaEdges(n),this.module.groupController.cleanup(i,n,s),this.module.groupController.setNodeGroupingCount(this.module.groupController.getNodeGroupingCount()-1),super.cleanup(),Promise.all([t.removeEdges(n,{virtual:!0}),t.removeNodes(i,{virtual:!0})]).then(()=>Promise.resolve())}setOptions({duration:t,easing:e,enabled:i,padding:n,selector:s,groupIdFunction:r,nodeGenerator:a,edgeGroupIdFunction:u,edgeGenerator:h,separateEdgesByDirection:c,groupSelfLoopEdges:g,groupEdges:_,restorePositions:m,showContents:v}){return this._padding=n!==void 0?n:this.padding,this._showContents=v!==void 0?typeof v!="function"?()=>v:v:this._showContents,this._restorePositions=m===void 0?this._restorePositions:m,super.setOptions({nodeSelector:s,nodeGroupIdFunction:r,nodeGenerator:a,edgeSelector:b=>!(!this.module.getMetaNode(b.getSource())&&!this.module.getMetaNode(b.getTarget())),edgeGroupIdFunction:u,edgeGenerator:h,separateEdgesByDirection:c,groupEdges:_,groupSelfLoopEdges:g,duration:t,easing:e,enabled:i})}getLayoutFunction(t,e,i){const n=this.module.groupController.layoutController.getNextLayout(t._index);return()=>(n?n(t,e,i)||Promise.resolve():this.onGroupUpdate(t,e,i)||Promise.resolve()).then(s=>s?{subNodes:e,res:s}:null)}},PH=class extends cN{constructor({duration:t,easing:e,id:i,ogma:n,module:s,enabled:r,selector:a=kc,groupIdFunction:u=Fc,generator:h=Ig,separateEdgesByDirection:c=!1}){super({id:i,ogma:n,module:s,nodeSelector:null,nodeGroupIdFunction:null,nodeGenerator:null,edgeSelector:a,edgeGroupIdFunction:u,edgeGenerator:h,separateEdgesByDirection:c,groupEdges:!0,groupSelfLoopEdges:!0,duration:t,easing:e,enabled:r})}resetContext(){super.resetContext(),this.context={...this.context,metaEdges:this.ogma.edgeList(),subEdges:this.ogma.edgeList()}}getName(){return so.EdgeGrouping}run(){let t,e;const i=this.module.animations,n=new Set(this.context.metaEdges.getId());return this.addMetaEdges().then(({metaEdges:s})=>{t=s,e=this.module.getSubEdges(t),t.setVisible(!0),e.setVisible(!1),i.hideEdges(e._indexes);const r=t.concat(this.context.metaEdges).getParallelEdges().dedupe().filter(c=>!n.has(c.getId())),a=new Array(r.size),u=new Map;for(let c=0;c<r.size;c++)a[c]=this.ogma.modules.curvatureManager.computeCurvature(r.get(c),"visible"),u.set(r._indexes[c],a[c]);const h=this.module.getSubEdges(r);h.setVisible(!0),this.module.animations.setCurvatures(r._indexes,a);for(let c=0;c<h._indexes.length;c++)this.module.animations.setCurvature(e._indexes[c],u.get(this.module.getMetaEdge(e.get(c))._index)||0)}).then(()=>{this.context.metaEdges=t,this.context.subEdges=e})}undo(t=!0){super.undo(t);const{metaEdges:e,subEdges:i}=this.context;if(i.setVisible(!0),e.setVisible(!1),!t)return Promise.resolve();const n=i.getParallelEdges().dedupe(),s=new Array(n.size),r=new Map;for(let a=0;a<n.size;a++)s[a]=this.ogma.modules.curvatureManager.computeCurvature(n.get(a),"visible"),r.set(n._indexes[a],s[a]);return this.module.animations.setCurvatures(n._indexes,s),Promise.resolve()}onRemove(t,e){e||(this.context.subEdges=this.context.subEdges.filter(i=>!t.has(i._index)))}_getCurvatures(t){return t.map(e=>this.ogma.modules.curvatureManager.computeCurvature(e,"visible",()=>!0))}cleanup(){const{metaEdges:t}=this.context;return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>(this.context.metaEdges=this.ogma.edgeList(),this.context.subEdges=this.ogma.edgeList(),Promise.resolve()))}setOptions({duration:t,easing:e,enabled:i,selector:n,groupIdFunction:s,generator:r,separateEdgesByDirection:a}){return super.setOptions({nodeSelector:void 0,nodeGroupIdFunction:void 0,nodeGenerator:void 0,edgeSelector:n,edgeGroupIdFunction:s,edgeGenerator:r,separateEdgesByDirection:a,groupEdges:!0,duration:t,easing:e,enabled:i})}},LT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Rv=1,Uf=8,zH=class gN{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,n]=new Uint8Array(e,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=n>>4;if(s!==Rv)throw new Error(`Got v${s} data when expected v${Rv}.`);const r=LT[15&n];if(!r)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[u]=new Uint32Array(e,4,1);return new gN(u,a,r,e)}constructor(e,i=64,n=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=LT.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,u=e*this.IndexArrayType.BYTES_PER_ELEMENT,h=(8-u%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,Uf,e),this.coords=new this.ArrayType(this.data,Uf+u+h,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(Uf+a+u+h),this.ids=new this.IndexArrayType(this.data,Uf,e),this.coords=new this.ArrayType(this.data,Uf+u+h,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Rv<<4)+r]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=i,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return t0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:a,nodeSize:u}=this,h=[0,r.length-1,0],c=[];for(;h.length;){const g=h.pop()||0,_=h.pop()||0,m=h.pop()||0;if(_-m<=u){for(let M=m;M<=_;M++){const N=a[2*M],O=a[2*M+1];N>=e&&N<=n&&O>=i&&O<=s&&c.push(r[M])}continue}const v=m+_>>1,b=a[2*v],x=a[2*v+1];b>=e&&b<=n&&x>=i&&x<=s&&c.push(r[v]),(g===0?e<=b:i<=x)&&(h.push(m),h.push(v-1),h.push(1-g)),(g===0?n>=b:s>=x)&&(h.push(v+1),h.push(_),h.push(1-g))}return c}within(e,i,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:r,nodeSize:a}=this,u=[0,s.length-1,0],h=[],c=n*n;for(;u.length;){const g=u.pop()||0,_=u.pop()||0,m=u.pop()||0;if(_-m<=a){for(let M=m;M<=_;M++)CT(r[2*M],r[2*M+1],e,i)<=c&&h.push(s[M]);continue}const v=m+_>>1,b=r[2*v],x=r[2*v+1];CT(b,x,e,i)<=c&&h.push(s[v]),(g===0?e-n<=b:i-n<=x)&&(u.push(m),u.push(v-1),u.push(1-g)),(g===0?e+n>=b:i+n>=x)&&(u.push(v+1),u.push(_),u.push(1-g))}return h}};function t0(t,e,i,n,s,r){if(s-n<=i)return;const a=n+s>>1;_N(t,e,a,n,s,r),t0(t,e,i,n,a-1,1-r),t0(t,e,i,a+1,s,1-r)}function _N(t,e,i,n,s,r){for(;s>n;){if(s-n>600){const c=s-n+1,g=i-n+1,_=Math.log(c),m=.5*Math.exp(2*_/3),v=.5*Math.sqrt(_*m*(c-m)/c)*(g-c/2<0?-1:1);_N(t,e,i,Math.max(n,Math.floor(i-g*m/c+v)),Math.min(s,Math.floor(i+(c-g)*m/c+v)),r)}const a=e[2*i+r];let u=n,h=s;for(Gf(t,e,n,i),e[2*s+r]>a&&Gf(t,e,n,s);u<h;){for(Gf(t,e,u,h),u++,h--;e[2*u+r]<a;)u++;for(;e[2*h+r]>a;)h--}e[2*n+r]===a?Gf(t,e,n,h):(h++,Gf(t,e,h,s)),h<=i&&(n=h+1),i<=h&&(s=h-1)}}function Gf(t,e,i,n){Ov(t,i,n),Ov(e,2*i,2*n),Ov(e,2*i+1,2*n+1)}function Ov(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function CT(t,e,i,n){const s=t-i,r=e-n;return s*s+r*r}var DH=t=>t/360+.5,kH=t=>{const e=Math.sin(t*Math.PI/180);return(t=.5-.25*Math.log((1+e)/(1-e))/Math.PI)<0?0:t>1?1:t},FH=[],BH=256,UH=class extends fN{constructor(t){super({...t,enabled:t.enabled&&t.ogma.geo.enabled(),showContents:!1,selector:e=>{const i=this.getPosition(e);return i&&!isNaN(i.x)&&!isNaN(i.y)&&(!t.selector||t.selector(e))},groupIdFunction:e=>{let i=t.groupIdFunction?t.groupIdFunction(e):"geo-cluster";return i||(i="geo-cluster"),`${i}-${this.getNodeId(e)}`},edgeGroupIdFunction:e=>{let i=t.edgeGroupIdFunction?t.edgeGroupIdFunction(e):"";return i||(i=""),`${i}-${this.getNodeId(e.getSource())}-${this.getNodeId(e.getTarget())}`},nodeGenerator:(e,i,n)=>{let s=t.nodeGenerator?t.nodeGenerator(e,i,n):{};s||(s={});const r=this.getCoords(e.get(0));return s.data?s.data=jx(s.data,r):s.data=r,s}}),this._zoomLevels=t.zoomLevels?t.zoomLevels:[0,22],this._groupingRadius=t.radius===void 0?60:t.radius,this._generateIdFunction=t.groupIdFunction||(()=>""),this._shouldEnable=t.enabled,this._shouldRefreshClusters=!0,this.ogma.events.on("beforeGeoCameraMove",({zoom:e})=>{!this.isEnabled()||!this.ogma.geo.enabled()||this.getClosestZoomLevel(e).zoom===this._currentClusters.zoom||(this._shouldRefreshClusters=!1,this.refresh())}).on("geoDisabled",()=>{this.isEnabled()&&this.disable(0).then(()=>{this._shouldEnable=!0})}).on("geoEnabled",()=>{this._shouldEnable&&this.enable(0)})}getPosition(t){return{x:t.getData(this.ogma.modules.geo.latitudePath),y:t.getData(this.ogma.modules.geo.longitudePath)}}getMercatorPosition(t){return{x:DH(t.getData(this.ogma.modules.geo.longitudePath)),y:kH(t.getData(this.ogma.modules.geo.latitudePath))}}getNodeId(t){var e;return((e=this._currentClusters.idToCluster.get(t._index))==null?void 0:e.id)||""}getName(){return so.GeoClustering}enable(t){return this.ogma&&!this.ogma.geo.enabled()?(this._shouldEnable=!0,Promise.resolve()):super.enable(t)}undo(t=!0){const{metaNodes:e,metaEdges:i,intraEdges:n,subNodes:s,subEdges:r}=this.context,a=-(this.getIndex()+mg);return t?(n.setVisible(!0),r.setVisible(!0),i.setVisible(!1),s.setVisible(!0),s.setAttribute("layer",a+mg),this.module.animations.push(()=>{i.filter(u=>u).setVisible(!1),e.filter(u=>u).setVisible(!1)}),Promise.resolve()):(e.setVisible(!1),i.setVisible(!1),s.setVisible(!0),r.setVisible(!0),n.setVisible(!0),Promise.resolve())}disable(t){return this._shouldEnable=!1,super.disable(t)}getCoords(t){var e;const i=((e=this._currentClusters.idToCluster.get(t._index))==null?void 0:e.center)||{x:0,y:0},n={};return this.setToPropertyPath(n,this.ogma.modules.geo.latitudePath,i.x),this.setToPropertyPath(n,this.ogma.modules.geo.longitudePath,i.y),n}setToPropertyPath(t,e,i){if(typeof e=="string")return this.setToPropertyPath(t,e.split("."),i);{let n=t;e.forEach((s,r)=>{r===e.length-1?n[s]=i:n[s]||(n[s]={}),n=n[s]})}}nodeToElement(t){return{nodeId:t._index,generatedId:this._generateIdFunction(t),nodes:this.ogma.nodeList(new Uint32Array([t._index])),radius:t.getAttribute("radius"),center:this.getPosition(t),mercatorCenter:this.getMercatorPosition(t),zoom:1/0}}getCluster(t){const e=t.reduce((s,r)=>({x:s.x+r.center.x/t.length,y:s.y+r.center.y/t.length}),{x:0,y:0}),i=t.reduce((s,r)=>({x:s.x+r.mercatorCenter.x/t.length,y:s.y+r.mercatorCenter.y/t.length}),{x:0,y:0}),n=t.reduce((s,r)=>{const a=e.x-r.center.x,u=e.y-r.center.y,h=r.radius+Math.sqrt(a*a+u*u);return Math.max(h,s)},0);return{nodes:this.ogma.nodeList(new Uint32Array(t.map(({nodeId:s})=>s))),generatedId:t[0].generatedId,center:e,mercatorCenter:i,radius:n}}onePassCluster(t){const e=t.map(r=>this.nodeToElement(r)),[i,n]=this._zoomLevels,s=[];for(let r=n;Math.abs(r-i)>.01;r-=1*(n-i)/19){const a=[],u=new zH(e.length);e.forEach(h=>{u.add(h.mercatorCenter.x,h.mercatorCenter.y)}),u.finish(),e.forEach(h=>{if(h.zoom<=r)return;const c=this._groupingRadius/(BH*Math.pow(2,h.zoom-1));let g=u.within(h.mercatorCenter.x,h.mercatorCenter.y,c).map(_=>e[_]).filter(_=>_.zoom>r&&_&&_.generatedId===h.generatedId);g.length||(g=[h]),g.forEach(_=>_.zoom=r),a.push({...this.getCluster(g),zoom:r,id:`${r.toFixed(2)}-${a.length}`})}),s.push({zoom:r,clusters:a})}return s.map(({zoom:r,clusters:a})=>{const u=new Map;return a.forEach(h=>{h.nodes.forEach(({_index:c})=>u.set(c,h))}),{zoom:r,idToCluster:u}})}getClosestZoomLevel(t){return this._clustersByZoom.reduce((e,i)=>Math.abs(t-i.zoom)<Math.abs(t-e.zoom)?i:e)}run(){var t;this._shouldRefreshClusters&&(this._clustersByZoom=this.onePassCluster(this.ogma.getNodes().filter(_=>this.nodeSelector(_)))),this._shouldRefreshClusters=!0;const e=((t=this.ogma.geo.getMap())==null?void 0:t.getZoom())||0;let i,n;this._currentClusters=this.getClosestZoomLevel(e);const s=this.ogma,r=this.module.groupController;let a=s.createNodeList(),u=s.createEdgeList(),h=s.createEdgeList();const c=-(this.getIndex()+mg),g=new Set;return this.addMetaNodes().then(({metaNodes:_,newNodes:m})=>{i=_;for(let v=0;v<m.size;v++)g.add(m._indexes[v]);for(let v=0;v<i.size;v++)r.nodeLayer.set(i._indexes[v],c);return this.addMetaEdges(i)}).then(({intraEdges:_,metaEdges:m})=>{n=m,u=this.module.getSubEdges(n),n.filter(x=>x.getExtremities().map(M=>M.isVisible()).every(M=>M)).setVisible(!0);for(let x=0;x<n.size;x++)r.edgeLayer.set(n._indexes[x],c);u.setVisible(!1);const v=this.context.metaNodes.subtract(i),b=this.context.metaEdges.subtract(n);return this.module.removeMetaNodes(v),this.module.removeMetaEdges(b),r.cleanup(v,b),s.removeNodes(v,{virtual:!0}).then(()=>s.removeEdges(b,{virtual:!0})).then(()=>({intraEdges:_,metaEdges:m}))}).then(({intraEdges:_})=>{const m=i._indexes;for(let v=0;v<m.length;v++){const b=i.get(v),x=this.module.getSubNodes(b),M=_.has(b._index)&&s.edgeList(_.get(b._index));M&&(h=h.concat(M),M.setVisible(!1)),a=a.concat(x),x.setVisible(!1)}return this.ogma.modules.geo._updateNodesCoordinates(i),this.ogma.modules.geo.updateProjection(),this.context={metaNodes:i,metaEdges:n,subNodes:a,intraEdges:h,subNodesPerMetaNode:new Map,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:u},FH})}setOptions(t){const e=super.setOptions({...t,selector:i=>{const n=this.getPosition(i);return n&&!isNaN(n.x)&&!isNaN(n.y)&&(!t.selector||t.selector(i))},groupIdFunction:i=>{let n=t.groupIdFunction?t.groupIdFunction(i):"geo-cluster";return n||(n="geo-cluster"),`${n}-${this.getNodeId(i)}`},nodeGenerator:(i,n,s)=>{let r=t.nodeGenerator?t.nodeGenerator(i,n,s):{};r||(r={});const a=this.getCoords(i.get(0));return r.data?r.data=jx(r.data,a):r.data=a,r},edgeGroupIdFunction:i=>{let n=t.edgeGroupIdFunction?t.edgeGroupIdFunction(i):"";return n||(n=""),`${n}-${this.getNodeId(i.getSource())}-${this.getNodeId(i.getTarget())}`}});return this._groupingRadius=t.radius===void 0?this._groupingRadius:t.radius,this._generateIdFunction=t.groupIdFunction||this._generateIdFunction,this._shouldRefreshClusters=!0,this._shouldEnable=t.enabled,e}},MT=()=>({}),GH=class extends Th{constructor(t){super(t),this._groupSelfLoopEdges=!1,this._isCleaningUp=!1,this._isRunning=!1,this.shouldDo=!0,this.enabled=!1,this._onBeforeAdd=e=>{if(this._isCleaningUp||!this.enabled||e.virtual)return;const{isNode:i,objects:n}=e;if(i){const s=n;NT(s,this._groupNodes(s))}else{const s=n;NT(s,this._groupEdges(s))}this._shouldSetVirtual=!0},this._onAfterAdd=e=>{this._shouldSetVirtual&&(this._shouldSetVirtual=!1,this._setVirtual(e.nodes||e.edges,!!e.nodes))},this._onRequestElementsToDelete=e=>{if(e.virtual)return;const{ogma:i,context:n}=this,s=e.elementsToRemove.isNode,r=s?i.getNodes:i.getEdges,a=s?n.metaNodesSet:n.metaEdgesSet,u=s?n.nodeGroups:n.edgeGroups,h=s?i.removeNodes:i.removeEdges,c=e.elementsToRemove.size,g=r(Array.from(a)),_=e.elementsToRemove.slice();if(e.elementsToRemove=e.elementsToRemove.subtract(g),e.elementsToRemove.size===c)return;const m=_.subtract(e.elementsToRemove);if(m.forEach(v=>{u.delete(v.getId())}),s){const v=m.getAdjacentEdges().filter(b=>b.isVirtual());i.removeEdges(v)}h(m,{virtual:!0})},this._nodeToGroupId=t.groupIdFunction||Fc,this._groupSelfLoopEdges=!!t.groupSelfLoopEdges,this._nodeGenerator=t.nodeGenerator||MT,this._edgeGenerator=t.edgeGenerator||MT,this._shouldSetVirtual=!1,this._selector=t.selector,this.shouldDo=t.enabled===void 0||!!t.enabled,this.ogma.events.on("preAddElements",this._onBeforeAdd).on("requestElementsToDelete",this._onRequestElementsToDelete).on(["postAddGraph","addNodes","addEdges"],this._onAfterAdd),this.shouldDo&&(this.enable(),this.shouldDo=!1)}getName(){return so.NodeClustering}enable(){if(this.enabled)return Promise.resolve();this.enabled=!0,this.shouldDo=!0,this._isRunning=!0;const{ogma:t}=this;return t.getNodes().size?t.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(e=>(t.clearGraph(),t.setGraph(e))).then(()=>(this._isRunning=!1,Promise.resolve())):(this._isRunning=!1,Promise.resolve())}disable(){return this.enabled?(this.enabled=!1,this.shouldDo=!1,super.disable()):Promise.resolve()}destroy(){return this.disable(),super.destroy()}run(){const{ogma:t}=this;return this.enabled||!this.shouldDo?Promise.resolve():t.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(e=>(this._isCleaningUp=!0,t.clearGraph(),this._isCleaningUp=!1,t.setGraph(e)))}undo(){if(this._isRunning||this.enabled)return Promise.resolve();const{ogma:t,context:e}=this;this._isCleaningUp=!0;const i=t.getNodes(Array.from(e.metaNodesSet));this.module.removeMetaNodes(i);const n=t.getEdges(Array.from(e.metaEdgesSet));this.module.removeMetaEdges(n);const s=this._getSubNodes(),r=this._getSubEdges();return this.resetContext(),t.removeNodes(i,{virtual:!0}).then(()=>t.removeEdges(n,{virtual:!0})).then(()=>t.addNodes(s)).then(()=>t.addEdges(r)).then(()=>{this._isCleaningUp=!1,Promise.resolve()})}cleanup(){return this._isRunning||this.ogma.events.off(this._onBeforeAdd).off(this._onRequestElementsToDelete).off(this._onAfterAdd),Promise.resolve()}resetContext(){this._isRunning||(this.context={nodeGroups:new Map,edgeGroups:new Map,metaNodesSet:new Set,metaEdgesSet:new Set,virtualNodes:this.ogma.createNodeList(),virtualEdges:this.ogma.createEdgeList(),nodeToGroupId:new Map})}getSubNodes(t){const e=this.context.nodeGroups.get(t.getId());return e?e.nodes:[]}getSubEdges(t){const e=this.context.edgeGroups.get(t.getId());return e?e.edges:[]}_getSubNodes(){return Array.from(this.context.nodeGroups.values()).reduce((t,{nodes:e})=>(t.push(...e),t),[])}_getSubEdges(){return Array.from(this.context.edgeGroups.values()).reduce((t,{edges:e})=>(t.push(...e),t),[])}_setVirtual(t,e){if(!t)return;const{context:i}=this,n=e?i.metaNodesSet:i.metaEdgesSet,s=t.filter(r=>n.has(r.getId()));if(e)for(let r=0;r<s.size;r++)this.module.setTransformation(s._indexes[r],this,e),this.module.setSubNodes(s._indexes[r],null);else for(let r=0;r<s.size;r++)this.module.setTransformation(s._indexes[r],this,e),this.module.setSubEdges(s._indexes[r],null);e?i.virtualNodes=i.virtualNodes.concat(s):i.virtualEdges=i.virtualEdges.concat(s)}setContext(){}_computeEdgeGroupId(t,e){return t>e?`${e}:${t}`:`${t}:${e}`}_groupEdges(t){const{ogma:e,id:i,context:n}=this,s=i,r=new Map,a=n.nodeToGroupId;n.edgeGroups.forEach(g=>{g.newEdges=[],r.set(g.id,g)});const u=[];for(let g=0;g<t.length;++g){const _=t[g];let m=n.nodeToGroupId.get(_.source),v=n.nodeToGroupId.get(_.target);if(!m&&!v){u.push(_);continue}m=m||_.source,v=v||_.target;const b=this._computeEdgeGroupId(m,v);if(b!==void 0){const x=a.get(_.source)||_.source,M=a.get(_.target)||_.target;let N=r.get(b);N||(N={id:b,source:x,target:M,edges:[],newEdges:[]},r.set(b,N)),N.edges.push(_),N.newEdges.push(_)}}const h=hp(r),c=h.map(({edges:g})=>g);for(let g=0;g<h.length;++g){const _=h[g];if(!_.newEdges.length)continue;const m=_.id,v=c[g],b=this._edgeGenerator(v,m);b.id===void 0&&(b.id=up(m,s)),b.source=_.source,b.target=_.target,_.metaEdge=b,n.metaEdgesSet.add(b.id),n.edgeGroups.get(b.id)||n.edgeGroups.set(b.id,_),(this._groupSelfLoopEdges||b.source!==b.target)&&u.push(b)}return e.view.afterNextFrame().then(()=>{n.edgeGroups.forEach(({newEdges:g,metaEdge:_})=>{if(!(g.length&&_&&_.id&&_.attributes))return;const m=e.getEdge(_.id);m==null||m.setAttributes(_.attributes)})}),u}_groupNodes(t){const{id:e,context:i,ogma:n}=this,s=e,r=new Map;i.nodeGroups.forEach(_=>{_.newNodes=[],r.set(_.id,_)});const a=[];for(let _=0;_<t.length;_++){const m=t[_];if(this._selector&&!this._selector(m)){a.push(m);continue}m.id=dH(m.id);const v=this._nodeToGroupId(m);if(v!==void 0){let b=r.get(v);b||(b={id:v,nodes:[],newNodes:[]},r.set(v,b)),b.nodes.push(m),b.newNodes.push(m)}else i.nodeToGroupId.set(m.id,m.id)}const u=hp(r),h=u.map(({nodes:_})=>_),c=u.map(({newNodes:_})=>_),g=[];for(let _=0;_<u.length;++_){if(!u[_].newNodes.length)continue;const m=u[_].id,v=h[_],b=this._nodeGenerator(v,m);u[_].metaNode=b,b.id===void 0&&(b.id=up(m,s));for(const x of c[_])i.nodeToGroupId.set(x.id,b.id);i.metaNodesSet.add(b.id),i.nodeGroups.get(b.id)||i.nodeGroups.set(b.id,u[_]),g.push(b)}return g.push(...a),n.view.afterNextFrame().then(()=>{i.nodeGroups.forEach(({newNodes:_,metaNode:m})=>{if(!(_.length&&m&&m.id&&m.attributes))return;const v=n.getNode(m.id);v==null||v.setAttributes(m.attributes)})}),g}setOptions(t){return this._nodeToGroupId=t.groupIdFunction||this._nodeToGroupId,this._groupSelfLoopEdges=t.groupSelfLoopEdges!==void 0?!!t.groupSelfLoopEdges:this._groupSelfLoopEdges,this._nodeGenerator=t.nodeGenerator||this._nodeGenerator,this._edgeGenerator=t.edgeGenerator||this._edgeGenerator,this._selector=t.selector||this._selector,this.disable().then(()=>this.undo()).then(()=>this.ogma.view.afterNextFrame()).then(()=>this.enable())}onRemove(){}};function NT(t,e){const i=e.length;return t.length=i,t.splice(0,i,...e),t}function uu(t){return t.enabled!==!1}var HH=class extends vH{_setOptions(t){const e=t;return e.ogma=this.ogma,e.module=this,e.id=this.transformations.length,e}addNodeGrouping(t={}){const e=new fN(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addEdgeGrouping(t={}){const e=new PH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addGeoClustering(t={}){const e=new UH(this._setOptions(t));return this.addTransformation(e,t.enabled),e}addNodeFilter(t={}){let e={};e=typeof t=="function"?{criteria:t}:t;const i=new SH(this._setOptions(e));return this.addTransformation(i,uu(e)),i}addEdgeFilter(t={}){let e={};e=typeof t=="function"?{criteria:t}:t;const i=new AH(this._setOptions(e));return this.addTransformation(i,uu(e)),i}addNeighborMerging(t){const e=new TH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addNeighborGeneration(t){const e=new CH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addNodeCollapsing(t={}){const e=new RH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addVirtualProperties(t={}){const e=new IH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addNodeClustering(t={}){const e=new GH(this._setOptions(t));return this.addTransformation(e,uu(t)),e}addDrilldown(t={onGetSubgraph:()=>Promise.resolve({nodes:[],edges:[]})}){const e=new cH(this._setOptions(t));return this.drilldownController.addDrilldown(e),e}onGroupsUpdated(t){this.groupController.onGroupsUpdate=t}triggerGroupsUpdated(){this.groupController.triggerGroupsUpdate()}layoutGroups(t,e,i=!1){return this.groupController.layoutGroups(t,e,i)}getXYR(t){return this.animations.getXYR(t)}fishEyeExpand(t,e,i){return this.groupController.fishEyeExpand(t,e,i)}fishEyeCollapse(t,e){return this.groupController.fishEyeCollapse(t,e)}},VH=class extends li{constructor(t){super(t),this.getSubElements=e=>this.api.getSubElements(e),this.getSubNodes=e=>this.api.getSubNodes(e),this.getSubEdges=e=>this.api.getSubEdges(e),this.getXYR=e=>this.api.getXYR(e),this.onGroupsUpdated=e=>this.api.onGroupsUpdated(e)}onMounted(){this._modules.classes.createClass({name:lL,isBuiltin:!0,nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this._modules.classes.createClass({name:uL,isBuiltin:!0,nodeAttributes:{opacity:0},edgeAttributes:{opacity:0}}),this._modules.settings.register("transformations.updateOnDataChange",!0),this._modules.events.register(["transformationEnabled","transformationDisabled","transformationSetIndex","transformationDestroyed","transformationRefresh"])}onReady(t){this.api=new HH(this._ogma)}destroy(){}isElementVirtual(t){return this.api.isVirtual(t._index,t.isNode)}getElementTransformation(t){return this.api.getTransformation(t._index,t.isNode)}getMetaElements(t){return t.map(e=>this.getMetaElement(e))}getMetaElement(t){var i;const e=t.isNode?this.api.getMetaNode(t):this.api.getMetaEdge(t);return e&&((i=this.api.getTransformation(e._index,e.isNode))!=null&&i.isEnabled())?e:null}getMetaEdge(t){return this.getMetaElement(t)}getMetaNode(t){return this.getMetaElement(t)}getMetaNodes(t){return this.getMetaElements(t)}getMetaEdges(t){return this.getMetaElements(t)}getNodeFilters(){return this.api.getList().filter(t=>t.getName()===so.NodeFilter)}getEdgeFilters(){return this.api.getList().filter(t=>t.getName()===so.EdgeFilter)}whenApplied(){return this.api.afterNextUpdate()}afterNextUpdate(){return this.api.afterNextUpdate()}isRefreshing(){return this.api.isRefreshing()}triggerGroupUpdated(t){const e=t._indexes,i=this._ogma.modules.transformations.api.groupController.layoutController.shouldRelayout;for(let n=0;n<t.size;n++)i.add(e[n])}},RT={layer:hL,outline:!0,outerStroke:{color:Nx,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:DC,minVisibleSize:0}},YH={layer:hL,color:Nx,text:{backgroundColor:DC,minVisibleSize:0},stroke:{color:Nx,width:0}},XH=class extends li{onMounted(){this.shouldTriggerEvents=!0,this._modules.events.register(["nodesSelected","nodesUnselected","edgesSelected","edgesUnselected"]),this._selectionExtremityHighlightedClass=this._modules.classes.createClass({name:_x,isBuiltin:!0,nodeAttributes:RT}),this._selectedClass=this._modules.classes.createClass({name:ss,isBuiltin:!0,nodeAttributes:RT,edgeAttributes:YH}),this._modules.events.on(`nodeClassAdded_${ss}`,e=>{this.shouldTriggerEvents&&this._modules.events.fire("nodesSelected",e)}),this._modules.events.on(`edgeClassAdded_${ss}`,e=>{this.shouldTriggerEvents&&this._modules.events.fire("edgesSelected",e)}),this._modules.events.on(`nodeClassRemoved_${ss}`,e=>{this.shouldTriggerEvents&&this._modules.events.fire("nodesUnselected",e)}),this._modules.events.on(`edgeClassRemoved_${ss}`,e=>{this.shouldTriggerEvents&&this._modules.events.fire("edgesUnselected",e)}),this._modules.settings.register("interactions.selection.enabled",!0),this._modules.settings.register("interactions.selection.multiSelectionKey","ctrl"),this._modules.interactions.onClick({priority:"selection",check:({button:e})=>{const i=!!this._modules.settings.get("interactions.selection.enabled");return e==="left"&&i},handler:({target:e})=>{if(e){const i=this._modules.settings.get("interactions.selection.multiSelectionKey"),n=i&&this._modules.keyboard.isPressed(i);e.isNode?this._selectedClass.clearEdges():this._selectedClass.clearNodes(),n?e.hasClass(ss)?e.removeClass(ss):e.addClass(ss):((e.isNode?this._selectedClass.getNodes():this._selectedClass.getEdges()).filter(s=>s!==e).removeClass(ss),e.hasClass(ss)||e.addClass(ss))}else this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}});const t=()=>{this._selectionExtremityHighlightedClass.clearNodes(),this._selectedClass.getEdges().getExtremities().addClass(_x)};this._modules.events.on("beforeRemoveEdges",({edges:e})=>e.setSelected(!1)).on("excludedStateChange",({elements:e,value:i})=>{i||e.setSelected(!1)}).on(`edgeClassAdded_${ss}`,t).on(`edgeClassRemoved_${ss}`,t)}setNodeAttributes(t,e){this._selectedClass.update({nodeAttributes:t,fullOverwrite:e}),this._selectionExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}setEdgeAttributes(t,e){this._selectedClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}_updateExtremityHighlightLayer(){const t=this._selectedClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._selectionExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})}setActive(t,e){if(Ir(e)){const i=[],n=[];t.toList().forEach((s,r)=>{(e[r]?i:n).push(s.getId())}),i.length!==0&&this._modules.graph.getElements(t.isNode,i).addClass(ss),n.length!==0&&this._modules.graph.getElements(t.isNode,n).removeClass(ss)}else t.size&&t[e?"addClass":"removeClass"](ss)}areActive(t){return t.hasClass(ss)}getSelectedNodes(){return this._selectedClass.getNodes()}getSelectedEdges(){return this._selectedClass.getEdges()}getNonSelectedNodes(){return this._modules.graph.getNodes().filter(t=>!t.hasClass(ss))}getNonSelectedEdges(){return this._modules.graph.getEdges().filter(t=>!t.hasClass(ss))}disableEvents(){this.shouldTriggerEvents=!1}enableEvents(){this.shouldTriggerEvents=!0}clear(){this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}},ZH=class extends li{onMounted(){this._delayedCalls=[],this._idIdle=()=>!this._modules.captor.isAnyButtonPressed()&&!this._modules.dom.isPlayingFrame(),this._modules.events.on(["mousedown","mouseup","beforeNewFrame","frame"],()=>{this._delayedCalls.forEach(t=>t.reset())})}_nextTimeIdle(t){const e=new WH(this._modules.dom,this._idIdle,t);return this._delayedCalls.push(e),e.whenDone().then(()=>{this._delayedCalls.splice(this._delayedCalls.indexOf(e),1)})}debounceIdle(t,e=0){let i=!1,n=[];const s=()=>{const r=n;i=!1,n=[],t(),r.forEach(a=>a())};return()=>new Promise(r=>{n.push(r),i||(i=!0,this._nextTimeIdle(e).then(s))})}},WH=class{constructor(t,e,i){this._timeout=null,this._done=!1,this._dom=t,this._promise=new Promise(n=>this._resolve=n),this._isIdle=e,this._delay=i,this._startTimeout()}_startTimeout(){this._timeout=this._dom.setTimeout(()=>{this._isIdle()?(this._done=!0,this._resolve()):this._startTimeout()},this._delay)}reset(){this._done||(this._dom.clearTimeout(this._timeout),this._startTimeout())}whenDone(){return this._promise}},mm=-2,qH={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:50,startRatio:1,endRatio:2,enabled:!1},QH={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:10,startRatio:1,endRatio:2,enabled:!1},KH=class extends li{constructor(){super(...arguments),this._nodePromiseMap=new Map,this._edgePromiseMap=new Map,this._onAttributeChange=({nodes:t,edges:e,nodeAttributes:i,edgeAttributes:n})=>{this._onElementsAttributeChange(t,i),this._onElementsAttributeChange(e,n,!1)},this._refreshPulses=()=>{const{nodes:t,edges:e}=this._hasPulses.getElements();if(t.size!==0||e.size!==0){const i=this._engine.getCurrentTime();this._refreshElementsPulses(t,i),this._refreshElementsPulses(e,i),this._modules.dom.refresh()}}}onMounted(){this._modules.events.on("updateAttributes",this._onAttributeChange).on("frame",this._refreshPulses).on("beforeRemoveEdges",({edges:t})=>{this._removePulses(t)}).on("beforeRemoveNodes",({nodes:t})=>{this._removePulses(t)}).on("excludedStateChange",({elements:t,value:e})=>{e&&(this._hasPulses.removeElements(t),this._removePulses(t))}).on("clearGraph",()=>this._hasPulses.clear()),this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._nodePulses=this._modules.graph.createNodeAttribute({storage:"any"},!1),this._edgePulses=this._modules.graph.createEdgeAttribute({storage:"any"},!1),this._nodeNbPulsesRemaining=this._modules.graph.createNodeAttribute({storage:"int16",default:-1},!1),this._edgeNbPulsesRemaining=this._modules.graph.createEdgeAttribute({storage:"int16",default:-1},!1),this._nodeFlexArrays=this._modules.graphics.getNodeAttributes(),this._edgeFlexArrays=this._modules.graphics.getEdgeAttributes(),this._edgeSourceList=this._modules.graph.getEdgeAttribute("source"),this._edgeTargetList=this._modules.graph.getEdgeAttribute("target"),this._hasPulses=new Kg(this._modules.graph)}_onElementsAttributeChange(t,e,i=!0){if(!e.includes("pulse.enabled"))return;const{valid:n,invalid:s}=Gw(this._modules.graph,t,a=>a.getAttribute("pulse.enabled")&&a.isVisible());this._hasPulses.removeElements(s),this._hasPulses.addElements(n);const r=i?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let a=0;a<n.size;a++)r.get(n._indexes[a])>0||r.set(n._indexes[a],mm);this._removePulses(s)}_removePulses(t){const e=t.isNode?this._nodePulses:this._edgePulses,i=t.isNode?this._nodePromiseMap:this._edgePromiseMap;for(let n=0;n<t._indexes.length;n++){const s=t._indexes[n],r=e.get(s);if(r){for(let u=0;u<r.length;u++){const h=r[u];this._modules.graphics.releaseGraphicsEngineBlockId(h.blockId)}e.set(s,null);const a=i.get(s);a&&(a.resolve(),i.delete(s))}}}_refreshElementsPulses(t,e){const i=t.isNode,n=i?this._nodePulses:this._edgePulses,s=i?this._nodeFlexArrays.pulse.duration:this._edgeFlexArrays.pulse.duration,r=i?"_createNodePulseBlock":"_createEdgePulseBlock",a=i?this._nodeFlexArrays.pulse.interval:this._edgeFlexArrays.pulse.interval,u=i?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let h=0;h<t._indexes.length;h++){const c=t._indexes[h];let g=n.get(c);g||(g=[],n.set(c,g));for(let x=0;x<g.length;x++){const{startTime:M,duration:N,blockId:O}=g[x];e>=M+N&&(this._modules.graphics.releaseGraphicsEngineBlockId(O),g.splice(x--,1))}const _=g[g.length-1];if(_&&e<_.startTime+a.get(c))continue;const m=s.get(c),v=u.get(c);if(v<1&&v!==mm)continue;g.push({blockId:this[r](c,e,m),startTime:e,duration:m});const b=v===mm?mm:v-1;u.set(c,b)}}_createNodePulseBlock(t,e,i){const n=this._nodeFlexArrays,s=n.color.get(t),r=n.layer.get(t),a=n.x.get(t),u=n.y.get(t),h=n.radius.get(t),c=n.scalingMethod.get(t)==="scaled",g=n.pulse.startRatio.get(t),_=n.pulse.endRatio.get(t),m=n.pulse.width.get(t),v=2*h*g,b=2*h*_,x=Cg(r).nodeBody,M=n.pulse.startColor.get(t),N=n.pulse.endColor.get(t),O=this._modules.graphics.allocateGraphicsEngineBlockId(),R=this._group.reset(ol,!0,x),P=R.nextAndReset(),F=hl(M,s),U=hl(N,s);return P.end.shape="circle",P.end.pieceId=Pa,P.end.x1=a,P.end.y1=u,P.end.x2=a,P.end.y2=u,P.end.rectWidthOrSourceRadiusScaled=c?b:0,P.end.rectHeightOrTargetRadiusScaled=c?b:0,P.end.rectWidthOrSourceRadiusFixed=c?0:b,P.end.rectHeightOrTargetRadiusFixed=c?0:b,P.end.strokeWidthFixed=m,P.end.strokeColor=U,P.start.shape="circle",P.start.pieceId=Pa,P.start.x1=a,P.start.y1=u,P.start.x2=a,P.start.y2=u,P.start.rectWidthOrSourceRadiusScaled=c?v:0,P.start.rectHeightOrTargetRadiusScaled=c?v:0,P.start.rectWidthOrSourceRadiusFixed=c?0:v,P.start.rectHeightOrTargetRadiusFixed=c?0:v,P.start.strokeWidthFixed=m,P.start.strokeColor=F,P.animation.duration=i,P.animation.beginTime=e,this._engine.storeGroup(O,R),O}_createEdgePulseBlock(t,e,i){const n=this._edgeFlexArrays,s=this._nodeFlexArrays,r=n.pulse.startRatio.get(t),a=n.pulse.endRatio.get(t),u=n.pulse.startColor.get(t),h=n.pulse.endColor.get(t),c=Cg(n.layer.get(t)).edgeBody,g=this._edgeSourceList.get(t),_=this._edgeTargetList.get(t),m=n.curvature.get(t),v=m!==0,b=this._modules.graphics.allocateGraphicsEngineBlockId(),x=this._group.reset(v?ep:ol,!0,c),M=x.nextAndReset(),N={isSelfLoop:g===_,curvature:m,sourceX:s.x.get(g),sourceY:s.y.get(g),targetX:s.x.get(_),targetY:s.y.get(_),sourceRadius:s.radius.get(g),targetRadius:s.radius.get(_),isSourceRadiusScaled:s.scalingMethod.get(g)==="scaled",isTargetRadiusScaled:s.scalingMethod.get(_)==="scaled",width:n.width.get(t),isWidthScaled:n.scalingMethod.get(t)==="scaled",strokeWidth:n.pulse.width.get(t)};return OT(M.start,N),OT(M.end,N),M.start.strokeColor=u,M.end.strokeColor=h,M.start.thicknessOrFontSizeScaled*=r,M.start.thicknessOrFontSizeFixed*=r,M.end.thicknessOrFontSizeScaled*=a,M.end.thicknessOrFontSizeFixed*=a,M.animation.duration=i,M.animation.beginTime=e,this._engine.storeGroup(b,x),b}pulse(t,e){const i=t.isNode,n={...i?qH:QH,...i?this._nodePulseTheme:this._edgePulseTheme,...e},s=n.number,r=n.interval,a=n.duration,u=i?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining,h=(s-1)*r+a;let c;n.enabled=!0,delete n.number,t.setAttributes({pulse:n}),u.setMultiple(t._indexes,s),this._modules.dom.setTimeout(()=>{t.isList?t.filter(ll).setAttribute("pulse.enabled",!1):t.setAttribute("pulse.enabled",!1),u.setMultiple(t._indexes,-1)},h);const g=new Promise(m=>{c=()=>m(t)}),_=t.isNode?this._nodePromiseMap:this._edgePromiseMap;return t.isList?t._indexes.forEach(m=>{this._setPromise(m,_,g,c)}):this._setPromise(t._index,_,g,c),g}_setPromise(t,e,i,n){e.has(t)&&e.get(t).resolve(),e.set(t,{promise:i,resolve:n})}setTheme(t,e){this._nodePulseTheme=t,this._edgePulseTheme=e}};function OT(t,{sourceX:e,sourceY:i,targetX:n,targetY:s,isSourceRadiusScaled:r,isTargetRadiusScaled:a,targetRadius:u,sourceRadius:h,isWidthScaled:c,width:g,strokeWidth:_,curvature:m,isSelfLoop:v}){t.pieceId=Np,t.shape="line",t.x1=e,t.y1=i,t.x2=n,t.y2=s,t.rectWidthOrSourceRadiusScaled=r?h:0,t.rectWidthOrSourceRadiusFixed=r?0:h,t.rectHeightOrTargetRadiusScaled=a?u:0,t.rectHeightOrTargetRadiusFixed=a?0:u,t.thicknessOrFontSizeScaled=c?g:0,t.thicknessOrFontSizeFixed=c?0:g,t.strokeWidthFixed=_,t.curvature=m,t.isSelfLoop=v}var jH={duration:0,easing:"linear",callback:Ci,resolve:Ci,startAfter:0},JH=0,$H=class extends li{constructor(){super(...arguments),this._animationList=[],this._update=()=>{if(this._animationList.length===0)return;const t=eo(),e=[];for(let i=0;i<this._animationList.length;++i){const n=this._animationList[i],s=(t-n.creationDate)/n.duration,r=n.startAfter;let a=n.easing(s);s>=1?(n.func(1),n.done=!0,n.resolve(void 0),this._animationList.splice(i,1),i-=1,e.push(n.callback)):a>=r&&(a=(a-r)*(1/(1-r)),n.func(a))}for(let i=0;i<e.length;i++)e[i](!1);this._modules.dom.refresh()}}onMounted(){this._modules.events.on("beforeNewFrame",this._update)}play(t,e){const{duration:i,easing:n,callback:s,startAfter:r,resolve:a}=ua(e,jH);if(i<=0)return t(1),s(),a(void 0),null;const u={func:t,easing:typeof n=="function"?n:sb[n],duration:i,callback:s,resolve:a,startAfter:r,creationDate:eo(),done:!1,id:++JH};return this._animationList.push(u),this._modules.dom.refresh(),u}cancel(t){const e=this._animationList.indexOf(t);e!==-1&&(t.func(1),this._animationList.splice(e,1),t.done=!0,t.resolve(void 0))}},Sb=t=>typeof t.export=="function",t8=(t,e,i,n)=>{const s=i._getMapPanePos(),r=t.getMapboxMap(),a=t.getCanvas(),u=t.getSize().round(),h=n.DomUtil.getPosition(t.getContainer()),c=h.x+s.x,g=h.y+s.y;return new Promise(_=>{function m(){e.drawImage(a,c,g,u.x,u.y),_()}if(r.loaded())return m();r.once("idle",m)})},e8=(t,e,i,n,s)=>{if(Sb(t))return t.export(e);const r=i._getMapPanePos(),a=t.getContainer();if(!a)throw new Error(`Trying to access the container of ${t} but it does not exist.`);const u=n.DomUtil.getPosition(a);i.removeLayer(t),t.options.crossOrigin="anonymous";const h=[],c=[];return t.on("tileload",({tile:g})=>{const{x:_,y:m}=n.DomUtil.getPosition(g);h.push(g),c.push({x:_-u.x+r.x,y:m-u.y+r.y})}),i.addLayer(t),new Promise(g=>{t.once("load",()=>{const _=t.getTileSize();h.forEach((m,v)=>{const{x:b,y:x}=c[v];e.drawImage(m,b,x,_.x,_.y)}),g()})})},i8=(t,e,i,n,s,r)=>new Promise(a=>{const u=t.options.renderer;i.removeLayer(t),t.options.renderer=r,i.addLayer(t),r._updatePaths();const h=i._getMapPanePos(),c=r._container,g=n.DomUtil.getPosition(c);e.drawImage(r._container,g.x+h.x,g.y+h.y,c.width/s,c.height/s),i.removeLayer(t),t.options.renderer=u,i.addLayer(t),a()}),n8=(t,e,i,n,s)=>new Promise(r=>{if(Sb(t))return t.export(e).then(r);const a=i.getPixelBounds().min,u=i.project(t.getLatLng(),i.getZoom());if(!t._icon||t._icon.tagName!=="IMG")return r();const h=/^data:/.test(t._icon.src),c=h?t._icon.src:mN(t._icon.src),g=new Image,_=t.options.icon;if(_){const m=_.options;let v=m.iconSize||[24,24];const b=u.subtract(a);let x=m.iconAnchor||[0,0];Array.isArray(v)||(v=[v.x,v.y]),Array.isArray(x)||(x=[x.x,x.y]);const M=Math.round(b.x-(v[0]-x[0])*s),N=Math.round(b.y-x[1]*s);g.crossOrigin="";const O=()=>{e.drawImage(g,M,N,v[0]*s,v[1]*s),r()};g.onload=O,g.src=c,h&&O()}});function s8(t){if(t.options.pane==="overlayPane"&&"getElement"in t){const e=t.getElement();return e&&e.tagName.toLowerCase()==="canvas"}return!1}var r8=(t,e,i,n,s)=>new Promise(r=>{const a=t.getElement(),u=a.width,h=a.height;e.drawImage(a,0,0,u,h),r()}),o8=(t,e,i,n,s)=>new Promise(r=>{i.removeLayer(t),t.setUrl(mN(t.getUrl())),t.options.crossOrigin="anonymous",t.once("load",()=>{const a=t.getBounds(),u=i.latLngToContainerPoint(a.getNorthWest()),h=i.latLngToContainerPoint(a.getSouthEast()),c=h.x-u.x,g=h.y-u.y;e.drawImage(t._image,u.x,u.y,c,g),r()}),i.addLayer(t)});function mN(t){return t+(t.indexOf("?")===-1?"?":"&")+"noCache="+Date.now()}var a8={tileLayers:e8,imageOverlays:o8,canvasOverlays:r8,vectorLayers:i8,markers:n8,vectorMap:t8};function l8(t,e){return t instanceof e.TileLayer||t.options.pane==="tilePane"&&Sb(t)?"tileLayers":s8(t)?"canvasOverlays":t instanceof e.ImageOverlay?"imageOverlays":t instanceof e.Path?"vectorLayers":t instanceof e.Marker?"markers":"MapboxGL"in e&&t instanceof e.MapboxGL?"vectorMap":void 0}function u8(t,e,i,n,s,r){const a={vectorMap:[],tileLayers:[],vectorLayers:[],canvasOverlays:[],imageOverlays:[],markers:[]};return e.eachLayer(u=>{if(u!==t){const h=l8(u,n);if(h&&h in a){const c=a8[h];a[h].push(()=>c(u,i,e,n,s,r))}}}),a}function h8(t){t.TileLayer.prototype.getUrl=function(){return this._url},t.ImageOverlay.prototype.getUrl=function(){return this._url};const e="leaflet-zoom-animated";t.OgmaOverlay||(t.OgmaOverlay=t.Layer.extend({options:{pane:"overlayPane",padding:0,onUpdate:()=>{}},initialize:function(i){const{container:n}=i;t.Util.setOptions(this,i),this._container=n},setLocked:function(i){return this._locked=i,this},onAdd:function(i){this._map=i,this.getPane().appendChild(this._container),this._wgsOrigin=t.latLng([0,0]),this._wgsInitialShift=i.project(this._wgsOrigin,this._initialZoom),t.DomUtil.addClass(this._container,"leaflet-layer"),this._zoomAnimated&&(t.DomUtil.addClass(this._container,e),this._container.style.position="absolute",this._container.style.zIndex=9999),this._initialZoom=(this._map.getMaxZoom()+this._map.getMinZoom())/2,this._mapInitialZoom=this._map.getZoom(),this._updateBounds(),this._update({})},_updateBounds(){const i=this.options.padding,n=this._map.getSize(),s=this._map.containerPointToLayerPoint(n.multiplyBy(-i));this._bounds=new t.Bounds(s,s.add(n.multiplyBy(1+2*i))),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()},_update(i){this._updateBounds(),this._redraw(this._bounds.min,i),this._positionTimer=t.Util.requestAnimFrame(()=>{this._container&&t.DomUtil.setPosition(this._container,this._bounds.min)})},_redraw(i,n){this.options.onUpdate()},_updateTransform(i,n){if(this._locked)return;const s=this._map.getZoomScale(n,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,n),u=r.multiplyBy(-s).add(a).subtract(this._map._getNewPixelOrigin(i,n));t.Browser.any3d?t.DomUtil.setTransform(this._container,u,s):t.DomUtil.setPosition(this._container,u)},_onZoom(i){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onMoveEnd(i){this._update(i)},_onAnimZoom({center:i,zoom:n}){this._updateTransform(i,n)},bringToFront(){t.DomUtil.toFront(this._container)},getEvents(){return{zoom:this._onZoom,moveend:this._onMoveEnd,zoomanim:this._onAnimZoom,layeradd:this.bringToFront,zoomend:this.options.onUpdate}},onRemove:function(){t.DomUtil.removeClass(this._container,e);const i=this._container;["transform","webkitTransform","OTransform","MozTransform","msTransform","zIndex","position"].forEach(n=>i.style[n]=null),t.Util.cancelAnimFrame(this._positionTimer),this._container=null}}))}function d8(t,e,i,n){const s=t.filter(U=>U.isVisible()),r=s.size===0,{mapX:a,mapY:u}=s.reduce((U,V)=>{const{latitude:Y,longitude:K}=V.getGeoCoordinates(),{x:tt,y:j}=n(Y,K);return U.mapX.push(tt),U.mapY.push(j),U},{mapX:[],mapY:[]}),h=s.getAttribute("x"),c=s.getAttribute("y"),g=s.getAttribute("radius").map(Number),_=new So({xValues:h,yValues:c,scaledSizeValues:g}),m=new So({xValues:a,yValues:u});r&&(_.cx=_.cy=0,_.width=_.height=0),isFinite(m.width)&&isFinite(m.height)||(m.cx=m.cy=0,m.width=m.height=0);let v=m.cx-_.cx,b=m.cy-_.cy;const x=r?1:Math.max(m.width,m.height)/Math.max(_.width,_.height),[M,N]=g.reduce((U,V)=>(U[0]=Math.min(U[0],V*x),U[1]=Math.max(U[1],V*x),U),[1/0,0]);m.pad(N),m.minScaledSize=M,m.maxScaledSize=N;const O=i.computeConfigForBounds(m),R=e.zoom/SP(O.zoom);v+=(_.cx-e.x)*R,b+=(_.cy-e.y)*R;const P=_.cx+v,F=_.cy+b;return{offsetChanges:{name:"graph-to-geo",nodeAttributes:{radius:U=>Number(U.getAttribute("radius"))*R,x:U=>(U.getAttribute("x")+v-P)*R+P,y:U=>(U.getAttribute("y")+b-F)*R+F},edgeAttributes:{width:U=>Number(U.getAttribute("width"))*R}},camera:{zoom:e.zoom/R,x:(e.x+v-P)*R+P,y:(e.y+b-F)*R+F,angle:0,...e.getSize()}}}function c8(t,e,i,n){const s=t.getAttributes(["x","y","radius"]),r=t.getBoundingBox(),a=t.size===0,u=t.reduce((P,{_index:F},U)=>(P[F]=U,P),{});n();const h=t.getAttribute("x"),c=t.getAttribute("y"),g=t.getAttribute("radius"),_=new So({xValues:h,yValues:c,scaledSizeValues:g.map(P=>2*P)});a&&(r.reset(),_.reset());let m=_.cx-r.cx,v=_.cy-r.cy,b=0,x=0;const M=i.computeConfigForBounds(_),N=e.zoom/M.zoom;let O,R;return isNaN(r.cx)||isNaN(r.cy)?(r.cx=e.x,r.cy=e.y,O=M.x,R=M.y):(m+=(r.cx-e.x)*N,v+=(r.cy-e.y)*N,b=r.cx+m,x=r.cy+v,O=(e.x+m-b)*N+b,R=(e.y+v-x)*N+x),{offsetChanges:{name:"geo-to-graph",nodeAttributes:{x:P=>(s[u[P._index]].x+m-b)*N+b,y:P=>(s[u[P._index]].y+v-x)*N+x}},camera:{zoom:M.zoom,x:O,y:R,angle:0,...e.getSize()}}}var pN={"top-left":"left","bottom-left":"left","top-right":"right","bottom-right":"right"},f8={"top-left":"top","bottom-left":"bottom","top-right":"top","bottom-right":"bottom"},IT={position:"bottom-right",horizontalMargin:0,verticalMargin:0,className:void 0},g8=class extends li{onMounted(){this._brand=null}set(t,e){let{position:i,horizontalMargin:n,verticalMargin:s,className:r}={...IT,...e};pN[i]||(i=IT.position),this.remove();const a=document.createElement("div");return Pw(a,x0.sanitize(t)),a.style.position="absolute",yN(a,i,n,s),a.style.zIndex="10",r&&a.setAttribute("class",r),this._brand=a,this._modules.dom.setLayer("brand",this._brand),a}remove(){this._modules.dom.setLayer("brand",null),this._brand=null}};function yN(t,e,i,n){const s=i===void 0?"":i+"px",r=n===void 0?"":n+"px";t.style[pN[e]]=s,t.style[f8[e]]=r}var PT={},_8=class extends li{constructor(){super(...arguments),this._enabled=!1,this._settings={...sd},this._edgesOriginalTextStyle={},this._nodesOriginalTextStyle={},this._nodeDraggingSetting=!1,this._transition=!1,this._attribution=null,this._updating=!1,this._updateRate=50,this._x=0,this._y=0,this._onCameraUpdate=e=>{if(this.L&&this._enabled&&this._map&&this._map._loaded){const i=this._x-this._modules.camera.x,n=this._y-this._modules.camera.y;(i||n)&&this._syncMapWithCamera()}},this._syncMapWithCamera=()=>{if(!this._map)return;this._updating||(this._updating=!0,this._layer.setLocked(!0),this._map._moveStart(!0,!1));const e=this._fromPointToLatLng(this._modules.camera.x,this._modules.camera.y),i=Jy(this._modules.camera.zoom),n=this.L.latLng(e.latitude,e.longitude);this._map._move(n,i,{pinch:!0,round:!1}),clearTimeout(this._updateRequest),this._updateRequest=this._modules.dom.setTimeout(()=>{this._updating=!1,this._layer.setLocked(!1),this._map&&this._map._move(n,i,{pinch:!0})._moveEnd(!0)},this._updateRate)},this._onNodesDragStart=()=>{this._enabled&&(this._setMapDragging(!1),this._nodeDragOffsetX=this._nodeDragOffsetY=0)},this._onNodesDragged=({nodes:e,dx:i,dy:n})=>{if(this._enabled){const s=e.map(r=>{const{x:a,y:u}=r.getAttributes(["x","y"]);return this._fromPointToLatLng(a+i-this._nodeDragOffsetX,u+n-this._nodeDragOffsetY)});return this._nodeDragOffsetX=i,this._nodeDragOffsetY=n,e.setGeoCoordinates(s)}return Promise.resolve(this._modules.graph.nodeList())},this._onMapUpdate=()=>{if(!this._map)return Promise.resolve(void 0);const{lat:e,lng:i}=this._map.getCenter(),n=this._fromLatLngToPoint(e,i);this._x=n.x,this._y=n.y;const s=EP(this._map.getZoom());return this._modules.events.fire("beforeGeoCameraMove",{zoom:this._map.getZoom()}),this._modules.camera.setView({zoom:s,x:n.x,y:n.y},{ignoreZoomLimits:!0}).then(()=>this._adjustMinvisibleSizes())},this.runLayout=async({type:e,nodes:i,latitudePath:n=Dl,longitudePath:s=kl,options:r,center:a})=>{const u=BP(a),h=u([a.longitude,a.latitude]),c=i.getPosition(),g=[];return i.setAttributes(i.map(_=>{const m=_.getData(n),v=_.getData(s);if(isNaN(m)||isNaN(v))return{x:h[0],y:h[1]};const b=u([v,m]);return{x:b[0],y:b[1]}})).then(()=>this._ogma.layouts[e]({...r,nodes:i,dryRun:!0})).then(_=>{const m=_.positions.current,v=new Array(m.length),b=new Array(m.length),x=new Array(m.length).fill(10);m.forEach((R,P)=>{const F=u.invert([R.x,R.y]);v[P]=F[1],b[P]=F[0],g.push({latitude:F[1],longitude:F[0]})});const M=Vg(b,v,x),N=M[0]-a.longitude,O=M[1]-a.latitude;for(let R=0;R<g.length;R++)v[R]-=O,b[R]-=N,g[R].latitude-=O,g[R].longitude-=N;return i.setData(n,v),i.setData(s,b),i.setAttributes(c)}).then(()=>this._ogma.modules.geo._updateNodesCoordinates(i)).then(()=>g)}}onMounted(){this._modules.events.register(["geoEnabled","beforeGeoDisabled","geoDisabled","geoNodesMoved","geoLoaded","geoReady"]),XS()&&(this.L=Oa("L")||Oa("leaflet"),this.L&&h8(this.L)),this._modules.graph.createNodeAttribute({name:"geo.prevLat",storage:"float"},!0),this._modules.graph.createNodeAttribute({name:qy,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:Dl,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:kl,storage:"float"},!0),this._modules.events.register(["beforeGeoCameraMove"]),this._modules.events.on("addNodes",e=>{e.virtual||this._refreshOrAddNodes(e.nodes,!0)}).on("updateNodeData",e=>{this._onDataChange(e.changes)}).on("nodesDragProgress",this._onNodesDragged).on(["nodesDragStart","lassoEnabled"],this._onNodesDragStart).on(["nodesDragEnd","lassoDisabled"],()=>this._setMapDragging(!0)).on("viewChanged",this._onCameraUpdate)}_onDataChange(e){const i=Xv(this.latitudePath),n=Xv(this.longitudePath),s=e.filter(({virtual:a,property:u,newValues:h})=>!(a||!h.length)&&(u&&typeof u!="string"?u.find(c=>i.startsWith(c)||n.startsWith(c)):u===null||i.startsWith(u)||n.startsWith(u)));if(!s.length)return;const r=zP(s);r&&(this._modules.events.fire("geoNodesMoved",{nodes:r}),this._refreshOrAddNodes(r,!1))}_refreshOrAddNodes(e,i){i&&this._updatePrevNodesCoordinates(e),this._updateNodesCoordinates(e),this._enabled&&(this._cacheOriginalTextStyles(e,null),this._filter.refresh())}_updatePrevNodesCoordinates(e){k_(this._modules.graph,e,Dl,CS),k_(this._modules.graph,e,kl,qy)}_restorePrevNodesCoordinates(e){k_(this._modules.graph,e,CS,Dl),k_(this._modules.graph,e,qy,kl)}_updateNodesCoordinates(e){OP(this._modules.graph,e,this._settings)}_createMapTileLayer(e,i,n){if(e&&!Hs(e))return e;const s=e,r=s.wms?this.L.tileLayer.wms:this.L.tileLayer,a=AP(s,i)||"";return r(s.url,{attribution:a,maxZoom:n,...e})}_setupTileLayer(e,i,n,s){const r=this._createMapTileLayer(e,i,s);return r.once("load",()=>{this._modules.events.fire("geoLoaded")}),r.addTo(this._map),YS(r,n),r}_onSettingsChanged(e,i){var r;const n=e.wrapCoordinates!==i.wrapCoordinates,s=e.latitudePath!==i.latitudePath||e.longitudePath!==i.longitudePath;if(n||s){let a=Promise.resolve();this._enabled&&this._filter&&(a=a.then(()=>this._filter.refresh())),a.then(()=>this._updateNodesCoordinates(this._modules.graph.getNodes("all")))}this._enabled&&(LP(e,i)&&this._map&&(this._map.removeLayer(this._tileLayer),this._tileLayer=this._setupTileLayer(i.tiles,i.attribution,i.opacity,i.maxZoomLevel)),e.sizeRatio!==i.sizeRatio&&this._updateSizes(),e.maxZoomLevel!==i.maxZoomLevel&&(this._modules.settings.update({minZoom:1,maxZoom:Math.pow(2,i.maxZoomLevel)}),(r=this._map)==null||r.setMaxZoom(i.maxZoomLevel),this._tileLayer&&this._tileLayer.options&&(this._tileLayer.options.maxZoom=i.maxZoomLevel)),e.disableNodeDragging!==i.disableNodeDragging&&this._setDragging(!i.disableNodeDragging),e.attributionOptions!==i.attributionOptions&&this._setAttributionOptions(i.attributionOptions,i.attribution),YS(this._tileLayer,i.opacity))}_setMapDragging(e){if(this._map){const i=e?"enable":"disable";this._map.dragging[i]()}}_fromLatLngToPoint(e,i){return this._map.options.crs.latLngToPoint(this.L.latLng(e,i),Fm)}_fromPointToLatLng(e,i){const{lat:n,lng:s}=this._map.options.crs.pointToLatLng(this.L.point({x:e,y:i}),Fm);return{latitude:n,longitude:s}}_updateSizes(){this._enabled&&this._projection&&this._projection.updateAll()}enable(e){return this.setEnabled(!0,e)}getMap(){return this._enabled?this._map:null}getOptions(){return this._enabled?{...this._settings,tiles:Hs(this._settings.tiles)?{...this._settings.tiles}:this._settings.tiles}:{...sd}}setOptions(e){if(!this._enabled||this._transition)return;TP(e,this.L);const i=this._settings;this._settings={...sd,...i,...e,tiles:wP(sd,e)},this._onSettingsChanged(i,this._settings)}disable(e){return this.setEnabled(!1,e)}isEnabled(){return this._enabled}toggle(e={}){return this.setEnabled(!this._enabled,e)}getContainerCoords(e){return e.getGeoCoordinates().map(({latitude:i,longitude:n})=>this._map.latLngToContainerPoint([i,n]))}getContainerCoord(e){const{latitude:i,longitude:n}=e.getGeoCoordinates();return this._map.latLngToContainerPoint([i||0,n||0])}setEnabled(e,i){if(!XS())throw new Error("Ogma Geo cannot be used outside a browser");if(!this.L)throw new Error("You are trying to use Geo mode but Leaflet has not been found. Please follow our migration guide: https://bit.ly/2SYkF8A");if(this._transition||e===this._enabled)return Promise.resolve();const n=this._modules.settings;this._enabled||(this._prevSettings=n.get(),this._nodeDraggingSetting=!!n.get("interactions.drag.enabled")),this._enabled=e,this.setOptions(i),this._transition=!0;const s=this._settings;return e?this._show().then(()=>(this._registerTextStyle(this._modules.graph.getNodes(),this._modules.graph.getEdges()),this._setDragging(!s.disableNodeDragging),this._transition=!1,this._updating=!1,this._modules.events.fire("geoEnabled").fire("geoReady"),this._adjustMinvisibleSizes())):this._restoreTextStyle().then(()=>this._hide()).then(()=>{this._transition=!1,this._modules.events.fire("geoDisabled"),this._setDragging(this._nodeDraggingSetting,!0)}).then(()=>this._ogma.view.afterNextFrame())}destroy(){return this._enabled&&this._destroyMapSync(),Promise.resolve()}_cacheOriginalTextStyles(e,i){i&&(this._edgesOriginalTextStyle=WS(i,this._edgesOriginalTextStyle)),e&&(this._nodesOriginalTextStyle=DP(e,this._nodesOriginalTextStyle))}_registerTextStyle(e,i){this._cacheOriginalTextStyles(e,i);const{nodeAttributes:n,edgeAttributes:s}=this._modules.hover.getHoverClassDefinition();this._hoverEdgesOriginalTextStyle=s||null,this._hoverNodesOriginalTextStyle=n||null,this._modules.hover.updateEdgeAttributes({text:{size:r=>(this._edgesOriginalTextStyle[r.getId()]||PT)["text.size"]}}),this._modules.hover.updateNodeAttributes({text:{size:r=>(this._nodesOriginalTextStyle[r.getId()]||PT)["text.size"]}})}_restoreTextStyle(){return this._modules.hover.updateEdgeAttributes(this._hoverEdgesOriginalTextStyle,!0),this._modules.hover.updateNodeAttributes(this._hoverNodesOriginalTextStyle,!0),Promise.all([FP(this._modules.graph.getEdges(),this._edgesOriginalTextStyle)]).then(()=>(this._edgesOriginalTextStyle=WS(this._modules.graph.edgeList(),{}),this._nodesOriginalTextStyle={},this._edgesOriginalTextStyle={},Promise.resolve()))}_setDragging(e,i=!1){this._modules.settings.update({interactions:{drag:{enabled:e,applyResult:i}}})}_setAttributionOptions(e,i){if(this._map){if(this._attribution&&(this._attribution.remove(),this._attribution=null),this._attribution=this.L.control.attribution({prefix:!1}).addTo(this._map),Hs(e)){this._attribution.setPrefix(""),e.position=e.position||"bottom-right";const n=e.position.replace("-","");this._attribution.setPosition(n);const s=this._attribution.getContainer();s&&(e.className&&this.L.DomUtil.addClass(s,e.className),yN(s,e.position||"bottom-right",e.horizontalMargin,e.verticalMargin))}i!=null&&this._attribution.addAttribution(i)}}_nodeIsVisible(e){return IP(e,this._settings,this._hasCustomProjection())}_updateSettingsForMap(){const e=this._modules.graphics.getGraphicsEngine().parseColor(this._settings.backgroundColor);e[3]=0,this._modules.settings.update({backgroundColor:vL(e),minZoom:1e-6,interactions:{rotation:{enabled:!1},drag:{enabled:!1},pan:{enabled:!1},zoom:{enabled:!1,onDoubleClick:!1}},mouse:{wheelEnabled:!1}})}getGraphPosition(e){const i=this.L.latLngBounds(NP(e));return{center:e.size>0?i.getCenter():this.L.latLng([0,0]),zoom:this._clampZoom(this._map.getBoundsZoom(i))}}_initMap(){this._updateSettingsForMap(),this._mapContainer=MP(this._modules.dom.getContainer());const e={...zI,minZoom:this._settings.minZoomLevel,maxZoom:this._settings.maxZoomLevel};this._hasCustomProjection()&&(e.crs=this._settings.crs,e.worldCopyJump=!1,e.maxBoundsViscosity=0),this._map=new this.L.Map(this._mapContainer,e),this._map.on("movestart zoomstart",()=>{this._updating=!0}).on("moveend zoomend",()=>{this._updating=!1}),this._setAttributionOptions(this._settings.attributionOptions,this._settings.attribution),this._setupLayers()}_clampZoom(e){let i=this._tileLayer.options.maxZoom;return i===void 0&&(i=1/0),Math.min(e,i)}_show(){let e;return this._initMap(),this._filter?e=this.filter.enable(0):(this._filter=this._modules.transformations.api.addNodeFilter({criteria:i=>this._nodeIsVisible(i)}),this._filter.setIndex(0),e=this._filter.whenApplied()),e.then(()=>{const i=this._map,n=this._modules.graph.getNodes(),s=this._modules.graph.getEdges(),{center:r,zoom:a}=this.getGraphPosition(n),{offset:u,newCameraView:h}=this._transformToGeo();return this._modules.camera.setView(h,{ignoreZoomLimits:!0}).then(()=>(this._updatePrevNodesCoordinates(n),i.setView(r,a,{animate:!1}),this._modules.graphics.animate({nodes:n,edges:s},()=>{this._projection=this._createFinalPositionLayer()},!0,this._settings.duration))).then(()=>u.destroy())})}updateProjection(){var e;(e=this._projection)==null||e.update()}_hasCustomProjection(){return this._settings.crs!=null}_setupLayers(){this._settings.tiles&&(this._tileLayer=this._setupTileLayer(this._settings.tiles,this._settings.attribution,this._settings.opacity,this._settings.maxZoomLevel)),this._layer=new this.L.OgmaOverlay({container:this._modules.graphics.getDomElement(),mapContainer:this._mapContainer,onUpdate:()=>this._onMapUpdate()}),this._layer.addTo(this._map)}_adjustMinvisibleSizes(){return Promise.all([kP(this._modules.graph.getEdges(),this._edgesOriginalTextStyle,this._map.getZoom())])}_hide(){if(!this._map)return Promise.resolve();this._modules.settings.update(this._prevSettings);const e=this._map;e.removeLayer(this._layer);const i=this._modules.dom.getContainer(),n=this._modules.graphics.getDomElement();i&&i.appendChild(n),e.getContainer().style.zIndex="0";const s=this._modules.graph.getNodes("all"),r=this._modules.graph.getEdges("all"),{offset:a,newCameraView:u}=this._transformToGraph();return this._modules.camera.setView(u||{}).then(()=>(this._modules.events.fire("beforeGeoDisabled"),Promise.all([v2(e.getContainer(),1,0,this._settings.duration/2).then(()=>this._destroyMapSync()),this._modules.graphics.animate({nodes:s,edges:r},()=>a&&a.destroy(),!0,this._settings.duration)]))).then(()=>(this._map=null,this._filter.disable(0).then(()=>{})))}_destroyMapSync(){if(this._map){this._layer&&this._layer._map&&this._map.removeLayer(this._layer),this._map.remove(),this._map._animatingZoom=!1,this._map=null;const e=this._mapContainer.parentNode;e&&e.removeChild(this._mapContainer)}}_transformToGeo(){const e=this._modules.graph.getNodes(),{offsetChanges:i,camera:n}=d8(e,this._modules.camera,this._modules.locate,(s,r)=>this._fromLatLngToPoint(s,r));return{offset:this._addGraphAttributesLayer(i),newCameraView:n}}_addGraphAttributesLayer(e){return this._modules.graphics.addAttributeLayer({priority:zD,nodeSelector:i=>i.isVisible(),edgeSelector:i=>i.isVisible(),...e})}_transformToGraph(){const e=this._modules.graph.getNodes("all"),{offsetChanges:i,camera:n}=c8(e,this._modules.camera,this._modules.locate,()=>{this._projection&&(this._projection.destroy(),this._projection=null)});return{offset:this._addGraphAttributesLayer(i),newCameraView:n}}getPointFromLatLng(e){const{latitude:i,longitude:n}=e.getGeoCoordinates();return i==null?e.getAttributes(["x","y"]):this._fromLatLngToPoint(i,n)}_createFinalPositionLayer(){return this._addGraphAttributesLayer({name:"graph-2-geo-animation",nodeAttributes:{scalingMethod:"fixed",radius:e=>Number(e.getAttribute("radius"))*this._settings.sizeRatio,x:e=>this.getPointFromLatLng(e).x,y:e=>this.getPointFromLatLng(e).y},edgeAttributes:{scalingMethod:"fixed",width:e=>Number(e.getAttribute("width"))*this._settings.sizeRatio}})}setCenter(e,i){return this._enabled?this.setView(e,i,Jy(this._modules.camera.getZoom())):Promise.resolve()}setZoom(e){return this._enabled&&this._map?(e=this._clampZoom(e),this._map.setZoom(e),new Promise(i=>{const n=this._map;if(n.getZoom()===e)return i(void 0);n.once("moveend zoomend",i)}).then(this._onMapUpdate)):Promise.resolve()}zoomIn(){return this.setZoom(this.getZoom()+1)}zoomOut(){return this.setZoom(this.getZoom()-1)}setView(e,i,n){if(!this._enabled||!this._map)return Promise.resolve();const s=this._map;n=this._clampZoom(n);const r=this.L.latLng([e,i]);return s.setView(r,n,{animate:!1,reset:!0}),new Promise(a=>{if(s.getZoom()===n&&s.getCenter().equals(r))return a(void 0);s.once("moveend zoomend",a)}).then(this._onMapUpdate)}getView(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{zoom:this._map.getZoom(),latitude:e.lat,longitude:e.lng}}getCenter(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{latitude:e.lat,longitude:e.lng}}getZoom(){if(this._enabled&&this._map)return this._map.getZoom()}resetCoordinates(){if(!this._enabled||!this._projection)return;const e=this._modules.graph.getNodes();this._restorePrevNodesCoordinates(this._modules.graph.getNodes());const i=this._modules.graph.getNodeAttribute(Dl).getMultiple(e._indexes),n=this._modules.graph.getNodeAttribute(kl).getMultiple(e._indexes);e.setData(this._settings.latitudePath,i),e.setData(this._settings.longitudePath,n),this._projection.update()}getUnprojectedCoordinates(e){this._projection&&this._projection.destroy();const i=e.getPosition();return this._projection=this._createFinalPositionLayer(),i}get latitudePath(){return this._settings.latitudePath}get longitudePath(){return this._settings.longitudePath}get filter(){return this._filter}exportBackground(e){if(!this._map)return Promise.reject("Map is not ready");const{pixelRatio:i,width:n,height:s,zoom:r,x:a,y:u}=e,h=n*i,c=s*i,g=Pr(h,c),_=g.getContext("2d"),m=this._map;if(!_)throw new Error(`Unable to get 2d context from  ${g}`);const v=this.getView(),b={zoom:Math.round(Jy(r*i)),...this._fromPointToLatLng(a,u)},x=new this.L.Canvas;m.addLayer(x);const{vectorMap:M,tileLayers:N,vectorLayers:O,canvasOverlays:R,imageOverlays:P,markers:F}=u8(this._layer,m,_,this.L,i,x),U=m.options.zoomSnap;return Promise.resolve().then(()=>(bd(this._mapContainer,h+"px",c+"px"),m.invalidateSize({animate:!1}),this.setView(b.latitude,b.longitude,b.zoom))).then(()=>Ew([...M,...N,...R,...P,...O,...F])).then(()=>{bd(this._mapContainer,"100%","100%"),m.invalidateSize({animate:!1}),m.options.zoomSnap=U,this.setView(v.latitude,v.longitude,v.zoom)}).then(()=>new Promise(V=>this.L.Util.requestAnimFrame(V))).then(()=>m.removeLayer(x)).then(()=>g)}},m8=class extends li{constructor(){super(...arguments),this._context={edgesAlwaysCurvy:!1,edgesRoutingStyle:"none",directedEdges:!1}}onMounted(){this._attributeLayer=this._addAttributeLayer(),this._modules.settings.register("edgesAlwaysCurvy",!1,t=>{this._context.edgesAlwaysCurvy=t,this._attributeLayer.updateAll()}),this._modules.settings.register("directedEdges",!1,t=>{this._context.directedEdges=t,this._attributeLayer.updateAll()}),this._modules.settings.register("edgesRoutingStyle","none",t=>{var s;const e=t&&t!=="none",i=t==="vertical",n=(s=this._ogma.modules)==null?void 0:s.graphics.getGraphicsEngine();n&&n.setBentEdges(e,i),this._attributeLayer.updateAll()})}computeCurvature(t,e="visible",i){const{edgesAlwaysCurvy:n,directedEdges:s}=this._context,r=t.getSource()===t.getTarget();if(!n&&t.hasParallelEdges()===!1&&!r)return 0;let a=t.getParallelEdges({filter:e});i&&(a=a.filter(c=>i(c)));const u=a.indexOf(t);if(u===-1)return 0;let h;if(r)h=(u+1)*Math.max(+t.getAttribute("width")||0,1);else{const c=t.getSource(),g=a.size;if(g===1&&!n)return 0;if(s){let _=0;for(let m=0;m<u;++m)a.get(m).getSource()===c&&(_+=1);h=_+1}else{const _=c!==a.get(0).getSource();h=g%2!=1||n?(1+(u/2|0))*(u%2==0?1:-1)*(_?-1:1):u===0?0:((u+1)/2|0)*(u%2==0?1:-1)*(_?-1:1)}}return h}_addAttributeLayer(){return this._modules.graphics.addAttributeLayer({name:"curvature",priority:RD,edgeDependencies:{parallelEdges:!0},edgeContext:this._context,edgeAttributes:{curvature:t=>this.computeCurvature(t)}})}};/**
 * @license
 * Copyright Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p8(t){if(typeof t!="string"||t.trim()===""){let e="Calls to uncheckedconversion functions must go through security review.";throw e+=" A justification must be provided to capture what security assumptions are being made.",new Error(e)}}function Hf(t,e){return p8(e.justification),c0(t)}var vN="worker_start",xN="worker_configure",dp="worker_stop",Pg="worker_update",y8=0,bN=class extends Zg{constructor(t,e){super(),this._complete=!1,this._busy=!1,this._destroyed=!1,this._data=null,this._onStart=Ci,this._onStop=Ci,this._setIdle=Ci,this._onPause=Ci,this.timer={start:0,steps:0},this._modules=e,this._busy=!1,this.id=++y8,this.configure(t)}configure({configure:t=ll,update:e=Ci,context:i=Ci,stop:n=Ci,isRunning:s=Dm,onStart:r=Ci,onStop:a=Ci,onPause:u=Ci,setIdle:h=Ci}){this._configure=t,this._update=e,this._createContext=i,this._isRunning=s,this._stop=n,this._onStart=r,this._onStop=a,this._setIdle=h,this._onPause=u}setData(t){this._data=t}getData(){return this._data}start(t){this.promise=new Promise((i,n)=>{this.resolve=i,this.reject=n}),this._complete=!1,this._busy=!0,this._onStart(),this.fire(vN,{target:this});const e=this._configure(t,this._modules);return this.fire(xN,e),this.send(e),this}stop(t=!0){return this._complete?Promise.resolve():(this._onStop(),t&&this.send({type:dp}),this.promise.then(()=>{this.fire(dp,{target:this}),this.clearEvents(),this._complete=!0}))}pause(){this._onPause()}setIdle(t){this._setIdle(t)}isBusy(){return!this._complete||this._busy}setBusy(t){this._busy=t}getPromise(){return this.promise}destroy(){this._destroyed||(this._destroyed=!0,this._modules&&(this._busy&&this.stop(),delete this._modules))}},EN=/^function\s*\(/,SN=/^\(|^\w+\s?=>/,v8="Layout control code for the worker",Vf={justification:v8};function pm(t){const e=t.toString();return e.indexOf("function")===0||SN.test(e)?e:`function ${e}`}var x8=class extends bN{constructor(t,e){super(t,e);const i=cI([Hf(b8(t.imports),Vf),Mf`\nconst __CONTEXT = (`,Hf(pm(this._createContext),Vf),Mf`)();\nconst __UPDATE_FUNC = `,Hf(pm(this._update),Vf),Mf`\nconst __IS_RUNNING_FUNC = `,Hf(pm(this._isRunning),Vf),Mf`\nconst __STOP_FN = `,Hf(pm(this._stop),Vf),Mf`\nlet result;
      self.addEventListener("message", function (evt) {
        if (evt.data && evt.data.type === 'worker_stop') {
          __STOP_FN(__CONTEXT);
          return self.postMessage({ result, isRunning: false, stopped: true });
        }
        result = __UPDATE_FUNC(evt.data, __CONTEXT);
        const isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);
        self.postMessage({ result, isRunning });
      });
    `]);this._worker=AC(i),this._worker.addEventListener("message",n=>{e.dom.isDestroyed()||this.onWorkerMessage(n)})}onWorkerMessage(t){const e=t.data.isRunning,i=t.data.stopped,n={data:void 0},s={worker:this,workerMessage:t.data.result,modules:this._modules,data:n,isRunning:e};if(!i)return e?(this.fire(Pg,s),this.send(n.data)):(this.fire(Pg,s),this.stop());this.resolve()}destroy(){super.destroy(),this._worker.terminate()}send(t){return this._complete||this._worker.postMessage(SC(t)),this}};function b8(t={}){const e=Object.keys(t),i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n],a=t[r];if(typeof a!="function")throw new Error(`Asynchronous worker: dependency "${r}" is not found`);{const u=E8(a);u?(i.push(zT(a,r)),u!==r&&i.push(`var ${r} = ${u};`)):i.push(`var ${r} = ${zT(a,r)};`)}}return i.join(`
`)}function zT(t,e){const i=t.toString();return EN.test(i)?`function ${t.name||e} ${i.substring(i.indexOf("("))}`:SN.test(i)?`const ${t.name||e} = ${i.toString()}`:i}function E8(t){const e=t.toString();return t.name?t.name:EN.test(e)?null:e.substring(9,e.indexOf("(")).trim()}var S8=class extends bN{constructor(t,e){super(t,e),this._context=this._createContext()}sync(t){if(t&&t.type===dp)return this._stop(this._context),void this.resolve();const e=this._update(t,this._context),i=this._isRunning(this._context,t),n={data:void 0},s={worker:this,workerMessage:e,modules:this._modules,data:n,isRunning:i};return i?(this.fire(Pg,s),this.send(n.data)):(this.fire(Pg,s),this.stop())}send(t){return this._complete||this._modules.dom.setTimeout(()=>{this.sync(t)},0),this}},A8=3,T8=class extends li{constructor(){super(...arguments),this._pool={}}create(t,e){const i=e&&EC,n=this._modules,s=`${t.name||"worker"}-${i?"async":"sync"}`;let r=this._pool[s];r||(r=this._pool[s]=[]);let a=r.find(u=>!u.isBusy());return a?a.configure(t):(a=i?new x8(t,n):new S8(t,n),this._pool[s].push(a)),a.on(dp,()=>{this._pool[s].length<=A8||(a.destroy(),this._pool[s]=this._pool[s].filter(u=>u!==a))}),a}start(t,e){return t.start(e)}run(t,e,i){const n=this.create(t,i);return this.start(n,e)}destroy(){for(const t in this._pool)this._pool[t].forEach(e=>e.destroy()),delete this._pool[t]}},w8=16,DT="cubicOut",kT={duration:300,locate:!1},L8=class extends li{constructor(){super(...arguments),this.resolves=new Map,this._running=[],this._textsHidden=!1,this.onInteractionStart=()=>{this.setWorkersIdle(!0)},this.onViewChanged=()=>{this.setWorkersIdle(!1)},this.onVisibilityChange=()=>{bu().hidden?this.setWorkersIdle(!0):this.setWorkersIdle(!1)},this._onWorkerUpdate=(t,e,i,n,s)=>{const{duration:r,onSync:a,onUpdate:u,dryRun:h,locate:c}=n,g=s.workerMessage,_=s.isRunning;if(a&&this._modules.dom.setTimeout(()=>a(g,this._modules,_),r),i){const m=i(g,this._modules,_);this._modules.events.fire("layoutComputed",{type:"layoutComputed",name:e,positions:m}),u&&u(g,m,_),this._assignNodePositions(m,r,h,n.easing).then(()=>{_||this._onWorkerComplete(t,m,g,this._layouts[e],n,t.getData())}),_||c&&m&&this._animateCamera(m,c,n.duration)}else _||t.fire("taskComplete",g)},this._onWorkerComplete=(t,e,i,n,s,r)=>{for(let _=0;_<this._running.length;_++)if(this._running[_]===t){this._running.splice(_,1);break}n.onStop&&e&&n.onStop(s,e,this._modules);const a=this._modules.graph.nodeList(new Uint32Array(r.indexes)),u=s.dryRun&&e?e:this.collectNodesData(a),h=a.getId(),c={before:Iv(r),current:Iv(u)};if(this._modules.events.fire("layoutEnd",{type:"layoutEnd",name:n.name,positions:c,ids:h}),s.onEnd&&s.onEnd(i),s.skipTextDrawing&&this._textsHidden&&(this._modules.graphics.showTexts(),this._textsHidden=!1),!this.resolves.has(t))throw new Error("Worker not found");const g=this.resolves.get(t);this.resolves.delete(t),g({name:n.name,positions:c,ids:h}),t.setBusy(!1)},this._onWorkerStart=(t,e,i)=>{e.skipTextDrawing&&!this._textsHidden&&(this._modules.graphics.hideTexts(),this._textsHidden=!0);const n=this._modules.graph.getNodes(e.nodes),s=this.collectNodesData(n),r=s.ids;i.setData(s),this._modules.events.fire("layoutStart",{type:"layoutStart",name:t.name,ids:r,worker:i})}}onMounted(){this._layouts={},this.timers=new Map,this.resolves=new Map,this._modules.events.register(["layoutGetData","layoutPrepare","layoutStart","layoutEnd","layoutComputed"]),this._modules.events.on("clearGraph",()=>this.stop()).on(["dragStart","zoomStart"],this.onInteractionStart).on(["dragEnd","viewChanged"],this.onViewChanged),this._modules.dom.addDocumentEventListener("visibilitychange",this.onVisibilityChange)}setWorkersIdle(t){this._running.forEach(e=>e.setIdle(t))}register(t){if(this._layouts[t.name])throw new Error(`Layout ${t.name} already exists`);this._layouts[t.name]=t}getAvailableLayouts(){return Object.keys(this._layouts)}start(t,e={}){const i=this._layouts[t];this._modules.events.fire("layoutPrepare",{name:t,params:e});const n=rN(this._modules.graph,e,["radial","grid"].indexOf(t)===-1);return new Promise(s=>{if(!i)throw new Error(`layout ${t} does not exist`);n.duration=typeof n.duration=="number"?n.duration:kT.duration;const r=i.onSync;n.skipTextDrawing=n.skipTextDrawing===void 0?!0:!!n.skipTextDrawing;let a=n.locate||kT.locate;a&&typeof a=="boolean"&&(a={}),n.locate=a;const u={name:t,update:i.update,isRunning:i.isRunning,configure:i.configure,context:i.context,imports:i.imports,stop:i.stop,setIdle:i.setIdle};this._modules.graphics.forceAttributesComputation();const h=n.useWebWorker===void 0?!0:!!n.useWebWorker,c=this._modules.workers.create(u,h);this.resolves.set(c,s),c.on(vN,()=>{i.onStart&&i.onStart(e),this._onWorkerStart(i,n,c)}).on(xN,g=>{this._modules.events.fire("layoutGetData",{name:t,data:g})}).on(Pg,g=>{const _=g.workerMessage,m=_.lastUpdate||-1/0,v=g.isRunning,b=eo();v&&(!n.continuous||b-m<w8)||(_.lastUpdate=b,this._onWorkerUpdate(c,t,r,n,g))}),this._modules.workers.start(c,n),this._running.push(c)})}_animateCamera(t,e,i){if(t.indexes.length===0)return Promise.resolve();const n=this._modules.locate.layoutDataBoundingBox(t),s=this._modules.locate.computeConfigForBounds(n,e);return this._modules.camera.setView(s,{duration:i,easing:e.easing||DT,ignoreZoomLimits:!0})}stop(){for(;this._running.length!==0;){const t=this._running.pop();t.stop(),t.fire("taskComplete",null)}return Promise.resolve()}isRunning(){return this._running.length!==0}_assignNodePositions(t,e,i,n=DT){if(!t||i){const c=t?new Uint32Array(t.indexes):void 0,g=this._modules.graph.nodeList(c);return Promise.resolve(g)}const{indexes:s,x:r,y:a}=t,u=this._modules.graph.nodeList(new Uint32Array(s)),h=Iv(t);for(let c=0;c<h.length;c++)h[c]={x:r[c],y:a[c]};return u.setAttributes(h,{duration:e,easing:n})}collectNodesData(t){const e=t._indexes,i=this._modules.graph.getNodeAttribute("x").getMultiple(e),n=this._modules.graph.getNodeAttribute("y").getMultiple(e);return{ids:t.getId(),indexes:e,x:i,y:n}}};function Iv({x:t,y:e,indexes:i}){const n=i.length,s=new Array(n);for(let r=0;r<n;r++)s[r]={x:t[r],y:e[r]};return s}function FT(t){return typeof t=="number"&&isNaN(t)}var BT=class{constructor(){this._keys=[],this._values=[]}set(t,e){const i=this._getIndex(t);return i===-1?(this._keys.push(t.slice()),this._values.push(e),!0):(this._values[i]=e,!1)}get(t){const e=this._getIndex(t);return e===-1?void 0:this._values[e]}has(t){return this._getIndex(t)!==-1}delete(t){const e=this._getIndex(t);return e!==-1&&(this._keys.splice(e,1),this._values.splice(e,1),!0)}keys(){return this._keys.map(t=>t.slice())}values(){return this._values.slice()}_getIndex(t){for(let e=0;e<this._keys.length;e++){const i=this._keys[e];if(i.length===t.length){let n=!0;for(let s=0;s<t.length;s++){const r=i[s],a=t[s];if(!(r===a||FT(r)&&FT(a))){n=!1;break}}if(n)return e}}return-1}get size(){return this._keys.length}},C8=class{constructor(){this._map=new Map,this._arrays=new BT}clear(){return this._arrays=new BT,this._map.clear()}delete(t){return Ir(t)?this._arrays.delete(t):this._map.delete(t)}get(t){return Ir(t)?this._arrays.get(t):this._map.get(t)}set(t,e){return Ir(t)?this._arrays.set(t,e):this._map.set(t,e),this}keys(){return[...xL(this._map),...this._arrays.keys()]}values(){return[...bL(this._map),...this._arrays.values()]}get size(){return this._map.size+this._arrays.size}},M8=class{constructor(t,e,{path:i,filter:n,unwindArrays:s}){this._module=t,this._isNode=e,this._path=i||[],this._filter=n,this._unwindArrays=s,this._onUpdateHandlers=[],this._triggerUpdate=r=>{for(let a=0;a<this._onUpdateHandlers.length;++a)this._onUpdateHandlers[a](r)},this._info=t.watchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}onUpdate(t){this._onUpdateHandlers.push(t)}getPropertyInfo(){return this._info}getPath(){return this._path.slice()}destroy(){this._module.unwatchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}},N8=class{constructor(t,e,{path:i,filter:n,unwindArrays:s}){this._module=t,this._isNode=e,this._path=i,this._filter=n,this._unwindArrays=s,this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[]}get path(){return this._path}onPropertyAdded(t){return this._onAddHandlers.push(t),this}onPropertyRemoved(t){return this._onRemoveHandlers.push(t),this}onPropertyUpdated(t){return this._onUpdateHandlers.push(t),this}getPath(){return this._path.slice()}getProperties(){return this._propertyList.slice()}getPropertyInfo(t){const e=this._properties[t];return e?e.info:null}destroy(){Bl(this._properties,({handler:e},i)=>{const n=this._path.concat([i]);this._module.unwatchPropertyInformation(this._isNode,n,e,this._filter,this._unwindArrays)}),this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[];const t=this._module._objectPropertyWatchers.indexOf(this);this._module._objectPropertyWatchers.splice(t,1)}updateSubPropertiesToWatch(t,e){if(t!==this._isNode)return;const i=e.getData(this._path);for(let n=0;n<i.length;n++){const s=i[n];if(yd(s)){const r=Object.keys(s);for(let a=0;a<r.length;a++)this._addSubPropertyToWatch(r[a])}}}_addSubPropertyToWatch(t){if(!this._properties[t]){const e=this._path.concat([t]),i=()=>this._triggerPropertyUpdate(t),n=this._unwindArrays,s=this._isNode,r=this._filter,a=this._module.watchPropertyInformation(s,e,i,r,n);this._properties[t]={handler:i,info:a},this._triggerPropertyUpdate(t)}}_triggerPropertyUpdate(t){const{info:e}=this._properties[t],i=this._propertyList.indexOf(t),n=i!==-1,s=e.getType()!=="undefined";!n&&s?(this._propertyList.push(t),this._triggerHandlers("_onAddHandlers",t,e),this._triggerHandlers("_onUpdateHandlers",t,e)):n&&!s?(this._propertyList.splice(i,1),this._triggerHandlers("_onUpdateHandlers",t,e),this._triggerHandlers("_onRemoveHandlers",t,e)):n&&s&&this._triggerHandlers("_onUpdateHandlers",t,e)}_triggerHandlers(t,e,i){const n=this[t];for(let s=0,r=n.length;s<r;s++)n[s](e,i)}},R8=class{constructor(){}setWatcher(t){this._watcher=t}isNode(){return this._watcher.isNode}getPath(){return this._watcher.property.slice()}getBoundaries(){const t=this._watcher.boundaries;return t?{min:t.min,max:t.max}:null}getValues(){return this._watcher.values.keys()}getValueCount(t){return this._watcher.values.get(t)||0}getCount(){return this._watcher.total}getType(){return this._watcher.any>0?"any":this._watcher.numbers>0?"number":"undefined"}},O8=class extends li{constructor(){super(...arguments),this._onExcludedStateChange=({elements:t,value:e})=>{const i=!e;for(let n=0,s=this._propertyWatchers.length;n<s;n++){const r=this._propertyWatchers[n];r.isNode===t.isNode&&r.filter==="visible"&&(i?rg(r,t.getData(r.property)):Im(r,t.getData(r.property)),ym(r))}},this._onDataChange=({isNode:t,changes:e})=>{for(let i=0;i<this._propertyWatchers.length;++i){const n=this._propertyWatchers[i],s=n.property,r=n.filter==="all";if(n.isNode===t)for(let a=0;a<e.length;++a){const u=e[a],h=z8(u.property||[],s);if(h){const c=u.nodes||u.edges,g=[],_=[];if(c)for(let m=0;m<c.size;++m){const v=c.get(m);(r||v.isVisible())&&(g.push(_s(u.newValues[m],h)),_.push(_s(u.previousValues[m],h)))}g.length&&(rg(n,g),Im(n,_),ym(n))}}}for(let i=0,n=this._objectPropertyWatchers.length;i<n;i++){const s=this._objectPropertyWatchers[i],r=s.path;for(let a=0;a<e.length;++a){const{property:u,nodes:h,edges:c}=e[a],g=h||c;if(g){const _=g.isNode;(!u||u.length<=r.length+1&&r.every((m,v)=>m===u[v]))&&s.updateSubPropertiesToWatch(_,g)}}}},this._onElementsAdded=t=>{const e=t.nodes||t.edges;for(let i=0;i<this._propertyWatchers.length;++i){const n=this._propertyWatchers[i];if(n.isNode===e.isNode){const s=e.getData(n.property);s.length&&(rg(n,s),ym(n))}}for(let i=0;i<this._objectPropertyWatchers.length;i++)this._objectPropertyWatchers[i].updateSubPropertiesToWatch(e.isNode,e)},this._onElementsRemoved=t=>{const e=t.nodes||t.edges;for(let i=0;i<this._propertyWatchers.length;++i){const n=this._propertyWatchers[i],s=n.filter==="all";if(n.isNode===e.isNode&&s){const r=e.getData(n.property);r.length&&(Im(n,r),ym(n))}}},this._onGraphClear=()=>{this._propertyWatchers.forEach(t=>{t.numbers=0,t.any=0,t.total=0,t.boundaries=null,t.values.clear()})}}onMounted(){this._propertyWatchers=[],this._objectPropertyWatchers=[],this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on(["updateNodeData","updateEdgeData"],this._onDataChange).on(["addNodes","addEdges"],this._onElementsAdded).on(["removeNodes","removeEdges"],this._onElementsRemoved).on("clearGraph",this._onGraphClear)}watchNodeObjectProperty(t){return this._watchObjectProperty(!0,vm(t))}watchEdgeObjectProperty(t){return this._watchObjectProperty(!1,vm(t))}watchNodeNonObjectProperty(t){return this._watchNonObjectProperty(!0,vm(t))}watchEdgeNonObjectProperty(t){return this._watchNonObjectProperty(!1,vm(t))}watchPropertyInformation(t,e,i,n,s){const r=this._findWatcher(t,e,n,s)||this._createWatcher(t,e,n,s);return i&&r.onChange.push(i),r.info}unwatchPropertyInformation(t,e,i,n,s){const r=this._findWatcher(t,e,n,s);if(!r)return;const a=r.onChange,u=a.indexOf(i);if(u!==-1&&(a.splice(u,1),a.length===0)){const h=this._propertyWatchers.indexOf(r);this._propertyWatchers.splice(h,1)}}_watchObjectProperty(t,e){const i=new N8(this,t,e);return this._objectPropertyWatchers.push(i),i.updateSubPropertiesToWatch(t,this._modules.graph[t?"getNodes":"getEdges"](e.filter)),i}_watchNonObjectProperty(t,e){return new M8(this,t,e)}_findWatcher(t,e,i,n){for(let s=0;s<this._propertyWatchers.length;++s){const r=this._propertyWatchers[s];if(r.isNode===t&&r.filter===i&&r.unwindArrays===n&&P8(r.property,e))return r}return null}_createWatcher(t,e,i,n){const s={isNode:t,property:e,numbers:0,any:0,total:0,values:new C8,boundaries:null,onChange:[],filter:i,unwindArrays:n,info:new R8};return s.info.setWatcher(s),rg(s,this._modules.graph[t?"getNodes":"getEdges"](i).getData(e)),this._propertyWatchers.push(s),s}};function UT(t){return t==null?[]:pd(t)}function I8(t){return t==="all"?"all":"visible"}function ym(t){for(let e=0;e<t.onChange.length;++e)t.onChange[e](t.info)}function P8(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function z8(t,e){if(t.length>e.length)return null;let i=0;for(;i<t.length;++i)if(t[i]!==e[i])return null;return e.slice(i)}function rg(t,e,i){const n=t.values,s=!i&&t.unwindArrays;for(let r=0;r<e.length;++r){const a=e[r];if(i||a===void 0||(t.total+=1),s&&Array.isArray(a))rg(t,a,!0);else{const u=n.get(a);u?n.set(a,u+1):(n.set(a,1),Rp(a)?(t.boundaries?a<t.boundaries.min?t.boundaries.min=a:a>t.boundaries.max&&(t.boundaries.max=a):t.boundaries={min:a,max:a},t.numbers+=1):a!==void 0&&(t.any+=1))}}}function Im(t,e,i){const n=t.values,s=!i&&t.unwindArrays,r=t.boundaries;let a=!1;for(let u=0;u<e.length;++u){const h=e[u];if(i||h===void 0||(t.total-=1),s&&Array.isArray(h))a=a||Im(t,h,!0);else{const c=n.get(h);c>1?n.set(h,c-1):(n.delete(h),Rp(h)?(t.numbers-=1,!r||r.min!==h&&r.max!==h||(a=!0)):h!==void 0&&(t.any-=1))}}return!i&&a&&(t.boundaries=D8(n.keys())),a}function D8(t){let e=null,i=null;for(let n=0;n<t.length;++n){const s=t[n];Rp(s)&&((e==null||s<e)&&(e=s),(i==null||s>i)&&(i=s))}return e==null||i==null?null:{min:e,max:i}}function vm(t){return typeof t!="object"||t===null||Array.isArray(t)?{path:UT(t),filter:"visible",unwindArrays:!1}:{path:UT(t.path),filter:I8(t.filter||"visible"),unwindArrays:!!t.unwindArrays}}var k8=class extends li{onMounted(){this._modules.events.register(["virtualDown","virtualUp","virtualMove","virtualClick","virtualDoubleClick","virtualWheel"])}get x(){return this._modules.position.x||0}get y(){return this._modules.position.y||0}_later(){return this._modules.dom.afterNextFrame()}move({x:t,y:e}){if(t!==void 0&&e!==void 0){const i=t-this.x,n=e-this.y;this._modules.events.fire("virtualMove",{x:t,y:e,dx:i,dy:n})}return Promise.resolve()}down({x:t,y:e,button:i="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualDown",{x:this.x,y:this.y,button:i}),this._modules.events.fire("virtualMove",{x:this.x,y:this.y,dx:0,dy:0,button:i})})}up({x:t,y:e,button:i="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualUp",{x:t,y:e,button:i})})}click({x:t,y:e,button:i="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualClick",{x:t,y:e,button:i})})}rightClick({x:t,y:e,button:i="right"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualClick",{x:t,y:e,button:i})})}doubleclick({x:t,y:e,button:i="left"}={}){return this.move({x:t,y:e}).then(()=>{this._modules.events.fire("virtualDoubleClick",{x:t,y:e,button:i})})}drag(t,e){return this.down(t).then(()=>this.move(e)).then(()=>this.up(e))}wheel({x:t,y:e,dx:i,dy:n,delta:s,metaKey:r,ctrlKey:a}){return this.move({x:t,y:e}).then(()=>(this._modules.events.fire("virtualWheel",{x:t,y:e,dx:i,dy:n,delta:s,domEvent:{metaKey:r,ctrlKey:a}}),this._later()))}};function Ca(t,e,i,n,s,r){const a=Do(),u=r.graphToScreenCoordinates(t),h=r.graphToScreenCoordinates(e);s.beginPath(),s.moveTo(u.x*a,u.y*a),s.lineTo(h.x*a,h.y*a),s.strokeStyle=n,s.lineWidth=i,s.stroke()}function GT(t,e,i,n){let s,r,a,u=0,h=t.length-1;for(;u<h&&u>-1;)if(s=(u+h)/2|0,r=Math.abs(e[t[s]]-i),a=Math.abs(e[t[s+1]]-i),a<r)u=s+1;else if(a>r)h=s;else{const c=Math.abs(e[t[u]]-i),g=Math.abs(e[t[h]]-i);if(c<g)h=s;else{if(!(c>g))return h;u=s+1}}return n?h:t[h]}function HT(t,e,i,n,s,r,a){let u,h,c,g,_,m;for(let v=0,b=t.length;v<b;v++)for(let x=0;x<b;x++){if(v===x)continue;let M=t[v],N=t[x];x<v&&(g=N,N=M,M=g);const O=e[M],R=e[N],P=r.get(M),F=r.get(N);if(O+P<n-s&&R-F>n+s&&Math.abs(Math.abs(O+P-(n-s))-Math.abs(R-F-(n+s)))<=a)return u=M,h=i,c=N,m=O+P+Math.abs(R-F-(O+P))/2,_=[O+P,m-s,m+s,R-F],{a:u,b:h,c,current:i,target:m,points:_};if(O+P<n-s&&R+F<n-s&&Math.abs(Math.abs(O+P-(R-F))-Math.abs(Math.max(O+P,R+F)-(n-s)))<=a)return u=M,h=N,c=i,m=R+P+Math.abs(Math.abs(O+P-(R-F)))+s,_=[O+P,R-F,R+F,m-s],{a:u,b:h,c,current:i,target:m,points:_};if(O-P>n+s&&R-F>n+s&&Math.abs(Math.abs(O+P-(R-F))-Math.abs(Math.min(O-P,R-F)-(n+s)))<=a)return u=i,h=M,c=N,m=O-P-Math.abs(Math.abs(O+P-(R-F)))-s,_=[m+s,O-P,O+P,R-F],{a:u,b:h,c,current:i,target:m,points:_}}return null}var Pv={enabled:!1,tolerance:5,centerSnapDistance:240,sideSnapDistanceFactor:3,guidelineWidth:1,guidelineColor:"#ff0000",preferredDistance:{enabled:!0,ratio:1.13,tolerance:10,lineColor:"#00C3FF",lineWidth:1},neighbours:{enabled:!0,offset:5,tolerance:3,lineColor:"#00C3FF",lineWidth:1}},F8=class extends li{constructor(){super(...arguments),this._options=ps(Pv),this._enabled=!1,this._ysnap=0,this._xsnap=0,this._node=null,this._nodes=null,this._r=0,this._vguideline={start:{x:0,y:0},end:{x:0,y:0}},this._hguideline={start:{x:0,y:0},end:{x:0,y:0}},this._gridResolution=0,this._onNodeDragStart=({nodes:t})=>{t.size===1&&(this._node=t.get(0),this._cacheViewportData(),this._r=Number(this._node.getAttribute("radius")))},this._onNodeDragEnd=()=>{this._node=null,this._layer.refresh()}}onMounted(){this._options=ps(Pv),this._enabled=!1}enable(t){this._enabled||(this._options=ua(t,Pv),this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height)},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._modules.events.on("nodesDragStart",this._onNodeDragStart).on("nodesDragEnd",this._onNodeDragEnd),this._modules.settings.update({"interactions.drag.onBeforeDrag":(e,i,n,s)=>this._onBeforeDrag(i,n,s)}))}disable(){this._enabled&&(this._modules.events.off(this._onNodeDragStart).off(this._onNodeDragEnd),this._layer.destroy(),this._modules.settings.update({"interactions.drag.onBeforeDrag":null}),this._enabled=!1)}enabled(){return this._enabled}_onBeforeDrag(t,e,i){if(this._node){const n=i[0];this._layer.refresh(s=>{this._scan(s,n)}),this._node.setAttributes(n)}}_cacheViewportData(){const t=this._modules.camera,e=t.screenToGraphCoordinates({x:0,y:0}),i=t.screenToGraphCoordinates({x:t.width,y:t.height});if(this._nodes=this._modules.spatial.getNodesByBoundingBox(e.x,e.y,i.x,i.y),this._node==null)return;const n=this._node._index,s=Array.from(this._nodes._indexes);s.splice(s.indexOf(n),1);const r=this._modules.graph.getNodeAttribute("radius"),a=this._modules.graph.getNodeAttribute("x"),u=this._modules.graph.getNodeAttribute("y"),h=a.buffer(),c=u.buffer(),g=Wf(s.slice(),a),_=Wf(s.slice(),u),m={},v={};this._gridResolution=Number(this._node.getAttribute("radius"));const b=this._gridResolution;for(let x=0,M=s.length;x<M;x++){const N=g[x],O=_[x],R=h[N]/b|0,P=c[O]/b|0;m[R]||(m[R]=[]),v[P]||(v[P]=[]),m[R].push(N),v[P].push(O)}this._nodesByX=g,this._nodesByY=_,this._xGrid=m,this._yGrid=v,this._xList=a,this._yList=u,this._X=h,this._Y=c,this._R=r}_scan(t,e){if(this._node==null)return;const i=this._node._index,n=e.x,s=e.y,r=this._r,a=this._options,u=this._xList,h=this._yList,c=this._R,g=this._X,_=this._Y,m=this._modules.camera.zoom,v=Math.min(r,this._options.tolerance/m),b=2*r*a.sideSnapDistanceFactor,x=a.guidelineWidth,M=a.guidelineColor;let N,O,R,P,F,U,V,Y,K=i,tt=i,j=null,lt=!1,pt=!1;if(K=GT(this._nodesByX,g,n),tt=GT(this._nodesByY,_,s),Math.abs(g[K]-n)>a.centerSnapDistance&&(K=i),Math.abs(_[tt]-s)>a.centerSnapDistance&&(tt=i),this._xsnap=0,K!==i){N=this._vguideline.start,O=this._vguideline.end,Y=K,R=g[Y],P=_[Y],j=c.get(Y),V=Math.abs(n-R);const ft=Math.abs(n-r-(R-j)),ht=Math.abs(n+r-(R+j));if(V<Math.max(r,j)){P<s?(N.y=P-j,O.y=s+r):(N.y=P+j,O.y=s-r);const W=Math.min(ft,V,ht);W===V?(N.x=O.x=R,O.y=s,N.y=P,this._xsnap=1):Math.abs(s-P)<j+r+b&&(W===ft?(N.x=O.x=R-j,this._xsnap=2):(N.x=O.x=R+j,this._xsnap=3)),W<v&&(lt=!0)}this._xsnap!==0&&Ca(N,O,x,M,t,this._modules.camera)}if(this._ysnap=0,tt!==i){N=this._hguideline.start,O=this._hguideline.end,Y=tt,R=g[Y],P=_[Y],j=c.get(Y),V=Math.abs(s-P);const ft=Math.abs(s-r-(P-j)),ht=Math.abs(s+r-(P+j));if(V<Math.max(r,j)){R<n?(N.x=R-j,O.x=n+r):(N.x=R+j,O.x=n-r);const W=Math.min(ft,V,ht);W===V?(N.y=O.y=P,O.x=n,N.x=R,this._ysnap=1):Math.abs(n-R)<j+r+b&&(W===ft?(N.y=O.y=P-j,this._ysnap=4):(N.y=O.y=P+j,this._ysnap=5)),W<v&&(pt=!0)}this._ysnap!==0&&Ca(N,O,x,M,t,this._modules.camera)}if(j!=null&&a.preferredDistance.enabled){const ft=a.preferredDistance.ratio,ht=Math.min(a.preferredDistance.tolerance/m,r),W=Math.max(r,j);if(K===i||this._xsnap!==0&&lt){if(tt!==i&&(this._ysnap===0||!pt)&&(Y=tt,R=g[Y],P=_[Y],j=c.get(Y),U=Math.abs(s-P)-(r+j)*(1+ft),U<=ht&&U>=-ht)){const st=s<P?-1:1;N=this._hguideline.start,O=this._hguideline.end,N.x=R-W,O.x=R+W,N.y=O.y=P,Ca(N,O,x,M,t,this._modules.camera),N.x=n-W,O.x=n+W,N.y=O.y=P+st*(1+ft)*(r+j),Ca(N,O,x,M,t,this._modules.camera),this._ysnap=1,pt=!0}}else if(Y=K,R=g[Y],P=_[Y],j=c.get(Y),F=Math.abs(n-R)-(r+j)*(1+ft),F<=ht&&F>=-ht){const st=n<R?-1:1;N=this._vguideline.start,O=this._vguideline.end,N.x=O.x=R+st*(1+ft)*(r+j),N.y=P-W,O.y=P+W,N.x=O.x=R,Ca(N,O,x,M,t,this._modules.camera),N.y=s-W,O.y=s+W,N.x=O.x=R+st*(1+ft)*(r+j),Ca(N,O,x,M,t,this._modules.camera),this._xsnap=1,lt=!0}}if(a.neighbours.enabled){const ft=this._gridResolution,ht=n/ft|0,W=s/ft|0,st=this._xGrid,_t=this._yGrid,Vt=[],X=[].concat(_t[W-1]||Vt,_t[W]||Vt,_t[W+1]||Vt),et=[].concat(st[ht-1]||Vt,st[ht]||Vt,st[ht+1]||Vt);let Dt;X.length>1&&(Wf(X,u),Dt=HT(X,g,i,n,r,c,v),Dt&&(this._drawNeighbourGuidelines(t,Dt,e,!1),lt=!1)),et.length>1&&!Dt&&(Wf(et,h),Dt=HT(et,_,i,s,r,c,v),Dt&&(this._drawNeighbourGuidelines(t,Dt,e,!0),pt=!1))}(lt||pt)&&this._snap(e,!lt,!pt)}_drawNeighbourGuidelines(t,{a:e,b:i,c:n,points:s,target:r},a,u){const h={x:0,y:0},c={x:0,y:0},g=this._R,_=this._X,m=this._Y;let[v,b,x]=g.getMultiple([e,i,n]);const{offset:M,lineWidth:N,lineColor:O}=this._options.neighbours;let R,P;u?(a.y=r,v=-v,b=-b,x=-x,R=c.x=h.x=Math.min(_[e]+v,_[i]+b,_[n]+x)-M,P=_):(a.x=r,R=c.y=h.y=Math.max(m[e]+v,m[i]+b,m[n]+x)+M,P=m);const F=u?"y":"x",U=u?"x":"y";h[F]=s[0],c[F]=s[1],Ca(h,c,N,O,t,this._modules.camera),h[F]=s[2],c[F]=s[3],Ca(h,c,N,O,t,this._modules.camera),h[F]=s[0],h[U]=R-M/2,c[F]=s[0],h[U]=P[e]+v,Ca(h,c,N,O,t,this._modules.camera),h[F]=s[1],h[U]=R-M/2,c[F]=s[1],h[U]=P[i]+b,Ca(h,c,N,O,t,this._modules.camera),h[F]=s[2],h[U]=R-M/2,c[F]=s[2],h[U]=P[i]+b,Ca(h,c,N,O,t,this._modules.camera),h[F]=s[3],h[U]=R-M/2,c[F]=s[3],h[U]=P[n]+x,Ca(h,c,N,O,t,this._modules.camera)}_snap(t,e,i){const n=this._xsnap,s=this._ysnap;let r;e||n===0||(r=this._vguideline.end,t.x=n===2?r.x+this._r:n===3?r.x-this._r:r.x),i||s===0||(r=this._hguideline.end,t.y=s===4?r.y+this._r:s===5?r.y-this._r:r.y)}},B8=class{constructor(t,e,i){this._module=t,this._id=e,this._whenApplied=i.then(()=>this)}getId(){return this._id}whenApplied(){return this._whenApplied}refresh(){return this._module.refreshRule(this._id)}getIndex(){return this._module.getRuleIndex(this._id)}setIndex(t){return this._module.setRuleIndex(this._id,t)}update(t){return this._module.updateRule(this._id,t)}getDefinition(){return this._module.getRuleDefinition(this._id)}destroy(){return this._module.destroyRule(this._id)}},U8=1e3,G8=1/U8,H8=class extends li{constructor(){super(...arguments),this._idCounter=1,this._rules=[]}onMounted(){this._rules=[],this._modules.events.register(["addStyleRule","removeStyleRule","updateStyleRule","refreshStyleRule"])}_get(t){for(let e=0;e<this._rules.length;++e){const i=this._rules[e];if(i.id===t)return i.index=e,i}throw new Error("calling a method on a destroyed style rule")}_updatePriorities(){for(let t=0;t<this._rules.length;++t){const e=this._rules[t],i=OD+t*G8;e.attributeLayer.update({priority:i})}}addRule(t={}){const e=this._idCounter++,i=this._modules.graphics.addAttributeLayer({name:`rule(${e})`,...VT(t)}),n=this._modules.dom.afterNextFrame(),s=new B8(this,e,n),r={id:e,attributeLayer:i,wrapper:s};return this._rules.push(r),this._updatePriorities(),this._modules.events.fire("addStyleRule",{rule:r,options:t,id:r.id}),s}getRuleIndex(t){const e=this._get(t);return e.index==null?null:e.index}setRuleIndex(t,e){const i=this._get(t),n=Ia(e,0,this._rules.length-1);return this._rules.splice(i.index,1),this._rules.splice(n,0,i),this._updatePriorities(),this._modules.dom.afterNextFrame()}updateRule(t,e){const i=this._get(t),n=Object.assign({fullOverwrite:e.fullOverwrite},e);return i.attributeLayer.update(n),this._modules.events.fire("updateStyleRule",{rule:i,options:e}),this._modules.dom.afterNextFrame()}getRuleDefinition(t){return VT(this._get(t).attributeLayer.getDefinition())}destroyRule(t){const e=this._get(t);return this._modules.events.fire("removeStyleRule",{rule:e,id:e.id}),e.attributeLayer.destroy(),this._rules.splice(e.index,1),this._modules.dom.afterNextFrame()}refreshRule(t){const e=this._get(t);return e.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:e,id:t}),this._modules.dom.afterNextFrame()}refreshAllRules(){for(const t of this._rules)t.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:t,id:t.id});return this._modules.dom.afterNextFrame()}getRuleList(){return this._rules.map(t=>t.wrapper)}};function VT(t){return{nodeAttributes:t.nodeAttributes,edgeAttributes:t.edgeAttributes,nodeSelector:t.nodeSelector,edgeSelector:t.edgeSelector,nodeDependencies:t.nodeDependencies,edgeDependencies:t.edgeDependencies,nodeOutput:t.nodeOutput,edgeOutput:t.edgeOutput}}var e0,zl=6,AN=5,pg=1,TN=0,wN=0,i0=-1;function LN(t,e,i,n){TN=t,e0=i,wN=e?1:0,i0=n}var YT=(t,e,i,n)=>s=>{const{rects:r,bboxes:a,intersects:u,indexToLayer:h,indexToRemoveNodeText:c,indexToRemoveEdgeText:g}=n;if(a[s*zl+5]===TN&&a[s*zl+4]===i)return!1;const _=s*AN,m=jg(r[_],r[_+1],r[_+2],r[_+3],r[_+4]);if(dC(e0,m)){if(n.realIntersection=!0,i0<=0&&u.push(e0,m),!(h[a[s*zl+5]]<i0))return!0;t.remove(s),n.realIntersection=!1,a[s*zl+4]===wN?c[a[s*zl+5]]=!0:g[a[s*zl+5]]=!0}return!1};function XT(t,e,i="#22ff00"){return n0([[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]].map(n=>({x:n[0],y:n[1]})),e,i)}function n0(t,e,i="#ff0000"){e.strokeStyle=i,e.beginPath();for(let n=0,s=t.length;n<s;n++)n===0?e.moveTo(t[n].x,t[n].y):e.lineTo(t[n].x,t[n].y);e.closePath(),e.stroke()}function V8(t,e,i,n,s){for(let u=0,h=e.length;u<h;u+=zl)XT(e.slice(u,u+4),t,"#aaaaaa");for(let u=0;u<i.length;u+=AN)n0(jg(i[u],i[u+1],i[u+2],i[u+3],i[u+4]),t,"green");const r=[s.root];let a=s.root;for(;a=r.pop();)a.leaf||r.push.apply(r,a.children),XT(s.getNodeBounds(a),t,"rgba(0,0,0,0.2)"),a=r.pop();n.forEach(u=>n0(u,t,"red"))}var Yf={x1:0,y1:0,x2:0,y2:0},zv={x:0,y:0},hc={x:0,y:0},Y8=Math.PI/2,X8=0;function Z8(t,e,i,n,s,r,a,u,h,c,g){const _=u.remove.nodes,m=u.remove.edges,v=u.redraw.edges,b=i.angle,x=i.zoom,M=s.x,N=s.y,O=s.radius,R=Math.PI,{source:P,target:F,scalingMethod:U}=n,V=n.width,Y=n.curvature,K=n.layer,tt=n.text.content,j=n.text.scaling,lt=n.text.size,pt=n.text.font,ft=n.text.style,ht=n.text.scale,W=n.text.maxLineLength,st=n.text.margin,_t=n.text.minVisibleSize,Vt=n.text.padding,X=n.animationDuration,et=n.text.adjustAngle,Dt=n.text.position;u.indexToLayer={},u.indexToQuadIndex={},u.indexToRemoveNodeText={},u.indexToRemoveEdgeText={},u.indexToRedrawEdgeText={},u.byLayer=[];const{byLayer:Mt,indexToLayer:At,indexToQuadIndex:Xt,indexToRedrawEdgeText:jt,indexToRemoveNodeText:Ge,indexToRemoveEdgeText:Se}=u;for(let ee=0;ee<t.length;ee++){const se=t[ee],ve=K.get(se)-cL;for(let Oe=1;Oe<=ve;Oe++)(Mt[Oe]=Mt[Oe]||[]).push(se);At[se]=ve}if(h!==null){const ee=Mt.length;for(let se=At[h]+1;se<=ee;se++)(Mt[se]=Mt[se]||[]).unshift(h);At[h]=ee}const Lt=[0,0,0,0],Gt=[0,0,0,0,0],{bboxes:ie,rects:kt}=u,$t=(ee,se=-1)=>{const ve=X.get(ee);let Oe=tt?tt.get(ee):"";if(Oe===null||Oe===""||ve)return!1;const ke=P.get(ee),Xe=F.get(ee);let Be=V.get(ee);const Ae=Y.get(ee),Ze=_t.get(ee);if(Be*x<Ze)return Se[ee]=!0,!1;U.get(ee)==="fixed"&&(Be/=x);let ki=(M.get(ke)+M.get(Xe))/2,ei=(N.get(ke)+N.get(Xe))/2;Oe=Oe?Oe.toString():"";const qe=!j.get(ee),hi=ht.get(ee)*(qe?1:x),Ji=pt.get(ee),Mi=(qe?lt.get(ee):hi*Be)*pg,Vs=ft.get(ee),ls=W.get(ee),Is=Dt.get(ee)===qg;let Jn=+Is*st.get(ee)+n.text.padding.get(ee);const Cn=M.get(ke),bn=N.get(ke),di=M.get(Xe),gi=N.get(Xe),lr=O.get(ke),ys=O.get(Xe);if(Ae===0){const Fe=Pc(Cn,bn,di,gi)-b,$n=lr-ys;ki+=$n*Math.cos(Fe)/2,ei+=$n*Math.sin(Fe)/2}let Hi;const $i=ke===Xe;if($i)Hi=R/4-b,Pp(Cn,bn,Ae,lr,0,Yf),Lg(.5,Cn,bn,di,gi,Yf.x1,Yf.y1,Yf.x2,Yf.y2,hc),ki=hc.x,ei=hc.y,Jn/=-x;else{if(Cn===di&&bn===gi)return!1;Hi=Pc(Cn,bn,di,gi)-b,Ae!==0&&(Sd(Cn,bn,di,gi,Ae,zv),Dp(.5,Cn,bn,di,gi,zv.x,zv.y,hc),ki=hc.x,ei=hc.y)}const Mn=Jn+X8,zr=BL(Oe,ls);if(!zr)return!1;const{lines:ur,data:Xi}=zr;let us=r(Xi[0],Ji,Vs,Mi).width*pg;for(let Fe=1;Fe<ur;Fe++)us=Math.max(us,r(Xi[Fe],Ji,Vs,Mi).width*pg);const vi=ur*Mi,pn=us/x/2,Ni=vi/x/2,yn=Math.abs(Hm(Hi))<Y8?1:-1;let Ii=Is?$i?vi/x+Be/2+Jn:yn*(Mn/x+Be/2+Ni):0;if(!$i&&Ae===0&&et.get(ee)){const Fe=Vt.get(ee);Gs(Cn,bn,di,gi)*x-(lr+ys)*(g?1:x)<us+2*Fe+1&&(Ii*=yn,Hi=0)}if(Gt[0]=ki-pn,Gt[1]=ei-Ni,Gt[2]=ki+pn,Gt[3]=ei+Ni,Gt[4]=Hi+b,Ux(Gt,-(Hi+b),-Ii,Gt),Gt[2]=Gt[2]-Gt[0],Gt[3]=Gt[3]-Gt[1],Hi=R-Hi-b,Gp(ki-pn,ei-Ni,2*pn,2*Ni,Hi,void 0,void 0,Lt),Ux(Lt,Hi,Ii,Lt),u.realIntersection=!1,LN(ee,!1,jg(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4]),se),e.traverse(Lt[0],Lt[1],Lt[2],Lt[3],c),u.realIntersection&&!a)return Se[ee]=!0,!1;if(jt[ee]=!0,Ge[ee]=!1,se<=0){const Fe=ie.length/zl;Xt[ee]=Fe,ie.push(Lt[0],Lt[1],Lt[2],Lt[3],0,ee),e.insert(Fe,Lt[0],Lt[1],Lt[2],Lt[3]),kt.push(Gt[0],Gt[1],Gt[2],Gt[3],Gt[4])}else e.insert(Xt[ee],Lt[0],Lt[1],Lt[2],Lt[3])};for(const ee of t)$t(ee);let ne=!0;for(let ee=0;ee<Mt.length;ee++){const se=Mt[ee];if(se)if(ne)ne=!1;else for(const ve of se)$t(ve,ee)}for(let ee=0;ee<t.length;ee++){const se=t[ee];Ge[se]?_.push(se):jt[se]&&v.push(se),Se[se]&&m.push(se)}return u}var W8={left:-1,right:1,top:0,bottom:0,center:0},q8={left:0,right:0,top:-1,bottom:1,center:0},Q8={left:-1,right:0,top:-.5,bottom:-.5,center:-.5},K8={left:-.5,right:-.5,top:-1,bottom:0,center:-.5},j8=(t,e,i)=>BL(e,i.get(t))||{lines:0,data:[" "],maxLength:1},J8=(t,e,i,n,s,r,a)=>{const{lines:u,data:h}=j8(t,e,n);let c=i(h[0],s,r,a).width;for(let g=1;g<u;g++)c=Math.max(c,i(h[g],s,r,a).width);return[c,u*a*pg]},$8=(t,e,i)=>{const n=e.text.content,s=e.radius,r=e.text.scaling,a=e.text.position,u=e.text.padding,h=e.text.scale,c=e.text.size,g=e.text.style,_=e.text.font,m=e.text.maxLineLength,v=e.text.margin,b=n.get(t),x=s.get(t),M=!r.get(t),N=a.get(t),O=u.get(t),R=h.get(t),P=(M?c.get(t):R*x*2)*pg,F=g.get(t),U=_.get(t),V=O+v.get(t),Y=W8[N],K=q8[N],[tt,j]=J8(t,`${b}`,i,m,U,F,P),lt=tt/2,pt=j/2;return[Q8[N]*tt,K8[N]*j,Y*V,K*V,Y*x,K*x,tt,j,lt,pt]};function tV(t,e,i,n,s,r,a,u,h){const c=a.remove.nodes,g=a.remove.edges,_=a.redraw.nodes,m=i.angle,v=i.zoom,b=i.sin,x=i.cos,M=n.x,N=n.y,O=n.radius,R=n.layer,P=n.scalingMethod,F=n.text.content,U=n.text.scaling,V=n.text.minVisibleSize,Y=n.animationDuration,K=n.textHidden,tt=n.excluded;a.indexToLayer={},a.indexToQuadIndex={},a.indexToRemoveNodeText={},a.indexToRemoveEdgeText={},a.indexToRedrawNodeText={},a.byLayer=[];const{indexToLayer:j,indexToRedrawNodeText:lt,indexToRemoveNodeText:pt,indexToRemoveEdgeText:ft,indexToQuadIndex:ht,byLayer:W}=a;for(let At=0;At<t.length;At++){const Xt=t[At],jt=R.get(Xt)-cL;(W[jt]=W[jt]||[]).push(Xt),j[Xt]=jt}if(u!==null){const At=W.length;for(let Xt=j[u]+1;Xt<=At;Xt++)(W[Xt]=W[Xt]||[]).unshift(u);j[u]=At}let st;const _t=[0,0,0,0],Vt=[0,0,0,0,0],{bboxes:X,rects:et}=a,Dt=(At,Xt=-1)=>{const jt=Y.get(At);let Ge=F.get(At);if(Ge===null||Ge===""||jt!==0)return!1;let Se=O.get(At);const Lt=V.get(At);if(tt.get(At)===1)return pt[At]=!0,!1;if(2*Se*v<Lt)return K.get(At)===0&&(pt[At]=!0),!1;P.get(At)==="fixed"&&(Se/=v);const Gt=M.get(At),ie=N.get(At);typeof Ge=="number"&&(Ge=Ge.toString());let[kt,$t,ne,ee,se,ve,Oe,ke,Xe,Be]=s(At);const Ae=!U.get(At),Ze=Ae?v:1,ki=P.get(At)==="fixed"?v:1;Ae?(ne+=Xe,ee+=Be,Xe/=v,Be/=v,Oe/=v,ke/=v):(ne+=Xe*v,ee+=Be*v),kt=kt/Ze+ne/v+se/ki,$t=$t/Ze+ee/v+ve/ki,Gp(Gt-Xe,ie-Be,Oe,ke,-m,b,-x,_t),Vt[0]=Gt-Xe,Vt[1]=ie-Be,Vt[2]=Oe,Vt[3]=ke,Vt[4]=m;const ei=x*kt-b*$t,qe=b*kt+x*$t;if(_t[0]+=ei,_t[1]+=qe,_t[2]+=ei,_t[3]+=qe,Vt[0]+=ei,Vt[1]+=qe,a.realIntersection=!1,LN(At,!0,jg(Vt[0],Vt[1],Vt[2],Vt[3],Vt[4]),Xt),e.traverse(_t[0],_t[1],_t[2],_t[3],h),a.realIntersection&&!r)return pt[At]=!0,!1;lt[At]=!0,pt[At]=!1,Xt<=0?(st=X.length/zl,ht[At]=st,X.push(_t[0],_t[1],_t[2],_t[3],1,At),e.insert(st,_t[0],_t[1],_t[2],_t[3]),et.push(Vt[0],Vt[1],Vt[2],Vt[3],Vt[4])):e.insert(ht[At],_t[0],_t[1],_t[2],_t[3])};for(const At of t)Dt(At);let Mt=!0;for(let At=0;At<W.length;At++){const Xt=W[At];if(Xt)if(Mt)Mt=!1;else for(const jt of Xt)Dt(jt,At)}for(let At=0;At<t.length;At++){const Xt=t[At];pt[Xt]?c.push(Xt):lt[Xt]&&_.push(Xt),ft[Xt]&&g.push(Xt)}return a}var eV=1,iV="topDown",nV="bottomUp",sV=.15,rV=200,oV=80,aV=["x","y","radius","width","layer","text.content","text.minVisibleSize","text.size","text.scale","text.scaling","text.padding","text.margin","text.position","text.style"].reduce((t,e)=>(t.add(e),t),new Set),lV=class extends li{constructor(t,e){super(t),this._textBBoxes=[],this._rects=[],this._enabled=!1,this._geoEnabled=!1,this._intersects=[],this._textDisplacement={},this._textDisplacementUpdate={},this._skipFrames=!1,this._output={remove:{nodes:[],edges:[]},redraw:{nodes:[],edges:[]},rects:this._rects,bboxes:this._textBBoxes,intersects:this._intersects,realIntersection:!1,indexToLayer:{},byLayer:[],indexToRedrawEdgeText:{},indexToRemoveEdgeText:{},indexToRedrawNodeText:{},indexToRemoveNodeText:{},indexToQuadIndex:{}},this._onZoomStart=_p(({startZoom:i,endZoom:n})=>{this._enabled&&n<i&&this._updateLabels(this._modules.camera.clone({zoom:n}))},oV),this._onAttributesChanged=i=>{if([...i.edgeAttributes,...i.nodeAttributes].some(n=>aV.has(n))){const n=i.nodes._indexes;for(let s=0;s<n.length;s++)this._textDisplacementUpdate[n[s]]=!0;this._update()}},this._onToggle=i=>(i?this._update():this._reset(),this),this._update=()=>{(this._enabled||this._forceEnabled)&&this._updateDebounced()},this._toggleDebug=i=>{i?this._modules.layers.whenReady(()=>{this._layer=this._modules.layers.addCanvasLayer(n=>{n.lineWidth=1/this._modules.camera.getZoom(),V8(n,this._textBBoxes,this._rects,this._intersects,this._quadtree)},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._canvas=this._layer.element,this._ctx=this._canvas.getContext("2d"),this._update()}):this._canvas&&(this._layer.destroy(),this._canvas=this._ctx=null)},this._measureText=(i,n,s,r)=>this._engine.measureText(i,n,s,r),this._textDisplacement={},this._textDisplacementUpdate={},this._quadtree=new X2(i=>{const n=zl,s=n*i;return this._textBBoxes.slice(s,s+n)},eV),e.forceEnableTextOverlapRemoval&&this.forceEnable()}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.events.register(["labelCollisionsRemoved"]),this.setRate(rV),this._modules.settings.register("texts.preventOverlap",!0,this._onToggle),this._modules.settings.register("texts.debug",!1,this._toggleDebug),this._modules.settings.register("texts.removalStrategy",iV);const t=this._output;this._nodeTraversal=YT(this._quadtree,!1,1,t),this._edgeTraversal=YT(this._quadtree,!1,0,t),this._modules.events.on(["layoutEnd","locate"],()=>this._updateLabels()).on(["viewChanged","mouseover","mouseout"],this._update).on("updateAttributes",this._onAttributesChanged).on("setContainer",({element:e})=>{if(e)return this._enable();this._disable()}).on("zoomStart",this._onZoomStart).on("viewExportStart",({preventOverlap:e,camera:i})=>{e&&this.forceUpdate(i)}).on("viewExportEnd",()=>{this.forceUpdate()}).on("geoEnabled",()=>this._geoEnabled=!0).on("geoDisabled",()=>this._geoEnabled=!1)}getTextsBoundingBox(t,e){if(this._skipFrames=!0,t||e?this._updateLabels(this._modules.camera,t?Array.from(t._indexes):[],e?Array.from(e._indexes):[]):this._updateLabels(),this._skipFrames=!1,this._rects===void 0)throw new Error("this._rects is undefined");const i=this._rects,n=new So;for(let s=0;s<i.length;s+=5){const r=i[s],a=i[s+1],u=i[s+2],h=i[s+3],c=i[s+4],[g,_,m,v]=Gp(r,a,u,h,c);n.addPoint(g,_).addPoint(m,v)}return n}setRate(t){this._updateDebounced=this._modules.sync.debounceIdle(e=>this._updateLabels(e),t)}forceEnable(){this._forceEnabled=!0}update(){this._update()}forceUpdate(t=this._modules.camera){this._updateLabels(t)}query(t,e,i,n,s){const r=this._quadtree.query(t,e,i,n);for(let a=0;a<r.length;a++){const u=this._textBBoxes[6*r[a]+4],h=this._textBBoxes[6*r[a]+5];u?s.nodes.push(h):s.edges.push(h)}}_enable(){this._enabled=!0,this._update()}_disable(){this._textBBoxes=[],this._rects=[],this._intersects=[],this._enabled=!1}_onCameraMove(){this._update()}_updateLabels(t=this._modules.camera,e,i){if(!this._modules.settings.get("texts.preventOverlap"))return;const n=this._modules.graphics.getNodeAttributes(),s=this._modules.graphics.getEdgeAttributes();this._intersects=[],this._textBBoxes=[],this._rects=[];const r=t.getAngle(),a=t.getProjectedScreenBounds(sV),u=this._modules.settings.get("texts.removalStrategy")===nV,h={angle:r,zoom:t.zoom,sin:Math.sin(r),cos:Math.cos(r)};this._resetOutput();const c=this._output;if(!e||!i){const b=this._modules.spatial.queryRaw(a[0],a[1],a[2],a[3]);e=b.nodes,i=b.edges}const g=this._quadtree.clear().cover(a[0],a[1],a[2],a[3]);if(e.length+i.length===0)return;const _=this._modules.captor.getPointedElement();let m=null,v=null;_!==null&&(_.isNode?m=_._index:v=_._index);for(const b of e)!this._textDisplacementUpdate[b]&&this._textDisplacement[b]||(this._textDisplacement[b]=$8(b,n,this._measureText),this._textDisplacementUpdate[b]=!1);tV(e,g,h,n,b=>this._textDisplacement[b],u,c,m,this._nodeTraversal),Z8(i,g,h,s,n,this._measureText,u,c,v,this._edgeTraversal,this._geoEnabled),this._skipFrames||this._clearOverlaps(this._output),this._modules.settings.get("texts.debug")&&this._layer.refresh()}_clearOverlaps(t){const e=this._modules.graph.nodeList,i=this._modules.graph.edgeList,n=this._modules.graphics,s=e(new Uint32Array(t.remove.nodes)),r=i(new Uint32Array(t.remove.edges)),a=e(new Uint32Array(t.redraw.nodes)),u=i(new Uint32Array(t.redraw.edges));n.setTextHidden(s,!0),n.setTextHidden(r,!0),n.setTextHidden(a,!1),n.setTextHidden(u,!1),this._modules.events.fire("labelCollisionsRemoved",t)}_resetOutput(){const t=this._output;t.remove.nodes=[],t.remove.edges=[],t.redraw.nodes=[],t.redraw.edges=[],t.rects=this._rects,t.bboxes=this._textBBoxes,t.intersects=this._intersects,t.realIntersection=!1,t.indexToLayer={},t.byLayer=[],t.indexToRedrawEdgeText={},t.indexToRemoveEdgeText={},t.indexToRedrawNodeText={},t.indexToRemoveNodeText={},t.indexToQuadIndex={}}_reset(){this._modules.graphics.resetTextHidden(),this._textDisplacement={},this._textDisplacementUpdate={}}},uV=class extends li{constructor(){super(...arguments),this._onStartInteractionEvent=(t,e)=>{if(this._current)return;const i=this._interactionsByStartEvent[e];let n;for(const s of i)s.check(t)&&(!n||s.priority>=n.priority)&&(n=s);n&&this._startInteraction(n,t)},this._onProgressInteractionEvent=(t,e)=>{this._current&&this._current.progressEventName===e&&this._current.onProgress&&this._current.onProgress(t)},this._onStopInteractionEvent=(t,e)=>{this._current&&this._current.stopEventName===e&&this._stopCurrentInteraction(null)}}onMounted(){this._interactionsByStartEvent={},this._boundProgressEvents={},this._boundStopEvents={}}_startInteraction(t,e){t.onStart&&t.onStart(e),t.onStop&&(this._current=t,t.disableDetection&&this._modules.captor.setDetectionEnabled(!1))}_stopCurrentInteraction(t){this._current&&this._current.disableDetection&&this._modules.captor.setDetectionEnabled(!0),this._current&&this._current.onStop&&this._current.onStop(t),this._current=void 0}_forceStartInteraction(t,e){this._current&&this._stopCurrentInteraction(e),this._startInteraction(t,e)}_createWrapper(t){return{start:e=>this._forceStartInteraction(t,e)}}_addInteraction(t,e){const i=this._interactionsByStartEvent[t];return i?i.push(e):(this._interactionsByStartEvent[t]=[e],this._modules.events.on(t,this._onStartInteractionEvent)),this._createWrapper(e)}_createProgressiveInteraction(t,e,i,n){const s={priority:ZT(n.priority),check:n.check||Dm,onStart:n.onStart||Ci,onProgress:n.onProgress||Ci,onStop:n.onStop||Ci,disableDetection:!!n.disableDetection,progressEventName:e,stopEventName:i};return this._boundProgressEvents[e]||(this._boundProgressEvents[e]=!0,this._modules.events.on(e,this._onProgressInteractionEvent)),this._boundStopEvents[i]||(this._boundStopEvents[i]=!0,this._modules.events.on(i,this._onStopInteractionEvent)),this._addInteraction(t,s)}_createNonProgressiveInteraction(t,e){return this._addInteraction(t,{priority:ZT(e.priority),check:e.check||Dm,onStart:e.handler||Ci,onProgress:void 0,onStop:void 0,disableDetection:!1,progressEventName:void 0,stopEventName:void 0})}onDrag(t){return this._createProgressiveInteraction("dragStart","dragProgress","dragEnd",t)}onGesture(t){return this._createProgressiveInteraction("gestureStart","gestureProgress","gestureEnd",t)}onClick(t){return this._createNonProgressiveInteraction("click",t)}onDoubleClick(t){return this._createNonProgressiveInteraction("doubleclick",t)}onHover(t){return this._createNonProgressiveInteraction("mouseover",t)}onUnhover(t){return this._createNonProgressiveInteraction("mouseout",t)}onMouseWheel(t){return this._createNonProgressiveInteraction("mousewheel",t)}onMouseDown(t){return this._createNonProgressiveInteraction("mousedown",t)}onMouseUp(t){return this._createNonProgressiveInteraction("mouseup",t)}onMouseMove(t){return this._createNonProgressiveInteraction("mousemove",t)}};function ZT(t){return typeof t=="string"?BD.indexOf(t):typeof t!="number"||isNaN(t)?0:t}var hV=["virtualUp","mouseupInternal","touchUp"],dV=["virtualDown","mousedownInternal","touchDown"],cV=["virtualMove","mousemoveInternal","touchMove"],fV=["virtualClick","clickInternal","touchTap"],gV=["virtualDoubleClick","doubleclickInternal","touchDoubleTap"],_V=["virtualWheel","mousewheelInternal"],mV=100,pV=class extends li{constructor(){super(...arguments),this.spatialIndexMarginRatio=5,this._elt=null,this._hoveredElt=null,this._draggedElt=null,this._hover=!1,this._disabledCounter=0,this._accDx=0,this._accDy=0,this._prevX=0,this._prevY=0,this._buttons={left:{isPressed:!1,isDragging:!1},middle:{isPressed:!1,isDragging:!1},right:{isPressed:!1,isDragging:!1}},this._onGraphChanged=()=>{this._resetCurrent(this._modules.position.x,this._modules.position.y),this._onMove({x:this._modules.position.x,y:this._modules.position.y,source:null,domEvent:null})}}onMounted(){this._modules.events.register(["mousemove","mousedown","mouseup","click","doubleclick","mousewheel","mouseout","mouseover","dragStart","dragProgress","dragEnd","gestureStart","gestureProgress","gestureEnd"]),this._modules.settings.register("detect.nodes",!0).register("detect.edges",!0).register("detect.nodeTexts",!0).register("detect.nodeBadges",!0).register("detect.edgeTexts",!0).register("detect.nodeErrorMargin",5).register("detect.edgeErrorMargin",2).register("detect.enableSpatialIndex",!0),this._modules.events.on(["removeNodes","removeEdges","clearGraph"],this._onGraphChanged).on(cV,(t,e)=>{this._onMove({...t,source:td(e)})}).on(dV,({domEvent:t,x:e,y:i,button:n="left"},s)=>{this._onDown({domEvent:t,x:e,y:i,button:n,source:td(s)})}).on(hV,({domEvent:t,x:e,y:i,button:n="left"},s)=>{this._onUp({domEvent:t,x:e,y:i,button:n,source:td(s)})}).on(fV,({domEvent:t,x:e,y:i,button:n="left"},s)=>{this._onClick({domEvent:t,x:e,y:i,button:n,source:td(s)})}).on(gV,({domEvent:t,x:e,y:i,button:n="left"},s)=>{this._onDoubleClick({domEvent:t,x:e,y:i,button:n,source:td(s)})}).on(_V,({domEvent:t,x:e,y:i,delta:n,dx:s,dy:r})=>this._onWheel({domEvent:t,x:e,y:i,delta:n,source:"mouse",dx:s,dy:r})).on("touchStartGesture",t=>this._modules.events.fire("gestureStart",t)).on("touchProgressGesture",t=>this._modules.events.fire("gestureProgress",t)).on("touchEndGesture",t=>this._modules.events.fire("gestureEnd",t)).on("documentMouseMove",({domEvent:t,x:e,y:i},n)=>{this._onDocumentMove({domEvent:t,x:e,y:i,source:td(n)})}).on("documentMouseUp",({domEvent:t,x:e,y:i,button:n="left"},s)=>{this._onDocumentUp({domEvent:t,x:e,y:i,source:td(s),button:n})})}triggerUnhover(){this._hover=!1,this._hoveredElt=null}triggerDetection(){this._detectElement(this._modules.position.x,this._modules.position.y,!1,!1),this._elt&&(this._hoveredElt=this._elt,this._hover=!0)}getPointedElement(){return this._hoveredElt}getDraggedElement(){return this._draggedElt}isAnyButtonPressed(){return this._buttons.left.isPressed||this._buttons.right.isPressed||this._buttons.middle.isPressed}isAnyButtonDragging(){return this._buttons.left.isDragging||this._buttons.right.isDragging||this._buttons.middle.isDragging}isButtonPressed(t){return this._buttons[t].isPressed}isLeftPressed(){return this.isButtonPressed("left")}getCursorPosition(){return{x:this._modules.position.x,y:this._modules.position.y}}getCursorInformation(){return{x:this._modules.position.x,y:this._modules.position.y,target:this._hoveredElt}}setDetectionEnabled(t){this._disabledCounter=Math.max(0,this._disabledCounter+(t?-1:1))}_resetCurrent(t,e){for(const i in this._buttons){const n=this._buttons[i];n.isDragging&&this._modules.events.fire("dragEnd",{domEvent:null,x:t,y:e,button:i,target:this._draggedElt}),n.isPressed=!1,n.isDragging=!1}this._hover&&this._hoveredElt&&this._modules.events.fire("mouseout",{domEvent:null,x:t,y:e,target:this._hoveredElt}),this._hover=!1,this._hoveredElt=null,this._draggedElt=null}_onMove({domEvent:t,x:e,y:i,source:n}){let{dx:s,dy:r}=this._setPointerPosition(e,i);this._modules.events.fire("mousemove",{domEvent:t,x:e,y:i,dx:s,dy:r,source:n});for(const a in this._buttons){const u=this._buttons[a];if(u.isPressed)if(u.isDragging){const h=this._getStoredDXY();s+=h.dx,r+=h.dy,this._modules.events.fire("dragProgress",{domEvent:t,x:e,y:i,dx:s,dy:r,button:a,source:n,target:this._draggedElt})}else u.isDragging=!0,this._hoveredElt&&this._hover&&(this._modules.events.fire("mouseout",{domEvent:t,x:e,y:i,source:n,target:this._hoveredElt}),this._hover=!1),this._draggedElt||(this._draggedElt=this._hoveredElt),this._storeDXY(s,r),this._modules.events.fire("dragStart",{domEvent:t,x:e,y:i,button:a,source:n,target:this._draggedElt})}t&&!this._modules.graphics.getDomElement().contains(t.target)||this._detectElement(e,i,!1,!1),this._elt!==this._hoveredElt&&(this._hoveredElt&&this._hover&&(this._hover=!0,this._modules.events.fire("mouseout",{domEvent:t,x:e,y:i,source:n,target:this._hoveredElt})),this._hoveredElt=this._elt,this._elt&&(this._hover=!0,this._modules.events.fire("mouseover",{domEvent:t,x:e,y:i,source:n,target:this._hoveredElt})))}_onDocumentMove({domEvent:t,x:e,y:i,source:n}){for(const s in this._buttons){const{isDragging:r}=this._buttons[s];if(r){const{dx:a,dy:u}=this._setPointerPosition(e,i);this._modules.events.fire("dragProgress",{domEvent:t,x:e,y:i,dx:a,dy:u,button:s,source:n,target:this._draggedElt})}}}_onDocumentUp({domEvent:t,x:e,y:i,source:n,button:s}){if(s!=null&&this._buttons[s].isDragging){this._modules.events.fire("dragEnd",{domEvent:t,x:e,y:i,button:s,source:n,target:this._draggedElt});const r=this._buttons[s];r.isDragging=!1,r.isPressed=!1,this.isAnyButtonDragging()||(this._draggedElt=null)}}_onDown({domEvent:t,x:e,y:i,button:n,source:s}){if(n==null)return;this._detectElement(e,i,!1,!1),this._elt!==this._hoveredElt&&this._resetCurrent(e,i);const r=this._buttons[n];this._hoveredElt=this._elt,r.isPressed=!0,this._elt&&t&&(t.stopPropagation(),t.preventDefault()),this._modules.events.fire("mousedown",{domEvent:t,x:e,y:i,button:n,source:s,target:this._hoveredElt})}_onDoubleClick({domEvent:t,x:e,y:i,button:n,source:s}){n!=null&&(qT(t,"doubleclick")||this._modules.events.fire("doubleclick",{domEvent:t,x:e,y:i,button:n,source:s,target:this._hoveredElt}))}_onUp({domEvent:t,x:e,y:i,button:n,source:s}){if(n==null)return;const r=this._buttons[n];r.isPressed&&(r.isDragging&&(this._modules.events.fire("dragEnd",{domEvent:t,x:e,y:i,button:n,source:s,target:this._draggedElt}),r.isDragging=!1,this.isAnyButtonDragging()||(this._draggedElt=null)),r.isPressed=!1,this._detectElement(e,i,!1,!1),this._modules.events.fire("mouseup",{domEvent:t,x:e,y:i,button:n,source:s,target:this._elt}),this.isAnyButtonPressed()||this._hover||s==="touch"||(this._hoveredElt=this._elt,this._hoveredElt&&(this._modules.events.fire("mouseover",{domEvent:t,x:e,y:i,source:s,target:this._hoveredElt}),this._hover=!0)))}_onClick({domEvent:t,x:e,y:i,button:n,source:s}){qT(t,"click")||this._modules.events.fire("click",{domEvent:t,x:e,y:i,button:n,source:s,target:this._hoveredElt})}_onWheel({domEvent:t,x:e,y:i,delta:n,source:s,dx:r,dy:a}){this._modules.position.x=e,this._modules.position.y=i,this._modules.events.fire("mousewheel",{domEvent:t,x:e,y:i,dx:r,dy:a,delta:n,source:s,target:this._hoveredElt})}_storeDXY(t,e){this._accDx=t,this._accDy=e}_getStoredDXY(){const t=this._accDx,e=this._accDy;return this._accDx=0,this._accDy=0,{dx:t,dy:e}}_setPointerPosition(t,e){const i=t-this._prevX,n=e-this._prevY;return this._modules.position.x=t,this._modules.position.y=e,this._prevX=t,this._prevY=e,this._accDx=0,this._accDy=0,{dx:i,dy:n}}_detectElement(t,e,i,n){this._elt=this.detectElementAt(t,e,i,n)}detectElementAt(t,e,i,n){if(this._disabledCounter!==0)return null;const s=this._modules.settings,r=s.get("detect.enableSpatialIndex"),a=s.get("detect.nodeErrorMargin")||0,u=s.get("detect.edgeErrorMargin")||0;let h=s.get("detect.nodes"),c=s.get("detect.edges");n&&(h=!0,c=!0);let g=null,_=[],m=[];if(!i&&r&&(h||c)){const x=this.spatialIndexMarginRatio,M=Math.max(a*x,u*x),N=this._modules.spatial.queryRawProjected(t-M,e-M,t+M,e+M);_=N.nodes,m=N.edges}let v=null,b=null;if(h&&(v=this._modules.graphics.detectNode(t,e,!!s.get("detect.nodeTexts"),!!s.get("detect.nodeBadges"),a,_)),c&&(m.length<mV||!v)&&(b=this._modules.graphics.detectEdge(t,e,!!s.get("detect.edgeTexts"),u,m)),v&&b){const x=this._modules.graphics.getAttributesManager().getFlexArrays();g=x.nodes.current.layer.get(v._index)>=x.edges.current.layer.get(b._index)?v:b}else v?g=v:b&&(g=b);return g}};function td(t){return t.indexOf("touch")===0?"touch":"mouse"}var Dv=!1,WT={down:{trigger:"pointerdown",duplicate:"mousedown"},click:{trigger:"pointerdown",duplicate:"mouseup"},doubleclick:{trigger:"pointerdown",duplicate:"mouseup"}};function qT(t,e){if(t)return t.type===WT[e].trigger&&(Dv=!0),t.type===WT[e].duplicate&&Dv?(Dv=!1,!0):void 0}var yV=class extends li{constructor(){super(...arguments),this._dragged=null,this._start=[],this._end=[],this._shouldDrag=({target:t,button:e})=>{const i=e==="left",n=this._modules.settings.get("interactions.drag.enabled"),s=t!==null&&t.isNode&&t.getAttribute("draggable")===!0;return!!(i&&n&&s)},this._onDragStart=({x:t,y:e,target:i})=>{i&&(i.isSelected()?this._dragged=this._modules.selection.getSelectedNodes().filter(n=>n.getAttribute("draggable")):this._dragged=i.toList()),this._dragged&&(this._start=this._dragged.getPosition(),this._end=ps(this._start),this._onBeforeDrag=this._modules.settings.get("interactions.drag.onBeforeDrag"),this._startDrag=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),this._dragged.addClass(Cm),this._modules.events.fire("nodesDragStart",{nodes:this._dragged}),this._modules.graphics.addCursorStyle(this._modules.settings.get("interactions.drag.cursor")))},this._onDrag=()=>{if(!this._dragged||!this._startDrag)return;const{x:t,y:e}=this._modules.captor.getCursorInformation(),i=this._dragged._indexes,n=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),s=n.x-this._startDrag.x,r=n.y-this._startDrag.y;for(let a=0;a<i.length;++a){const u=this._start[a],h=this._end[a];h.x=u.x+s,h.y=u.y+r}this._onBeforeDrag&&this._onBeforeDrag(this._dragged,t,e,this._end),this._modules.settings.get("interactions.drag.applyResult")&&this._modules.individualAttributes.setMultipleAttributes(this._dragged,this._end),this._modules.events.fire("nodesDragProgress",{nodes:this._dragged,dx:s,dy:r})},this._onDragEnd=()=>{this._dragged&&(this._dragged.removeClass(Cm),this._modules.graphics.removeCursorStyle(this._modules.settings.get("interactions.drag.cursor")),this._modules.events.fire("nodesDragEnd",{nodes:this._dragged,start:this._start,end:this._end}),this._dragged=null,this._start=[],this._end=[])}}onMounted(){this._modules.classes.createClass({name:Cm,isBuiltin:!0,nodeAttributes:{layer:kD}}),this._modules.events.register(["nodesDragStart","nodesDragProgress","nodesDragEnd"]),this._modules.settings.register("interactions.drag.enabled",!0).register("interactions.drag.cursor","move").register("interactions.drag.onBeforeDrag",void 0),this._modules.settings.register("interactions.drag.applyResult",!0),this._modules.interactions.onDrag({priority:"drag",disableDetection:!0,check:this._shouldDrag,onStart:this._onDragStart,onProgress:this._onDrag,onStop:this._onDragEnd})}},vV={color:"#00C3FF",radius:4,cursorOnHover:"grab",cursorOnDrag:"grabbing"},xV=class extends li{constructor(){super(...arguments),this._hoverHandle=!1,this._grabHandle=!1,this._x=0,this._y=0,this._enabled=!1,this._onMouseUp=()=>this._grabHandle=!1,this._onMouseDown=()=>{this._hoverHandle&&(this._grabHandle=!0)},this._onDragProgress=()=>{this._grabHandle&&this._refreshCanvas()},this._onDragStart=()=>{if(!this._movedEdges)return;this._nodesToHighlight=this._nodesToHighlight.filter(e=>e!==this._startNode&&!e.isVirtual()),this._movedEdges.setExcluded(!0);const t=this._options.cursorOnDrag;this._prevSettings=this._modules.settings.update({edgeHover:!1,cursor:{default:t,node:t,edge:t}})},this._onDragEnd=()=>{if(!this._movedEdges)return;this._restoreSettings();const t=this._getPointedNode();t&&this._movedEdges.forEach(e=>{e.getTarget()===this._startNode?e.setTarget(t):e.setSource(t)}),this._movedEdges.setExcluded(!1),this._movedEdges.setSelected(!0),this._movedEdges=null,this._refreshHandles()},this._refreshHandles=()=>{if(!this._enabled||this._movedEdges)return;const t=this._modules.selection.getSelectedEdges();this._nodesToHighlight=t.getExtremities().dedupe().filter(e=>!e.isVirtual()),this._rewirableClass.clearEdges(),this._rewirableClass.add(t),this._refreshCanvas()},this._shouldInteractionStart=({target:t})=>{if(!this._enabled||!t||!t.isNode||!this._hoverHandle||t.isVirtual())return!1;const e=t.getAdjacentEdges().filter(i=>i.isSelected());return!!e.size&&(this._movedEdges=e,this._edgeColors=this._movedEdges.getAttribute("color"),this._startNode=t,!0)},this._refreshCanvas=()=>{this._enabled&&this._layer.refresh()},this._checkForHover=()=>{if(!this._enabled||!this._nodesToHighlight)return;const t=this._options.radius,e=this._nodesToHighlight.getPosition(),i=this._modules.camera.screenToGraphCoordinates(this._modules.captor.getCursorPosition());for(let n=0;n<e.length;n++){const{x:s,y:r}=e[n];if(Gs(s,r,i.x,i.y)<t)return void this._enableCursorOnHover()}this._disableCursorOnHover()}}onMounted(){this._rewirableClass=this._modules.classes.createClass({name:aL,isBuiltin:!0,edgeAttributes:{layer:FD}})}enable(t){this._enabled||(this._modules.events.on("move",this._checkForHover).on("mousemove",this._checkForHover).on("dragProgress",this._onDragProgress).on("nodesDragProgress",this._refreshCanvas).on("mousedown",this._onMouseDown).on("mouseup",this._onMouseUp).on("edgesSelected",this._refreshHandles).on("edgesUnselected",this._refreshHandles),this._interaction=this._modules.interactions.onDrag({priority:"rewiring",check:this._shouldInteractionStart,onStart:this._onDragStart,onProgress:({x:e,y:i})=>{this._x=e,this._y=i},onStop:this._onDragEnd}),this._options={...vV,...t},this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(e=>{if(!this._enabled||!this._nodesToHighlight)return;const i=this._modules.captor.getCursorPosition(),n=this._getPointedNode(),s=this._options.color,r=this._options.radius,a=2*r;if(this._displayMovedEdges(e),e.fillStyle=s,e.strokeStyle=s,this._nodesToHighlight.forEach(u=>{const{x:h,y:c}=u.getPosition();e.fillRect(h-r,c-r,a,a)}),this._movedEdges){const u=n?n.getPosition():i;e.fillRect(u.x-r,u.y-r,a,a)}},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._refreshHandles())}disable(){this._enabled&&(this._interaction&&this._interaction.stop&&this._interaction.stop(),this._interaction=void 0,this._modules.graphics.removeCursorStyle(this._options.cursorOnDrag),this._disableCursorOnHover(),this._restoreSettings(),this._layer.destroy(),this._rewirableClass.clearEdges(),this._enabled=!1,[this._checkForHover,this._onDragProgress,this._refreshCanvas,this._onMouseDown,this._onMouseUp,this._refreshHandles].forEach(t=>this._ogma.events.off(t)))}enabled(){return this._enabled}_restoreSettings(){this._prevSettings&&(this._modules.settings.update(this._prevSettings),this._prevSettings=void 0)}_disableCursorOnHover(){this._hoverHandle&&!this._grabHandle&&(this._hoverHandle=!1,this._modules.graphics.removeCursorStyle(this._options.cursorOnHover))}_enableCursorOnHover(){this._hoverHandle||(this._hoverHandle=!0,this._modules.graphics.addCursorStyle(this._options.cursorOnHover))}_displayMovedEdges(t){if(!this._movedEdges)return;const e=this._x,i=this._y,n=this._modules.camera.screenToGraphCoordinates({x:e,y:i});this._movedEdges.forEach((s,r)=>{const a=this._edgeColors[r],u=s.getSource(),h=s.getTarget(),c=this._getPointedNode(),g=h===this._startNode?u:h,_=Number(s.getAttribute("width")),m=g.getPosition(),v=c?c.getPosition():n;t.beginPath(),t.moveTo(m.x,m.y),t.lineTo(v.x,v.y),t.strokeStyle=a,t.lineWidth=_,t.stroke()})}_getPointedNode(){const t=this._modules.captor.getPointedElement();return t&&t.isNode&&!t.isVirtual()?t:null}},QT={cursor:"nesw-resize",color:"#00C3FF",lineWidth:1,handleSize:6,detectionMargin:5,snappingRatio:1.25,nbNodesToSnapTo:5,previewColor:"rgba(0, 0, 0, 0.2)",sizeIndicatorColor:"black",sizeIndicatorOffset:5,sizeIndicatorWidth:3,sizeIndicatorThickness:1},bV=class extends li{constructor(){super(...arguments),this._enabled=!1,this._nodesToHighlight=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[],this._onSelectionChange=()=>{this._enabled&&(this._nodesToHighlight=this._modules.selection.getSelectedNodes(),this._displayHandles())},this._displayHandlesHandler=()=>this._displayHandles(),this._moveHandler=({x:t,y:e})=>{this._modules.dom.setTimeout(()=>this._detectBoundingBoxes(t,e),0)}}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.interactions.onDrag({priority:"resizing",disableDetection:!0,check:()=>!(!this._enabled||!this._pointedNode),onStart:({x:t,y:e})=>{this._x=t,this._y=e,this._nodeBeingResized=this._pointedNode},onProgress:({x:t,y:e})=>{this._x=t,this._y=e,this._displayHandles()},onStop:()=>{if(this._nodesToHighlight){const t=this._modules.camera.zoom,e=this._nodesToHighlight.getAttributes(["x","y","radius"]).map(({x:i,y:n,radius:s},r)=>{const a=this._additionalRadiuses[r]/t;return{radius:+s+a,x:i+a,y:n-a}});this._nodesToHighlight.setAttributes(e)}this._pointedNode=null,this._nodeBeingResized=null,this._displayHandles()}})}onReady(){this._modules.events.on(["nodesSelected","nodesUnselected"],this._onSelectionChange)}_enableCursor(){this._cursorEnabled||(this._modules.graphics.addCursorStyle(this._options.cursor),this._cursorEnabled=!0)}_disableCursor(){this._cursorEnabled&&(this._modules.graphics.removeCursorStyle(this._options.cursor),this._cursorEnabled=!1)}_detectBoundingBoxes(t,e){if(!this._enabled||this._nodeBeingResized||!this._nodesToHighlight)return;const i=this._options.handleSize/2,n=this._options.detectionMargin;return this._pointedNode=null,this._forEachNodeToHighlight((s,r,a)=>{const u=r.x+a-i-n,h=r.x+a+i+n,c=r.y-a-i-n,g=r.y-a+i+n;t>=u&&t<=h&&e>=c&&e<=g&&(this._pointedNode=s)}),this._pointedNode?this._enableCursor():this._disableCursor()}_forEachNodeToHighlight(t){this._nodesToHighlight&&this._nodesToHighlight.forEach(e=>{const i=e.getPositionOnScreen(),n=this._getTotalRadius(e);t(e,i,n)})}_displayHandles(){this._enabled&&this._nodesToHighlight&&this._layer.refresh()}_displayNodePreview(t,e,i,n,s,r){if(s*=1/this._modules.camera.getZoom(),t.beginPath(),r.length===1)t.arc(i,n,s,0,2*Math.PI);else for(let a=0;a<r.length;++a){const u=r[a],h=i+u.x*s,c=n+u.y*s;a===0?t.moveTo(h,c):t.lineTo(h,c)}t.fillStyle=this._options.previewColor,t.fill()}_getTotalRadius(t,e=!0){return Number(t.getAttribute("radius"))*(this._modules.camera.zoom*(e?1:0))+Number(t.getAttribute("innerStroke.width"))+Number(t.getAttribute("outerStroke.width"))+this._options.lineWidth/2}_snap(t,e,i){const n=this._modules.spatial.getNodesInScreenByDistance(e).filter(_=>!_.isSelected()).slice(0,this._options.nbNodesToSnapTo),s=this._getTotalRadius(e),r=s+i,a=this._options.snappingRatio,u=r/s,h=Math.round(x2(u,a));let c=s*Math.pow(a,h),g=null;if(n.forEach(_=>{const m=this._getTotalRadius(_);Math.abs(m-r)<=Math.abs(c-r)&&(c=m,g=_)}),g){t.save(),t.strokeStyle=this._options.sizeIndicatorColor,t.lineWidth=this._options.sizeIndicatorThickness/this._modules.camera.getZoom();const _=g.getAttribute("radius");this._displaySizeIndicator(t,e,c),n.filter(m=>m.getAttribute("radius")===_).forEach(m=>this._displaySizeIndicator(t,m)),t.restore()}return c-s}_displaySizeIndicator(t,e,i){i=i||void 0;const n=this._modules.camera.getZoom(),s=e.getPosition(),r=this._getTotalRadius(e),a=(i||r)/n,u=(i?i-r:0)/n,h=u+(-this._options.sizeIndicatorOffset-(i?Number(e.getAttribute("innerStroke.width"))+Number(e.getAttribute("outerStroke.width")):0))/n,c=s.x-a+h|0,g=s.y-a-u|0,_=s.y+a-u|0,m=this._options.sizeIndicatorWidth/n;t.beginPath(),t.moveTo(c-m,g),t.lineTo(c+m,g),t.moveTo(c,g),t.lineTo(c,_),t.moveTo(c-m,_),t.lineTo(c+m,_),t.stroke()}enable(t={}){this._enabled||(this._options={...QT,...t},this._layer=this._modules.layers.addCanvasLayer(e=>{const i=Do(),n=this._modules.camera.getZoom(),{color:s,lineWidth:r}=this._options;let a=this._options.handleSize,u=0;if(this._nodeBeingResized){const h=this._getTotalRadius(this._nodeBeingResized),c=this._nodeBeingResized.getPositionOnScreen();u=Math.max(this._x-(c.x+h),-(this._y-(c.y-h)))/2}this._additionalRadiuses=[],this._nodesToHighlight&&this._nodesToHighlight.forEach(h=>{const c=h.getPosition();let g=this._getTotalRadius(h),_=0;if(this._nodeBeingResized){_=u;const m=-g+Number(h.getAttribute("innerStroke.width"))+Number(h.getAttribute("outerStroke.width"))+r/2+1;_=_<m?m:this._snap(e,h,_),this._additionalRadiuses.push(_);const v=h.getAttribute("shape"),b=this._engine.getShapePoints(v),x=c.x+_/n,M=c.y-_/n,N=g+_;this._displayNodePreview(e,i,x,M,N,b)}e.strokeStyle=s,e.fillStyle=s,e.lineWidth=r/n,g/=n,_/=n,a/=n*i,e.strokeRect(c.x-g,c.y-g-2*_,2*(_+g),2*(_+g)),e.fillRect(c.x+g+2*_-a/2,c.y-g-2*_-a/2,a,a)})},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._modules.events.on(["mousemove","mousedown"],this._moveHandler),this._enabled=!0)}disable(){this._enabled&&(this._modules.events.off(this._displayHandlesHandler).off(this._moveHandler),this._layer.destroy(),this._disableCursor(),this._reset())}_reset(){this._enabled=!1,this._nodesToHighlight=null,this._options={...QT},this._nodeBeingResized=null,this._pointedNode=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[]}enabled(){return this._enabled}},EV={strokeColor:"black",strokeWidth:5,dashed:!0,cursorStyle:"cell",createNodes:!0,condition:f0,onNodeCreated:Ci,onEdgeCreated:Ci,createNode:ll,createEdge:ll,onComplete:Ci},SV=class extends li{constructor(){super(...arguments),this._enabled=!1,this._blockId=0,this._cursorEnabled=!1}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._depth=Cg(0).edgeBody,this._modules.events.register(["connectNodes"]),this._interaction=this._modules.interactions.onDrag({priority:"connectNodes",check:({target:t,button:e="left"})=>this._enabled&&e==="left"&&t&&t.isNode&&!t.isVirtual(),onStart:({target:t})=>this._onStart(t),onProgress:({x:t,y:e})=>this._onMove(t,e),onStop:()=>this._onStop()}),this._modules.events.on("clearGraph",()=>this.disable())}_onStart(t){t&&(this._cursorEnabled=!0,this._startNode=t,this._startPos=t.getPosition(),this._modules.graphics.addCursorStyle(this._options.cursorStyle),this._blockId=this._modules.graphics.allocateGraphicsEngineBlockId())}_onMove(t,e){this._startNode!==null&&(this._endPos=this._modules.camera.screenToGraphCoordinates({x:t,y:e}),this._drawLine())}_onStop(){if(this._startNode===null)return;const{condition:t,onNodeCreated:e,onEdgeCreated:i,createEdge:n,createNode:s,onComplete:r,createNodes:a}=this._options;let u=this._modules.captor.getPointedElement(),h=null,c=null;if(this._modules.graphics.releaseGraphicsEngineBlockId(this._blockId),!u&&a){const g=s({attributes:{x:this._endPos.x,y:this._endPos.y}});u=this._modules.graph.addNode(g),c=u,e&&e(c)}if(u&&!u.isVirtual()&&(c||!t||t(this._startNode,u))){const g=n({source:this._startNode.getId(),target:u.getId()});h=this._modules.graph.addEdge(g),i&&i(h)}r&&(this._modules.events.fire("connectNodes",{source:this._startNode,target:u,edge:h}),r(this._startNode,u,h||void 0)),this.disable()}_drawLine(){this._group.reset(ol,!1,this._depth);const t=this._group.nextAndReset().end;t.pieceId=Np,t.shape="line",t.x1=this._startPos.x,t.y1=this._startPos.y,t.x2=this._endPos.x,t.y2=this._endPos.y,t.fillColor=this._options.strokeColor,t.thicknessOrFontSizeFixed=this._options.strokeWidth,this._options.dashed&&(t.dashLength=3,t.gapLength=1),this._engine.storeGroup(this._blockId,this._group),this._modules.dom.refresh()}enable(t={}){return this._enabled||(this._options={...EV,...t},this._enabled=!0,this._cursorEnabled=!1,this._startNode=null,this._prevSettings=this._modules.settings.update({"cursor.node":this._options.cursorStyle,"detect.edges":!1}),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorInformation())),this}disable(){return this._enabled?(this._enabled=!1,this._modules.settings.update(this._prevSettings),this._cursorEnabled&&this._modules.graphics.removeCursorStyle(this._options.cursorStyle),this):this}enabled(){return this._enabled}},AV=["top","bottom","left","right","cssDefined"],TV=1e4,wV={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},LV={position:"top",autoAdjust:!0,delay:100},CV={hover:{node:({target:t})=>t&&t.isNode,edge:({target:t})=>t&&!t.isNode},click:{left:{node:({target:t,button:e})=>e==="left"&&t&&t.isNode,edge:({target:t,button:e})=>e==="left"&&t&&!t.isNode,background:({target:t,button:e})=>e==="left"&&!t},right:{node:({target:t,button:e})=>e==="right"&&t&&t.isNode,edge:({target:t,button:e})=>e==="right"&&t&&!t.isNode,background:({target:t,button:e})=>e==="right"&&!t}},doubleclick:{left:{node:({target:t,button:e})=>e==="left"&&t&&t.isNode,edge:({target:t,button:e})=>e==="left"&&t&&!t.isNode,background:({target:t,button:e})=>e==="left"&&!t},right:{node:({target:t,button:e})=>e==="right"&&t&&t.isNode,edge:({target:t,button:e})=>e==="right"&&t&&!t.isNode,background:({target:t,button:e})=>e==="right"&&!t}}},MV=class extends li{constructor(){super(...arguments),this._x=0,this._y=0}onMounted(){this._handlers={},this._currentHandlerName=null,this._tooltip=null,this._isHover=!1,this._modules.events.register(["tooltipShow","tooltipHide"]),this._modules.events.on(["mouseup","dragStart"],()=>{this._isHover||this._hideTooltip(!1)}).on("mouseout",()=>{this._isHover&&this._hideTooltip(!1)}).on("clearGraph",()=>this._hideTooltip(!1)),this._modules.interactions.onHover(this._createInteraction("hover",!0)),this._modules.interactions.onClick(this._createInteraction("click")),this._modules.interactions.onDoubleClick(this._createInteraction("doubleclick"))}hide(){this._hideTooltip(!0)}isShown(){return!!this._tooltip}refresh(){this._refreshTooltip()}show(e,{position:i="top",autoAdjust:n=!0,className:s,x:r=0,y:a=0}={}){this._showTooltip(e,{position:i,autoAdjust:n,className:s},{x:r,y:a})}setHandler(e,i,n){const s={...LV,...n};s.position&&AV.indexOf(s.position)===-1&&(s.position="top"),this._handlers[e]={handler:i,condition:_s(CV,e),settings:s}}_hideTooltip(e){if(this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null),e&&(this._currentHandlerName=null),this._tooltip){const i=this._tooltip;this._tooltip.parentNode&&this._tooltip.parentNode.removeChild(this._tooltip),this._tooltip=null,this._modules.events.fire("tooltipHide",{tooltip:i})}}_createInteraction(e,i=!1){return{priority:"tooltip",check:n=>{const s=KT(e,n),r=this._handlers[s];return(!i||!this._modules.connectNodes.enabled())&&(!(!r||!r.condition(n))||!(i||!this._currentHandlerName||this._isHover)&&this._tooltip!==null)},handler:n=>{const{target:s,x:r,y:a}=n;this._hideTooltip(!1),this._isHover=i,this._elt=s,this._x=r,this._y=a,this._currentHandlerName=KT(e,n),this._refreshTooltip()}}}_refreshTooltip(){if(!this._currentHandlerName)return void this._hideTooltip(!1);const e=this._handlers[this._currentHandlerName];if(!e)return;const{settings:i,handler:n}=e,s=this._elt;if(s){const a=s.isNode?"node":"edge";if(this._currentHandlerName.indexOf(a)===-1)return}const r=n(s);Promise.resolve(r).then(a=>{this._schedule(()=>this._showTooltip(a,i),i.delay)})}_schedule(e,i){this._timeout&&this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._timeout=null,e()},i)}_showTooltip(e,i,n){this._hideTooltip(!1);const{position:s,className:r,autoAdjust:a}=i;let u=this._x,h=this._y,c=this._elt;const g=this._modules.dom.getDimensions();let _=0,m=0;if(n&&(u=n.x,h=n.y,c=null),typeof e=="string")this._tooltip=NV("div"),Pw(this._tooltip,x0.sanitize(e));else{if(!_2(e))throw new Error(`invalid tooltip ${e}, expected HTML string or HTML element`);this._tooltip=e}const v=this._tooltip;if(r&&this._tooltip.classList.add(r),s!=="cssDefined"&&(v.style.position="absolute"),v.style.zIndex=TV.toString(),this._modules.dom.appendElement(v),c&&c.isNode){const M=c,N=M.getPositionOnScreen(),O=Number(M.getAttribute("radius"))*(M.getAttribute("scalingMethod")==="fixed"?1:this._modules.camera.getZoom())+Number(M.getAttribute("innerStroke.width"))+Number(M.getAttribute("outerStroke.width"));u=N.x,h=N.y,_=O,m=O}const b=v.offsetWidth/2,x=v.offsetHeight/2;if(_+=b,m+=x,s&&s!=="cssDefined"){const M=wV[s];let N=M.x,O=M.y;if(a){const R=u+_*M.x,P=h+m*M.y;(R-b<0||R+b>=g.width)&&(s==="left"||s==="right"?N*=-1:N=R-b<0?(b-R+1)/_:(g.width-(R+b)-1)/_),(P-x<0||P+x>=g.height)&&(s==="top"||s==="bottom"?O*=-1:O=P-x<0?(x-P+1)/m:(g.height-(P+x)-1)/m)}v.style.left=u+_*N-b+"px",v.style.top=h+m*O-x+"px"}this._modules.events.fire("tooltipShow",{tooltip:v})}};function KT(t,{button:e,target:i}){return`${t}${e?`.${e}`:""}.${i!==null?i.isNode?"node":"edge":"background"}`}function NV(t){return xu?document.createElement(t):Bm()}var yg={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",46:"del",8:"backspace",32:"space",224:"cmd",91:"cmd",92:"cmd",93:"cmd",187:"+",189:"-"},jT=Object.keys(yg).reduce((t,e)=>{const i=yg[e];return t[i]||(t[i]=[]),t[i].push(e),t},{}),RV=class extends li{constructor(){super(...arguments),this._onBlur=()=>this.resetKeys(),this._onKeyUp=t=>{const e=t.keyCode||t.which;this._pressed[e]=!1,this._modules.events.fire("keyup",{domEvent:t,key:yg[e],code:e})},this._onKeyDown=t=>{const e=t.keyCode||t.which,i=this._binds[e];if(!this._pressed[e]){if(this._pressed[e]=!0,i)for(const n of i)n.keys.every(s=>s.some(r=>this._pressed[r]))&&n.handler({domEvent:t});this._modules.events.fire("keydown",{domEvent:t,key:yg[e],code:e})}}}onMounted(){this._modules.events.register(["keyup","keydown"]),this._binds=[],this._pressed=[],this._modules.dom.addWindowEventListener("keydown",this._onKeyDown).addWindowEventListener("keyup",this._onKeyUp).addWindowEventListener("visibilitychange",this._onBlur).addWindowEventListener("blur",this._onBlur,!1),this._idleTimeout=4e3,this._prevEventTimeStamp=eo(),this._modules.events.onAnyEvent(()=>{const t=eo();t-this._prevEventTimeStamp>this._idleTimeout&&this.resetKeys(),this._prevEventTimeStamp=t})}setIdleTimeout(t){if(!isFinite(t)||t<=1)throw new TypeError("Idle timeout must be a positive number > 1");this._idleTimeout=t}resetKeys(){for(let t=0;t<this._pressed.length;t++)this._pressed[t]&&(this._pressed[t]=!1,this._modules.events.fire("keyup",{key:yg[t],code:t}))}onKeyPress(t,e){let i=[];if(typeof t=="number")i=[t];else if(typeof t=="string")i=t.split(" ");else{if(!Array.isArray(t))throw new TypeError(`${t} is not a number, string or array`);i=t}if(i.length===0)throw new Error("the array should contain at least one element");const n=i.map(a=>{if(typeof a=="number")return[a];if(typeof a=="string"){const u=jT[a];if(!u)throw new Error(`${a} is not a valid key identifier`);return u}throw new TypeError(`${a} is not a valid key identifier`)}),s=n.pop(),r={keys:n,handler:e};s&&s.forEach(a=>{this._binds[a]||(this._binds[a]=[]),this._binds[a].push(r)})}isPressed(t){if(typeof t=="number")return this._pressed[t];if(typeof t=="string"){const e=jT[t];if(e)return e.some(i=>this._pressed[i])}return!1}},OV=[{name:"color",isNode:!0},{name:"shape",isNode:!0},{name:"radius",isNode:!0},{name:"icon.content",isNode:!0},{name:"image.url",isNode:!0},{name:"image",isNode:!0},{name:"color",isNode:!1},{name:"shape",isNode:!1},{name:"width",isNode:!1}],Lu=Math.PI,Cu=2*Math.PI,CN=Math.cos(Lu/2-Cu/5),MN=Math.cos(Lu/2-Cu/5*2),NN=Math.cos(Lu/2-Cu/5*3),RN=Math.cos(Lu/2-Cu/5*4),ON=Math.sin(-Lu/2+Cu/5),IN=Math.sin(-Lu/2+Cu/5*2),PN=Math.sin(-Lu/2+Cu/5*3),zN=Math.sin(-Lu/2+Cu/5*4),cp=1.6,DN=3,IV=.9,xm=.31,kv=1/3,PV=[8,3],zV=[3,3],bm={position:"bottom",widgetWidth:130,fontFamily:"Arial",fontSize:10,fontColor:"black",titleFontSize:12,titleFontColor:"black",titleMaxLength:20,titleTextAlign:"left",shapeColor:"grey",backgroundColor:"white",borderColor:"black",borderRadius:0,borderWidth:1,innerMargin:10,outerMargin:5,circleStrokeWidth:3,titleFunction:t=>t[t.length-1]},DV=["widgetWidth","fontSize","titleFontSize","borderRadius","borderWidth","innerMargin","outerMargin","circleStrokeWidth"];function kN(t){return Array.isArray(t)?t.reduce((e,i)=>e&&kN(i),!0):t==="undefined"||!isNaN(Number(t))}function FN(t){return Array.isArray(t)?t.reduce((e,i)=>Math.min(e,FN(i)),1/0):typeof(t=Number(t))=="number"?isNaN(t)?1/0:+t:1/0}function BN(t){return Array.isArray(t)?t.reduce((e,i)=>Math.max(e,BN(i)),-1/0):typeof(t=Number(t))=="number"?isNaN(t)?-1/0:+t:-1/0}function vu(t){const e=["K","M","B","T","P","E","Z","Y"];if(t>9999){let i=0;for(;i<e.length&&t>999;)t/=1e3,i++;return(JT(t,3)+e[i-1]).toString()}return JT(t,4).toString()}function JT(t,e=3){const i=e===4?10:1;return t<10?Math.round(100*t*i)/(100*i):t<100?Math.round(10*t*i)/(10*i):t<1e3?Math.round(t*i)/i:Math.round(t)}function UN(t){return t.innerMargin+(t.titleFontSize+t.fontSize)*cp}var kV=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:t.title<=e.title?-1:1,FV=(t,e)=>t.height-e.height,BV=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:e.height-t.height,UV=(t,e)=>t.isNode!==e.isNode?t.isNode?-1:1:t.content[0].title<=e.content[0].title?-1:1;function GV(t,e,i){const n=e.getContext("2d"),{x:s,y:r,height:a,isNode:u,styleProperty:h,title:c,mapping:g,iconFont:_,iconFontStyle:m}=i;YV(n,t,s,r,a),XV(n,t,c,s,r);const v=t.fontSize*cp,b=t.fontSize/2*cp*IV,x=t.fontSize*DN,M=t.fontSize,N=VV(t,u);let O=r+UN(t);const R=s+t.innerMargin+N/2,P=s+2*t.innerMargin+N,F=ug(g),U=kN(F),V=t.fontColor,Y=t.shapeColor,K=Object.keys(g);if(U&&(K.sort((tt,j)=>cu(g[j])-cu(g[tt])),h==="radius"||h==="width")){const tt=FN(F),j=BN(F);return(u?o9:a9)(t,n,s,O,tt,(tt+j)/2,j,Y)}K.forEach(tt=>{const j=g[tt];h==="color"&&(u?GN(n,R,O,b,tt):WV(n,R,O,x,M,tt)),h==="shape"&&(u?t9(n,R,O,b,tt,Y):s9(n,R,O,x,M,tt,Y)),h==="icon.content"&&qV(n,R,O,tt,_,b,V,m),h!=="image"&&h!=="image.url"||QV(n,R,O,b,tt),ZV(n,t,P,O,j,U),O+=v})}function HV(t,e,i,n,s,r){t.beginPath(),t.arc(e,i,n,0,Cu),t.strokeStyle=s,t.lineWidth=r,t.stroke()}function Jg(t,e,i,n,s="left",r="normal"){t.textAlign=s,t.textBaseline="middle",t.fillStyle=n,t.font=`${r} ${i}px "${e}"`}function VV(t,e){const i=e?1:DN;return t.fontSize*i}function YV(t,e,i,n,s){return r9(t,i,n,e.widgetWidth,s,e.borderRadius,e.backgroundColor,e.borderColor,e.borderWidth)}function XV(t,e,i,n,s){Jg(t,e.fontFamily,e.titleFontSize,e.titleFontColor,e.titleTextAlign);const r=e.titleTextAlign==="center",a=e.widgetWidth-2*e.innerMargin,u=t.measureText(i).width,h=n+(r?e.widgetWidth/2:e.innerMargin),c=s+e.titleFontSize/2+e.innerMargin;if(u>a){const g=a/u,_=(i.length*g|0)-2;i=i.substr(0,_)+""}t.fillText(i,h,c)}function ZV(t,e,i,n,s,r){let a=s.join();if(r)if(s.length===1)a=vu(s[0]);else{const u=cu(s),h=pc(s);a=`${vu(u)} - ${vu(h)}`}Jg(t,e.fontFamily,e.fontSize,e.fontColor),t.fillText(a,i,n)}function GN(t,e,i,n,s){t.beginPath(),t.arc(e,i,n,0,2*Lu),t.fillStyle=s,t.fill()}function WV(t,e,i,n,s,r){t.fillStyle=r,t.fillRect(e-n/2,i-s/2,n,s)}function qV(t,e,i,n,s,r,a,u){Jg(t,s,2*r,a,"center",u),t.fillText(n,e,i)}function QV(t,e,i,n,s){if(typeof Image>"u")return;t._imgStore||(t._imgStore={});let r=t._imgStore[s];if(r)return t.drawImage(r,e-n,i-n,2*n,2*n);r=new Image,r.src=s,r.onload=()=>{t.drawImage(r,e-n,i-n,2*n,2*n)},t._imgStore[s]=r}function KV(t,e,i,n){t.fillRect(e-n,i-n*xm,2*n,2*n*xm),t.fillRect(e-n*xm,i-n,2*n*xm,2*n)}function jV(t,e,i,n){return t.beginPath(),t.moveTo(e-n,i),t.lineTo(e,i-n),t.lineTo(e+n,i),t.lineTo(e,i+n),t.fill()}function JV(t,e,i,n){t.beginPath(),t.moveTo(e,i-n),t.lineTo(e+CN*n,i+ON*n),t.lineTo(e+MN*n,i+IN*n),t.lineTo(e+NN*n,i+PN*n),t.lineTo(e+RN*n,i+zN*n),t.fill()}function $V(t,e,i,n){t.beginPath(),t.moveTo(e,i-n),t.lineTo(e+MN*n,i+IN*n),t.lineTo(e+RN*n,i+zN*n),t.lineTo(e+CN*n,i+ON*n),t.lineTo(e+NN*n,i+PN*n),t.fill()}function t9(t,e,i,n,s,r){switch(t.fillStyle=r,s){case"square":return t.fillRect(e-n,i-n,2*n,2*n);case"circle":return GN(t,e,i,n,r);case"cross":return KV(t,e,i,n);case"diamond":return jV(t,e,i,n);case"equilateral":return JV(t,e,i,n);case"star":return $V(t,e,i,n)}}function e9(t,e,i,n,s){t.fillRect(e-n/2,i-s/4,n*(1-kv),s/2),t.beginPath(),t.moveTo(e+n*(1-kv-.5),i-s/2),t.lineTo(e+n*(1-kv-.5),i+s/2),t.lineTo(e+n/2,i),t.fill()}function i9(t,e,i,n,s,r,a){t.beginPath(),t.moveTo(e-n/2,i),t.lineTo(e+n/2,i),t.strokeStyle=r,t.lineWidth=s/2,t.setLineDash(a==="dashed"?PV:zV),t.stroke()}function n9(t,e,i,n,s){t.beginPath(),t.moveTo(e-n/2,i-s/2),t.lineTo(e-n/2,i+s/2),t.lineTo(e+n/2,i),t.fill()}function s9(t,e,i,n,s,r,a){return t.fillStyle=a,r==="line"&&t.fillRect(e-n/2,i-s/4,n,s/2),r==="arrow"?e9(t,e,i,n,s):r==="dashed"||r==="dotted"?i9(t,e,i,n,s,a,r):r==="tapered"?n9(t,e,i,n,s):void 0}function r9(t,e,i,n,s,r,a,u,h){t.setLineDash([]),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+s-r),t.quadraticCurveTo(e+n,i+s,e+n-r,i+s),t.lineTo(e+r,i+s),t.quadraticCurveTo(e,i+s,e,i+s-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath(),t.fillStyle=a,t.fill(),t.strokeStyle=u,t.lineWidth=h,t.stroke()}function o9(t,e,i,n,s,r,a,u){const h=.7*t.fontSize,c=3*h,g=(h+c)/2,_=i+t.innerMargin+c,m=_+c+t.innerMargin,v=n+2*c-.5*t.innerMargin,b=t.circleStrokeWidth;for(const x of[h,g,c])HV(e,_,v-x,x,u,b);Jg(e,t.fontFamily,t.fontSize,t.fontColor,"left"),e.fillText(vu(s),m,v+h-2*h),e.fillText(vu(r),m,v+h-2*g),e.fillText(vu(a),m,v+h-2*c)}function a9(t,e,i,n,s,r,a,u){const h=(t.widgetWidth-2*t.innerMargin)/3,c=t.fontSize,g=n-t.innerMargin/2,_=g+2*c,m=i+t.innerMargin;e.fillStyle=u,e.fillRect(m,g-c/2,h+1,c),e.fillRect(m+h,g-c/3,h+1,c/1.5),e.fillRect(m+2*h,g-c/6,h,c/3),Jg(e,t.fontFamily,t.fontSize,t.fontColor,"center"),e.fillText(vu(a),m+.5*h,_),e.fillText(vu(r),m+1.5*h,_),e.fillText(vu(s),m+2.5*h,_)}function l9(t,e,i,n){const s=n.outerMargin+UN(n),r=n.fontSize*cp,a=s-.8*n.innerMargin;return e==="radius"||e==="width"?a+r*(i?3:2):a+Object.keys(t).length*r}function u9(t,e,i){const n={width:e.width,height:e.height};let s=!1;return!!(n.width&&n.height&&i)&&(s=t.position==="top"||t.position==="bottom"?f9(n,t,i,t.position==="bottom"):h9(n,t,i,t.position==="left"),s&&i.forEach(r=>GV(t,e,r)),s)}function h9(t,e,i,n){const s=e.widgetWidth+e.outerMargin,r=Math.floor((t.width-e.outerMargin)/s),a=t.height;let u=e.outerMargin,h=n?e.outerMargin:t.width-s,c=1;i=i.slice().sort(kV);for(let g=0;g<i.length;++g){const _=i[g];if(u+_.height>a){if(u===e.outerMargin)return!1;u=e.outerMargin,c+=1,n?h+=s:h-=s}_.x=h,_.y=u,u+=_.height}return c<=r}function d9(t,e,i){let n=null;for(let s=0;s<e.length;++s){const r=e[s];r.isNode!==t.isNode&&e.length!==1||!(n===null||r.height<e[n].height)||(n=s)}if(n!=null){const s=e[n];s.content.push(t),s.height+=t.height+i.outerMargin}}function c9(t){let e=0;for(let i=1;i<t.length;++i)t[i].height>t[e].height&&(e=i);return e}function f9(t,e,i,n){i=i.slice();const s=e.widgetWidth+e.outerMargin,r=Math.floor((t.width-e.outerMargin)/s),a=t.height-e.outerMargin,u=new Array(Math.min(r,i.length)),h=i.length;let c=0,g=0,_=0,m=0;for(let R=0;R<h;++R){const P=i[R];P.isNode?(c+=1,g+=P.height):(_+=1,m+=P.height)}const v=g+m,b=g/v,x=m/v;let M=Math.round(b*r);const N=Math.round(x*r);if(M>c?M=c:N>_&&(M=r-_),r===0)return!1;for(let R=0;R<u.length;R++)u[R]={content:[],height:0,isNode:R<M};for(let R=0;R<h;++R){const P=c9(i);d9(i[P],u,e),i.splice(P,1)}u.every(({content:R})=>R.length===1)?u.sort(UV):u.sort(BV);let O=e.outerMargin;for(let R=0;R<u.length;++R){const P=u[R];if(P.height>a)return!1;P.content.sort(FV);let F=0;for(let U=0;U<P.content.length;++U){const V=P.content[U];V.x=O,V.y=n?t.height-F-V.height-e.outerMargin:F+e.outerMargin,F+=V.height+e.outerMargin}O+=s}return!0}var g9=class extends li{constructor(){super(...arguments),this._enabled=!1,this._mustRefresh=!1,this._promises=[]}onMounted(){this._modules.events.on("frame",()=>{this._enabled&&this._mustRefresh&&this._layer.refresh()}).on(["resize","reloadFonts"],()=>{this._mustRefresh=!0})}enable(t={}){const e=this._settings;return this._settings={...bm,...t},this._mustRefresh=!this._enabled||!this._sameOptions(e,this._settings),this._enabled?Promise.resolve():(this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(i=>{this._drawOnCanvas(this._settings,i.canvas,Do());const n=this._promises;this._promises=[],n.forEach(s=>s()),this._mustRefresh=!1},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this.refresh())}_afterNextUpdate(){return new Promise(t=>this._promises.push(t))}_formatSettings(t,e){const i={...bm,...t};return DV.forEach(n=>i[n]*=e),i}disable(){return this._enabled&&(this._enabled=!1,this._layer.destroy()),Promise.resolve()}enabled(){return this._enabled}refresh(){return this._mustRefresh=!0,this._modules.dom.refresh(),this._afterNextUpdate()}destroy(){this._enabled=!1,this._mustRefresh=!1,this._settings={...bm},this._promises=[]}getOptions(){return this._enabled?{...this._settings}:{...bm}}getCurrentOptions(){return this._settings}_sameOptions(t,e){return t===e||Object.keys(t).reduce((i,n)=>i&&t[n]===e[n],!0)}_drawOnCanvas(t,e,i){const n=this._formatSettings(t,i);u9(n,e,this._computeWidgetList(n))}exportOnCanvas(t,e,i){return this._drawOnCanvas(e,t,i)}export(t={}){const{width:e,height:i}={...this._modules.camera.getSize(),...t},n=Do(),s=Pr(e*n,i*n);return this._drawOnCanvas(t,s,n),Promise.resolve().then(()=>s)}_computeWidgetList(t){const e=[];return OV.forEach(({name:i,isNode:n})=>{const s=this._computeWidget(t,i,n);s&&e.push(s)}),e}_computeWidget(t,e,i){const n=this._computePropertyMapping(t,e,i);if(n){if(e!=="icon.content")return n;const s=this._getRulesForAttribute(i,"icon.font"),r=this._getRulesForAttribute(i,"icon.style");let a=null,u=null;if(s.length||(a="Arial",u="normal"),typeof s[0]=="string"&&(a=s[0],u=r[0]),a&&u)return n.iconFont=a,n.iconFontStyle=u,n}return null}_computePropertyMapping(t,e,i){const[n]=this._getRulesForAttribute(i,e),s=n&&n.mapping,r=s&&s.getValues(i);if(s&&r){const a=s.getField(),u={};return Bl(r,(h,c)=>{h!==void 0&&c!=="undefined"&&(u[h]=u[h]||[],u[h].push(c))}),Object.keys(u).length===0?null:{isNode:i,title:t.titleFunction(a,e),styleProperty:e,dataProperty:a,mapping:u,height:l9(u,e,i,t)}}return null}_getRulesForAttribute(t,e){return this._modules.styleRules.getRuleList().map(i=>{const n=i.getDefinition();return _s(t?n.nodeAttributes:n.edgeAttributes,e)}).filter(ll).sort((i,n)=>i.mapping&&n.mapping?0:i.mapping?-1:1)}},$T={layer:dL,outerStroke:{color:kC,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:FC,minVisibleSize:0}},_9={layer:dL,color:kC,text:{backgroundColor:FC,minVisibleSize:0}},tw={duration:150,easing:"quadradicOut"},m9=class extends li{constructor(){super(...arguments),this._delay=16,this._manualTriggerDetection=!1,this._hovered=null,this._hoveredTextHidden=!1,this._onAnimate=({updatesPositions:t})=>{t&&this._hovered&&this._modules.graphics.isMoving(this._hovered)&&(this._manualTriggerDetection=!0,this._resetHover())},this._onBeforeNewFrame=()=>{if(this._manualTriggerDetection){this._manualTriggerDetection=!1,this._modules.captor.triggerDetection();const t=this._modules.captor.getPointedElement();t&&this._hover(t)}},this._onClear=()=>{this._hovered=null,this._timeout&&this._modules.dom.clearTimeout(this._timeout)},this._resetHover=()=>{this._hovered&&(this._unhover(this._hovered),this._modules.captor.triggerUnhover()),this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}}_setAnimationOptions(t){this._animationOptions={duration:(t==null?void 0:t.duration)!==void 0?t.duration:tw.duration,easing:(t==null?void 0:t.easing)!==void 0?t.easing:tw.easing},t==null||delete t.duration,t==null||delete t.easing}setRate(t){return this._delay=t,this}replaceNullColor(t,e){t&&_s(t,e)===null&&_u(t,e,this._modules.settings.get("backgroundColor"))}updateNodeAttributes(t,e){this._setAnimationOptions(t),this.replaceNullColor(t,"text.backgroundColor"),this._hoverClass.update({nodeAttributes:t,fullOverwrite:e}),this._hoverExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}updateEdgeAttributes(t,e){this.replaceNullColor(t,"text.backgroundColor"),this.replaceNullColor(t,"text.secondary.backgroundColor"),this._setAnimationOptions(t),this._hoverClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()}getHoverClassDefinition(){return this._hoverClass.getDefinition()}onMounted(){this._registerSettings(),this._setAnimationOptions(null),this._hoverExtremityHighlightedClass=this._modules.classes.createClass({name:gx,isBuiltin:!0,nodeAttributes:$T}),this._hoverClass=this._modules.classes.createClass({name:dg,isBuiltin:!0,nodeAttributes:$T,edgeAttributes:_9}),this._modules.events.on("mouseover",({target:t})=>t&&this._hover(t)).on("mouseout",({target:t})=>t&&this._unhover(t)).on("animate",this._onAnimate).on("beforeNewFrame",this._onBeforeNewFrame).on("mouseout",this._resetHover).on("clearGraph",this._onClear)}_registerSettings(){this._modules.settings.register("cursor.node","pointer",(t,e)=>{this._hovered&&this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(e),this._modules.graphics.addCursorStyle(t))}),this._modules.settings.register("cursor.edge","pointer",(t,e)=>{this._hovered&&!this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(e),this._modules.graphics.addCursorStyle(t))}),this._modules.settings.register("nodeHover",!0,t=>{!t&&this._hovered&&this._hovered.isNode&&this._unhover(this._hovered)}),this._modules.settings.register("edgeHover",!0,t=>{t||!this._hovered||this._hovered.isNode||this._unhover(this._hovered)})}_updateExtremityHighlightLayer(){const t=this._hoverClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._hoverExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})}_removeTimeout(){this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}_hover(t){const e=t.isNode?"nodeHover":"edgeHover";this._modules.settings.get(e)&&t&&(this._removeTimeout(),this._timeout=this._modules.dom.setTimeout(()=>{this._setElementHighlight(!0,t),this._timeout=null},this._delay))}_unhover(t){this._removeTimeout(),this._hovered===t&&(this._setElementHighlight(!1,t),this._hoverExtremityHighlightedClass.clearNodes(),this._hovered=null)}_setElementHighlight(t,e){const i=this._modules.settings.get(e.isNode?"cursor.node":"cursor.edge");if(t?(this._modules.graphics.addCursorStyle(i),e.addClass(dg,this._animationOptions),this._hovered=e):(this._modules.graphics.removeCursorStyle(i),e.removeClass(dg,this._animationOptions)),e.isNode){const n=this._modules.graph.getAttribute(e.isNode,"textHidden"),s=e._index;t&&(this._hoveredTextHidden=n.get(s)!==0);const r=!t&&this._hoveredTextHidden;n.set(s,r)}else this._hoverExtremityHighlightedClass.clearNodes(),t&&e.getExtremities().addClass(gx,this._animationOptions)}},p9=class extends li{constructor(){super(...arguments),this.x=0,this.y=0}},y9=class{constructor(t,e){this._nodeMapping={valid:!1,values:{}},this._edgeMapping={valid:!1,values:{}},this._computeMapping=e,this._field=t,this._assignedRules=[]}getValue(t,e){const i=t.isNode,n=i?this._nodeMapping:this._edgeMapping;n.valid||(n.values=this._computeMapping(i),n.valid=!0);const s=t.getData(this._field);return Array.isArray(s)?e==="color"?s.map(r=>n.values[r]):n.values[s[0]]:n.values[s]}markAsInvalid(){this._nodeMapping.valid=!1,this._edgeMapping.valid=!1}getValues(t){return t?this._nodeMapping.values:this._edgeMapping.values}getField(){return this._field}isAssignedTo(t){return this._assignedRules.find(e=>e===t)}getAssignedRules(){return this._assignedRules.slice()}assignTo(t){this.isAssignedTo(t)||this._assignedRules.push(t)}unAssignTo(t){this._assignedRules=this._assignedRules.filter(e=>e!==t)}};function HN(t,e,i){const n=(e?t.getNodes():t.getEdges()).getData(i),s={};return n.forEach(r=>{if(!Array.isArray(r))return s[r]=1;r.forEach(a=>s[a]=1)}),Object.keys(s).sort()}function v9(t,e,i,n){const{values:s={},fallback:r}=i,a=HN(t,n,e),u={};let h=0;for(let c=0;c<a.length;++c){const g=a[c];g in s?u[g]=s[g]:(u[g]=r[h],h=(h+1)%r.length)}return u}function x9(t,{nbSlices:e,minValue:i,maxValue:n}){if(Array.isArray(t))return t.slice();const{min:s=i,max:r=n}=t,a=(r-s)/e,u=[];for(let h=1;h<e;++h)u.push(s+a*h);return u}function b9(t,e){if(Array.isArray(t))return t;const{min:i,max:n}=t,s=e.length+1,r=(n-i)/e.length,a=[];for(let u=0;u<s;u++)a.push(i+u*r);return a}function E9(t,e,i,n){const{fallback:s,stops:r={},values:a,reverse:u}=i,h=HN(t,n,e);let c=1/0,g=-1/0;for(let b=0;b<h.length;b++){const x=+h[b];Rp(x)&&(c=Math.min(c,x),g=Math.max(g,x),h[b]=x)}const _={};if(!isFinite(c)){for(let b=0;b<h.length;b++)_[h[b]]=s;return _}const m=x9(r,{nbSlices:Array.isArray(a)?a.length:a.nbSlices,minValue:c,maxValue:g}),v=b9(a,m);u&&v.reverse();for(let b=0;b<h.length;++b){const x=h[b];if(isFinite(x)){let M=0;for(;M<m.length&&m[M]<=x;)M+=1;_[x]=v[M]}else _[x]=s}return _}var S9=class extends li{constructor(){super(...arguments),this._mappingList=[],this._onStyleRuleRemoved=({rule:t})=>{for(const e of this._mappingList)e.unAssignTo(t.id)},this._onStyleRuleAdded=({rule:t,options:e})=>{const i=e.nodeAttributes&&typeof e.nodeAttributes!="function"?e.nodeAttributes:{},n=e.edgeAttributes&&typeof e.edgeAttributes!="function"?e.edgeAttributes:{};[...ug(i),...ug(n)].forEach(s=>{s&&this._recursiveGetMapping(s).forEach(r=>r.assignTo(t.id))})},this._refreshRulesAndLegend=()=>{this._mappingList.forEach(t=>{const e=t.getAssignedRules();t.markAsInvalid(),e.forEach(i=>this._modules.styleRules.refreshRule(i))}),this._modules.legend.refresh()}}onMounted(){this._modules.events.on(["addStyleRule","updateStyleRule"],this._onStyleRuleAdded).on("removeStyleRule",this._onStyleRuleRemoved).on(["addNodes","addEdges","updateNodeData","updateEdgeData","removeNodes","beforeRemoveEdges","excludedStateChange","clearGraph"],this._refreshRulesAndLegend)}_recursiveGetMapping(t,e=[]){if(!t)return e;if(t.mapping)return e.push(t.mapping),e;if(typeof t!="object")return e;const i=ug(t).map(n=>this._recursiveGetMapping(n));return e.concat(...i)}createMapping({field:t,values:e={},fallback:i}={field:""}){if(t=pd(t),Array.isArray(i)?i.length===0&&(i=[void 0]):i=[i],!yd(e))throw new Error('"mapping" should be an object');return this._createMappingFunction(v9,t,{values:e,fallback:i})}createSlices({field:t,fallback:e,stops:i={},values:n,reverse:s=!1}={field:"",values:[]}){if(t=pd(t),Array.isArray(n)||n.nbSlices||(n.nbSlices=7),Array.isArray(i)&&Array.isArray(n)&&i.length!==n.length-1)throw new Error("there should be exactly one more value that stops");return this._createMappingFunction(E9,t,{fallback:e,stops:i,values:n,reverse:s})}_createMappingFunction(t,e,i){const n=new y9(e,r=>t(this._modules.graph,e,i,r));this._mappingList.push(n);const s=(r,a,u)=>n.getValue(r,u);return s.mapping=n,s}createTemplate(t){if(typeof t!="string")throw new TypeError('"template" should be a string');const e=[];let i=0,n=!1;for(;!n;){let s=-1;const r=t.indexOf("{{",i);r!==-1&&(s=t.indexOf("}}",r+2)),s!==-1?(e.push(t.substring(i,r)),e.push(t.substring(r+2,s)),i=s+2):(e.push(t.slice(i)),n=!0)}return function(s){let r=e[0];for(let a=1;a<e.length;a+=2)r+=s.getData(e[a]),r+=e[a+1];return r}}},ew=t=>t.stopPropagation(),A9=(t,e)=>{e.style.position="absolute",e.style.left="0",e.style.top="0",t.appendChild(e)},T9=t=>e=>{for(;t.firstChild;)t.removeChild(t.firstChild);for(let i=0;i<e.length;++i)A9(t,e[i])},w9=(t,e)=>{const i=document.createElement("img");return new Promise(n=>{i.addEventListener("load",()=>{e.drawImage(i,0,0,e.canvas.width,e.canvas.height),n(e)});const s=`data:image/svg+xml;base64,${btoa(new XMLSerializer().serializeToString(t))}`;i.src=s})},L9=class extends li{constructor(){super(...arguments),this._elements=[],this._layers=[],this.readyCallbacks=[],this.render=(t,e,i,n)=>{const s=n&&n.pixelRatio?n.pixelRatio:Do(),{zoom:r,x:a,y:u,width:h,height:c}=n||this._modules.camera.getView();if(r===void 0||a===void 0||u===void 0||h===void 0||c===void 0)return null;const g=s*r;i.noClear||t.clearRect(0,0,h*s,c*s),i.isStatic||(t.save(),t.translate(h*s/2,c*s/2),t.rotate(n?-(n.angle||0):-this._modules.camera.getAngle()),t.translate(-a*g,-u*g),t.scale(g,g)),e(t),i.isStatic||t.restore()},this.createCanvas=(t,e)=>{const{width:i,height:n}=this._modules.camera.getSize(),s=e.canvas||Pr(i,n),r=e.ctx||s.getContext("2d"),a=(g=t)=>{r&&this.render(r,g,e)},u=()=>{const{width:g,height:_}=this._modules.camera.getSize(),m=Do();s.width=g*m,s.height=_*m,s.style.width=`${g}px`,s.style.height=`${_}px`,a()};let h,c;if(e.isStatic)this._modules.events.on("resize",u),h=()=>this._modules.events.off(u);else{let g=this._modules.camera.getCenter(),_=this._modules.camera.getZoom(),m=!1;const v=0;let b;const x=500,M=()=>{m||(a(),m=!0,g=this._modules.camera.getCenter(),_=this._modules.camera.getZoom())},N=()=>{m||M();const{x:P,y:F}=this._modules.camera.getCenter(),U=P-g.x,V=F-g.y,Y=-U*_,K=-V*_,tt=this._modules.camera.getZoom()/_,j=-this._modules.camera.getAngle();s.style.transform=`
          scale(${tt})
          rotate(${-j}rad)
          translateX(${Y}px)
          translateY(${K}px)
          rotate(${j}rad)
        `.replace(/\n/g,"")};c=()=>!m||(a(),m=!1,s.style.transform="scale(1) translateX(0px) translateY(0px)",!1);const O=P=>{b&&clearTimeout(b),M()},R=P=>{Date.now()<v&&b&&clearTimeout(b),b=setTimeout(c,P.duration+x),M()};this._modules.events.on("dragStart",O).on("zoomStart",R).on("dragEnd",c).on(["viewChanged","zoom","rotate","move","animate"],N),this._modules.dom.addDirectWindowEventListener("resize",c),this._modules.events.on("resize",u),h=()=>{this._modules.events.off(u).off(O).off(R).off(c).off(N),this._modules.dom.removeDirectWindowEventListener("resize",c)}}return s.style.touchAction="none",s.style.pointerEvents="none",u(),{element:s,removeListeners:h,refresh:g=>{c&&!c()||a(g)},clear:()=>r==null?void 0:r.clearRect(0,0,s.width,s.height)}},this.createSVG=t=>{const{element:e}=t;e.style["pointer-events"]="none";const i=()=>{t.draw(t.element)},n=s=>{let{zoom:r,x:a,y:u,width:h,height:c}=s||this._modules.camera.getView();if(h=Math.floor(h),c=Math.floor(c),r===void 0||a===void 0||u===void 0||h===void 0||c===void 0)return null;const g=h/2/r,_=c/2/r,m=Math.cos(-this._modules.camera.getAngle()),v=Math.sin(-this._modules.camera.getAngle()),b=m*a-v*u-g,x=v*a+m*u-_,M=h/r,N=c/r;e.style.width=`${h}px`,e.style.height=`${c}px`,e.setAttribute("width",`${h}`),e.setAttribute("height",`${c}`),e.setAttribute("viewBox",`${b} ${x} ${M} ${N}`)};return this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],()=>n()),e.addEventListener("mousemove",ew),n(),i(),{element:e,removeListeners:()=>{this._modules.events.off(n)},updateTransformation:n,refresh:i}},this._createOverlay=t=>{const e=()=>{const{element:s,position:r}=t,{zoom:a,x:u,y:h,width:c,height:g}=this._modules.camera.getView();if(a===void 0||u===void 0||h===void 0||c===void 0||g===void 0)return null;const _=a,m=c/2,v=g/2,b=-this._modules.camera.getAngle(),x=(r.x-u)*_,M=(r.y-h)*_;s.style.transformOrigin="top left",s.style.transform=`translate(${m}px, ${v}px) rotate(${b}rad) translate(${x}px, ${M}px) ${t.scaled?`scale(${_}, ${_})`:""}`};this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],e);const{element:i,size:n}=t;return n&&(i.style.width=`${n.width}`,i.style.height=`${n.height}`),i.addEventListener("mousemove",ew),e(),{element:i,removeListeners:()=>{this._modules.events.off(e)},updateTransformation:e}},this.addLayer=(t,e="layer",i=this._elements.length)=>{const n=typeof t=="string"?jv(t):t;this._elements.push(n);const s={element:n};return s.type=e,s.getLevel=()=>this._elements.indexOf(n),s.moveTo=r=>(this._elements.splice(r,0,this._elements.splice(s.getLevel(),1)[0]),this._updateDom(this._elements),s),s.moveUp=()=>s.moveTo(s.getLevel()+1),s.moveDown=()=>s.moveTo(s.getLevel()-1),s.moveToTop=()=>s.moveTo(this._elements.length-1),s.moveToBottom=()=>s.moveTo(0),s.destroy=()=>this._removeLayer(s),s.hide=()=>(s.element&&(s.element.style.visibility="hidden"),s),s.show=()=>(s.element&&(s.element.style.visibility="visible"),s),s.isHidden=()=>s.element.style.visibility==="hidden",s.setOpacity=r=>(s.element&&(s.element.style.opacity=r.toString()),s),s.getOpacity=()=>parseFloat(s.element.style.opacity||"1"),s.setPosition=r=>{if(s.element){const a=s.element.style;a.left=`${r.x}px`,a.top=`${r.y}px`}return s},s.setSize=r=>{if(s.element&&r){const{width:a,height:u}=r,h=s.element.style;h.width=`${a}px`,h.height=`${u}px`}return s},s.moveTo(i),this._layers.push(s),s},this.addCanvasLayer=(t,e={isStatic:!1,noClear:!1},i=this._elements.length)=>{const n=this.createCanvas(t,e),{element:s,removeListeners:r,refresh:a,clear:u}=n,h=this.addLayer(s,"canvas",i);return s.classList.add("ogma-canvas-layer"),h.destroy=()=>this._removeLayer(h,r),h.refresh=a,h.clear=u,h.draw=t,h.options=e,h},this.addOverlay=(t,e=this._elements.length)=>{typeof t.element=="string"&&(t.element=jv(t.element)),t.scaled=t.scaled===void 0||t.scaled;const i=this._createOverlay(t),{element:n,removeListeners:s,updateTransformation:r}=i,a=this.addLayer(n,"overlay",e);return a._onViewChange=r,a._onDestroy=s,a.destroy=()=>this._removeLayer(a,s),a.setPosition=u=>(t.position=u,r(),a),t.size&&a.setSize(t.size),a},this.addSVGLayer=(t,e=this._elements.length)=>{const i=this.createSVG(t),{element:n,refresh:s,removeListeners:r,updateTransformation:a}=i,u=this.addLayer(n,"svg",e);return u._onViewChange=a,u._onDestroy=r,u.destroy=()=>this._removeLayer(u,r),u.refresh=s,u}}canvasToImage(t,e){const i=document.createElement("canvas");i.width=e.width,i.height=e.height;const n=i.getContext("2d");this.render(n,t.draw,{...t.options,noClear:!0},{...e,pixelRatio:1});const s=un("image");return s.setAttribute("href",i.toDataURL("image/png")),s.setAttribute("width",i.width),s.setAttribute("height",i.height),s}exportPNG(t,e,i){const n=t.getContext("2d");let s=Promise.resolve();return e.forEach(r=>{s=s.then(()=>r.type==="canvas"?(this.render(n,r.draw,{...r.options,noClear:!0},i),Promise.resolve()):(r._onViewChange&&r._onViewChange(i),w9(r.element,n)))}),s}exportSVG(t,e,i,n){let s=Promise.resolve();return e.forEach(r=>{s=s.then(()=>r.type==="canvas"?Promise.resolve(this.canvasToImage(r,i)):(r._onViewChange&&r._onViewChange(i),r.element.cloneNode(!0))).then(a=>n?t.insertBefore(a,t.querySelector(".ogma-nodes").parentNode||t.firstChild):t.appendChild(a))}),s}export(t){const e=this._layers.sort((s,r)=>s.getLevel()-r.getLevel()).filter(s=>s.type==="canvas"||s.type==="svg"),i=this.ogmaLayer?this.ogmaLayer.getLevel():0,n=t.below?e.filter(s=>s.getLevel()<i):e.filter(s=>s.getLevel()>i);return t.canvas?this.exportPNG(t.canvas,n,t.view):this.exportSVG(t.svg,n,t.view,t.below)}onMounted(){const t=this._modules.graphics.getDomElement();this._updateDom=T9(t);const e=t.firstChild;e&&(this.ogmaLayer=this.addLayer(e)),this.runCallbacks()}runCallbacks(){this.ogmaLayer&&(this.readyCallbacks.forEach(t=>t()),this.readyCallbacks=[])}whenReady(t){this.readyCallbacks.push(t),this.ogmaLayer&&this.runCallbacks()}_removeLayer(t,e){return t.element&&t.element.parentNode&&(this._elements.splice(t.getLevel(),1),e&&e(),t.element=null,this._updateDom(this._elements)),this._layers=this._layers.filter(i=>i!==t),t}destroy(){this._elements=[]}},C9=class extends li{onMounted(){const t=this._modules.graph;this._nodeList=t.getNodeAttribute("object"),this._edgeList=t.getEdgeAttribute("object"),this._sourceList=t.getEdgeAttribute("source"),this._targetList=t.getEdgeAttribute("target"),this._excludedList=t.getEdgeAttribute("excluded"),this._virtualList=t.getEdgeAttribute("virtual")}shortestPath(t={source:void 0,target:void 0}){const{source:e,target:i,directed:n=!1,edges:s=this._ogma.getEdges(),nodes:r=this._ogma.getNodes(),edgeCostFunction:a=()=>1,heuristicFunction:u=()=>0}=t,h=s.reduce((x,M)=>(x[M._index]=!0,x),{}),c=r.reduce((x,M)=>(x[M._index]=!0,x),{}),g=this._modules.graph.getNode(e),_=this._modules.graph.getNode(i);if(!g)throw new Error("the source is not a node");if(!_)throw new Error("the target is not a node");const m=g._index,v=_._index;c[m]=!0,c[v]=!0;let b=null;if(m===v)b={nodes:g.toList(),edges:this._modules.graph.edgeList()};else{const x=this._modules.graph.getNodeMaxIndex()+1,M=new Int32Array(x),N=new Float32Array(x),O=new Float32Array(x),R=new Set,P=new tL(O);for(N.fill(1/0),O.fill(1/0),M.fill(-1),P.add(m),N[m]=0,O[m]=u(g,_);!P.isEmpty();){const F=P.removeMin();if(F===v){b=this._constructPath(M,m,v);break}R.add(F);const U=this._modules.graph.getAdjacentDirections(F);if(U)for(let V=0;V<U.length;++V){const Y=U[V],K=this._modules.graph.getEdgeIndexesInDirection(Y);let tt=-1,j=0,lt=-1;for(let pt=0;pt<K.length;++pt){const ft=K[pt],ht=this._sourceList.get(ft),W=this._targetList.get(ft);if(ht===W||!c[ht]||!c[W]||n&&F!==ht||!h[ft])continue;const st=a(this._edgeList.get(ft));(tt===-1||st<j)&&(tt=ft,j=st,lt=ht===F?W:ht)}if(lt!==-1||R.has(lt)){const pt=N[F]+j;if(!P.has(lt)||pt<N[lt]){const ft=this._nodeList.get(F);M[lt]=tt,N[lt]=pt,O[lt]=pt+u(ft,_),P.add(lt)}}}}}return Promise.resolve(b)}_constructPath(t,e,i){const n=[i],s=[];let r=i;for(;r!==e;){const a=t[r],u=this._sourceList.get(a),h=this._targetList.get(a);r=r===u?h:u,n.push(r),s.push(a)}return n.reverse(),s.reverse(),{nodes:this._modules.graph.nodeList(new Uint32Array(n)),edges:this._modules.graph.edgeList(new Uint32Array(s))}}detectCycle(t,e){const i=e.getSource(),n=e.getTarget(),s=Q2(t._indexes,i._indexes,n._indexes);return s?this._modules.graph.nodeList(new Uint32Array(s)).dedupe():this._modules.graph.nodeList()}getAllSimpleCycles(t,e){const i=e.getSource(),n=e.getTarget();return new j2(t._indexes,i._indexes,n._indexes).getCycles().map(s=>this._modules.graph.nodeList(new Uint32Array(s)))}minimumSpanningTree(t,e,i){const n=this._modules.graph;t=n.getNodes(t),e=n.getEdges(e);const s=new Set;t.forEach(h=>s.add(h._index));const r=n.getConnectedComponents(t,{filter:h=>s.has(h),internalIndexes:!0}),a={};r.forEach((h,c)=>h.forEach(g=>a[g]=c));const u=[];return e.forEach(h=>{const c=a[h.getSource()._index];c!==void 0&&(u[c]===void 0&&(u[c]=[]),u[c].push(h._index))}),r.map((h,c)=>{const g=J2(h,u[c]||[],_=>n.edge(_).getSource()._index,_=>n.edge(_).getTarget()._index,i?_=>i(n.edge(_)):void 0);return{nodes:n.nodeList(new Uint32Array(h)),edges:n.edgeList(new Uint32Array(g))}})}bfs({root:t,onNode:e,onEdge:i=Ci,directed:n=!1}){const s=this._modules.graph,r=[t],a=new Set,u={direction:n?"out":"both"};for(;r.length;){const h=r.pop();if(!a.has(h._index)){if(e(h)===!0)return;a.add(h._index),s.getAdjacentEdges(h,u).forEach(c=>{if(i(c)===!1)return;const g=c.getSource()===h?c.getTarget():c.getSource();r.unshift(g)})}}}dfs({root:t,onNode:e,onEdge:i=Ci,directed:n=!1}){const s=this._modules.graph,r=[t],a=new Set,u={direction:n?"out":"both"};for(;r.length;){const h=r.pop();if(!a.has(h._index)){if(e(h)===!0)return;a.add(h._index),s.getAdjacentEdges(h,u).forEach(c=>{if(i(c)===!1)return;const g=c.getSource()===h?c.getTarget():c.getSource();r.push(g)})}}}betweenness({nodes:t,edges:e,directed:i,normalized:n}){const s=this._ogma.getNodes().subtract(t),r=this._ogma.getEdges().subtract(e).concat(s.fastGetAdjacentElements().edges).dedupe();return $2({adjacency:t.map(a=>{const u=this._ogma.edgeList(this._ogma.modules.graph.topology.getAdjacentElements(!1,a.toList()._indexes,{direction:i?"out":"both"})).subtract(r).dedupe();return{id:a._index,adj:u.map(h=>h.getSource()._index===a._index?h.getTarget()._index:h.getSource()._index)}}),directed:i,normalized:n})}fishEyeExpand(t,e,i,n){return U2(t,e,i,n)}},iw=(t,e)=>{if(!t)throw new Error("Traversal options are required");if(typeof t.onNode!="function")throw new Error("onNode callback is required");if(t.root=e.getNode(t.root),!t.root)throw new Error(`Root node '${t.root}' does not exist`);return t},Em=()=>({nodes:void 0,edges:void 0}),M9=class extends jn{constructor(){super(...arguments),this.shortestPath=t=>this._ogma.modules.algorithms.shortestPath(t),this.hasCycle=t=>{const{nodes:e,edges:i}=t||Em();return this.detectCycle({nodes:e,edges:i})!==null},this.getAllSimpleCycles=t=>{let{nodes:e,edges:i}=t||Em();return e||(e=this._ogma.getNodes()),i||(i=e.getAdjacentEdges({bothExtremities:!0})),this._ogma.modules.algorithms.getAllSimpleCycles(e,i)},this.detectCycle=t=>{let{nodes:e,edges:i}=t||Em();e||(e=this._ogma.getNodes()),i||(i=e.getAdjacentEdges({bothExtremities:!0}));const n=this._ogma.modules.algorithms.detectCycle(e,i);return n.size?n:null},this.minimumSpanningTree=t=>{const{nodes:e,edges:i,edgeCostFunction:n}=t||{...Em(),edgeCostFunction:void 0};return this._ogma.modules.algorithms.minimumSpanningTree(e,i,n)},this.dfs=t=>this._ogma.modules.algorithms.dfs(iw(t,this._ogma.modules.graph)),this.bfs=t=>this._ogma.modules.algorithms.bfs(iw(t,this._ogma.modules.graph)),this.betweenness=(t={})=>(t={nodes:t.nodes||this._ogma.getNodes(),edges:t.edges||this._ogma.getEdges(),directed:t.directed!==void 0&&t.directed,normalized:t.normalized===void 0||t.normalized},this._ogma.modules.algorithms.betweenness(t)),this.getMinimumEnclosingCircle=t=>{if(!t||t.size===0)throw new Error("getMinimumEnclosingCircle: no nodes provided");const e=t.getAttribute("x"),i=t.getAttribute("y"),n=t.getAttribute("radius"),[s,r,a]=Vg(e,i,n);return{x:s,y:r,radius:a}},this.circlePack=({nodes:t,margin:e=0,origin:i={x:0,y:0},duration:n=0,easing:s="linear",sort:r,dryRun:a})=>{if(!t||t.size===0)throw new Error("circlePack: no nodes provided");let u=t.map((c,g)=>({index:g,radius:+c.getAttribute("radius")+e,id:c.getId()}));if(r)if(r==="asc")u=u.sort((c,g)=>g.radius-c.radius);else if(r==="desc")u=u.sort((c,g)=>c.radius-g.radius);else{if(typeof r!="function")throw new Error("circlePack: invalid sort option");u=u.sort((c,g)=>r(t.get(c.index),t.get(g.index)))}if(i&&(!isFinite(i.x)||!isFinite(i.y)))throw new Error("circlePack: invalid origin");const h=B2(u,i.x,i.y).reduce((c,{index:g,x:_,y:m})=>(c[g]={x:_,y:m},c),new Array(t.size));return a?h:t.setAttributes(h,{duration:n,easing:s}).then(()=>h)},this.fishEyeExpand=({nodes:t,focusNode:e,deltaRadius:i,duration:n=0,dryRun:s=!1,easing:r="linear",xyr:a})=>{if(!t||t.size===0)throw new Error("Expand/collapse: no nodes provided");if(!(e instanceof al))throw new Error("Expand/collapse: no focus node provided");if(!isFinite(i))throw new Error("Expand/collapse: invalid delta radius");const u=this._ogma.modules.algorithms.fishEyeExpand(t,e,i,a);return s?u:t.setAttributes(u,{duration:n,easing:r}).then(()=>u)}}},VN=uN,og={exports:{}},N9=og.exports,nw;function R9(){return nw||(nw=1,function(t,e){(function(i,n){n(e)})(N9,function(i){const n={nodeColor:"#3fa291",white:"white",background:"white",textBackground:"#e4f2ef",haloStroke:"#d4e0de",outline:"rgba(118, 118, 118, 0.36)",darkorange:"#d55e00",orange:"#e69f00",yellow:"#f0e441",lightgreen:"#019D73",sky:"#57b4e9",blue:"#0072b2",purple:"#c2739f",selected:"#bb3249",red:"#df162e",emerald:"#3fa291",lightgrey:"#e4ebea",darkblue:"#074f67"},s={font:"Helvetica",color:"#23231a",backgroundColor:n.textBackground,size:16,margin:5,padding:6,scale:.1,content:""},r=Object.assign(Object.assign({},s),{backgroundColor:n.textBackground,color:"#23231a",margin:8,size:12}),a={color:n.darkblue,minVisibleSize:12,stroke:{color:n.background,width:2},text:Object.assign(Object.assign({},s),{scale:.5,margin:0,color:n.white,content:""})},u={duration:1e3,endRatio:4,endColor:"rgba(245, 235, 147, 0)",interval:8e3,startColor:"rgba(239, 168, 75, 0.40)",width:20},h={nodeAttributes:{color:n.emerald,badges:{topLeft:a,topRight:a,bottomLeft:a,bottomRight:a},halo:{color:n.lightgrey,strokeColor:n.haloStroke,strokeWidth:2},icon:{color:"#23231a",scale:.7},innerStroke:{color:n.white,minVisibleSize:0,width:2},outerStroke:{color:n.darkblue,minVisibleSize:0,scalingMethod:"scaled",width:2},outline:{color:n.outline},opacity:1,shape:"circle",pulse:u,radius:5,text:Object.assign(Object.assign({},s),{secondary:r,tip:!1})},edgeAttributes:{color:"#23231a",halo:{color:n.lightgrey},outline:{color:n.outline},stroke:{color:n.emerald,minVisibleSize:0,width:0},pulse:u,text:Object.assign(Object.assign({},s),{secondary:r})},selectedEdgeAttributes:{color:n.selected},selectedNodeAttributes:{outerStroke:{color:n.selected}},colors:n,edgeOutlineWidth:2,edgeHaloWidth:8,nodeHaloWidth:20},c={nodeColor:"#BD8A61",edgeColor:"#d3d3d3",haloColor:"#e2efff",haloStroke:"#80a3ce",outerStroke:"#34344A",innerStroke:"#ffffff",textColor:"#34344A",secondaryTextColor:"#505050",textBackground:"#f4f4f4",pulseStart:"rgba(255, 250, 204, 0.80)",pulseEnd:"rgba(255, 250, 204, 0.00)",outline:"rgba(116, 116, 116, 0.80)",badge:"#1b998b",badgeStrokeColor:"#ffffff",badgeTextColor:"#ffffff",nodeIcon:"#23231a",selected:"#bb3249",edgeStroke:"#c5f5f0",background:"white",nodeOutline:"rgba(188, 188, 188, 0.50)"},g={font:"Helvetica",color:c.textColor,backgroundColor:c.textBackground,size:16,margin:12,padding:8,scale:.1,content:""},_=Object.assign(Object.assign({},g),{backgroundColor:c.textBackground,color:c.secondaryTextColor,margin:8,size:12}),m={color:c.badge,minVisibleSize:12,stroke:{color:c.badgeStrokeColor,width:2},text:Object.assign(Object.assign({},g),{scale:.5,margin:0,color:c.badgeTextColor,content:""})},v={duration:1e3,endRatio:4,endColor:c.pulseStart,interval:5e3,startColor:c.pulseEnd,width:20,radius:4},b={nodeAttributes:{color:c.nodeColor,badges:{topLeft:m,topRight:m,bottomLeft:m,bottomRight:m},halo:{color:c.haloColor,strokeColor:c.haloStroke,strokeWidth:2},icon:{color:c.nodeIcon,scale:.7},innerStroke:{color:c.innerStroke,minVisibleSize:0,width:4},outerStroke:{color:c.outerStroke,minVisibleSize:0,scalingMethod:"scaled",width:0},outline:{color:c.outline},opacity:1,shape:"circle",pulse:v,radius:5,text:Object.assign(Object.assign({},g),{secondary:_,tip:!1})},edgeAttributes:{color:c.edgeColor,halo:{color:c.haloColor},outline:{color:c.outline},stroke:{color:c.edgeStroke,minVisibleSize:0,width:0},pulse:v,text:Object.assign(Object.assign({},g),{secondary:_})},selectedEdgeAttributes:{color:c.selected},selectedNodeAttributes:{outerStroke:{color:c.selected}},colors:c,edgeOutlineWidth:2,edgeStrokeWidth:2,edgeHaloWidth:8,nodeHaloWidth:40,nodeOuterStroke:4},x={nodeColor:"#43a2ca",edgeColor:"#23231a",haloColor:"#c5f5f0",haloStroke:"#b6e5e0",outerStroke:"#267495",innerStroke:"#ffffff",textColor:"#23231a",secondaryTextColor:"#505050",textBackground:"#f4f4f4",pulseStart:"rgba(8, 104, 172, 0.10)",pulseEnd:"rgba(8, 104, 72, 0.0)",outline:"rgba(188, 188, 188, 0.50)",badge:"#3FA296",badgeStrokeColor:"#ffffff",badgeTextColor:"#ffffff",nodeIcon:"#23231a",selected:"#bb3249",edgeStroke:"#c5f5f0",edgeHaloColor:"#EAEAEA",edgeOutline:"rgba(116, 116, 116, 0.80)",background:"white",nodeOutline:"rgba(188, 188, 188, 0.50)"},M={font:"Helvetica",color:x.textColor,backgroundColor:x.textBackground,size:16,margin:12,padding:8,scale:.1,content:""},N=Object.assign(Object.assign({},M),{backgroundColor:x.textBackground,color:x.secondaryTextColor,margin:8,size:12}),O={color:x.badge,minVisibleSize:12,stroke:{color:x.badgeStrokeColor,width:4},text:Object.assign(Object.assign({},M),{scale:.5,margin:0,color:x.badgeTextColor,content:""})},R={duration:1e3,endRatio:4,endColor:x.pulseStart,interval:8e3,startColor:x.pulseEnd,width:20,radius:4},P={nodeAttributes:{color:x.nodeColor,badges:{topLeft:O,topRight:O,bottomLeft:O,bottomRight:O},halo:{color:x.haloColor,strokeColor:x.haloStroke,strokeWidth:4},icon:{color:x.nodeIcon,scale:.7},innerStroke:{color:x.innerStroke,minVisibleSize:0,width:4},outerStroke:{color:x.outerStroke,minVisibleSize:0,scalingMethod:"scaled",width:4},outline:{color:x.outline},opacity:1,shape:"circle",pulse:R,radius:5,text:Object.assign(Object.assign({},M),{secondary:N,tip:!1})},edgeAttributes:{color:x.edgeColor,halo:{color:x.haloColor},outline:{color:x.outline},stroke:{color:x.edgeStroke,minVisibleSize:0,width:2},pulse:R,text:Object.assign(Object.assign({},M),{secondary:N})},selectedEdgeAttributes:{color:x.selected},selectedNodeAttributes:{outerStroke:{color:x.selected}},colors:x,edgeOutlineWidth:2,edgeHaloWidth:8,nodeHaloWidth:40};i.afternoonNap=b,i.midsummerNight=h,i.morningBreeze=P,Object.defineProperty(i,"__esModule",{value:!0})})}(og,og.exports)),og.exports}var O9=R9(),Qt=Dg();const cd=a0(Qt),I9=()=>Re.jsx("div",{className:"loading-overlay",children:Re.jsx("div",{className:"loading-indicator"})});var ag={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var P9=ag.exports,sw;function z9(){return sw||(sw=1,function(t,e){(function(i,n){n(e)})(P9,function(i){var n="1.9.4";function s(d){var p,A,z,B;for(A=1,z=arguments.length;A<z;A++){B=arguments[A];for(p in B)d[p]=B[p]}return d}var r=Object.create||function(){function d(){}return function(p){return d.prototype=p,new d}}();function a(d,p){var A=Array.prototype.slice;if(d.bind)return d.bind.apply(d,A.call(arguments,1));var z=A.call(arguments,2);return function(){return d.apply(p,z.length?z.concat(A.call(arguments)):arguments)}}var u=0;function h(d){return"_leaflet_id"in d||(d._leaflet_id=++u),d._leaflet_id}function c(d,p,A){var z,B,J,dt;return dt=function(){z=!1,B&&(J.apply(A,B),B=!1)},J=function(){z?B=arguments:(d.apply(A,arguments),setTimeout(dt,p),z=!0)},J}function g(d,p,A){var z=p[1],B=p[0],J=z-B;return d===z&&A?d:((d-B)%J+J)%J+B}function _(){return!1}function m(d,p){if(p===!1)return d;var A=Math.pow(10,p===void 0?6:p);return Math.round(d*A)/A}function v(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function b(d){return v(d).split(/\s+/)}function x(d,p){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?r(d.options):{});for(var A in p)d.options[A]=p[A];return d.options}function M(d,p,A){var z=[];for(var B in d)z.push(encodeURIComponent(A?B.toUpperCase():B)+"="+encodeURIComponent(d[B]));return(!p||p.indexOf("?")===-1?"?":"&")+z.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function O(d,p){return d.replace(N,function(A,z){var B=p[z];if(B===void 0)throw new Error("No value provided for variable "+A);return typeof B=="function"&&(B=B(p)),B})}var R=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function P(d,p){for(var A=0;A<d.length;A++)if(d[A]===p)return A;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var V=0;function Y(d){var p=+new Date,A=Math.max(0,16-(p-V));return V=p+A,window.setTimeout(d,A)}var K=window.requestAnimationFrame||U("RequestAnimationFrame")||Y,tt=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function j(d,p,A){if(A&&K===Y)d.call(p);else return K.call(window,a(d,p))}function lt(d){d&&tt.call(window,d)}var pt={__proto__:null,extend:s,create:r,bind:a,get lastId(){return u},stamp:h,throttle:c,wrapNum:g,falseFn:_,formatNum:m,trim:v,splitWords:b,setOptions:x,getParamString:M,template:O,isArray:R,indexOf:P,emptyImageUrl:F,requestFn:K,cancelFn:tt,requestAnimFrame:j,cancelAnimFrame:lt};function ft(){}ft.extend=function(d){var p=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},A=p.__super__=this.prototype,z=r(A);z.constructor=p,p.prototype=z;for(var B in this)Object.prototype.hasOwnProperty.call(this,B)&&B!=="prototype"&&B!=="__super__"&&(p[B]=this[B]);return d.statics&&s(p,d.statics),d.includes&&(ht(d.includes),s.apply(null,[z].concat(d.includes))),s(z,d),delete z.statics,delete z.includes,z.options&&(z.options=A.options?r(A.options):{},s(z.options,d.options)),z._initHooks=[],z.callInitHooks=function(){if(!this._initHooksCalled){A.callInitHooks&&A.callInitHooks.call(this),this._initHooksCalled=!0;for(var J=0,dt=z._initHooks.length;J<dt;J++)z._initHooks[J].call(this)}},p},ft.include=function(d){var p=this.prototype.options;return s(this.prototype,d),d.options&&(this.prototype.options=p,this.mergeOptions(d.options)),this},ft.mergeOptions=function(d){return s(this.prototype.options,d),this},ft.addInitHook=function(d){var p=Array.prototype.slice.call(arguments,1),A=typeof d=="function"?d:function(){this[d].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(A),this};function ht(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=R(d)?d:[d];for(var p=0;p<d.length;p++)d[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(d,p,A){if(typeof d=="object")for(var z in d)this._on(z,d[z],p);else{d=b(d);for(var B=0,J=d.length;B<J;B++)this._on(d[B],p,A)}return this},off:function(d,p,A){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var z in d)this._off(z,d[z],p);else{d=b(d);for(var B=arguments.length===1,J=0,dt=d.length;J<dt;J++)B?this._off(d[J]):this._off(d[J],p,A)}return this},_on:function(d,p,A,z){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(d,p,A)===!1){A===this&&(A=void 0);var B={fn:p,ctx:A};z&&(B.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(B)}},_off:function(d,p,A){var z,B,J;if(this._events&&(z=this._events[d],!!z)){if(arguments.length===1){if(this._firingCount)for(B=0,J=z.length;B<J;B++)z[B].fn=_;delete this._events[d];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var dt=this._listens(d,p,A);if(dt!==!1){var Ct=z[dt];this._firingCount&&(Ct.fn=_,this._events[d]=z=z.slice()),z.splice(dt,1)}}},fire:function(d,p,A){if(!this.listens(d,A))return this;var z=s({},p,{type:d,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var B=this._events[d];if(B){this._firingCount=this._firingCount+1||1;for(var J=0,dt=B.length;J<dt;J++){var Ct=B[J],Ht=Ct.fn;Ct.once&&this.off(d,Ht,Ct.ctx),Ht.call(Ct.ctx||this,z)}this._firingCount--}}return A&&this._propagateEvent(z),this},listens:function(d,p,A,z){typeof d!="string"&&console.warn('"string" type argument expected');var B=p;typeof p!="function"&&(z=!!p,B=void 0,A=void 0);var J=this._events&&this._events[d];if(J&&J.length&&this._listens(d,B,A)!==!1)return!0;if(z){for(var dt in this._eventParents)if(this._eventParents[dt].listens(d,p,A,z))return!0}return!1},_listens:function(d,p,A){if(!this._events)return!1;var z=this._events[d]||[];if(!p)return!!z.length;A===this&&(A=void 0);for(var B=0,J=z.length;B<J;B++)if(z[B].fn===p&&z[B].ctx===A)return B;return!1},once:function(d,p,A){if(typeof d=="object")for(var z in d)this._on(z,d[z],p,!0);else{d=b(d);for(var B=0,J=d.length;B<J;B++)this._on(d[B],p,A,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[h(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[h(d)],this},_propagateEvent:function(d){for(var p in this._eventParents)this._eventParents[p].fire(d.type,s({layer:d.target,propagatedFrom:d.target},d),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var st=ft.extend(W);function _t(d,p,A){this.x=A?Math.round(d):d,this.y=A?Math.round(p):p}var Vt=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};_t.prototype={clone:function(){return new _t(this.x,this.y)},add:function(d){return this.clone()._add(X(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(X(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new _t(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new _t(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Vt(this.x),this.y=Vt(this.y),this},distanceTo:function(d){d=X(d);var p=d.x-this.x,A=d.y-this.y;return Math.sqrt(p*p+A*A)},equals:function(d){return d=X(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=X(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function X(d,p,A){return d instanceof _t?d:R(d)?new _t(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new _t(d.x,d.y):new _t(d,p,A)}function et(d,p){if(d)for(var A=p?[d,p]:d,z=0,B=A.length;z<B;z++)this.extend(A[z])}et.prototype={extend:function(d){var p,A;if(!d)return this;if(d instanceof _t||typeof d[0]=="number"||"x"in d)p=A=X(d);else if(d=Dt(d),p=d.min,A=d.max,!p||!A)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=A.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(A.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(A.y,this.max.y)),this},getCenter:function(d){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var p,A;return typeof d[0]=="number"||d instanceof _t?d=X(d):d=Dt(d),d instanceof et?(p=d.min,A=d.max):p=A=d,p.x>=this.min.x&&A.x<=this.max.x&&p.y>=this.min.y&&A.y<=this.max.y},intersects:function(d){d=Dt(d);var p=this.min,A=this.max,z=d.min,B=d.max,J=B.x>=p.x&&z.x<=A.x,dt=B.y>=p.y&&z.y<=A.y;return J&&dt},overlaps:function(d){d=Dt(d);var p=this.min,A=this.max,z=d.min,B=d.max,J=B.x>p.x&&z.x<A.x,dt=B.y>p.y&&z.y<A.y;return J&&dt},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var p=this.min,A=this.max,z=Math.abs(p.x-A.x)*d,B=Math.abs(p.y-A.y)*d;return Dt(X(p.x-z,p.y-B),X(A.x+z,A.y+B))},equals:function(d){return d?(d=Dt(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function Dt(d,p){return!d||d instanceof et?d:new et(d,p)}function Mt(d,p){if(d)for(var A=p?[d,p]:d,z=0,B=A.length;z<B;z++)this.extend(A[z])}Mt.prototype={extend:function(d){var p=this._southWest,A=this._northEast,z,B;if(d instanceof Xt)z=d,B=d;else if(d instanceof Mt){if(z=d._southWest,B=d._northEast,!z||!B)return this}else return d?this.extend(jt(d)||At(d)):this;return!p&&!A?(this._southWest=new Xt(z.lat,z.lng),this._northEast=new Xt(B.lat,B.lng)):(p.lat=Math.min(z.lat,p.lat),p.lng=Math.min(z.lng,p.lng),A.lat=Math.max(B.lat,A.lat),A.lng=Math.max(B.lng,A.lng)),this},pad:function(d){var p=this._southWest,A=this._northEast,z=Math.abs(p.lat-A.lat)*d,B=Math.abs(p.lng-A.lng)*d;return new Mt(new Xt(p.lat-z,p.lng-B),new Xt(A.lat+z,A.lng+B))},getCenter:function(){return new Xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof Xt||"lat"in d?d=jt(d):d=At(d);var p=this._southWest,A=this._northEast,z,B;return d instanceof Mt?(z=d.getSouthWest(),B=d.getNorthEast()):z=B=d,z.lat>=p.lat&&B.lat<=A.lat&&z.lng>=p.lng&&B.lng<=A.lng},intersects:function(d){d=At(d);var p=this._southWest,A=this._northEast,z=d.getSouthWest(),B=d.getNorthEast(),J=B.lat>=p.lat&&z.lat<=A.lat,dt=B.lng>=p.lng&&z.lng<=A.lng;return J&&dt},overlaps:function(d){d=At(d);var p=this._southWest,A=this._northEast,z=d.getSouthWest(),B=d.getNorthEast(),J=B.lat>p.lat&&z.lat<A.lat,dt=B.lng>p.lng&&z.lng<A.lng;return J&&dt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,p){return d?(d=At(d),this._southWest.equals(d.getSouthWest(),p)&&this._northEast.equals(d.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(d,p){return d instanceof Mt?d:new Mt(d,p)}function Xt(d,p,A){if(isNaN(d)||isNaN(p))throw new Error("Invalid LatLng object: ("+d+", "+p+")");this.lat=+d,this.lng=+p,A!==void 0&&(this.alt=+A)}Xt.prototype={equals:function(d,p){if(!d)return!1;d=jt(d);var A=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return A<=(p===void 0?1e-9:p)},toString:function(d){return"LatLng("+m(this.lat,d)+", "+m(this.lng,d)+")"},distanceTo:function(d){return Se.distance(this,jt(d))},wrap:function(){return Se.wrapLatLng(this)},toBounds:function(d){var p=180*d/40075017,A=p/Math.cos(Math.PI/180*this.lat);return At([this.lat-p,this.lng-A],[this.lat+p,this.lng+A])},clone:function(){return new Xt(this.lat,this.lng,this.alt)}};function jt(d,p,A){return d instanceof Xt?d:R(d)&&typeof d[0]!="object"?d.length===3?new Xt(d[0],d[1],d[2]):d.length===2?new Xt(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new Xt(d.lat,"lng"in d?d.lng:d.lon,d.alt):p===void 0?null:new Xt(d,p,A)}var Ge={latLngToPoint:function(d,p){var A=this.projection.project(d),z=this.scale(p);return this.transformation._transform(A,z)},pointToLatLng:function(d,p){var A=this.scale(p),z=this.transformation.untransform(d,A);return this.projection.unproject(z)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var p=this.projection.bounds,A=this.scale(d),z=this.transformation.transform(p.min,A),B=this.transformation.transform(p.max,A);return new et(z,B)},infinite:!1,wrapLatLng:function(d){var p=this.wrapLng?g(d.lng,this.wrapLng,!0):d.lng,A=this.wrapLat?g(d.lat,this.wrapLat,!0):d.lat,z=d.alt;return new Xt(A,p,z)},wrapLatLngBounds:function(d){var p=d.getCenter(),A=this.wrapLatLng(p),z=p.lat-A.lat,B=p.lng-A.lng;if(z===0&&B===0)return d;var J=d.getSouthWest(),dt=d.getNorthEast(),Ct=new Xt(J.lat-z,J.lng-B),Ht=new Xt(dt.lat-z,dt.lng-B);return new Mt(Ct,Ht)}},Se=s({},Ge,{wrapLng:[-180,180],R:6371e3,distance:function(d,p){var A=Math.PI/180,z=d.lat*A,B=p.lat*A,J=Math.sin((p.lat-d.lat)*A/2),dt=Math.sin((p.lng-d.lng)*A/2),Ct=J*J+Math.cos(z)*Math.cos(B)*dt*dt,Ht=2*Math.atan2(Math.sqrt(Ct),Math.sqrt(1-Ct));return this.R*Ht}}),Lt=6378137,Gt={R:Lt,MAX_LATITUDE:85.0511287798,project:function(d){var p=Math.PI/180,A=this.MAX_LATITUDE,z=Math.max(Math.min(A,d.lat),-A),B=Math.sin(z*p);return new _t(this.R*d.lng*p,this.R*Math.log((1+B)/(1-B))/2)},unproject:function(d){var p=180/Math.PI;return new Xt((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*p,d.x*p/this.R)},bounds:function(){var d=Lt*Math.PI;return new et([-d,-d],[d,d])}()};function ie(d,p,A,z){if(R(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=p,this._c=A,this._d=z}ie.prototype={transform:function(d,p){return this._transform(d.clone(),p)},_transform:function(d,p){return p=p||1,d.x=p*(this._a*d.x+this._b),d.y=p*(this._c*d.y+this._d),d},untransform:function(d,p){return p=p||1,new _t((d.x/p-this._b)/this._a,(d.y/p-this._d)/this._c)}};function kt(d,p,A,z){return new ie(d,p,A,z)}var $t=s({},Se,{code:"EPSG:3857",projection:Gt,transformation:function(){var d=.5/(Math.PI*Gt.R);return kt(d,.5,-d,.5)}()}),ne=s({},$t,{code:"EPSG:900913"});function ee(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function se(d,p){var A="",z,B,J,dt,Ct,Ht;for(z=0,J=d.length;z<J;z++){for(Ct=d[z],B=0,dt=Ct.length;B<dt;B++)Ht=Ct[B],A+=(B?"L":"M")+Ht.x+" "+Ht.y;A+=p?Ee.svg?"z":"x":""}return A||"M0 0"}var ve=document.documentElement.style,Oe="ActiveXObject"in window,ke=Oe&&!document.addEventListener,Xe="msLaunchUri"in navigator&&!("documentMode"in document),Be=Fn("webkit"),Ae=Fn("android"),Ze=Fn("android 2")||Fn("android 3"),ki=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ei=Ae&&Fn("Google")&&ki<537&&!("AudioNode"in window),qe=!!window.opera,hi=!Xe&&Fn("chrome"),Ji=Fn("gecko")&&!Be&&!qe&&!Oe,Mi=!hi&&Fn("safari"),Vs=Fn("phantom"),ls="OTransition"in ve,Is=navigator.platform.indexOf("Win")===0,Jn=Oe&&"transition"in ve,Cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ze,bn="MozPerspective"in ve,di=!window.L_DISABLE_3D&&(Jn||Cn||bn)&&!ls&&!Vs,gi=typeof orientation<"u"||Fn("mobile"),lr=gi&&Be,ys=gi&&Cn,Hi=!window.PointerEvent&&window.MSPointerEvent,$i=!!(window.PointerEvent||Hi),Mn="ontouchstart"in window||!!window.TouchEvent,zr=!window.L_NO_TOUCH&&(Mn||$i),ur=gi&&qe,Xi=gi&&Ji,us=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vi=function(){var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",_,p),window.removeEventListener("testPassiveEventSupport",_,p)}catch{}return d}(),pn=function(){return!!document.createElement("canvas").getContext}(),Ni=!!(document.createElementNS&&ee("svg").createSVGRect),yn=!!Ni&&function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ii=!Ni&&function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var p=d.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Fe=navigator.platform.indexOf("Mac")===0,$n=navigator.platform.indexOf("Linux")===0;function Fn(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var Ee={ie:Oe,ielt9:ke,edge:Xe,webkit:Be,android:Ae,android23:Ze,androidStock:ei,opera:qe,chrome:hi,gecko:Ji,safari:Mi,phantom:Vs,opera12:ls,win:Is,ie3d:Jn,webkit3d:Cn,gecko3d:bn,any3d:di,mobile:gi,mobileWebkit:lr,mobileWebkit3d:ys,msPointer:Hi,pointer:$i,touch:zr,touchNative:Mn,mobileOpera:ur,mobileGecko:Xi,retina:us,passiveEvents:vi,canvas:pn,svg:Ni,vml:Ii,inlineSvg:yn,mac:Fe,linux:$n},xi=Ee.msPointer?"MSPointerDown":"pointerdown",Dr=Ee.msPointer?"MSPointerMove":"pointermove",er=Ee.msPointer?"MSPointerUp":"pointerup",ci=Ee.msPointer?"MSPointerCancel":"pointercancel",Fi={touchstart:xi,touchmove:Dr,touchend:er,touchcancel:ci},ts={touchstart:at,touchmove:ot,touchend:ot,touchcancel:ot},Bi={},Ss=!1;function tn(d,p,A){return p==="touchstart"&&en(),ts[p]?(A=ts[p].bind(this,A),d.addEventListener(Fi[p],A,!1),A):(console.warn("wrong event specified:",p),_)}function ro(d,p,A){if(!Fi[p]){console.warn("wrong event specified:",p);return}d.removeEventListener(Fi[p],A,!1)}function oo(d){Bi[d.pointerId]=d}function ir(d){Bi[d.pointerId]&&(Bi[d.pointerId]=d)}function hr(d){delete Bi[d.pointerId]}function en(){Ss||(document.addEventListener(xi,oo,!0),document.addEventListener(Dr,ir,!0),document.addEventListener(er,hr,!0),document.addEventListener(ci,hr,!0),Ss=!0)}function ot(d,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var A in Bi)p.touches.push(Bi[A]);p.changedTouches=[p],d(p)}}function at(d,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Ui(p),ot(d,p)}function it(d){var p={},A,z;for(z in d)A=d[z],p[z]=A&&A.bind?A.bind(d):A;return d=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var ut=200;function yt(d,p){d.addEventListener("dblclick",p);var A=0,z;function B(J){if(J.detail!==1){z=J.detail;return}if(!(J.pointerType==="mouse"||J.sourceCapabilities&&!J.sourceCapabilities.firesTouchEvents)){var dt=xr(J);if(!(dt.some(function(Ht){return Ht instanceof HTMLLabelElement&&Ht.attributes.for})&&!dt.some(function(Ht){return Ht instanceof HTMLInputElement||Ht instanceof HTMLSelectElement}))){var Ct=Date.now();Ct-A<=ut?(z++,z===2&&p(it(J))):z=1,A=Ct}}}return d.addEventListener("click",B),{dblclick:p,simDblclick:B}}function bt(d,p){d.removeEventListener("dblclick",p.dblclick),d.removeEventListener("click",p.simDblclick)}var vt=Te(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),St=Te(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Tt=St==="webkitTransition"||St==="OTransition"?St+"End":"transitionend";function Wt(d){return typeof d=="string"?document.getElementById(d):d}function wt(d,p){var A=d.style[p]||d.currentStyle&&d.currentStyle[p];if((!A||A==="auto")&&document.defaultView){var z=document.defaultView.getComputedStyle(d,null);A=z?z[p]:null}return A==="auto"?null:A}function Nt(d,p,A){var z=document.createElement(d);return z.className=p||"",A&&A.appendChild(z),z}function Ft(d){var p=d.parentNode;p&&p.removeChild(d)}function te(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function Ot(d){var p=d.parentNode;p&&p.lastChild!==d&&p.appendChild(d)}function oe(d){var p=d.parentNode;p&&p.firstChild!==d&&p.insertBefore(d,p.firstChild)}function he(d,p){if(d.classList!==void 0)return d.classList.contains(p);var A=ue(d);return A.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(A)}function Kt(d,p){if(d.classList!==void 0)for(var A=b(p),z=0,B=A.length;z<B;z++)d.classList.add(A[z]);else if(!he(d,p)){var J=ue(d);ge(d,(J?J+" ":"")+p)}}function le(d,p){d.classList!==void 0?d.classList.remove(p):ge(d,v((" "+ue(d)+" ").replace(" "+p+" "," ")))}function ge(d,p){d.className.baseVal===void 0?d.className=p:d.className.baseVal=p}function ue(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function _e(d,p){"opacity"in d.style?d.style.opacity=p:"filter"in d.style&&me(d,p)}function me(d,p){var A=!1,z="DXImageTransform.Microsoft.Alpha";try{A=d.filters.item(z)}catch{if(p===1)return}p=Math.round(p*100),A?(A.Enabled=p!==100,A.Opacity=p):d.style.filter+=" progid:"+z+"(opacity="+p+")"}function Te(d){for(var p=document.documentElement.style,A=0;A<d.length;A++)if(d[A]in p)return d[A];return!1}function Ie(d,p,A){var z=p||new _t(0,0);d.style[vt]=(Ee.ie3d?"translate("+z.x+"px,"+z.y+"px)":"translate3d("+z.x+"px,"+z.y+"px,0)")+(A?" scale("+A+")":"")}function Le(d,p){d._leaflet_pos=p,Ee.any3d?Ie(d,p):(d.style.left=p.x+"px",d.style.top=p.y+"px")}function We(d){return d._leaflet_pos||new _t(0,0)}var $e,Ei,Si;if("onselectstart"in document)$e=function(){Pe(window,"selectstart",Ui)},Ei=function(){Me(window,"selectstart",Ui)};else{var ui=Te(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$e=function(){if(ui){var d=document.documentElement.style;Si=d[ui],d[ui]="none"}},Ei=function(){ui&&(document.documentElement.style[ui]=Si,Si=void 0)}}function Zi(){Pe(window,"dragstart",Ui)}function En(){Me(window,"dragstart",Ui)}var Wi,Vi;function hn(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(Nn(),Wi=d,Vi=d.style.outlineStyle,d.style.outlineStyle="none",Pe(window,"keydown",Nn))}function Nn(){Wi&&(Wi.style.outlineStyle=Vi,Wi=void 0,Vi=void 0,Me(window,"keydown",Nn))}function Ai(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function vs(d){var p=d.getBoundingClientRect();return{x:p.width/d.offsetWidth||1,y:p.height/d.offsetHeight||1,boundingClientRect:p}}var Ao={__proto__:null,TRANSFORM:vt,TRANSITION:St,TRANSITION_END:Tt,get:Wt,getStyle:wt,create:Nt,remove:Ft,empty:te,toFront:Ot,toBack:oe,hasClass:he,addClass:Kt,removeClass:le,setClass:ge,getClass:ue,setOpacity:_e,testProp:Te,setTransform:Ie,setPosition:Le,getPosition:We,get disableTextSelection(){return $e},get enableTextSelection(){return Ei},disableImageDrag:Zi,enableImageDrag:En,preventOutline:hn,restoreOutline:Nn,getSizedParentNode:Ai,getScale:vs};function Pe(d,p,A,z){if(p&&typeof p=="object")for(var B in p)Ri(d,B,p[B],A);else{p=b(p);for(var J=0,dt=p.length;J<dt;J++)Ri(d,p[J],A,z)}return this}var dn="_leaflet_events";function Me(d,p,A,z){if(arguments.length===1)rn(d),delete d[dn];else if(p&&typeof p=="object")for(var B in p)cn(d,B,p[B],A);else if(p=b(p),arguments.length===2)rn(d,function(Ct){return P(p,Ct)!==-1});else for(var J=0,dt=p.length;J<dt;J++)cn(d,p[J],A,z);return this}function rn(d,p){for(var A in d[dn]){var z=A.split(/\d/)[0];(!p||p(z))&&cn(d,z,null,null,A)}}var qi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ri(d,p,A,z){var B=p+h(A)+(z?"_"+h(z):"");if(d[dn]&&d[dn][B])return this;var J=function(Ct){return A.call(z||d,Ct||window.event)},dt=J;!Ee.touchNative&&Ee.pointer&&p.indexOf("touch")===0?J=tn(d,p,J):Ee.touch&&p==="dblclick"?J=yt(d,J):"addEventListener"in d?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?d.addEventListener(qi[p]||p,J,Ee.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(J=function(Ct){Ct=Ct||window.event,br(d,Ct)&&dt(Ct)},d.addEventListener(qi[p],J,!1)):d.addEventListener(p,dt,!1):d.attachEvent("on"+p,J),d[dn]=d[dn]||{},d[dn][B]=J}function cn(d,p,A,z,B){B=B||p+h(A)+(z?"_"+h(z):"");var J=d[dn]&&d[dn][B];if(!J)return this;!Ee.touchNative&&Ee.pointer&&p.indexOf("touch")===0?ro(d,p,J):Ee.touch&&p==="dblclick"?bt(d,J):"removeEventListener"in d?d.removeEventListener(qi[p]||p,J,!1):d.detachEvent("on"+p,J),d[dn][B]=null}function Bn(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Ys(d){return Ri(d,"wheel",Bn),this}function Xs(d){return Pe(d,"mousedown touchstart dblclick contextmenu",Bn),d._leaflet_disable_click=!0,this}function Ui(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function As(d){return Ui(d),Bn(d),this}function xr(d){if(d.composedPath)return d.composedPath();for(var p=[],A=d.target;A;)p.push(A),A=A.parentNode;return p}function Ts(d,p){if(!p)return new _t(d.clientX,d.clientY);var A=vs(p),z=A.boundingClientRect;return new _t((d.clientX-z.left)/A.x-p.clientLeft,(d.clientY-z.top)/A.y-p.clientTop)}var ao=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function kr(d){return Ee.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/ao:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function br(d,p){var A=p.relatedTarget;if(!A)return!0;try{for(;A&&A!==d;)A=A.parentNode}catch{return!1}return A!==d}var Mu={__proto__:null,on:Pe,off:Me,stopPropagation:Bn,disableScrollPropagation:Ys,disableClickPropagation:Xs,preventDefault:Ui,stop:As,getPropagationPath:xr,getMousePosition:Ts,getWheelDelta:kr,isExternalTarget:br,addListener:Pe,removeListener:Me},za=st.extend({run:function(d,p,A,z){this.stop(),this._el=d,this._inProgress=!0,this._duration=A||.25,this._easeOutPower=1/Math.max(z||.5,.2),this._startPos=We(d),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(d){var p=+new Date-this._startTime,A=this._duration*1e3;p<A?this._runFrame(this._easeOut(p/A),d):(this._runFrame(1),this._complete())},_runFrame:function(d,p){var A=this._startPos.add(this._offset.multiplyBy(d));p&&A._round(),Le(this._el,A),this.fire("step")},_complete:function(){lt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),_i=st.extend({options:{crs:$t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,p){p=x(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(jt(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=St&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,Tt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,p,A){if(p=p===void 0?this._zoom:this._limitZoom(p),d=this._limitCenter(jt(d),p,this.options.maxBounds),A=A||{},this._stop(),this._loaded&&!A.reset&&A!==!0){A.animate!==void 0&&(A.zoom=s({animate:A.animate},A.zoom),A.pan=s({animate:A.animate,duration:A.duration},A.pan));var z=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,p,A.zoom):this._tryAnimatedPan(d,A.pan);if(z)return clearTimeout(this._sizeTimer),this}return this._resetView(d,p,A.pan&&A.pan.noMoveStart),this},setZoom:function(d,p){return this._loaded?this.setView(this.getCenter(),d,{zoom:p}):(this._zoom=d,this)},zoomIn:function(d,p){return d=d||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,p)},zoomOut:function(d,p){return d=d||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,p)},setZoomAround:function(d,p,A){var z=this.getZoomScale(p),B=this.getSize().divideBy(2),J=d instanceof _t?d:this.latLngToContainerPoint(d),dt=J.subtract(B).multiplyBy(1-1/z),Ct=this.containerPointToLatLng(B.add(dt));return this.setView(Ct,p,{zoom:A})},_getBoundsCenterZoom:function(d,p){p=p||{},d=d.getBounds?d.getBounds():At(d);var A=X(p.paddingTopLeft||p.padding||[0,0]),z=X(p.paddingBottomRight||p.padding||[0,0]),B=this.getBoundsZoom(d,!1,A.add(z));if(B=typeof p.maxZoom=="number"?Math.min(p.maxZoom,B):B,B===1/0)return{center:d.getCenter(),zoom:B};var J=z.subtract(A).divideBy(2),dt=this.project(d.getSouthWest(),B),Ct=this.project(d.getNorthEast(),B),Ht=this.unproject(dt.add(Ct).divideBy(2).add(J),B);return{center:Ht,zoom:B}},fitBounds:function(d,p){if(d=At(d),!d.isValid())throw new Error("Bounds are not valid.");var A=this._getBoundsCenterZoom(d,p);return this.setView(A.center,A.zoom,p)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,p){return this.setView(d,this._zoom,{pan:p})},panBy:function(d,p){if(d=X(d).round(),p=p||{},!d.x&&!d.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new za,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Kt(this._mapPane,"leaflet-pan-anim");var A=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,A,p.duration||.25,p.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,p,A){if(A=A||{},A.animate===!1||!Ee.any3d)return this.setView(d,p,A);this._stop();var z=this.project(this.getCenter()),B=this.project(d),J=this.getSize(),dt=this._zoom;d=jt(d),p=p===void 0?dt:p;var Ct=Math.max(J.x,J.y),Ht=Ct*this.getZoomScale(dt,p),ce=B.distanceTo(z)||1,be=1.42,Ce=be*be;function we(fi){var cs=fi?-1:1,wr=fi?Ht:Ct,Vr=Ht*Ht-Ct*Ct+cs*Ce*Ce*ce*ce,js=2*wr*Ce*ce,Xo=Vr/js,In=Math.sqrt(Xo*Xo+1)-Xo,Yr=In<1e-9?-18:Math.log(In);return Yr}function ti(fi){return(Math.exp(fi)-Math.exp(-fi))/2}function Yi(fi){return(Math.exp(fi)+Math.exp(-fi))/2}function Ki(fi){return ti(fi)/Yi(fi)}var Li=we(0);function ks(fi){return Ct*(Yi(Li)/Yi(Li+be*fi))}function fr(fi){return Ct*(Yi(Li)*Ki(Li+be*fi)-ti(Li))/Ce}function Yo(fi){return 1-Math.pow(1-fi,1.5)}var _o=Date.now(),gr=(we(1)-Li)/be,Tr=A.duration?1e3*A.duration:1e3*gr*.8;function or(){var fi=(Date.now()-_o)/Tr,cs=Yo(fi)*gr;fi<=1?(this._flyToFrame=j(or,this),this._move(this.unproject(z.add(B.subtract(z).multiplyBy(fr(cs)/ce)),dt),this.getScaleZoom(Ct/ks(cs),dt),{flyTo:!0})):this._move(d,p)._moveEnd(!0)}return this._moveStart(!0,A.noMoveStart),or.call(this),this},flyToBounds:function(d,p){var A=this._getBoundsCenterZoom(d,p);return this.flyTo(A.center,A.zoom,p)},setMaxBounds:function(d){return d=At(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var p=this.options.minZoom;return this.options.minZoom=d,this._loaded&&p!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var p=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&p!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,p){this._enforcingBounds=!0;var A=this.getCenter(),z=this._limitCenter(A,this._zoom,At(d));return A.equals(z)||this.panTo(z,p),this._enforcingBounds=!1,this},panInside:function(d,p){p=p||{};var A=X(p.paddingTopLeft||p.padding||[0,0]),z=X(p.paddingBottomRight||p.padding||[0,0]),B=this.project(this.getCenter()),J=this.project(d),dt=this.getPixelBounds(),Ct=Dt([dt.min.add(A),dt.max.subtract(z)]),Ht=Ct.getSize();if(!Ct.contains(J)){this._enforcingBounds=!0;var ce=J.subtract(Ct.getCenter()),be=Ct.extend(J).getSize().subtract(Ht);B.x+=ce.x<0?-be.x:be.x,B.y+=ce.y<0?-be.y:be.y,this.panTo(this.unproject(B),p),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=s({animate:!1,pan:!0},d===!0?{animate:!0}:d);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var A=this.getSize(),z=p.divideBy(2).round(),B=A.divideBy(2).round(),J=z.subtract(B);return!J.x&&!J.y?this:(d.animate&&d.pan?this.panBy(J):(d.pan&&this._rawPanBy(J),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:A}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=s({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=a(this._handleGeolocationResponse,this),A=a(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,A,d):navigator.geolocation.getCurrentPosition(p,A,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var p=d.code,A=d.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+A+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var p=d.coords.latitude,A=d.coords.longitude,z=new Xt(p,A),B=z.toBounds(d.coords.accuracy*2),J=this._locateOptions;if(J.setView){var dt=this.getBoundsZoom(B);this.setView(z,J.maxZoom?Math.min(dt,J.maxZoom):dt)}var Ct={latlng:z,bounds:B,timestamp:d.timestamp};for(var Ht in d.coords)typeof d.coords[Ht]=="number"&&(Ct[Ht]=d.coords[Ht]);this.fire("locationfound",Ct)}},addHandler:function(d,p){if(!p)return this;var A=this[d]=new p(this);return this._handlers.push(A),this.options[d]&&A.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(lt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)Ft(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,p){var A="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),z=Nt("div",A,p||this._mapPane);return d&&(this._panes[d]=z),z},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),p=this.unproject(d.getBottomLeft()),A=this.unproject(d.getTopRight());return new Mt(p,A)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,p,A){d=At(d),A=X(A||[0,0]);var z=this.getZoom()||0,B=this.getMinZoom(),J=this.getMaxZoom(),dt=d.getNorthWest(),Ct=d.getSouthEast(),Ht=this.getSize().subtract(A),ce=Dt(this.project(Ct,z),this.project(dt,z)).getSize(),be=Ee.any3d?this.options.zoomSnap:1,Ce=Ht.x/ce.x,we=Ht.y/ce.y,ti=p?Math.max(Ce,we):Math.min(Ce,we);return z=this.getScaleZoom(ti,z),be&&(z=Math.round(z/(be/100))*(be/100),z=p?Math.ceil(z/be)*be:Math.floor(z/be)*be),Math.max(B,Math.min(J,z))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new _t(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,p){var A=this._getTopLeftPoint(d,p);return new et(A,A.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,p){var A=this.options.crs;return p=p===void 0?this._zoom:p,A.scale(d)/A.scale(p)},getScaleZoom:function(d,p){var A=this.options.crs;p=p===void 0?this._zoom:p;var z=A.zoom(d*A.scale(p));return isNaN(z)?1/0:z},project:function(d,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(jt(d),p)},unproject:function(d,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(X(d),p)},layerPointToLatLng:function(d){var p=X(d).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(d){var p=this.project(jt(d))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(jt(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(At(d))},distance:function(d,p){return this.options.crs.distance(jt(d),jt(p))},containerPointToLayerPoint:function(d){return X(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return X(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var p=this.containerPointToLayerPoint(X(d));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(jt(d)))},mouseEventToContainerPoint:function(d){return Ts(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var p=this._container=Wt(d);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(p,"scroll",this._onScroll,this),this._containerId=h(p)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Kt(d,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=wt(d,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new _t(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Kt(d.markerPane,"leaflet-zoom-hide"),Kt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,p,A){Le(this._mapPane,new _t(0,0));var z=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var B=this._zoom!==p;this._moveStart(B,A)._move(d,p)._moveEnd(B),this.fire("viewreset"),z&&this.fire("load")},_moveStart:function(d,p){return d&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(d,p,A,z){p===void 0&&(p=this._zoom);var B=this._zoom!==p;return this._zoom=p,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),z?A&&A.pinch&&this.fire("zoom",A):((B||A&&A.pinch)&&this.fire("zoom",A),this.fire("move",A)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return lt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){Le(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[h(this._container)]=this;var p=d?Me:Pe;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){lt(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,p){for(var A=[],z,B=p==="mouseout"||p==="mouseover",J=d.target||d.srcElement,dt=!1;J;){if(z=this._targets[h(J)],z&&(p==="click"||p==="preclick")&&this._draggableMoved(z)){dt=!0;break}if(z&&z.listens(p,!0)&&(B&&!br(J,d)||(A.push(z),B))||J===this._container)break;J=J.parentNode}return!A.length&&!dt&&!B&&this.listens(p,!0)&&(A=[this]),A},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var p=d.target||d.srcElement;if(!(!this._loaded||p._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(p))){var A=d.type;A==="mousedown"&&hn(p),this._fireDOMEvent(d,A)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,p,A){if(d.type==="click"){var z=s({},d);z.type="preclick",this._fireDOMEvent(z,z.type,A)}var B=this._findEventTargets(d,p);if(A){for(var J=[],dt=0;dt<A.length;dt++)A[dt].listens(p,!0)&&J.push(A[dt]);B=J.concat(B)}if(B.length){p==="contextmenu"&&Ui(d);var Ct=B[0],Ht={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var ce=Ct.getLatLng&&(!Ct._radius||Ct._radius<=10);Ht.containerPoint=ce?this.latLngToContainerPoint(Ct.getLatLng()):this.mouseEventToContainerPoint(d),Ht.layerPoint=this.containerPointToLayerPoint(Ht.containerPoint),Ht.latlng=ce?Ct.getLatLng():this.layerPointToLatLng(Ht.layerPoint)}for(dt=0;dt<B.length;dt++)if(B[dt].fire(p,Ht,!0),Ht.originalEvent._stopped||B[dt].options.bubblingMouseEvents===!1&&P(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,p=this._handlers.length;d<p;d++)this._handlers[d].disable()},whenReady:function(d,p){return this._loaded?d.call(p||this,{target:this}):this.on("load",d,p),this},_getMapPanePos:function(){return We(this._mapPane)||new _t(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,p){var A=d&&p!==void 0?this._getNewPixelOrigin(d,p):this.getPixelOrigin();return A.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,p){var A=this.getSize()._divideBy(2);return this.project(d,p)._subtract(A)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,p,A){var z=this._getNewPixelOrigin(A,p);return this.project(d,p)._subtract(z)},_latLngBoundsToNewLayerBounds:function(d,p,A){var z=this._getNewPixelOrigin(A,p);return Dt([this.project(d.getSouthWest(),p)._subtract(z),this.project(d.getNorthWest(),p)._subtract(z),this.project(d.getSouthEast(),p)._subtract(z),this.project(d.getNorthEast(),p)._subtract(z)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,p,A){if(!A)return d;var z=this.project(d,p),B=this.getSize().divideBy(2),J=new et(z.subtract(B),z.add(B)),dt=this._getBoundsOffset(J,A,p);return Math.abs(dt.x)<=1&&Math.abs(dt.y)<=1?d:this.unproject(z.add(dt),p)},_limitOffset:function(d,p){if(!p)return d;var A=this.getPixelBounds(),z=new et(A.min.add(d),A.max.add(d));return d.add(this._getBoundsOffset(z,p))},_getBoundsOffset:function(d,p,A){var z=Dt(this.project(p.getNorthEast(),A),this.project(p.getSouthWest(),A)),B=z.min.subtract(d.min),J=z.max.subtract(d.max),dt=this._rebound(B.x,-J.x),Ct=this._rebound(B.y,-J.y);return new _t(dt,Ct)},_rebound:function(d,p){return d+p>0?Math.round(d-p)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(p))},_limitZoom:function(d){var p=this.getMinZoom(),A=this.getMaxZoom(),z=Ee.any3d?this.options.zoomSnap:1;return z&&(d=Math.round(d/z)*z),Math.max(p,Math.min(A,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,p){var A=this._getCenterOffset(d)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(A)?!1:(this.panBy(A,p),!0)},_createAnimProxy:function(){var d=this._proxy=Nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(p){var A=vt,z=this._proxy.style[A];Ie(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),z===this._proxy.style[A]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),p=this.getZoom();Ie(this._proxy,this.project(d,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,p,A){if(this._animatingZoom)return!0;if(A=A||{},!this._zoomAnimated||A.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var z=this.getZoomScale(p),B=this._getCenterOffset(d)._divideBy(1-1/z);return A.animate!==!0&&!this.getSize().contains(B)?!1:(j(function(){this._moveStart(!0,A.noMoveStart||!1)._animateZoom(d,p,!0)},this),!0)},_animateZoom:function(d,p,A,z){this._mapPane&&(A&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=p,Kt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:p,noUpdate:z}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Da(d,p){return new _i(d,p)}var Zs=ft.extend({options:{position:"topright"},initialize:function(d){x(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var p=this._map;return p&&p.removeControl(this),this.options.position=d,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var p=this._container=this.onAdd(d),A=this.getPosition(),z=d._controlCorners[A];return Kt(p,"leaflet-control"),A.indexOf("bottom")!==-1?z.insertBefore(p,z.firstChild):z.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),ha=function(d){return new Zs(d)};_i.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},p="leaflet-",A=this._controlContainer=Nt("div",p+"control-container",this._container);function z(B,J){var dt=p+B+" "+p+J;d[B+J]=Nt("div",dt,A)}z("top","left"),z("top","right"),z("bottom","left"),z("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)Ft(this._controlCorners[d]);Ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Vl=Zs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,p,A,z){return A<z?-1:z<A?1:0}},initialize:function(d,p,A){x(this,A),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var z in d)this._addLayer(d[z],z);for(z in p)this._addLayer(p[z],z,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return Zs.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,p){return this._addLayer(d,p),this._map?this._update():this},addOverlay:function(d,p){return this._addLayer(d,p,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var p=this._getLayer(h(d));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Kt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(Kt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",p=this._container=Nt("div",d),A=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Xs(p),Ys(p);var z=this._section=Nt("section",d+"-list");A&&(this._map.on("click",this.collapse,this),Pe(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var B=this._layersLink=Nt("a",d+"-toggle",p);B.href="#",B.title="Layers",B.setAttribute("role","button"),Pe(B,{keydown:function(J){J.keyCode===13&&this._expandSafely()},click:function(J){Ui(J),this._expandSafely()}},this),A||this.expand(),this._baseLayersList=Nt("div",d+"-base",z),this._separator=Nt("div",d+"-separator",z),this._overlaysList=Nt("div",d+"-overlays",z),p.appendChild(z)},_getLayer:function(d){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&h(this._layers[p].layer)===d)return this._layers[p]},_addLayer:function(d,p,A){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:p,overlay:A}),this.options.sortLayers&&this._layers.sort(a(function(z,B){return this.options.sortFunction(z.layer,B.layer,z.name,B.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;te(this._baseLayersList),te(this._overlaysList),this._layerControlInputs=[];var d,p,A,z,B=0;for(A=0;A<this._layers.length;A++)z=this._layers[A],this._addItem(z),p=p||z.overlay,d=d||!z.overlay,B+=z.overlay?0:1;return this.options.hideSingleBase&&(d=d&&B>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=p&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var p=this._getLayer(h(d.target)),A=p.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;A&&this._map.fire(A,p)},_createRadioElement:function(d,p){var A='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(p?' checked="checked"':"")+"/>",z=document.createElement("div");return z.innerHTML=A,z.firstChild},_addItem:function(d){var p=document.createElement("label"),A=this._map.hasLayer(d.layer),z;d.overlay?(z=document.createElement("input"),z.type="checkbox",z.className="leaflet-control-layers-selector",z.defaultChecked=A):z=this._createRadioElement("leaflet-base-layers_"+h(this),A),this._layerControlInputs.push(z),z.layerId=h(d.layer),Pe(z,"click",this._onInputClick,this);var B=document.createElement("span");B.innerHTML=" "+d.name;var J=document.createElement("span");p.appendChild(J),J.appendChild(z),J.appendChild(B);var dt=d.overlay?this._overlaysList:this._baseLayersList;return dt.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,p,A,z=[],B=[];this._handlingClick=!0;for(var J=d.length-1;J>=0;J--)p=d[J],A=this._getLayer(p.layerId).layer,p.checked?z.push(A):p.checked||B.push(A);for(J=0;J<B.length;J++)this._map.hasLayer(B[J])&&this._map.removeLayer(B[J]);for(J=0;J<z.length;J++)this._map.hasLayer(z[J])||this._map.addLayer(z[J]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,p,A,z=this._map.getZoom(),B=d.length-1;B>=0;B--)p=d[B],A=this._getLayer(p.layerId).layer,p.disabled=A.options.minZoom!==void 0&&z<A.options.minZoom||A.options.maxZoom!==void 0&&z>A.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,Pe(d,"click",Ui),this.expand();var p=this;setTimeout(function(){Me(d,"click",Ui),p._preventClick=!1})}}),Nu=function(d,p,A){return new Vl(d,p,A)},Yl=Zs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var p="leaflet-control-zoom",A=Nt("div",p+" leaflet-bar"),z=this.options;return this._zoomInButton=this._createButton(z.zoomInText,z.zoomInTitle,p+"-in",A,this._zoomIn),this._zoomOutButton=this._createButton(z.zoomOutText,z.zoomOutTitle,p+"-out",A,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),A},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,p,A,z,B){var J=Nt("a",A,z);return J.innerHTML=d,J.href="#",J.title=p,J.setAttribute("role","button"),J.setAttribute("aria-label",p),Xs(J),Pe(J,"click",As),Pe(J,"click",B,this),Pe(J,"click",this._refocusOnMap,this),J},_updateDisabled:function(){var d=this._map,p="leaflet-disabled";le(this._zoomInButton,p),le(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(Kt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(Kt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});_i.mergeOptions({zoomControl:!0}),_i.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yl,this.addControl(this.zoomControl))});var ko=function(d){return new Yl(d)},Xl=Zs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var p="leaflet-control-scale",A=Nt("div",p),z=this.options;return this._addScales(z,p+"-line",A),d.on(z.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),A},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,p,A){d.metric&&(this._mScale=Nt("div",p,A)),d.imperial&&(this._iScale=Nt("div",p,A))},_update:function(){var d=this._map,p=d.getSize().y/2,A=d.distance(d.containerPointToLatLng([0,p]),d.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(A)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var p=this._getRoundNum(d),A=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,A,p/d)},_updateImperial:function(d){var p=d*3.2808399,A,z,B;p>5280?(A=p/5280,z=this._getRoundNum(A),this._updateScale(this._iScale,z+" mi",z/A)):(B=this._getRoundNum(p),this._updateScale(this._iScale,B+" ft",B/p))},_updateScale:function(d,p,A){d.style.width=Math.round(this.options.maxWidth*A)+"px",d.innerHTML=p},_getRoundNum:function(d){var p=Math.pow(10,(Math.floor(d)+"").length-1),A=d/p;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:1,p*A}}),cl=function(d){return new Xl(d)},wh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ka=Zs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?wh+" ":"")+"Leaflet</a>"},initialize:function(d){x(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=Nt("div","leaflet-control-attribution"),Xs(this._container);for(var p in d._layers)d._layers[p].getAttribution&&this.addAttribution(d._layers[p].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var p in this._attributions)this._attributions[p]&&d.push(p);var A=[];this.options.prefix&&A.push(this.options.prefix),d.length&&A.push(d.join(", ")),this._container.innerHTML=A.join(' <span aria-hidden="true">|</span> ')}}});_i.mergeOptions({attributionControl:!0}),_i.addInitHook(function(){this.options.attributionControl&&new ka().addTo(this)});var Ru=function(d){return new ka(d)};Zs.Layers=Vl,Zs.Zoom=Yl,Zs.Scale=Xl,Zs.Attribution=ka,ha.layers=Nu,ha.zoom=ko,ha.scale=cl,ha.attribution=Ru;var ws=ft.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ws.addTo=function(d,p){return d.addHandler(p,this),this};var Zl={Events:W},Fa=Ee.touch?"touchstart mousedown":"mousedown",lo=st.extend({options:{clickTolerance:3},initialize:function(d,p,A,z){x(this,z),this._element=d,this._dragStartTarget=p||d,this._preventOutline=A},enable:function(){this._enabled||(Pe(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(lo._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){lo._dragging===this&&this.finishDrag();return}if(!(lo._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(lo._dragging=this,this._preventOutline&&hn(this._element),Zi(),$e(),!this._moving)){this.fire("down");var p=d.touches?d.touches[0]:d,A=Ai(this._element);this._startPoint=new _t(p.clientX,p.clientY),this._startPos=We(this._element),this._parentScale=vs(A);var z=d.type==="mousedown";Pe(document,z?"mousemove":"touchmove",this._onMove,this),Pe(document,z?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var p=d.touches&&d.touches.length===1?d.touches[0]:d,A=new _t(p.clientX,p.clientY)._subtract(this._startPoint);!A.x&&!A.y||Math.abs(A.x)+Math.abs(A.y)<this.options.clickTolerance||(A.x/=this._parentScale.x,A.y/=this._parentScale.y,Ui(d),this._moved||(this.fire("dragstart"),this._moved=!0,Kt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Kt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(A),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),Le(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){le(document.body,"leaflet-dragging"),this._lastTarget&&(le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),En(),Ei();var p=this._moved&&this._moving;this._moving=!1,lo._dragging=!1,p&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function da(d,p,A){var z,B=[1,4,2,8],J,dt,Ct,Ht,ce,be,Ce,we;for(J=0,be=d.length;J<be;J++)d[J]._code=Er(d[J],p);for(Ct=0;Ct<4;Ct++){for(Ce=B[Ct],z=[],J=0,be=d.length,dt=be-1;J<be;dt=J++)Ht=d[J],ce=d[dt],Ht._code&Ce?ce._code&Ce||(we=Ls(ce,Ht,Ce,p,A),we._code=Er(we,p),z.push(we)):(ce._code&Ce&&(we=Ls(ce,Ht,Ce,p,A),we._code=Er(we,p),z.push(we)),z.push(Ht));d=z}return d}function uo(d,p){var A,z,B,J,dt,Ct,Ht,ce,be;if(!d||d.length===0)throw new Error("latlngs not passed");es(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Ce=jt([0,0]),we=At(d),ti=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());ti<1700&&(Ce=Wl(d));var Yi=d.length,Ki=[];for(A=0;A<Yi;A++){var Li=jt(d[A]);Ki.push(p.project(jt([Li.lat-Ce.lat,Li.lng-Ce.lng])))}for(Ct=Ht=ce=0,A=0,z=Yi-1;A<Yi;z=A++)B=Ki[A],J=Ki[z],dt=B.y*J.x-J.y*B.x,Ht+=(B.x+J.x)*dt,ce+=(B.y+J.y)*dt,Ct+=dt*3;Ct===0?be=Ki[0]:be=[Ht/Ct,ce/Ct];var ks=p.unproject(X(be));return jt([ks.lat+Ce.lat,ks.lng+Ce.lng])}function Wl(d){for(var p=0,A=0,z=0,B=0;B<d.length;B++){var J=jt(d[B]);p+=J.lat,A+=J.lng,z++}return jt([p/z,A/z])}var Lh={__proto__:null,clipPolygon:da,polygonCenter:uo,centroid:Wl};function hs(d,p){if(!p||!d.length)return d.slice();var A=p*p;return d=Uo(d,A),d=Ba(d,A),d}function Fo(d,p,A){return Math.sqrt(ho(d,p,A,!0))}function Bo(d,p,A){return ho(d,p,A)}function Ba(d,p){var A=d.length,z=typeof Uint8Array<"u"?Uint8Array:Array,B=new z(A);B[0]=B[A-1]=1,fl(d,B,p,0,A-1);var J,dt=[];for(J=0;J<A;J++)B[J]&&dt.push(d[J]);return dt}function fl(d,p,A,z,B){var J=0,dt,Ct,Ht;for(Ct=z+1;Ct<=B-1;Ct++)Ht=ho(d[Ct],d[z],d[B],!0),Ht>J&&(dt=Ct,J=Ht);J>A&&(p[dt]=1,fl(d,p,A,z,dt),fl(d,p,A,dt,B))}function Uo(d,p){for(var A=[d[0]],z=1,B=0,J=d.length;z<J;z++)Ou(d[z],d[B])>p&&(A.push(d[z]),B=z);return B<J-1&&A.push(d[J-1]),A}var xs;function Ps(d,p,A,z,B){var J=z?xs:Er(d,A),dt=Er(p,A),Ct,Ht,ce;for(xs=dt;;){if(!(J|dt))return[d,p];if(J&dt)return!1;Ct=J||dt,Ht=Ls(d,p,Ct,A,B),ce=Er(Ht,A),Ct===J?(d=Ht,J=ce):(p=Ht,dt=ce)}}function Ls(d,p,A,z,B){var J=p.x-d.x,dt=p.y-d.y,Ct=z.min,Ht=z.max,ce,be;return A&8?(ce=d.x+J*(Ht.y-d.y)/dt,be=Ht.y):A&4?(ce=d.x+J*(Ct.y-d.y)/dt,be=Ct.y):A&2?(ce=Ht.x,be=d.y+dt*(Ht.x-d.x)/J):A&1&&(ce=Ct.x,be=d.y+dt*(Ct.x-d.x)/J),new _t(ce,be,B)}function Er(d,p){var A=0;return d.x<p.min.x?A|=1:d.x>p.max.x&&(A|=2),d.y<p.min.y?A|=4:d.y>p.max.y&&(A|=8),A}function Ou(d,p){var A=p.x-d.x,z=p.y-d.y;return A*A+z*z}function ho(d,p,A,z){var B=p.x,J=p.y,dt=A.x-B,Ct=A.y-J,Ht=dt*dt+Ct*Ct,ce;return Ht>0&&(ce=((d.x-B)*dt+(d.y-J)*Ct)/Ht,ce>1?(B=A.x,J=A.y):ce>0&&(B+=dt*ce,J+=Ct*ce)),dt=d.x-B,Ct=d.y-J,z?dt*dt+Ct*Ct:new _t(B,J)}function es(d){return!R(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function gl(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),es(d)}function Ws(d,p){var A,z,B,J,dt,Ct,Ht,ce;if(!d||d.length===0)throw new Error("latlngs not passed");es(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var be=jt([0,0]),Ce=At(d),we=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());we<1700&&(be=Wl(d));var ti=d.length,Yi=[];for(A=0;A<ti;A++){var Ki=jt(d[A]);Yi.push(p.project(jt([Ki.lat-be.lat,Ki.lng-be.lng])))}for(A=0,z=0;A<ti-1;A++)z+=Yi[A].distanceTo(Yi[A+1])/2;if(z===0)ce=Yi[0];else for(A=0,J=0;A<ti-1;A++)if(dt=Yi[A],Ct=Yi[A+1],B=dt.distanceTo(Ct),J+=B,J>z){Ht=(J-z)/B,ce=[Ct.x-Ht*(Ct.x-dt.x),Ct.y-Ht*(Ct.y-dt.y)];break}var Li=p.unproject(X(ce));return jt([Li.lat+be.lat,Li.lng+be.lng])}var _l={__proto__:null,simplify:hs,pointToSegmentDistance:Fo,closestPointOnSegment:Bo,clipSegment:Ps,_getEdgeIntersection:Ls,_getBitCode:Er,_sqClosestPointOnSegment:ho,isFlat:es,_flat:gl,polylineCenter:Ws},ca={project:function(d){return new _t(d.lng,d.lat)},unproject:function(d){return new Xt(d.y,d.x)},bounds:new et([-180,-90],[180,90])},Go={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var p=Math.PI/180,A=this.R,z=d.lat*p,B=this.R_MINOR/A,J=Math.sqrt(1-B*B),dt=J*Math.sin(z),Ct=Math.tan(Math.PI/4-z/2)/Math.pow((1-dt)/(1+dt),J/2);return z=-A*Math.log(Math.max(Ct,1e-10)),new _t(d.lng*p*A,z)},unproject:function(d){for(var p=180/Math.PI,A=this.R,z=this.R_MINOR/A,B=Math.sqrt(1-z*z),J=Math.exp(-d.y/A),dt=Math.PI/2-2*Math.atan(J),Ct=0,Ht=.1,ce;Ct<15&&Math.abs(Ht)>1e-7;Ct++)ce=B*Math.sin(dt),ce=Math.pow((1-ce)/(1+ce),B/2),Ht=Math.PI/2-2*Math.atan(J*ce)-dt,dt+=Ht;return new Xt(dt*p,d.x*p/A)}},ml={__proto__:null,LonLat:ca,Mercator:Go,SphericalMercator:Gt},co=s({},Se,{code:"EPSG:3395",projection:Go,transformation:function(){var d=.5/(Math.PI*Go.R);return kt(d,.5,-d,.5)}()}),qs=s({},Se,{code:"EPSG:4326",projection:ca,transformation:kt(1/180,1,-1/180,.5)}),Ch=s({},Ge,{projection:ca,transformation:kt(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,p){var A=p.lng-d.lng,z=p.lat-d.lat;return Math.sqrt(A*A+z*z)},infinite:!0});Ge.Earth=Se,Ge.EPSG3395=co,Ge.EPSG3857=$t,Ge.EPSG900913=ne,Ge.EPSG4326=qs,Ge.Simple=Ch;var zs=st.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[h(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[h(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var p=d.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var A=this.getEvents();p.on(A,this),this.once("remove",function(){p.off(A,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});_i.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var p=h(d);return this._layers[p]?this:(this._layers[p]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var p=h(d);return this._layers[p]?(this._loaded&&d.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return h(d)in this._layers},eachLayer:function(d,p){for(var A in this._layers)d.call(p,this._layers[A]);return this},_addLayers:function(d){d=d?R(d)?d:[d]:[];for(var p=0,A=d.length;p<A;p++)this.addLayer(d[p])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[h(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var p=h(d);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,p=-1/0,A=this._getZoomSpan();for(var z in this._zoomBoundLayers){var B=this._zoomBoundLayers[z].options;d=B.minZoom===void 0?d:Math.min(d,B.minZoom),p=B.maxZoom===void 0?p:Math.max(p,B.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=d===1/0?void 0:d,A!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fo=zs.extend({initialize:function(d,p){x(this,p),this._layers={};var A,z;if(d)for(A=0,z=d.length;A<z;A++)this.addLayer(d[A])},addLayer:function(d){var p=this.getLayerId(d);return this._layers[p]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var p=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(d){var p=typeof d=="number"?d:this.getLayerId(d);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var p=Array.prototype.slice.call(arguments,1),A,z;for(A in this._layers)z=this._layers[A],z[d]&&z[d].apply(z,p);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,p){for(var A in this._layers)d.call(p,this._layers[A]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return h(d)}}),pl=function(d,p){return new fo(d,p)},Ds=fo.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),fo.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),fo.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new Mt;for(var p in this._layers){var A=this._layers[p];d.extend(A.getBounds?A.getBounds():A.getLatLng())}return d}}),To=function(d,p){return new Ds(d,p)},Fr=ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){x(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,p){var A=this._getIconUrl(d);if(!A){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var z=this._createImg(A,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(z,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(z.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),z},_setIconStyles:function(d,p){var A=this.options,z=A[p+"Size"];typeof z=="number"&&(z=[z,z]);var B=X(z),J=X(p==="shadow"&&A.shadowAnchor||A.iconAnchor||B&&B.divideBy(2,!0));d.className="leaflet-marker-"+p+" "+(A.className||""),J&&(d.style.marginLeft=-J.x+"px",d.style.marginTop=-J.y+"px"),B&&(d.style.width=B.x+"px",d.style.height=B.y+"px")},_createImg:function(d,p){return p=p||document.createElement("img"),p.src=d,p},_getIconUrl:function(d){return Ee.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function fa(d){return new Fr(d)}var Ho=Fr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof Ho.imagePath!="string"&&(Ho.imagePath=this._detectIconPath()),(this.options.imagePath||Ho.imagePath)+Fr.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var p=function(A,z,B){var J=z.exec(A);return J&&J[B]};return d=p(d,/^url\((['"])?(.+)\1\)$/,2),d&&p(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=Nt("div","leaflet-default-icon-path",document.body),p=wt(d,"background-image")||wt(d,"backgroundImage");if(document.body.removeChild(d),p=this._stripUrl(p),p)return p;var A=document.querySelector('link[href$="leaflet.css"]');return A?A.href.substring(0,A.href.length-11-1):""}}),Ua=ws.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new lo(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Kt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var p=this._marker,A=p._map,z=this._marker.options.autoPanSpeed,B=this._marker.options.autoPanPadding,J=We(p._icon),dt=A.getPixelBounds(),Ct=A.getPixelOrigin(),Ht=Dt(dt.min._subtract(Ct).add(B),dt.max._subtract(Ct).subtract(B));if(!Ht.contains(J)){var ce=X((Math.max(Ht.max.x,J.x)-Ht.max.x)/(dt.max.x-Ht.max.x)-(Math.min(Ht.min.x,J.x)-Ht.min.x)/(dt.min.x-Ht.min.x),(Math.max(Ht.max.y,J.y)-Ht.max.y)/(dt.max.y-Ht.max.y)-(Math.min(Ht.min.y,J.y)-Ht.min.y)/(dt.min.y-Ht.min.y)).multiplyBy(z);A.panBy(ce,{animate:!1}),this._draggable._newPos._add(ce),this._draggable._startPos._add(ce),Le(p._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=j(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(lt(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,d)))},_onDrag:function(d){var p=this._marker,A=p._shadow,z=We(p._icon),B=p._map.layerPointToLatLng(z);A&&Le(A,z),p._latlng=B,d.latlng=B,d.oldLatLng=this._oldLatLng,p.fire("move",d).fire("drag",d)},_onDragEnd:function(d){lt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),Sr=zs.extend({options:{icon:new Ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,p){x(this,p),this._latlng=jt(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var p=this._latlng;return this._latlng=jt(d),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),A=d.icon.createIcon(this._icon),z=!1;A!==this._icon&&(this._icon&&this._removeIcon(),z=!0,d.title&&(A.title=d.title),A.tagName==="IMG"&&(A.alt=d.alt||"")),Kt(A,p),d.keyboard&&(A.tabIndex="0",A.setAttribute("role","button")),this._icon=A,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(A,"focus",this._panOnFocus,this);var B=d.icon.createShadow(this._shadow),J=!1;B!==this._shadow&&(this._removeShadow(),J=!0),B&&(Kt(B,p),B.alt=""),this._shadow=B,d.opacity<1&&this._updateOpacity(),z&&this.getPane().appendChild(this._icon),this._initInteraction(),B&&J&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),Ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ft(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&Le(this._icon,d),this._shadow&&Le(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Kt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ua)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ua(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&_e(this._icon,d),this._shadow&&_e(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var p=this.options.icon.options,A=p.iconSize?X(p.iconSize):X(0,0),z=p.iconAnchor?X(p.iconAnchor):X(0,0);d.panInside(this._latlng,{paddingTopLeft:z,paddingBottomRight:A.subtract(z)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Br(d,p){return new Sr(d,p)}var Qs=zs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return x(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ar=Qs.extend({options:{fill:!0,radius:10},initialize:function(d,p){x(this,p),this._latlng=jt(d),this._radius=this.options.radius},setLatLng:function(d){var p=this._latlng;return this._latlng=jt(d),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var p=d&&d.radius||this._radius;return Qs.prototype.setStyle.call(this,d),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,p=this._radiusY||d,A=this._clickTolerance(),z=[d+A,p+A];this._pxBounds=new et(this._point.subtract(z),this._point.add(z))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ga(d,p){return new Ar(d,p)}var _a=Ar.extend({initialize:function(d,p,A){if(typeof p=="number"&&(p=s({},A,{radius:p})),x(this,p),this._latlng=jt(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new Mt(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:Qs.prototype.setStyle,_project:function(){var d=this._latlng.lng,p=this._latlng.lat,A=this._map,z=A.options.crs;if(z.distance===Se.distance){var B=Math.PI/180,J=this._mRadius/Se.R/B,dt=A.project([p+J,d]),Ct=A.project([p-J,d]),Ht=dt.add(Ct).divideBy(2),ce=A.unproject(Ht).lat,be=Math.acos((Math.cos(J*B)-Math.sin(p*B)*Math.sin(ce*B))/(Math.cos(p*B)*Math.cos(ce*B)))/B;(isNaN(be)||be===0)&&(be=J/Math.cos(Math.PI/180*p)),this._point=Ht.subtract(A.getPixelOrigin()),this._radius=isNaN(be)?0:Ht.x-A.project([ce,d-be]).x,this._radiusY=Ht.y-dt.y}else{var Ce=z.unproject(z.project(this._latlng).subtract([this._mRadius,0]));this._point=A.latLngToLayerPoint(this._latlng),this._radius=this._point.x-A.latLngToLayerPoint(Ce).x}this._updateBounds()}});function ql(d,p,A){return new _a(d,p,A)}var nr=Qs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,p){x(this,p),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var p=1/0,A=null,z=ho,B,J,dt=0,Ct=this._parts.length;dt<Ct;dt++)for(var Ht=this._parts[dt],ce=1,be=Ht.length;ce<be;ce++){B=Ht[ce-1],J=Ht[ce];var Ce=z(d,B,J,!0);Ce<p&&(p=Ce,A=z(d,B,J))}return A&&(A.distance=Math.sqrt(p)),A},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ws(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,p){return p=p||this._defaultShape(),d=jt(d),p.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new Mt,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return es(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var p=[],A=es(d),z=0,B=d.length;z<B;z++)A?(p[z]=jt(d[z]),this._bounds.extend(p[z])):p[z]=this._convertLatLngs(d[z]);return p},_project:function(){var d=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),p=new _t(d,d);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(d,p,A){var z=d[0]instanceof Xt,B=d.length,J,dt;if(z){for(dt=[],J=0;J<B;J++)dt[J]=this._map.latLngToLayerPoint(d[J]),A.extend(dt[J]);p.push(dt)}else for(J=0;J<B;J++)this._projectLatlngs(d[J],p,A)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,A,z,B,J,dt,Ct,Ht;for(A=0,B=0,J=this._rings.length;A<J;A++)for(Ht=this._rings[A],z=0,dt=Ht.length;z<dt-1;z++)Ct=Ps(Ht[z],Ht[z+1],d,z,!0),Ct&&(p[B]=p[B]||[],p[B].push(Ct[0]),(Ct[1]!==Ht[z+1]||z===dt-2)&&(p[B].push(Ct[1]),B++))}},_simplifyPoints:function(){for(var d=this._parts,p=this.options.smoothFactor,A=0,z=d.length;A<z;A++)d[A]=hs(d[A],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,p){var A,z,B,J,dt,Ct,Ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(A=0,J=this._parts.length;A<J;A++)for(Ct=this._parts[A],z=0,dt=Ct.length,B=dt-1;z<dt;B=z++)if(!(!p&&z===0)&&Fo(d,Ct[B],Ct[z])<=Ht)return!0;return!1}});function Vo(d,p){return new nr(d,p)}nr._flat=gl;var ma=nr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var p=nr.prototype._convertLatLngs.call(this,d),A=p.length;return A>=2&&p[0]instanceof Xt&&p[0].equals(p[A-1])&&p.pop(),p},_setLatLngs:function(d){nr.prototype._setLatLngs.call(this,d),es(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return es(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,p=this.options.weight,A=new _t(p,p);if(d=new et(d.min.subtract(A),d.max.add(A)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var z=0,B=this._rings.length,J;z<B;z++)J=da(this._rings[z],d,!0),J.length&&this._parts.push(J)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var p=!1,A,z,B,J,dt,Ct,Ht,ce;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(J=0,Ht=this._parts.length;J<Ht;J++)for(A=this._parts[J],dt=0,ce=A.length,Ct=ce-1;dt<ce;Ct=dt++)z=A[dt],B=A[Ct],z.y>d.y!=B.y>d.y&&d.x<(B.x-z.x)*(d.y-z.y)/(B.y-z.y)+z.x&&(p=!p);return p||nr.prototype._containsPoint.call(this,d,!0)}});function Cs(d,p){return new ma(d,p)}var Ks=Ds.extend({initialize:function(d,p){x(this,p),this._layers={},d&&this.addData(d)},addData:function(d){var p=R(d)?d:d.features,A,z,B;if(p){for(A=0,z=p.length;A<z;A++)B=p[A],(B.geometries||B.geometry||B.features||B.coordinates)&&this.addData(B);return this}var J=this.options;if(J.filter&&!J.filter(d))return this;var dt=dr(d,J);return dt?(dt.feature=mt(d),dt.defaultOptions=dt.options,this.resetStyle(dt),J.onEachFeature&&J.onEachFeature(d,dt),this.addLayer(dt)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=s({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(p){this._setLayerStyle(p,d)},this)},_setLayerStyle:function(d,p){d.setStyle&&(typeof p=="function"&&(p=p(d.feature)),d.setStyle(p))}});function dr(d,p){var A=d.type==="Feature"?d.geometry:d,z=A?A.coordinates:null,B=[],J=p&&p.pointToLayer,dt=p&&p.coordsToLatLng||C,Ct,Ht,ce,be;if(!z&&!A)return null;switch(A.type){case"Point":return Ct=dt(z),S(J,d,Ct,p);case"MultiPoint":for(ce=0,be=z.length;ce<be;ce++)Ct=dt(z[ce]),B.push(S(J,d,Ct,p));return new Ds(B);case"LineString":case"MultiLineString":return Ht=k(z,A.type==="LineString"?0:1,dt),new nr(Ht,p);case"Polygon":case"MultiPolygon":return Ht=k(z,A.type==="Polygon"?1:2,dt),new ma(Ht,p);case"GeometryCollection":for(ce=0,be=A.geometries.length;ce<be;ce++){var Ce=dr({geometry:A.geometries[ce],type:"Feature",properties:d.properties},p);Ce&&B.push(Ce)}return new Ds(B);case"FeatureCollection":for(ce=0,be=A.features.length;ce<be;ce++){var we=dr(A.features[ce],p);we&&B.push(we)}return new Ds(B);default:throw new Error("Invalid GeoJSON object.")}}function S(d,p,A,z){return d?d(p,A):new Sr(A,z&&z.markersInheritOptions&&z)}function C(d){return new Xt(d[1],d[0],d[2])}function k(d,p,A){for(var z=[],B=0,J=d.length,dt;B<J;B++)dt=p?k(d[B],p-1,A):(A||C)(d[B]),z.push(dt);return z}function G(d,p){return d=jt(d),d.alt!==void 0?[m(d.lng,p),m(d.lat,p),m(d.alt,p)]:[m(d.lng,p),m(d.lat,p)]}function Q(d,p,A,z){for(var B=[],J=0,dt=d.length;J<dt;J++)B.push(p?Q(d[J],es(d[J])?0:p-1,A,z):G(d[J],z));return!p&&A&&B.length>0&&B.push(B[0].slice()),B}function nt(d,p){return d.feature?s({},d.feature,{geometry:p}):mt(p)}function mt(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var Jt={toGeoJSON:function(d){return nt(this,{type:"Point",coordinates:G(this.getLatLng(),d)})}};Sr.include(Jt),_a.include(Jt),Ar.include(Jt),nr.include({toGeoJSON:function(d){var p=!es(this._latlngs),A=Q(this._latlngs,p?1:0,!1,d);return nt(this,{type:(p?"Multi":"")+"LineString",coordinates:A})}}),ma.include({toGeoJSON:function(d){var p=!es(this._latlngs),A=p&&!es(this._latlngs[0]),z=Q(this._latlngs,A?2:p?1:0,!0,d);return p||(z=[z]),nt(this,{type:(A?"Multi":"")+"Polygon",coordinates:z})}}),fo.include({toMultiPoint:function(d){var p=[];return this.eachLayer(function(A){p.push(A.toGeoJSON(d).geometry.coordinates)}),nt(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(d){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(d);var A=p==="GeometryCollection",z=[];return this.eachLayer(function(B){if(B.toGeoJSON){var J=B.toGeoJSON(d);if(A)z.push(J.geometry);else{var dt=mt(J);dt.type==="FeatureCollection"?z.push.apply(z,dt.features):z.push(dt)}}}),A?nt(this,{geometries:z,type:"GeometryCollection"}):{type:"FeatureCollection",features:z}}});function Pt(d,p){return new Ks(d,p)}var qt=Pt,xe=zs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,p,A){this._url=d,this._bounds=At(p),x(this,A)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Kt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&Ot(this._image),this},bringToBack:function(){return this._map&&oe(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=At(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",p=this._image=d?this._url:Nt("img");if(Kt(p,"leaflet-image-layer"),this._zoomAnimated&&Kt(p,"leaflet-zoom-animated"),this.options.className&&Kt(p,this.options.className),p.onselectstart=_,p.onmousemove=_,p.onload=a(this.fire,this,"load"),p.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(d){var p=this._map.getZoomScale(d.zoom),A=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;Ie(this._image,A,p)},_reset:function(){var d=this._image,p=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),A=p.getSize();Le(d,p.min),d.style.width=A.x+"px",d.style.height=A.y+"px"},_updateOpacity:function(){_e(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),pe=function(d,p,A){return new xe(d,p,A)},De=xe.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",p=this._image=d?this._url:Nt("video");if(Kt(p,"leaflet-image-layer"),this._zoomAnimated&&Kt(p,"leaflet-zoom-animated"),this.options.className&&Kt(p,this.options.className),p.onselectstart=_,p.onmousemove=_,p.onloadeddata=a(this.fire,this,"load"),d){for(var A=p.getElementsByTagName("source"),z=[],B=0;B<A.length;B++)z.push(A[B].src);this._url=A.length>0?z:[p.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var J=0;J<this._url.length;J++){var dt=Nt("source");dt.src=this._url[J],p.appendChild(dt)}}});function Qe(d,p,A){return new De(d,p,A)}var Ve=xe.extend({_initImage:function(){var d=this._image=this._url;Kt(d,"leaflet-image-layer"),this._zoomAnimated&&Kt(d,"leaflet-zoom-animated"),this.options.className&&Kt(d,this.options.className),d.onselectstart=_,d.onmousemove=_}});function ii(d,p,A){return new Ve(d,p,A)}var mi=zs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,p){d&&(d instanceof Xt||R(d))?(this._latlng=jt(d),x(this,p)):(x(this,d),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&_e(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&_e(this._container,1),this.bringToFront(),this.options.interactive&&(Kt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(_e(this._container,0),this._removeTimeout=setTimeout(a(Ft,void 0,this._container),200)):Ft(this._container),this.options.interactive&&(le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=jt(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ot(this._container),this},bringToBack:function(){return this._map&&oe(this._container),this},_prepareOpen:function(d){var p=this._source;if(!p._map)return!1;if(p instanceof Ds){p=null;var A=this._source._layers;for(var z in A)if(A[z]._map){p=A[z];break}if(!p)return!1;this._source=p}if(!d)if(p.getCenter)d=p.getCenter();else if(p.getLatLng)d=p.getLatLng();else if(p.getBounds)d=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")d.innerHTML=p;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),p=X(this.options.offset),A=this._getAnchor();this._zoomAnimated?Le(this._container,d.add(A)):p=p.add(d).add(A);var z=this._containerBottom=-p.y,B=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=z+"px",this._container.style.left=B+"px"}},_getAnchor:function(){return[0,0]}});_i.include({_initOverlay:function(d,p,A,z){var B=p;return B instanceof d||(B=new d(z).setContent(p)),A&&B.setLatLng(A),B}}),zs.include({_initOverlay:function(d,p,A,z){var B=A;return B instanceof d?(x(B,z),B._source=this):(B=p&&!z?p:new d(z,this),B.setContent(A)),B}});var Pi=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,mi.prototype.openOn.call(this,d)},onAdd:function(d){mi.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qs||this._source.on("preclick",Bn))},onRemove:function(d){mi.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qs||this._source.off("preclick",Bn))},getEvents:function(){var d=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",p=this._container=Nt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),A=this._wrapper=Nt("div",d+"-content-wrapper",p);if(this._contentNode=Nt("div",d+"-content",A),Xs(p),Ys(this._contentNode),Pe(p,"contextmenu",Bn),this._tipContainer=Nt("div",d+"-tip-container",p),this._tip=Nt("div",d+"-tip",this._tipContainer),this.options.closeButton){var z=this._closeButton=Nt("a",d+"-close-button",p);z.setAttribute("role","button"),z.setAttribute("aria-label","Close popup"),z.href="#close",z.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(z,"click",function(B){Ui(B),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,p=d.style;p.width="",p.whiteSpace="nowrap";var A=d.offsetWidth;A=Math.min(A,this.options.maxWidth),A=Math.max(A,this.options.minWidth),p.width=A+1+"px",p.whiteSpace="",p.height="";var z=d.offsetHeight,B=this.options.maxHeight,J="leaflet-popup-scrolled";B&&z>B?(p.height=B+"px",Kt(d,J)):le(d,J),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),A=this._getAnchor();Le(this._container,p.add(A))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,p=parseInt(wt(this._container,"marginBottom"),10)||0,A=this._container.offsetHeight+p,z=this._containerWidth,B=new _t(this._containerLeft,-A-this._containerBottom);B._add(We(this._container));var J=d.layerPointToContainerPoint(B),dt=X(this.options.autoPanPadding),Ct=X(this.options.autoPanPaddingTopLeft||dt),Ht=X(this.options.autoPanPaddingBottomRight||dt),ce=d.getSize(),be=0,Ce=0;J.x+z+Ht.x>ce.x&&(be=J.x+z-ce.x+Ht.x),J.x-be-Ct.x<0&&(be=J.x-Ct.x),J.y+A+Ht.y>ce.y&&(Ce=J.y+A-ce.y+Ht.y),J.y-Ce-Ct.y<0&&(Ce=J.y-Ct.y),(be||Ce)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([be,Ce]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qi=function(d,p){return new Pi(d,p)};_i.mergeOptions({closePopupOnClick:!0}),_i.include({openPopup:function(d,p,A){return this._initOverlay(Pi,d,p,A).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),zs.include({bindPopup:function(d,p){return this._popup=this._initOverlay(Pi,this._popup,d,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof Ds||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){As(d);var p=d.layer||d.target;if(this._popup._source===p&&!(p instanceof Qs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=p,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var nn=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){mi.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){mi.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=mi.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",p=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Nt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var p,A,z=this._map,B=this._container,J=z.latLngToContainerPoint(z.getCenter()),dt=z.layerPointToContainerPoint(d),Ct=this.options.direction,Ht=B.offsetWidth,ce=B.offsetHeight,be=X(this.options.offset),Ce=this._getAnchor();Ct==="top"?(p=Ht/2,A=ce):Ct==="bottom"?(p=Ht/2,A=0):Ct==="center"?(p=Ht/2,A=ce/2):Ct==="right"?(p=0,A=ce/2):Ct==="left"?(p=Ht,A=ce/2):dt.x<J.x?(Ct="right",p=0,A=ce/2):(Ct="left",p=Ht+(be.x+Ce.x)*2,A=ce/2),d=d.subtract(X(p,A,!0)).add(be).add(Ce),le(B,"leaflet-tooltip-right"),le(B,"leaflet-tooltip-left"),le(B,"leaflet-tooltip-top"),le(B,"leaflet-tooltip-bottom"),Kt(B,"leaflet-tooltip-"+Ct),Le(B,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&_e(this._container,d)},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(p)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ye=function(d,p){return new nn(d,p)};_i.include({openTooltip:function(d,p,A){return this._initOverlay(nn,d,p,A).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),zs.include({bindTooltip:function(d,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nn,this._tooltip,d,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var p=d?"off":"on",A={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?A.add=this._openTooltip:(A.mouseover=this._openTooltip,A.mouseout=this.closeTooltip,A.click=this._openTooltip,this._map?this._addFocusListeners():A.add=this._addFocusListeners),this._tooltip.options.sticky&&(A.mousemove=this._moveTooltip),this[p](A),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof Ds||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var p=typeof d.getElement=="function"&&d.getElement();p&&(Pe(p,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),Pe(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var p=typeof d.getElement=="function"&&d.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var p=d.latlng,A,z;this._tooltip.options.sticky&&d.originalEvent&&(A=this._map.mouseEventToContainerPoint(d.originalEvent),z=this._map.containerPointToLayerPoint(A),p=this._map.layerPointToLatLng(z)),this._tooltip.setLatLng(p)}});var Sn=Fr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var p=d&&d.tagName==="DIV"?d:document.createElement("div"),A=this.options;if(A.html instanceof Element?(te(p),p.appendChild(A.html)):p.innerHTML=A.html!==!1?A.html:"",A.bgPos){var z=X(A.bgPos);p.style.backgroundPosition=-z.x+"px "+-z.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function pi(d){return new Sn(d)}Fr.Default=Ho;var vn=zs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){x(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),Ft(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ot(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof _t?d:new _t(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var p=this.getPane().children,A=-d(-1/0,1/0),z=0,B=p.length,J;z<B;z++)J=p[z].style.zIndex,p[z]!==this._container&&J&&(A=d(A,+J));isFinite(A)&&(this.options.zIndex=A+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){_e(this._container,this.options.opacity);var d=+new Date,p=!1,A=!1;for(var z in this._tiles){var B=this._tiles[z];if(!(!B.current||!B.loaded)){var J=Math.min(1,(d-B.loaded)/200);_e(B.el,J),J<1?p=!0:(B.active?A=!0:this._onOpaqueTile(B),B.active=!0)}}A&&!this._noPrune&&this._pruneTiles(),p&&(lt(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,p=this.options.maxZoom;if(d!==void 0){for(var A in this._levels)A=Number(A),this._levels[A].el.children.length||A===d?(this._levels[A].el.style.zIndex=p-Math.abs(d-A),this._onUpdateLevel(A)):(Ft(this._levels[A].el),this._removeTilesAtZoom(A),this._onRemoveLevel(A),delete this._levels[A]);var z=this._levels[d],B=this._map;return z||(z=this._levels[d]={},z.el=Nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),z.el.style.zIndex=p,z.origin=B.project(B.unproject(B.getPixelOrigin()),d).round(),z.zoom=d,this._setZoomTransform(z,B.getCenter(),B.getZoom()),_(z.el.offsetWidth),this._onCreateLevel(z)),this._level=z,z}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var d,p,A=this._map.getZoom();if(A>this.options.maxZoom||A<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)p=this._tiles[d],p.retain=p.current;for(d in this._tiles)if(p=this._tiles[d],p.current&&!p.active){var z=p.coords;this._retainParent(z.x,z.y,z.z,z.z-5)||this._retainChildren(z.x,z.y,z.z,z.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var p in this._tiles)this._tiles[p].coords.z===d&&this._removeTile(p)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)Ft(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,p,A,z){var B=Math.floor(d/2),J=Math.floor(p/2),dt=A-1,Ct=new _t(+B,+J);Ct.z=+dt;var Ht=this._tileCoordsToKey(Ct),ce=this._tiles[Ht];return ce&&ce.active?(ce.retain=!0,!0):(ce&&ce.loaded&&(ce.retain=!0),dt>z?this._retainParent(B,J,dt,z):!1)},_retainChildren:function(d,p,A,z){for(var B=2*d;B<2*d+2;B++)for(var J=2*p;J<2*p+2;J++){var dt=new _t(B,J);dt.z=A+1;var Ct=this._tileCoordsToKey(dt),Ht=this._tiles[Ct];if(Ht&&Ht.active){Ht.retain=!0;continue}else Ht&&Ht.loaded&&(Ht.retain=!0);A+1<z&&this._retainChildren(B,J,A+1,z)}},_resetView:function(d){var p=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var p=this.options;return p.minNativeZoom!==void 0&&d<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<d?p.maxNativeZoom:d},_setView:function(d,p,A,z){var B=Math.round(p);this.options.maxZoom!==void 0&&B>this.options.maxZoom||this.options.minZoom!==void 0&&B<this.options.minZoom?B=void 0:B=this._clampZoom(B);var J=this.options.updateWhenZooming&&B!==this._tileZoom;(!z||J)&&(this._tileZoom=B,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),B!==void 0&&this._update(d),A||this._pruneTiles(),this._noPrune=!!A),this._setZoomTransforms(d,p)},_setZoomTransforms:function(d,p){for(var A in this._levels)this._setZoomTransform(this._levels[A],d,p)},_setZoomTransform:function(d,p,A){var z=this._map.getZoomScale(A,d.zoom),B=d.origin.multiplyBy(z).subtract(this._map._getNewPixelOrigin(p,A)).round();Ee.any3d?Ie(d.el,B,z):Le(d.el,B)},_resetGrid:function(){var d=this._map,p=d.options.crs,A=this._tileSize=this.getTileSize(),z=this._tileZoom,B=this._map.getPixelWorldBounds(this._tileZoom);B&&(this._globalTileRange=this._pxBoundsToTileRange(B)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,p.wrapLng[0]],z).x/A.x),Math.ceil(d.project([0,p.wrapLng[1]],z).x/A.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([p.wrapLat[0],0],z).y/A.x),Math.ceil(d.project([p.wrapLat[1],0],z).y/A.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var p=this._map,A=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),z=p.getZoomScale(A,this._tileZoom),B=p.project(d,this._tileZoom).floor(),J=p.getSize().divideBy(z*2);return new et(B.subtract(J),B.add(J))},_update:function(d){var p=this._map;if(p){var A=this._clampZoom(p.getZoom());if(d===void 0&&(d=p.getCenter()),this._tileZoom!==void 0){var z=this._getTiledPixelBounds(d),B=this._pxBoundsToTileRange(z),J=B.getCenter(),dt=[],Ct=this.options.keepBuffer,Ht=new et(B.getBottomLeft().subtract([Ct,-Ct]),B.getTopRight().add([Ct,-Ct]));if(!(isFinite(B.min.x)&&isFinite(B.min.y)&&isFinite(B.max.x)&&isFinite(B.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ce in this._tiles){var be=this._tiles[ce].coords;(be.z!==this._tileZoom||!Ht.contains(new _t(be.x,be.y)))&&(this._tiles[ce].current=!1)}if(Math.abs(A-this._tileZoom)>1){this._setView(d,A);return}for(var Ce=B.min.y;Ce<=B.max.y;Ce++)for(var we=B.min.x;we<=B.max.x;we++){var ti=new _t(we,Ce);if(ti.z=this._tileZoom,!!this._isValidTile(ti)){var Yi=this._tiles[this._tileCoordsToKey(ti)];Yi?Yi.current=!0:dt.push(ti)}}if(dt.sort(function(Li,ks){return Li.distanceTo(J)-ks.distanceTo(J)}),dt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ki=document.createDocumentFragment();for(we=0;we<dt.length;we++)this._addTile(dt[we],Ki);this._level.el.appendChild(Ki)}}}},_isValidTile:function(d){var p=this._map.options.crs;if(!p.infinite){var A=this._globalTileRange;if(!p.wrapLng&&(d.x<A.min.x||d.x>A.max.x)||!p.wrapLat&&(d.y<A.min.y||d.y>A.max.y))return!1}if(!this.options.bounds)return!0;var z=this._tileCoordsToBounds(d);return At(this.options.bounds).overlaps(z)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var p=this._map,A=this.getTileSize(),z=d.scaleBy(A),B=z.add(A),J=p.unproject(z,d.z),dt=p.unproject(B,d.z);return[J,dt]},_tileCoordsToBounds:function(d){var p=this._tileCoordsToNwSe(d),A=new Mt(p[0],p[1]);return this.options.noWrap||(A=this._map.wrapLatLngBounds(A)),A},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var p=d.split(":"),A=new _t(+p[0],+p[1]);return A.z=+p[2],A},_removeTile:function(d){var p=this._tiles[d];p&&(Ft(p.el),delete this._tiles[d],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){Kt(d,"leaflet-tile");var p=this.getTileSize();d.style.width=p.x+"px",d.style.height=p.y+"px",d.onselectstart=_,d.onmousemove=_,Ee.ielt9&&this.options.opacity<1&&_e(d,this.options.opacity)},_addTile:function(d,p){var A=this._getTilePos(d),z=this._tileCoordsToKey(d),B=this.createTile(this._wrapCoords(d),a(this._tileReady,this,d));this._initTile(B),this.createTile.length<2&&j(a(this._tileReady,this,d,null,B)),Le(B,A),this._tiles[z]={el:B,coords:d,current:!0},p.appendChild(B),this.fire("tileloadstart",{tile:B,coords:d})},_tileReady:function(d,p,A){p&&this.fire("tileerror",{error:p,tile:A,coords:d});var z=this._tileCoordsToKey(d);A=this._tiles[z],A&&(A.loaded=+new Date,this._map._fadeAnimated?(_e(A.el,0),lt(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(A.active=!0,this._pruneTiles()),p||(Kt(A.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:A.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var p=new _t(this._wrapX?g(d.x,this._wrapX):d.x,this._wrapY?g(d.y,this._wrapY):d.y);return p.z=d.z,p},_pxBoundsToTileRange:function(d){var p=this.getTileSize();return new et(d.min.unscaleBy(p).floor(),d.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function on(d){return new vn(d)}var Je=vn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,p){this._url=d,p=x(this,p),p.detectRetina&&Ee.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,p){return this._url===d&&p===void 0&&(p=!0),this._url=d,p||this.redraw(),this},createTile:function(d,p){var A=document.createElement("img");return Pe(A,"load",a(this._tileOnLoad,this,p,A)),Pe(A,"error",a(this._tileOnError,this,p,A)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(A.referrerPolicy=this.options.referrerPolicy),A.alt="",A.src=this.getTileUrl(d),A},getTileUrl:function(d){var p={r:Ee.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var A=this._globalTileRange.max.y-d.y;this.options.tms&&(p.y=A),p["-y"]=A}return O(this._url,s(p,this.options))},_tileOnLoad:function(d,p){Ee.ielt9?setTimeout(a(d,this,null,p),0):d(null,p)},_tileOnError:function(d,p,A){var z=this.options.errorTileUrl;z&&p.getAttribute("src")!==z&&(p.src=z),d(A,p)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,p=this.options.maxZoom,A=this.options.zoomReverse,z=this.options.zoomOffset;return A&&(d=p-d),d+z},_getSubdomain:function(d){var p=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var d,p;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(p=this._tiles[d].el,p.onload=_,p.onerror=_,!p.complete)){p.src=F;var A=this._tiles[d].coords;Ft(p),delete this._tiles[d],this.fire("tileabort",{tile:p,coords:A})}},_removeTile:function(d){var p=this._tiles[d];if(p)return p.el.setAttribute("src",F),vn.prototype._removeTile.call(this,d)},_tileReady:function(d,p,A){if(!(!this._map||A&&A.getAttribute("src")===F))return vn.prototype._tileReady.call(this,d,p,A)}});function Gi(d,p){return new Je(d,p)}var Zn=Je.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,p){this._url=d;var A=s({},this.defaultWmsParams);for(var z in p)z in this.options||(A[z]=p[z]);p=x(this,p);var B=p.detectRetina&&Ee.retina?2:1,J=this.getTileSize();A.width=J.x*B,A.height=J.y*B,this.wmsParams=A},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Je.prototype.onAdd.call(this,d)},getTileUrl:function(d){var p=this._tileCoordsToNwSe(d),A=this._crs,z=Dt(A.project(p[0]),A.project(p[1])),B=z.min,J=z.max,dt=(this._wmsVersion>=1.3&&this._crs===qs?[B.y,B.x,J.y,J.x]:[B.x,B.y,J.x,J.y]).join(","),Ct=Je.prototype.getTileUrl.call(this,d);return Ct+M(this.wmsParams,Ct,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+dt},setParams:function(d,p){return s(this.wmsParams,d),p||this.redraw(),this}});function Rn(d,p){return new Zn(d,p)}Je.WMS=Zn,Gi.wms=Rn;var is=zs.extend({options:{padding:.1},initialize:function(d){x(this,d),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Kt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,p){var A=this._map.getZoomScale(p,this._zoom),z=this._map.getSize().multiplyBy(.5+this.options.padding),B=this._map.project(this._center,p),J=z.multiplyBy(-A).add(B).subtract(this._map._getNewPixelOrigin(d,p));Ee.any3d?Ie(this._container,J,A):Le(this._container,J)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,p=this._map.getSize(),A=this._map.containerPointToLayerPoint(p.multiplyBy(-d)).round();this._bounds=new et(A,A.add(p.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ms=is.extend({options:{tolerance:0},getEvents:function(){var d=is.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){is.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");Pe(d,"mousemove",this._onMouseMove,this),Pe(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){lt(this._redrawRequest),delete this._ctx,Ft(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var p in this._layers)d=this._layers[p],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){is.prototype._update.call(this);var d=this._bounds,p=this._container,A=d.getSize(),z=Ee.retina?2:1;Le(p,d.min),p.width=z*A.x,p.height=z*A.y,p.style.width=A.x+"px",p.style.height=A.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){is.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[h(d)]=d;var p=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var p=d._order,A=p.next,z=p.prev;A?A.prev=z:this._drawLast=z,z?z.next=A:this._drawFirst=A,delete d._order,delete this._layers[h(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var p=d.options.dashArray.split(/[, ]+/),A=[],z,B;for(B=0;B<p.length;B++){if(z=Number(p[B]),isNaN(z))return;A.push(z)}d.options._dashArray=A}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var p=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(d._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(d._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var p=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,p=this._redrawBounds;if(this._ctx.save(),p){var A=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,A.x,A.y),this._ctx.clip()}this._drawing=!0;for(var z=this._drawFirst;z;z=z.next)d=z.layer,(!p||d._pxBounds&&d._pxBounds.intersects(p))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,p){if(this._drawing){var A,z,B,J,dt=d._parts,Ct=dt.length,Ht=this._ctx;if(Ct){for(Ht.beginPath(),A=0;A<Ct;A++){for(z=0,B=dt[A].length;z<B;z++)J=dt[A][z],Ht[z?"lineTo":"moveTo"](J.x,J.y);p&&Ht.closePath()}this._fillStroke(Ht,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var p=d._point,A=this._ctx,z=Math.max(Math.round(d._radius),1),B=(Math.max(Math.round(d._radiusY),1)||z)/z;B!==1&&(A.save(),A.scale(1,B)),A.beginPath(),A.arc(p.x,p.y/B,z,0,Math.PI*2,!1),B!==1&&A.restore(),this._fillStroke(A,d)}},_fillStroke:function(d,p){var A=p.options;A.fill&&(d.globalAlpha=A.fillOpacity,d.fillStyle=A.fillColor||A.color,d.fill(A.fillRule||"evenodd")),A.stroke&&A.weight!==0&&(d.setLineDash&&d.setLineDash(p.options&&p.options._dashArray||[]),d.globalAlpha=A.opacity,d.lineWidth=A.weight,d.strokeStyle=A.color,d.lineCap=A.lineCap,d.lineJoin=A.lineJoin,d.stroke())},_onClick:function(d){for(var p=this._map.mouseEventToLayerPoint(d),A,z,B=this._drawFirst;B;B=B.next)A=B.layer,A.options.interactive&&A._containsPoint(p)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(A))&&(z=A);this._fireEvent(z?[z]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,p)}},_handleMouseOut:function(d){var p=this._hoveredLayer;p&&(le(this._container,"leaflet-interactive"),this._fireEvent([p],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,p){if(!this._mouseHoverThrottled){for(var A,z,B=this._drawFirst;B;B=B.next)A=B.layer,A.options.interactive&&A._containsPoint(p)&&(z=A);z!==this._hoveredLayer&&(this._handleMouseOut(d),z&&(Kt(this._container,"leaflet-interactive"),this._fireEvent([z],d,"mouseover"),this._hoveredLayer=z)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,p,A){this._map._fireDOMEvent(p,A||p.type,d)},_bringToFront:function(d){var p=d._order;if(p){var A=p.next,z=p.prev;if(A)A.prev=z;else return;z?z.next=A:A&&(this._drawFirst=A),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(d)}},_bringToBack:function(d){var p=d._order;if(p){var A=p.next,z=p.prev;if(z)z.next=A;else return;A?A.prev=z:z&&(this._drawLast=z),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(d)}}});function Un(d){return Ee.canvas?new Ms(d):null}var Gn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Hn={_initContainer:function(){this._container=Nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(is.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var p=d._container=Gn("shape");Kt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",d._path=Gn("path"),p.appendChild(d._path),this._updateStyle(d),this._layers[h(d)]=d},_addPath:function(d){var p=d._container;this._container.appendChild(p),d.options.interactive&&d.addInteractiveTarget(p)},_removePath:function(d){var p=d._container;Ft(p),d.removeInteractiveTarget(p),delete this._layers[h(d)]},_updateStyle:function(d){var p=d._stroke,A=d._fill,z=d.options,B=d._container;B.stroked=!!z.stroke,B.filled=!!z.fill,z.stroke?(p||(p=d._stroke=Gn("stroke")),B.appendChild(p),p.weight=z.weight+"px",p.color=z.color,p.opacity=z.opacity,z.dashArray?p.dashStyle=R(z.dashArray)?z.dashArray.join(" "):z.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=z.lineCap.replace("butt","flat"),p.joinstyle=z.lineJoin):p&&(B.removeChild(p),d._stroke=null),z.fill?(A||(A=d._fill=Gn("fill")),B.appendChild(A),A.color=z.fillColor||z.color,A.opacity=z.fillOpacity):A&&(B.removeChild(A),d._fill=null)},_updateCircle:function(d){var p=d._point.round(),A=Math.round(d._radius),z=Math.round(d._radiusY||A);this._setPath(d,d._empty()?"M0 0":"AL "+p.x+","+p.y+" "+A+","+z+" 0,"+65535*360)},_setPath:function(d,p){d._path.v=p},_bringToFront:function(d){Ot(d._container)},_bringToBack:function(d){oe(d._container)}},sr=Ee.vml?Gn:ee,On=is.extend({_initContainer:function(){this._container=sr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ft(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){is.prototype._update.call(this);var d=this._bounds,p=d.getSize(),A=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,A.setAttribute("width",p.x),A.setAttribute("height",p.y)),Le(A,d.min),A.setAttribute("viewBox",[d.min.x,d.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(d){var p=d._path=sr("path");d.options.className&&Kt(p,d.options.className),d.options.interactive&&Kt(p,"leaflet-interactive"),this._updateStyle(d),this._layers[h(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){Ft(d._path),d.removeInteractiveTarget(d._path),delete this._layers[h(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var p=d._path,A=d.options;p&&(A.stroke?(p.setAttribute("stroke",A.color),p.setAttribute("stroke-opacity",A.opacity),p.setAttribute("stroke-width",A.weight),p.setAttribute("stroke-linecap",A.lineCap),p.setAttribute("stroke-linejoin",A.lineJoin),A.dashArray?p.setAttribute("stroke-dasharray",A.dashArray):p.removeAttribute("stroke-dasharray"),A.dashOffset?p.setAttribute("stroke-dashoffset",A.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),A.fill?(p.setAttribute("fill",A.fillColor||A.color),p.setAttribute("fill-opacity",A.fillOpacity),p.setAttribute("fill-rule",A.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(d,p){this._setPath(d,se(d._parts,p))},_updateCircle:function(d){var p=d._point,A=Math.max(Math.round(d._radius),1),z=Math.max(Math.round(d._radiusY),1)||A,B="a"+A+","+z+" 0 1,0 ",J=d._empty()?"M0 0":"M"+(p.x-A)+","+p.y+B+A*2+",0 "+B+-A*2+",0 ";this._setPath(d,J)},_setPath:function(d,p){d._path.setAttribute("d",p)},_bringToFront:function(d){Ot(d._path)},_bringToBack:function(d){oe(d._path)}});Ee.vml&&On.include(Hn);function cr(d){return Ee.svg||Ee.vml?new On(d):null}_i.include({getRenderer:function(d){var p=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var p=this._paneRenderers[d];return p===void 0&&(p=this._createRenderer({pane:d}),this._paneRenderers[d]=p),p},_createRenderer:function(d){return this.options.preferCanvas&&Un(d)||cr(d)}});var Ur=ma.extend({initialize:function(d,p){ma.prototype.initialize.call(this,this._boundsToLatLngs(d),p)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=At(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function Wn(d,p){return new Ur(d,p)}On.create=sr,On.pointsToPath=se,Ks.geometryToLayer=dr,Ks.coordsToLatLng=C,Ks.coordsToLatLngs=k,Ks.latLngToCoords=G,Ks.latLngsToCoords=Q,Ks.getFeature=nt,Ks.asFeature=mt,_i.mergeOptions({boxZoom:!0});var Gr=ws.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$e(),Zi(),this._startPoint=this._map.mouseEventToContainerPoint(d),Pe(document,{contextmenu:As,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=Nt("div","leaflet-zoom-box",this._container),Kt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var p=new et(this._point,this._startPoint),A=p.getSize();Le(this._box,p.min),this._box.style.width=A.x+"px",this._box.style.height=A.y+"px"},_finish:function(){this._moved&&(Ft(this._box),le(this._container,"leaflet-crosshair")),Ei(),En(),Me(document,{contextmenu:As,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var p=new Mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_i.addInitHook("addHandler","boxZoom",Gr),_i.mergeOptions({doubleClickZoom:!0});var rr=ws.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var p=this._map,A=p.getZoom(),z=p.options.zoomDelta,B=d.originalEvent.shiftKey?A-z:A+z;p.options.doubleClickZoom==="center"?p.setZoom(B):p.setZoomAround(d.containerPoint,B)}});_i.addInitHook("addHandler","doubleClickZoom",rr),_i.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pa=ws.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new lo(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}Kt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){le(this._map._container,"leaflet-grab"),le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=At(this._map.options.maxBounds);this._offsetLimit=Dt(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var p=this._lastTime=+new Date,A=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(A),this._times.push(p),this._prunePositions(p)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,p){return d-(d-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;d.x<p.min.x&&(d.x=this._viscousLimit(d.x,p.min.x)),d.y<p.min.y&&(d.y=this._viscousLimit(d.y,p.min.y)),d.x>p.max.x&&(d.x=this._viscousLimit(d.x,p.max.x)),d.y>p.max.y&&(d.y=this._viscousLimit(d.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,p=Math.round(d/2),A=this._initialWorldOffset,z=this._draggable._newPos.x,B=(z-p+A)%d+p-A,J=(z+p+A)%d-p-A,dt=Math.abs(B+A)<Math.abs(J+A)?B:J;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=dt},_onDragEnd:function(d){var p=this._map,A=p.options,z=!A.inertia||d.noInertia||this._times.length<2;if(p.fire("dragend",d),z)p.fire("moveend");else{this._prunePositions(+new Date);var B=this._lastPos.subtract(this._positions[0]),J=(this._lastTime-this._times[0])/1e3,dt=A.easeLinearity,Ct=B.multiplyBy(dt/J),Ht=Ct.distanceTo([0,0]),ce=Math.min(A.inertiaMaxSpeed,Ht),be=Ct.multiplyBy(ce/Ht),Ce=ce/(A.inertiaDeceleration*dt),we=be.multiplyBy(-Ce/2).round();!we.x&&!we.y?p.fire("moveend"):(we=p._limitOffset(we,p.options.maxBounds),j(function(){p.panBy(we,{duration:Ce,easeLinearity:dt,noMoveStart:!0,animate:!0})}))}}});_i.addInitHook("addHandler","dragging",pa),_i.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hr=ws.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),Pe(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,p=document.documentElement,A=d.scrollTop||p.scrollTop,z=d.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(z,A)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var p=this._panKeys={},A=this.keyCodes,z,B;for(z=0,B=A.left.length;z<B;z++)p[A.left[z]]=[-1*d,0];for(z=0,B=A.right.length;z<B;z++)p[A.right[z]]=[d,0];for(z=0,B=A.down.length;z<B;z++)p[A.down[z]]=[0,d];for(z=0,B=A.up.length;z<B;z++)p[A.up[z]]=[0,-1*d]},_setZoomDelta:function(d){var p=this._zoomKeys={},A=this.keyCodes,z,B;for(z=0,B=A.zoomIn.length;z<B;z++)p[A.zoomIn[z]]=d;for(z=0,B=A.zoomOut.length;z<B;z++)p[A.zoomOut[z]]=-d},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var p=d.keyCode,A=this._map,z;if(p in this._panKeys){if(!A._panAnim||!A._panAnim._inProgress)if(z=this._panKeys[p],d.shiftKey&&(z=X(z).multiplyBy(3)),A.options.maxBounds&&(z=A._limitOffset(X(z),A.options.maxBounds)),A.options.worldCopyJump){var B=A.wrapLatLng(A.unproject(A.project(A.getCenter()).add(z)));A.panTo(B)}else A.panBy(z)}else if(p in this._zoomKeys)A.setZoom(A.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&A._popup&&A._popup.options.closeOnEscapeKey)A.closePopup();else return;As(d)}}});_i.addInitHook("addHandler","keyboard",Hr),_i.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ds=ws.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var p=kr(d),A=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var z=Math.max(A-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),z),As(d)},_performZoom:function(){var d=this._map,p=d.getZoom(),A=this._map.options.zoomSnap||0;d._stop();var z=this._delta/(this._map.options.wheelPxPerZoomLevel*4),B=4*Math.log(2/(1+Math.exp(-Math.abs(z))))/Math.LN2,J=A?Math.ceil(B/A)*A:B,dt=d._limitZoom(p+(this._delta>0?J:-J))-p;this._delta=0,this._startTime=null,dt&&(d.options.scrollWheelZoom==="center"?d.setZoom(p+dt):d.setZoomAround(this._lastMousePos,p+dt))}});_i.addInitHook("addHandler","scrollWheelZoom",ds);var yl=600;_i.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var wo=ws.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var p=d.touches[0];this._startPos=this._newPos=new _t(p.clientX,p.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",Ui),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),yl),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){Me(document,"touchend",Ui),Me(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(d){var p=d.touches[0];this._newPos=new _t(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,p){var A=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});A._simulated=!0,p.target.dispatchEvent(A)}});_i.addInitHook("addHandler","tapHold",wo),_i.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var go=ws.extend({addHooks:function(){Kt(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var p=this._map;if(!(!d.touches||d.touches.length!==2||p._animatingZoom||this._zooming)){var A=p.mouseEventToContainerPoint(d.touches[0]),z=p.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(A.add(z)._divideBy(2))),this._startDist=A.distanceTo(z),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),Ui(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var p=this._map,A=p.mouseEventToContainerPoint(d.touches[0]),z=p.mouseEventToContainerPoint(d.touches[1]),B=A.distanceTo(z)/this._startDist;if(this._zoom=p.getScaleZoom(B,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&B<1||this._zoom>p.getMaxZoom()&&B>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,B===1)return}else{var J=A._add(z)._divideBy(2)._subtract(this._centerPoint);if(B===1&&J.x===0&&J.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(J),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),lt(this._animRequest);var dt=a(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(dt,this,!0),Ui(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,lt(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_i.addInitHook("addHandler","touchZoom",go),_i.BoxZoom=Gr,_i.DoubleClickZoom=rr,_i.Drag=pa,_i.Keyboard=Hr,_i.ScrollWheelZoom=ds,_i.TapHold=wo,_i.TouchZoom=go,i.Bounds=et,i.Browser=Ee,i.CRS=Ge,i.Canvas=Ms,i.Circle=_a,i.CircleMarker=Ar,i.Class=ft,i.Control=Zs,i.DivIcon=Sn,i.DivOverlay=mi,i.DomEvent=Mu,i.DomUtil=Ao,i.Draggable=lo,i.Evented=st,i.FeatureGroup=Ds,i.GeoJSON=Ks,i.GridLayer=vn,i.Handler=ws,i.Icon=Fr,i.ImageOverlay=xe,i.LatLng=Xt,i.LatLngBounds=Mt,i.Layer=zs,i.LayerGroup=fo,i.LineUtil=_l,i.Map=_i,i.Marker=Sr,i.Mixin=Zl,i.Path=Qs,i.Point=_t,i.PolyUtil=Lh,i.Polygon=ma,i.Polyline=nr,i.Popup=Pi,i.PosAnimation=za,i.Projection=ml,i.Rectangle=Ur,i.Renderer=is,i.SVG=On,i.SVGOverlay=Ve,i.TileLayer=Je,i.Tooltip=nn,i.Transformation=ie,i.Util=pt,i.VideoOverlay=De,i.bind=a,i.bounds=Dt,i.canvas=Un,i.circle=ql,i.circleMarker=ga,i.control=ha,i.divIcon=pi,i.extend=s,i.featureGroup=To,i.geoJSON=Pt,i.geoJson=qt,i.gridLayer=on,i.icon=fa,i.imageOverlay=pe,i.latLng=jt,i.latLngBounds=At,i.layerGroup=pl,i.map=Da,i.marker=Br,i.point=X,i.polygon=Cs,i.polyline=Vo,i.popup=Qi,i.rectangle=Wn,i.setOptions=x,i.stamp=h,i.svg=cr,i.svgOverlay=ii,i.tileLayer=Gi,i.tooltip=Ye,i.transformation=kt,i.version=n,i.videoOverlay=Qe;var Lo=window.L;i.noConflict=function(){return window.L=Lo,this},window.L=i})}(ag,ag.exports)),ag.exports}var YN=z9();const D9=a0(YN),k9=QR({__proto__:null,default:D9},[YN]),XN=Qt.createContext(null),Es=()=>{const t=Qt.useContext(XN);if(!t)throw new Error("useOgma must be used within an OgmaProvider");return t.ogma};function rw(t,e){Object.keys(t).forEach(i=>{const n=t[i];n&&e(i,n)})}function F9(t){return t.startsWith("on")&&t.length>2?t[2].toLowerCase()+t.substring(3):null}const ow={},B9=(t,e)=>{const{options:i=ow,children:n,graph:s,onReady:r,theme:a,className:u="ogma-container"}=t,h=Qt.useRef({}),[c,g]=Qt.useState(!1),[_,m]=Qt.useState(),[v,b]=Qt.useState(null),[x,M]=Qt.useState(),[N,O]=Qt.useState(ow),[R,P]=Qt.useState();return Qt.useImperativeHandle(e,()=>_,[_]),Qt.useEffect(()=>{if(!v)return;const F=new VN({container:v,graph:s,options:i});a&&(P(a),F.styles.setTheme(a)),m(F),g(!0),r&&r(F)},[v]),Qt.useLayoutEffect(()=>{const F=()=>_==null?void 0:_.view.forceResize();return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),Qt.useEffect(()=>{_&&(s&&s!==x&&(M(s),_.setGraph(s)),i&&N!==i&&(O(i),_.setOptions(i)))},[s,i]),Qt.useEffect(()=>{_&&a&&a!==R&&(P(a),_.styles.setTheme(a))},[a]),Qt.useEffect(()=>{if(!_)return;const F={};Object.keys(t).forEach(U=>{if(!U.startsWith("on"))return;const Y=F9(U),K=t[U];Y&&typeof K=="function"&&(F[Y]=K)}),rw(h.current,(U,V)=>{F[U]||(_.events.off(V),delete h.current[U])}),rw(F,(U,V)=>{const Y=h.current[U];Y&&Y!==V&&_.events.off(Y),(!Y||Y!==V)&&(_.events.on(U,V),h.current[U]=V)})},[t]),Re.jsx("div",{style:{width:"100%",height:"100%"},className:u,ref:F=>b(F),children:_&&Re.jsx(XN.Provider,{value:{ogma:_},children:c&&n})})},U9=Qt.memo(Qt.forwardRef(B9));function Fv(t,e,i){const n=[];return Qt.useCallback(e,n)}const G9=Qt.forwardRef(({selector:t,attributes:e},i)=>{const n=Es(),[s,r]=Qt.useState();return Qt.useImperativeHandle(i,()=>s,[s]),Qt.useEffect(()=>{const a=t?n.styles.addNodeRule(t,e):n.styles.addNodeRule(e);return r(a),()=>{a.destroy(),r(void 0)}},[t,e]),null}),H9=({attributes:t,fullOverwrite:e})=>{const i=Es();return Qt.useEffect(()=>(i.styles.setHoveredNodeAttributes(t,e),()=>{i.styles.setHoveredNodeAttributes(null)}),[t,e]),null},V9=({attributes:t,fullOverwrite:e})=>{const i=Es();return Qt.useEffect(()=>(i.styles.setSelectedNodeAttributes(t,e),()=>{i.styles.setSelectedNodeAttributes(null)}),[t,e]),null},aw=Object.assign(G9,{Hovered:H9,Selected:V9}),Y9=Qt.forwardRef(({selector:t,attributes:e},i)=>{const n=Es(),[s,r]=Qt.useState();return Qt.useImperativeHandle(i,()=>s,[s]),Qt.useEffect(()=>{const a=t?n.styles.addEdgeRule(t,e):n.styles.addEdgeRule(e);return r(a),()=>{a.destroy(),r(void 0)}},[t,e]),null}),X9=({attributes:t,fullOverwrite:e})=>{const i=Es();return Qt.useEffect(()=>(i.styles.setHoveredEdgeAttributes(t,e),()=>{i.styles.setHoveredEdgeAttributes(null)}),[t,e]),null},Z9=({attributes:t,fullOverwrite:e})=>{const i=Es();return Qt.useEffect(()=>(i.styles.setSelectedEdgeAttributes(t,e),()=>{i.styles.setSelectedEdgeAttributes(null)}),[t,e]),null},lw=Object.assign(Y9,{Hovered:X9,Selected:Z9}),W9=({name:t,edgeAttributes:e,edgeDependencies:i,edgeOutput:n,nodeAttributes:s,nodeDependencies:r,nodeOutput:a},u)=>{const h=Es(),[c,g]=Qt.useState(null);return Qt.useImperativeHandle(u,()=>c,[c]),Qt.useEffect(()=>{const _={edgeAttributes:e,edgeDependencies:i,edgeOutput:n,nodeAttributes:s,nodeDependencies:r,nodeOutput:a};async function m(){const v=h.styles.createClass({name:t,..._});await h.view.afterNextFrame(),g(v)}return m(),()=>{async function v(){const b=h.styles.getClass(t);b&&await b.destroy(),g(null)}v()}},[]),Qt.useEffect(()=>{c&&c.update({edgeAttributes:e,edgeDependencies:i,edgeOutput:n,nodeAttributes:s,nodeDependencies:r,nodeOutput:a})},[e,i,n,s,r,a]),null},q9=(t,e)=>t.name===e.name&&t.edgeAttributes===e.edgeAttributes&&t.edgeDependencies===e.edgeDependencies&&t.edgeOutput===e.edgeOutput&&t.nodeAttributes===e.nodeAttributes&&t.nodeDependencies===e.nodeDependencies&&t.nodeOutput===e.nodeOutput,Q9=Qt.memo(Qt.forwardRef(W9),q9);function Ad(t,e,i){e===t.isEnabled()&&(e?t.disable(i):t.enable(i))}function Td(t,e,i){const n=({target:c})=>{c===e&&t.onEnabled&&t.onEnabled(e)},s=({target:c})=>{c===e&&t.onDisabled&&t.onDisabled(e)},r=({target:c})=>{c===e&&t.onUpdated&&t.onUpdated(e)},a=({target:c,index:g})=>{c===e&&t.onSetIndex&&t.onSetIndex(e,g)},u=({target:c})=>{c===e&&(t.onDestroyed&&t.onDestroyed(e),i.events.off(n).off(s).off(r).off(a).off(u))};return i.events.on("transformationEnabled",n).on("transformationDisabled",s).on("transformationDestroyed",u).on("transformationSetIndex",a).on("transformationRefresh",r),()=>{i.events.off(n).off(s).off(r).off(a).off(u)}}function K9(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addNodeGrouping({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled,t.duration]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.groupIdFunction,t.groupSelfLoopEdges,t.edgeGenerator,t.nodeGenerator,t.groupEdges,t.padding,t.selector,t.showContents,t.separateEdgesByDirection]),null}const j9=Qt.forwardRef(K9);function J9(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addEdgeGrouping({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled,t.duration]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.selector,t.generator,t.groupIdFunction,t.separateEdgesByDirection]),null}Qt.forwardRef(J9);function $9(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addNodeCollapsing({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled,t.duration]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.edgeGenerator,t.selector]),null}Qt.forwardRef($9);function tY(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addNeighborMerging({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled,t.duration]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.dataFunction,t.selector]),null}Qt.forwardRef(tY);function eY(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addNeighborGeneration({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled,t.duration]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.edgeGenerator,t.nodeGenerator,t.neighborIdFunction,t.selector]),null}Qt.forwardRef(eY);function iY(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addEdgeFilter({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.criteria]),null}Qt.forwardRef(iY);function nY(t,e){const i=Es(),[n,s]=Qt.useState();return Qt.useImperativeHandle(e,()=>n,[n]),Qt.useEffect(()=>{const r=i.transformations.addNodeFilter({...t,enabled:!t.disabled});return Td(t,r,i),s(r),()=>{r.destroy(),s(void 0)}},[]),Qt.useEffect(()=>{n&&Ad(n,!!t.disabled,t.duration)},[t.disabled]),Qt.useEffect(()=>{n==null||n.setOptions(t)},[t.criteria]),null}Qt.forwardRef(nY);var ed={},Xf={};/**
 * @license React
 * react-dom-server-legacy.browser.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function sY(){if(uw)return Xf;uw=1;var t=Dg(),e=gp();function i(S){var C="https://react.dev/errors/"+S;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)C+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+S+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),c=Symbol.for("react.consumer"),g=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.scope"),N=Symbol.for("react.activity"),O=Symbol.for("react.legacy_hidden"),R=Symbol.for("react.memo_cache_sentinel"),P=Symbol.for("react.view_transition"),F=Symbol.iterator,U=Array.isArray;function V(S,C){var k=S.length&3,G=S.length-k,Q=C;for(C=0;C<G;){var nt=S.charCodeAt(C)&255|(S.charCodeAt(++C)&255)<<8|(S.charCodeAt(++C)&255)<<16|(S.charCodeAt(++C)&255)<<24;++C,nt=3432918353*(nt&65535)+((3432918353*(nt>>>16)&65535)<<16)&4294967295,nt=nt<<15|nt>>>17,nt=461845907*(nt&65535)+((461845907*(nt>>>16)&65535)<<16)&4294967295,Q^=nt,Q=Q<<13|Q>>>19,Q=5*(Q&65535)+((5*(Q>>>16)&65535)<<16)&4294967295,Q=(Q&65535)+27492+(((Q>>>16)+58964&65535)<<16)}switch(nt=0,k){case 3:nt^=(S.charCodeAt(C+2)&255)<<16;case 2:nt^=(S.charCodeAt(C+1)&255)<<8;case 1:nt^=S.charCodeAt(C)&255,nt=3432918353*(nt&65535)+((3432918353*(nt>>>16)&65535)<<16)&4294967295,nt=nt<<15|nt>>>17,Q^=461845907*(nt&65535)+((461845907*(nt>>>16)&65535)<<16)&4294967295}return Q^=S.length,Q^=Q>>>16,Q=2246822507*(Q&65535)+((2246822507*(Q>>>16)&65535)<<16)&4294967295,Q^=Q>>>13,Q=3266489909*(Q&65535)+((3266489909*(Q>>>16)&65535)<<16)&4294967295,(Q^Q>>>16)>>>0}var Y=Object.assign,K=Object.prototype.hasOwnProperty,tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),j={},lt={};function pt(S){return K.call(lt,S)?!0:K.call(j,S)?!1:tt.test(S)?lt[S]=!0:(j[S]=!0,!1)}var ft=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),ht=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W=/["'&<>]/;function st(S){if(typeof S=="boolean"||typeof S=="number"||typeof S=="bigint")return""+S;S=""+S;var C=W.exec(S);if(C){var k="",G,Q=0;for(G=C.index;G<S.length;G++){switch(S.charCodeAt(G)){case 34:C="&quot;";break;case 38:C="&amp;";break;case 39:C="&#x27;";break;case 60:C="&lt;";break;case 62:C="&gt;";break;default:continue}Q!==G&&(k+=S.slice(Q,G)),Q=G+1,k+=C}S=Q!==G?k+S.slice(Q,G):k}return S}var _t=/([A-Z])/g,Vt=/^ms-/,X=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function et(S){return X.test(""+S)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":S}var Dt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},Xt=Mt.d;Mt.d={f:Xt.f,r:Xt.r,D:tn,C:ro,L:oo,m:ir,X:en,S:hr,M:ot};var jt=[],Ge=/(<\/|<)(s)(cript)/gi;function Se(S,C,k,G){return""+C+(k==="s"?"\\u0073":"\\u0053")+G}function Lt(S,C,k,G,Q){return{idPrefix:S===void 0?"":S,nextFormID:0,streamingFormat:0,bootstrapScriptContent:k,bootstrapScripts:G,bootstrapModules:Q,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function Gt(){return{htmlChunks:null,headChunks:null,bodyChunks:null,contribution:0}}function ie(S,C,k){return{insertionMode:S,selectedValue:C,tagScope:k}}function kt(S,C,k){switch(C){case"noscript":return ie(2,null,S.tagScope|1);case"select":return ie(2,k.value!=null?k.value:k.defaultValue,S.tagScope);case"svg":return ie(4,null,S.tagScope);case"picture":return ie(2,null,S.tagScope|2);case"math":return ie(5,null,S.tagScope);case"foreignObject":return ie(2,null,S.tagScope);case"table":return ie(6,null,S.tagScope);case"thead":case"tbody":case"tfoot":return ie(7,null,S.tagScope);case"colgroup":return ie(9,null,S.tagScope);case"tr":return ie(8,null,S.tagScope);case"head":if(2>S.insertionMode)return ie(3,null,S.tagScope);break;case"html":if(S.insertionMode===0)return ie(1,null,S.tagScope)}return 6<=S.insertionMode||2>S.insertionMode?ie(2,null,S.tagScope):S}var $t=new Map;function ne(S,C){if(typeof C!="object")throw Error(i(62));var k=!0,G;for(G in C)if(K.call(C,G)){var Q=C[G];if(Q!=null&&typeof Q!="boolean"&&Q!==""){if(G.indexOf("--")===0){var nt=st(G);Q=st((""+Q).trim())}else nt=$t.get(G),nt===void 0&&(nt=st(G.replace(_t,"-$1").toLowerCase().replace(Vt,"-ms-")),$t.set(G,nt)),Q=typeof Q=="number"?Q===0||ft.has(G)?""+Q:Q+"px":st((""+Q).trim());k?(k=!1,S.push(' style="',nt,":",Q)):S.push(";",nt,":",Q)}}k||S.push('"')}function ee(S,C,k){k&&typeof k!="function"&&typeof k!="symbol"&&S.push(" ",C,'=""')}function se(S,C,k){typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&S.push(" ",C,'="',st(k),'"')}var ve=st("javascript:throw new Error('React form unexpectedly submitted.')");function Oe(S,C){this.push('<input type="hidden"'),ke(S),se(this,"name",C),se(this,"value",S),this.push("/>")}function ke(S){if(typeof S!="string")throw Error(i(480))}function Xe(S,C){if(typeof C.$$FORM_ACTION=="function"){var k=S.nextFormID++;S=S.idPrefix+k;try{var G=C.$$FORM_ACTION(S);if(G){var Q=G.data;Q!=null&&Q.forEach(ke)}return G}catch(nt){if(typeof nt=="object"&&nt!==null&&typeof nt.then=="function")throw nt}}return null}function Be(S,C,k,G,Q,nt,mt,Jt){var Pt=null;if(typeof G=="function"){var qt=Xe(C,G);qt!==null?(Jt=qt.name,G=qt.action||"",Q=qt.encType,nt=qt.method,mt=qt.target,Pt=qt.data):(S.push(" ","formAction",'="',ve,'"'),mt=nt=Q=G=Jt=null,ei(C,k))}return Jt!=null&&Ae(S,"name",Jt),G!=null&&Ae(S,"formAction",G),Q!=null&&Ae(S,"formEncType",Q),nt!=null&&Ae(S,"formMethod",nt),mt!=null&&Ae(S,"formTarget",mt),Pt}function Ae(S,C,k){switch(C){case"className":se(S,"class",k);break;case"tabIndex":se(S,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":se(S,C,k);break;case"style":ne(S,k);break;case"src":case"href":if(k==="")break;case"action":case"formAction":if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=et(""+k),S.push(" ",C,'="',st(k),'"');break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":ee(S,C.toLowerCase(),k);break;case"xlinkHref":if(typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=et(""+k),S.push(" ","xlink:href",'="',st(k),'"');break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof k!="function"&&typeof k!="symbol"&&S.push(" ",C,'="',st(k),'"');break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"&&S.push(" ",C,'=""');break;case"capture":case"download":k===!0?S.push(" ",C,'=""'):k!==!1&&typeof k!="function"&&typeof k!="symbol"&&S.push(" ",C,'="',st(k),'"');break;case"cols":case"rows":case"size":case"span":typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k&&S.push(" ",C,'="',st(k),'"');break;case"rowSpan":case"start":typeof k=="function"||typeof k=="symbol"||isNaN(k)||S.push(" ",C,'="',st(k),'"');break;case"xlinkActuate":se(S,"xlink:actuate",k);break;case"xlinkArcrole":se(S,"xlink:arcrole",k);break;case"xlinkRole":se(S,"xlink:role",k);break;case"xlinkShow":se(S,"xlink:show",k);break;case"xlinkTitle":se(S,"xlink:title",k);break;case"xlinkType":se(S,"xlink:type",k);break;case"xmlBase":se(S,"xml:base",k);break;case"xmlLang":se(S,"xml:lang",k);break;case"xmlSpace":se(S,"xml:space",k);break;default:if((!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=ht.get(C)||C,pt(C))){switch(typeof k){case"function":case"symbol":return;case"boolean":var G=C.toLowerCase().slice(0,5);if(G!=="data-"&&G!=="aria-")return}S.push(" ",C,'="',st(k),'"')}}}function Ze(S,C,k){if(C!=null){if(k!=null)throw Error(i(60));if(typeof C!="object"||!("__html"in C))throw Error(i(61));C=C.__html,C!=null&&S.push(""+C)}}function ki(S){var C="";return t.Children.forEach(S,function(k){k!=null&&(C+=k)}),C}function ei(S,C){(S.instructions&16)===0&&(S.instructions|=16,C.bootstrapChunks.unshift(C.startInlineScript,`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,"<\/script>"))}function qe(S,C){S.push(di("link"));for(var k in C)if(K.call(C,k)){var G=C[k];if(G!=null)switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"link"));default:Ae(S,k,G)}}return S.push("/>"),null}var hi=/(<\/|<)(s)(tyle)/gi;function Ji(S,C,k,G){return""+C+(k==="s"?"\\73 ":"\\53 ")+G}function Mi(S,C,k){S.push(di(k));for(var G in C)if(K.call(C,G)){var Q=C[G];if(Q!=null)switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,k));default:Ae(S,G,Q)}}return S.push("/>"),null}function Vs(S,C){S.push(di("title"));var k=null,G=null,Q;for(Q in C)if(K.call(C,Q)){var nt=C[Q];if(nt!=null)switch(Q){case"children":k=nt;break;case"dangerouslySetInnerHTML":G=nt;break;default:Ae(S,Q,nt)}}return S.push(">"),C=Array.isArray(k)?2>k.length?k[0]:null:k,typeof C!="function"&&typeof C!="symbol"&&C!==null&&C!==void 0&&S.push(st(""+C)),Ze(S,G,k),S.push(ys("title")),null}function ls(S,C){S.push(di("script"));var k=null,G=null,Q;for(Q in C)if(K.call(C,Q)){var nt=C[Q];if(nt!=null)switch(Q){case"children":k=nt;break;case"dangerouslySetInnerHTML":G=nt;break;default:Ae(S,Q,nt)}}return S.push(">"),Ze(S,G,k),typeof k=="string"&&S.push((""+k).replace(Ge,Se)),S.push(ys("script")),null}function Is(S,C,k){S.push(di(k));var G=k=null,Q;for(Q in C)if(K.call(C,Q)){var nt=C[Q];if(nt!=null)switch(Q){case"children":k=nt;break;case"dangerouslySetInnerHTML":G=nt;break;default:Ae(S,Q,nt)}}return S.push(">"),Ze(S,G,k),k}function Jn(S,C,k){S.push(di(k));var G=k=null,Q;for(Q in C)if(K.call(C,Q)){var nt=C[Q];if(nt!=null)switch(Q){case"children":k=nt;break;case"dangerouslySetInnerHTML":G=nt;break;default:Ae(S,Q,nt)}}return S.push(">"),Ze(S,G,k),typeof k=="string"?(S.push(st(k)),null):k}var Cn=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,bn=new Map;function di(S){var C=bn.get(S);if(C===void 0){if(!Cn.test(S))throw Error(i(65,S));C="<"+S,bn.set(S,C)}return C}function gi(S,C,k,G,Q,nt,mt,Jt,Pt,qt){switch(C){case"div":case"span":case"svg":case"path":break;case"a":S.push(di("a"));var xe=null,pe=null,De;for(De in k)if(K.call(k,De)){var Qe=k[De];if(Qe!=null)switch(De){case"children":xe=Qe;break;case"dangerouslySetInnerHTML":pe=Qe;break;case"href":Qe===""?se(S,"href",""):Ae(S,De,Qe);break;default:Ae(S,De,Qe)}}if(S.push(">"),Ze(S,pe,xe),typeof xe=="string"){S.push(st(xe));var Ve=null}else Ve=xe;return Ve;case"g":case"p":case"li":break;case"select":S.push(di("select"));var ii=null,mi=null,Pi;for(Pi in k)if(K.call(k,Pi)){var Qi=k[Pi];if(Qi!=null)switch(Pi){case"children":ii=Qi;break;case"dangerouslySetInnerHTML":mi=Qi;break;case"defaultValue":case"value":break;default:Ae(S,Pi,Qi)}}return S.push(">"),Ze(S,mi,ii),ii;case"option":var nn=Jt.selectedValue;S.push(di("option"));var Ye=null,Sn=null,pi=null,vn=null,on;for(on in k)if(K.call(k,on)){var Je=k[on];if(Je!=null)switch(on){case"children":Ye=Je;break;case"selected":pi=Je;break;case"dangerouslySetInnerHTML":vn=Je;break;case"value":Sn=Je;default:Ae(S,on,Je)}}if(nn!=null){var Gi=Sn!==null?""+Sn:ki(Ye);if(U(nn)){for(var Zn=0;Zn<nn.length;Zn++)if(""+nn[Zn]===Gi){S.push(' selected=""');break}}else""+nn===Gi&&S.push(' selected=""')}else pi&&S.push(' selected=""');return S.push(">"),Ze(S,vn,Ye),Ye;case"textarea":S.push(di("textarea"));var Rn=null,is=null,Ms=null,Un;for(Un in k)if(K.call(k,Un)){var Gn=k[Un];if(Gn!=null)switch(Un){case"children":Ms=Gn;break;case"value":Rn=Gn;break;case"defaultValue":is=Gn;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:Ae(S,Un,Gn)}}if(Rn===null&&is!==null&&(Rn=is),S.push(">"),Ms!=null){if(Rn!=null)throw Error(i(92));if(U(Ms)){if(1<Ms.length)throw Error(i(93));Rn=""+Ms[0]}Rn=""+Ms}return typeof Rn=="string"&&Rn[0]===`
`&&S.push(`
`),Rn!==null&&S.push(st(""+Rn)),null;case"input":S.push(di("input"));var Hn=null,sr=null,On=null,cr=null,Ur=null,Wn=null,Gr=null,rr=null,pa=null,Hr;for(Hr in k)if(K.call(k,Hr)){var ds=k[Hr];if(ds!=null)switch(Hr){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"name":Hn=ds;break;case"formAction":sr=ds;break;case"formEncType":On=ds;break;case"formMethod":cr=ds;break;case"formTarget":Ur=ds;break;case"defaultChecked":pa=ds;break;case"defaultValue":Gr=ds;break;case"checked":rr=ds;break;case"value":Wn=ds;break;default:Ae(S,Hr,ds)}}var yl=Be(S,G,Q,sr,On,cr,Ur,Hn);return rr!==null?ee(S,"checked",rr):pa!==null&&ee(S,"checked",pa),Wn!==null?Ae(S,"value",Wn):Gr!==null&&Ae(S,"value",Gr),S.push("/>"),yl!=null&&yl.forEach(Oe,S),null;case"button":S.push(di("button"));var wo=null,go=null,Lo=null,d=null,p=null,A=null,z=null,B;for(B in k)if(K.call(k,B)){var J=k[B];if(J!=null)switch(B){case"children":wo=J;break;case"dangerouslySetInnerHTML":go=J;break;case"name":Lo=J;break;case"formAction":d=J;break;case"formEncType":p=J;break;case"formMethod":A=J;break;case"formTarget":z=J;break;default:Ae(S,B,J)}}var dt=Be(S,G,Q,d,p,A,z,Lo);if(S.push(">"),dt!=null&&dt.forEach(Oe,S),Ze(S,go,wo),typeof wo=="string"){S.push(st(wo));var Ct=null}else Ct=wo;return Ct;case"form":S.push(di("form"));var Ht=null,ce=null,be=null,Ce=null,we=null,ti=null,Yi;for(Yi in k)if(K.call(k,Yi)){var Ki=k[Yi];if(Ki!=null)switch(Yi){case"children":Ht=Ki;break;case"dangerouslySetInnerHTML":ce=Ki;break;case"action":be=Ki;break;case"encType":Ce=Ki;break;case"method":we=Ki;break;case"target":ti=Ki;break;default:Ae(S,Yi,Ki)}}var Li=null,ks=null;if(typeof be=="function"){var fr=Xe(G,be);fr!==null?(be=fr.action||"",Ce=fr.encType,we=fr.method,ti=fr.target,Li=fr.data,ks=fr.name):(S.push(" ","action",'="',ve,'"'),ti=we=Ce=be=null,ei(G,Q))}if(be!=null&&Ae(S,"action",be),Ce!=null&&Ae(S,"encType",Ce),we!=null&&Ae(S,"method",we),ti!=null&&Ae(S,"target",ti),S.push(">"),ks!==null&&(S.push('<input type="hidden"'),se(S,"name",ks),S.push("/>"),Li!=null&&Li.forEach(Oe,S)),Ze(S,ce,Ht),typeof Ht=="string"){S.push(st(Ht));var Yo=null}else Yo=Ht;return Yo;case"menuitem":S.push(di("menuitem"));for(var _o in k)if(K.call(k,_o)){var gr=k[_o];if(gr!=null)switch(_o){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:Ae(S,_o,gr)}}return S.push(">"),null;case"object":S.push(di("object"));var Tr=null,or=null,fi;for(fi in k)if(K.call(k,fi)){var cs=k[fi];if(cs!=null)switch(fi){case"children":Tr=cs;break;case"dangerouslySetInnerHTML":or=cs;break;case"data":var wr=et(""+cs);if(wr==="")break;S.push(" ","data",'="',st(wr),'"');break;default:Ae(S,fi,cs)}}if(S.push(">"),Ze(S,or,Tr),typeof Tr=="string"){S.push(st(Tr));var Vr=null}else Vr=Tr;return Vr;case"title":if(Jt.insertionMode===4||Jt.tagScope&1||k.itemProp!=null)var js=Vs(S,k);else qt?js=null:(Vs(Q.hoistableChunks,k),js=void 0);return js;case"link":var Xo=k.rel,In=k.href,Yr=k.precedence;if(Jt.insertionMode===4||Jt.tagScope&1||k.itemProp!=null||typeof Xo!="string"||typeof In!="string"||In===""){qe(S,k);var Co=null}else if(k.rel==="stylesheet")if(typeof Yr!="string"||k.disabled!=null||k.onLoad||k.onError)Co=qe(S,k);else{var _r=Q.styles.get(Yr),fs=G.styleResources.hasOwnProperty(In)?G.styleResources[In]:void 0;if(fs!==null){G.styleResources[In]=null,_r||(_r={precedence:st(Yr),rules:[],hrefs:[],sheets:new Map},Q.styles.set(Yr,_r));var ya={state:0,props:Y({},k,{"data-precedence":k.precedence,precedence:null})};if(fs){fs.length===2&&at(ya.props,fs);var mr=Q.preloads.stylesheets.get(In);mr&&0<mr.length?mr.length=0:ya.state=1}_r.sheets.set(In,ya),mt&&mt.stylesheets.add(ya)}else if(_r){var wd=_r.sheets.get(In);wd&&mt&&mt.stylesheets.add(wd)}Pt&&S.push("<!-- -->"),Co=null}else k.onLoad||k.onError?Co=qe(S,k):(Pt&&S.push("<!-- -->"),Co=qt?null:qe(Q.hoistableChunks,k));return Co;case"script":var Ga=k.async;if(typeof k.src!="string"||!k.src||!Ga||typeof Ga=="function"||typeof Ga=="symbol"||k.onLoad||k.onError||Jt.insertionMode===4||Jt.tagScope&1||k.itemProp!=null)var Mh=ls(S,k);else{var Pn=k.src;if(k.type==="module")var va=G.moduleScriptResources,Zo=Q.preloads.moduleScripts;else va=G.scriptResources,Zo=Q.preloads.scripts;var Xr=va.hasOwnProperty(Pn)?va[Pn]:void 0;if(Xr!==null){va[Pn]=null;var Ha=k;if(Xr){Xr.length===2&&(Ha=Y({},k),at(Ha,Xr));var Wo=Zo.get(Pn);Wo&&(Wo.length=0)}var qo=[];Q.scripts.add(qo),ls(qo,Ha)}Pt&&S.push("<!-- -->"),Mh=null}return Mh;case"style":var Ql=k.precedence,Zr=k.href;if(Jt.insertionMode===4||Jt.tagScope&1||k.itemProp!=null||typeof Ql!="string"||typeof Zr!="string"||Zr===""){S.push(di("style"));var Qo=null,Va=null,Lr;for(Lr in k)if(K.call(k,Lr)){var Ya=k[Lr];if(Ya!=null)switch(Lr){case"children":Qo=Ya;break;case"dangerouslySetInnerHTML":Va=Ya;break;default:Ae(S,Lr,Ya)}}S.push(">");var Ko=Array.isArray(Qo)?2>Qo.length?Qo[0]:null:Qo;typeof Ko!="function"&&typeof Ko!="symbol"&&Ko!==null&&Ko!==void 0&&S.push((""+Ko).replace(hi,Ji)),Ze(S,Va,Qo),S.push(ys("style"));var vl=null}else{var Wr=Q.styles.get(Ql);if((G.styleResources.hasOwnProperty(Zr)?G.styleResources[Zr]:void 0)!==null){G.styleResources[Zr]=null,Wr?Wr.hrefs.push(st(Zr)):(Wr={precedence:st(Ql),rules:[],hrefs:[st(Zr)],sheets:new Map},Q.styles.set(Ql,Wr));var jo=Wr.rules,Mo=null,Jo=null,xl;for(xl in k)if(K.call(k,xl)){var E=k[xl];if(E!=null)switch(xl){case"children":Mo=E;break;case"dangerouslySetInnerHTML":Jo=E}}var T=Array.isArray(Mo)?2>Mo.length?Mo[0]:null:Mo;typeof T!="function"&&typeof T!="symbol"&&T!==null&&T!==void 0&&jo.push((""+T).replace(hi,Ji)),Ze(jo,Jo,Mo)}Wr&&mt&&mt.styles.add(Wr),Pt&&S.push("<!-- -->"),vl=void 0}return vl;case"meta":if(Jt.insertionMode===4||Jt.tagScope&1||k.itemProp!=null)var D=Mi(S,k,"meta");else Pt&&S.push("<!-- -->"),D=qt?null:typeof k.charSet=="string"?Mi(Q.charsetChunks,k,"meta"):k.name==="viewport"?Mi(Q.viewportChunks,k,"meta"):Mi(Q.hoistableChunks,k,"meta");return D;case"listing":case"pre":S.push(di(C));var H=null,q=null,rt;for(rt in k)if(K.call(k,rt)){var gt=k[rt];if(gt!=null)switch(rt){case"children":H=gt;break;case"dangerouslySetInnerHTML":q=gt;break;default:Ae(S,rt,gt)}}if(S.push(">"),q!=null){if(H!=null)throw Error(i(60));if(typeof q!="object"||!("__html"in q))throw Error(i(61));var Bt=q.__html;Bt!=null&&(typeof Bt=="string"&&0<Bt.length&&Bt[0]===`
`?S.push(`
`,Bt):S.push(""+Bt))}return typeof H=="string"&&H[0]===`
`&&S.push(`
`),H;case"img":var xt=k.src,It=k.srcSet;if(!(k.loading==="lazy"||!xt&&!It||typeof xt!="string"&&xt!=null||typeof It!="string"&&It!=null)&&k.fetchPriority!=="low"&&!(Jt.tagScope&3)&&(typeof xt!="string"||xt[4]!==":"||xt[0]!=="d"&&xt[0]!=="D"||xt[1]!=="a"&&xt[1]!=="A"||xt[2]!=="t"&&xt[2]!=="T"||xt[3]!=="a"&&xt[3]!=="A")&&(typeof It!="string"||It[4]!==":"||It[0]!=="d"&&It[0]!=="D"||It[1]!=="a"&&It[1]!=="A"||It[2]!=="t"&&It[2]!=="T"||It[3]!=="a"&&It[3]!=="A")){var ye=typeof k.sizes=="string"?k.sizes:void 0,re=It?It+`
`+(ye||""):xt,Ne=Q.preloads.images,Ue=Ne.get(re);if(Ue)(k.fetchPriority==="high"||10>Q.highImagePreloads.size)&&(Ne.delete(re),Q.highImagePreloads.add(Ue));else if(!G.imageResources.hasOwnProperty(re)){G.imageResources[re]=jt;var Ke=k.crossOrigin,oi=typeof Ke=="string"?Ke==="use-credentials"?Ke:"":void 0,fn=Q.headers,An;fn&&0<fn.remainingCapacity&&typeof k.srcSet!="string"&&(k.fetchPriority==="high"||500>fn.highImagePreloads.length)&&(An=it(xt,"image",{imageSrcSet:k.srcSet,imageSizes:k.sizes,crossOrigin:oi,integrity:k.integrity,nonce:k.nonce,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.refererPolicy}),0<=(fn.remainingCapacity-=An.length+2))?(Q.resets.image[re]=jt,fn.highImagePreloads&&(fn.highImagePreloads+=", "),fn.highImagePreloads+=An):(Ue=[],qe(Ue,{rel:"preload",as:"image",href:It?void 0:xt,imageSrcSet:It,imageSizes:ye,crossOrigin:oi,integrity:k.integrity,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.referrerPolicy}),k.fetchPriority==="high"||10>Q.highImagePreloads.size?Q.highImagePreloads.add(Ue):(Q.bulkPreloads.add(Ue),Ne.set(re,Ue)))}}return Mi(S,k,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return Mi(S,k,C);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>Jt.insertionMode){var Ti=nt||Q.preamble;if(Ti.headChunks)throw Error(i(545,"`<head>`"));Ti.headChunks=[];var Fs=Is(Ti.headChunks,k,"head")}else Fs=Jn(S,k,"head");return Fs;case"body":if(2>Jt.insertionMode){var Vn=nt||Q.preamble;if(Vn.bodyChunks)throw Error(i(545,"`<body>`"));Vn.bodyChunks=[];var Js=Is(Vn.bodyChunks,k,"body")}else Js=Jn(S,k,"body");return Js;case"html":if(Jt.insertionMode===0){var zn=nt||Q.preamble;if(zn.htmlChunks)throw Error(i(545,"`<html>`"));zn.htmlChunks=[""];var ni=Is(zn.htmlChunks,k,"html")}else ni=Jn(S,k,"html");return ni;default:if(C.indexOf("-")!==-1){S.push(di(C));var yi=null,bi=null,qn;for(qn in k)if(K.call(k,qn)){var gn=k[qn];if(gn!=null){var Qn=qn;switch(qn){case"children":yi=gn;break;case"dangerouslySetInnerHTML":bi=gn;break;case"style":ne(S,gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":Qn="class";default:if(pt(qn)&&typeof gn!="function"&&typeof gn!="symbol"&&gn!==!1){if(gn===!0)gn="";else if(typeof gn=="object")continue;S.push(" ",Qn,'="',st(gn),'"')}}}}return S.push(">"),Ze(S,bi,yi),yi}}return Jn(S,k,C)}var lr=new Map;function ys(S){var C=lr.get(S);return C===void 0&&(C="</"+S+">",lr.set(S,C)),C}function Hi(S,C){S=S.preamble,S.htmlChunks===null&&C.htmlChunks&&(S.htmlChunks=C.htmlChunks,C.contribution|=1),S.headChunks===null&&C.headChunks&&(S.headChunks=C.headChunks,C.contribution|=4),S.bodyChunks===null&&C.bodyChunks&&(S.bodyChunks=C.bodyChunks,C.contribution|=2)}function $i(S,C){C=C.bootstrapChunks;for(var k=0;k<C.length-1;k++)S.push(C[k]);return k<C.length?(k=C[k],C.length=0,S.push(k)):!0}function Mn(S,C,k){if(S.push('<!--$?--><template id="'),k===null)throw Error(i(395));return S.push(C.boundaryPrefix),C=k.toString(16),S.push(C),S.push('"></template>')}function zr(S,C){C=C.contribution,C!==0&&(S.push("<!--"),S.push(""+C),S.push("-->"))}function ur(S,C,k,G){switch(k.insertionMode){case 0:case 1:case 3:case 2:return S.push('<div hidden id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 4:return S.push('<svg aria-hidden="true" style="display:none" id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 5:return S.push('<math aria-hidden="true" style="display:none" id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 6:return S.push('<table hidden id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 7:return S.push('<table hidden><tbody id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 8:return S.push('<table hidden><tr id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');case 9:return S.push('<table hidden><colgroup id="'),S.push(C.segmentPrefix),C=G.toString(16),S.push(C),S.push('">');default:throw Error(i(397))}}function Xi(S,C){switch(C.insertionMode){case 0:case 1:case 3:case 2:return S.push("</div>");case 4:return S.push("</svg>");case 5:return S.push("</math>");case 6:return S.push("</table>");case 7:return S.push("</tbody></table>");case 8:return S.push("</tr></table>");case 9:return S.push("</colgroup></table>");default:throw Error(i(397))}}var us=/[<\u2028\u2029]/g;function vi(S){return JSON.stringify(S).replace(us,function(C){switch(C){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var pn=/[&><\u2028\u2029]/g;function Ni(S){return JSON.stringify(S).replace(pn,function(C){switch(C){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var yn=!1,Ii=!0;function Fe(S){var C=S.rules,k=S.hrefs,G=0;if(k.length){for(this.push('<style media="not all" data-precedence="'),this.push(S.precedence),this.push('" data-href="');G<k.length-1;G++)this.push(k[G]),this.push(" ");for(this.push(k[G]),this.push('">'),G=0;G<C.length;G++)this.push(C[G]);Ii=this.push("</style>"),yn=!0,C.length=0,k.length=0}}function $n(S){return S.state!==2?yn=!0:!1}function Fn(S,C,k){return yn=!1,Ii=!0,C.styles.forEach(Fe,S),C.stylesheets.forEach($n),yn&&(k.stylesToHoist=!0),Ii}function Ee(S){for(var C=0;C<S.length;C++)this.push(S[C]);S.length=0}var xi=[];function Dr(S){qe(xi,S.props);for(var C=0;C<xi.length;C++)this.push(xi[C]);xi.length=0,S.state=2}function er(S){var C=0<S.sheets.size;S.sheets.forEach(Dr,this),S.sheets.clear();var k=S.rules,G=S.hrefs;if(!C||G.length){if(this.push('<style data-precedence="'),this.push(S.precedence),S=0,G.length){for(this.push('" data-href="');S<G.length-1;S++)this.push(G[S]),this.push(" ");this.push(G[S])}for(this.push('">'),S=0;S<k.length;S++)this.push(k[S]);this.push("</style>"),k.length=0,G.length=0}}function ci(S){if(S.state===0){S.state=1;var C=S.props;for(qe(xi,{rel:"preload",as:"style",href:S.props.href,crossOrigin:C.crossOrigin,fetchPriority:C.fetchPriority,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy}),S=0;S<xi.length;S++)this.push(xi[S]);xi.length=0}}function Fi(S){S.sheets.forEach(ci,this),S.sheets.clear()}function ts(S,C){S.push("[");var k="[";C.stylesheets.forEach(function(G){if(G.state!==2)if(G.state===3)S.push(k),G=Ni(""+G.props.href),S.push(G),S.push("]"),k=",[";else{S.push(k);var Q=G.props["data-precedence"],nt=G.props,mt=et(""+G.props.href);mt=Ni(mt),S.push(mt),Q=""+Q,S.push(","),Q=Ni(Q),S.push(Q);for(var Jt in nt)if(K.call(nt,Jt)&&(Q=nt[Jt],Q!=null))switch(Jt){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"link"));default:Bi(S,Jt,Q)}S.push("]"),k=",[",G.state=3}}),S.push("]")}function Bi(S,C,k){var G=C.toLowerCase();switch(typeof k){case"function":case"symbol":return}switch(C){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":G="class",C=""+k;break;case"hidden":if(k===!1)return;C="";break;case"src":case"href":k=et(k),C=""+k;break;default:if(2<C.length&&(C[0]==="o"||C[0]==="O")&&(C[1]==="n"||C[1]==="N")||!pt(C))return;C=""+k}S.push(","),G=Ni(G),S.push(G),S.push(","),G=Ni(C),S.push(G)}function Ss(){return{styles:new Set,stylesheets:new Set}}function tn(S){var C=hs||null;if(C){var k=C.resumableState,G=C.renderState;if(typeof S=="string"&&S){if(!k.dnsResources.hasOwnProperty(S)){k.dnsResources[S]=null,k=G.headers;var Q,nt;(nt=k&&0<k.remainingCapacity)&&(nt=(Q="<"+(""+S).replace(ut,yt)+">; rel=dns-prefetch",0<=(k.remainingCapacity-=Q.length+2))),nt?(G.resets.dns[S]=null,k.preconnects&&(k.preconnects+=", "),k.preconnects+=Q):(Q=[],qe(Q,{href:S,rel:"dns-prefetch"}),G.preconnects.add(Q))}Vo(C)}}else Xt.D(S)}function ro(S,C){var k=hs||null;if(k){var G=k.resumableState,Q=k.renderState;if(typeof S=="string"&&S){var nt=C==="use-credentials"?"credentials":typeof C=="string"?"anonymous":"default";if(!G.connectResources[nt].hasOwnProperty(S)){G.connectResources[nt][S]=null,G=Q.headers;var mt,Jt;if(Jt=G&&0<G.remainingCapacity){if(Jt="<"+(""+S).replace(ut,yt)+">; rel=preconnect",typeof C=="string"){var Pt=(""+C).replace(bt,vt);Jt+='; crossorigin="'+Pt+'"'}Jt=(mt=Jt,0<=(G.remainingCapacity-=mt.length+2))}Jt?(Q.resets.connect[nt][S]=null,G.preconnects&&(G.preconnects+=", "),G.preconnects+=mt):(nt=[],qe(nt,{rel:"preconnect",href:S,crossOrigin:C}),Q.preconnects.add(nt))}Vo(k)}}else Xt.C(S,C)}function oo(S,C,k){var G=hs||null;if(G){var Q=G.resumableState,nt=G.renderState;if(C&&S){switch(C){case"image":if(k)var mt=k.imageSrcSet,Jt=k.imageSizes,Pt=k.fetchPriority;var qt=mt?mt+`
`+(Jt||""):S;if(Q.imageResources.hasOwnProperty(qt))return;Q.imageResources[qt]=jt,Q=nt.headers;var xe;Q&&0<Q.remainingCapacity&&typeof mt!="string"&&Pt==="high"&&(xe=it(S,C,k),0<=(Q.remainingCapacity-=xe.length+2))?(nt.resets.image[qt]=jt,Q.highImagePreloads&&(Q.highImagePreloads+=", "),Q.highImagePreloads+=xe):(Q=[],qe(Q,Y({rel:"preload",href:mt?void 0:S,as:C},k)),Pt==="high"?nt.highImagePreloads.add(Q):(nt.bulkPreloads.add(Q),nt.preloads.images.set(qt,Q)));break;case"style":if(Q.styleResources.hasOwnProperty(S))return;mt=[],qe(mt,Y({rel:"preload",href:S,as:C},k)),Q.styleResources[S]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?jt:[k.crossOrigin,k.integrity],nt.preloads.stylesheets.set(S,mt),nt.bulkPreloads.add(mt);break;case"script":if(Q.scriptResources.hasOwnProperty(S))return;mt=[],nt.preloads.scripts.set(S,mt),nt.bulkPreloads.add(mt),qe(mt,Y({rel:"preload",href:S,as:C},k)),Q.scriptResources[S]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?jt:[k.crossOrigin,k.integrity];break;default:if(Q.unknownResources.hasOwnProperty(C)){if(mt=Q.unknownResources[C],mt.hasOwnProperty(S))return}else mt={},Q.unknownResources[C]=mt;if(mt[S]=jt,(Q=nt.headers)&&0<Q.remainingCapacity&&C==="font"&&(qt=it(S,C,k),0<=(Q.remainingCapacity-=qt.length+2)))nt.resets.font[S]=jt,Q.fontPreloads&&(Q.fontPreloads+=", "),Q.fontPreloads+=qt;else switch(Q=[],S=Y({rel:"preload",href:S,as:C},k),qe(Q,S),C){case"font":nt.fontPreloads.add(Q);break;default:nt.bulkPreloads.add(Q)}}Vo(G)}}else Xt.L(S,C,k)}function ir(S,C){var k=hs||null;if(k){var G=k.resumableState,Q=k.renderState;if(S){var nt=C&&typeof C.as=="string"?C.as:"script";switch(nt){case"script":if(G.moduleScriptResources.hasOwnProperty(S))return;nt=[],G.moduleScriptResources[S]=!C||typeof C.crossOrigin!="string"&&typeof C.integrity!="string"?jt:[C.crossOrigin,C.integrity],Q.preloads.moduleScripts.set(S,nt);break;default:if(G.moduleUnknownResources.hasOwnProperty(nt)){var mt=G.unknownResources[nt];if(mt.hasOwnProperty(S))return}else mt={},G.moduleUnknownResources[nt]=mt;nt=[],mt[S]=jt}qe(nt,Y({rel:"modulepreload",href:S},C)),Q.bulkPreloads.add(nt),Vo(k)}}else Xt.m(S,C)}function hr(S,C,k){var G=hs||null;if(G){var Q=G.resumableState,nt=G.renderState;if(S){C=C||"default";var mt=nt.styles.get(C),Jt=Q.styleResources.hasOwnProperty(S)?Q.styleResources[S]:void 0;Jt!==null&&(Q.styleResources[S]=null,mt||(mt={precedence:st(C),rules:[],hrefs:[],sheets:new Map},nt.styles.set(C,mt)),C={state:0,props:Y({rel:"stylesheet",href:S,"data-precedence":C},k)},Jt&&(Jt.length===2&&at(C.props,Jt),(nt=nt.preloads.stylesheets.get(S))&&0<nt.length?nt.length=0:C.state=1),mt.sheets.set(S,C),Vo(G))}}else Xt.S(S,C,k)}function en(S,C){var k=hs||null;if(k){var G=k.resumableState,Q=k.renderState;if(S){var nt=G.scriptResources.hasOwnProperty(S)?G.scriptResources[S]:void 0;nt!==null&&(G.scriptResources[S]=null,C=Y({src:S,async:!0},C),nt&&(nt.length===2&&at(C,nt),S=Q.preloads.scripts.get(S))&&(S.length=0),S=[],Q.scripts.add(S),ls(S,C),Vo(k))}}else Xt.X(S,C)}function ot(S,C){var k=hs||null;if(k){var G=k.resumableState,Q=k.renderState;if(S){var nt=G.moduleScriptResources.hasOwnProperty(S)?G.moduleScriptResources[S]:void 0;nt!==null&&(G.moduleScriptResources[S]=null,C=Y({src:S,type:"module",async:!0},C),nt&&(nt.length===2&&at(C,nt),S=Q.preloads.moduleScripts.get(S))&&(S.length=0),S=[],Q.scripts.add(S),ls(S,C),Vo(k))}}else Xt.M(S,C)}function at(S,C){S.crossOrigin==null&&(S.crossOrigin=C[0]),S.integrity==null&&(S.integrity=C[1])}function it(S,C,k){S=(""+S).replace(ut,yt),C=(""+C).replace(bt,vt),C="<"+S+'>; rel=preload; as="'+C+'"';for(var G in k)K.call(k,G)&&(S=k[G],typeof S=="string"&&(C+="; "+G.toLowerCase()+'="'+(""+S).replace(bt,vt)+'"'));return C}var ut=/[<>\r\n]/g;function yt(S){switch(S){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var bt=/["';,\r\n]/g;function vt(S){switch(S){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function St(S){this.styles.add(S)}function Tt(S){this.stylesheets.add(S)}function Wt(S,C){var k=S.idPrefix,G=[],Q=S.bootstrapScriptContent,nt=S.bootstrapScripts,mt=S.bootstrapModules;Q!==void 0&&G.push("<script>",(""+Q).replace(Ge,Se),"<\/script>"),Q=k+"P:";var Jt=k+"S:";k+="B:";var Pt=Gt(),qt=new Set,xe=new Set,pe=new Set,De=new Map,Qe=new Set,Ve=new Set,ii=new Set,mi={images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map};if(nt!==void 0)for(var Pi=0;Pi<nt.length;Pi++){var Qi=nt[Pi],nn,Ye=void 0,Sn=void 0,pi={rel:"preload",as:"script",fetchPriority:"low",nonce:void 0};typeof Qi=="string"?pi.href=nn=Qi:(pi.href=nn=Qi.src,pi.integrity=Sn=typeof Qi.integrity=="string"?Qi.integrity:void 0,pi.crossOrigin=Ye=typeof Qi=="string"||Qi.crossOrigin==null?void 0:Qi.crossOrigin==="use-credentials"?"use-credentials":""),Qi=S;var vn=nn;Qi.scriptResources[vn]=null,Qi.moduleScriptResources[vn]=null,Qi=[],qe(Qi,pi),Qe.add(Qi),G.push('<script src="',st(nn)),typeof Sn=="string"&&G.push('" integrity="',st(Sn)),typeof Ye=="string"&&G.push('" crossorigin="',st(Ye)),G.push('" async=""><\/script>')}if(mt!==void 0)for(nt=0;nt<mt.length;nt++)pi=mt[nt],Ye=nn=void 0,Sn={rel:"modulepreload",fetchPriority:"low",nonce:void 0},typeof pi=="string"?Sn.href=Pi=pi:(Sn.href=Pi=pi.src,Sn.integrity=Ye=typeof pi.integrity=="string"?pi.integrity:void 0,Sn.crossOrigin=nn=typeof pi=="string"||pi.crossOrigin==null?void 0:pi.crossOrigin==="use-credentials"?"use-credentials":""),pi=S,Qi=Pi,pi.scriptResources[Qi]=null,pi.moduleScriptResources[Qi]=null,pi=[],qe(pi,Sn),Qe.add(pi),G.push('<script type="module" src="',st(Pi)),typeof Ye=="string"&&G.push('" integrity="',st(Ye)),typeof nn=="string"&&G.push('" crossorigin="',st(nn)),G.push('" async=""><\/script>');return{placeholderPrefix:Q,segmentPrefix:Jt,boundaryPrefix:k,startInlineScript:"<script>",preamble:Pt,externalRuntimeScript:null,bootstrapChunks:G,importMapChunks:[],onHeaders:void 0,headers:null,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:qt,fontPreloads:xe,highImagePreloads:pe,styles:De,bootstrapScripts:Qe,scripts:Ve,bulkPreloads:ii,preloads:mi,stylesToHoist:!1,generateStaticMarkup:C}}function wt(S,C,k,G){return k.generateStaticMarkup?(S.push(st(C)),!1):(C===""?S=G:(G&&S.push("<!-- -->"),S.push(st(C)),S=!0),S)}function Nt(S,C,k,G){C.generateStaticMarkup||k&&G&&S.push("<!-- -->")}var Ft=Function.prototype.bind,te=Symbol.for("react.client.reference");function Ot(S){if(S==null)return null;if(typeof S=="function")return S.$$typeof===te?null:S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case r:return"Fragment";case u:return"Profiler";case a:return"StrictMode";case m:return"Suspense";case v:return"SuspenseList";case N:return"Activity"}if(typeof S=="object")switch(S.$$typeof){case s:return"Portal";case g:return(S.displayName||"Context")+".Provider";case c:return(S._context.displayName||"Context")+".Consumer";case _:var C=S.render;return S=S.displayName,S||(S=C.displayName||C.name||"",S=S!==""?"ForwardRef("+S+")":"ForwardRef"),S;case b:return C=S.displayName||null,C!==null?C:Ot(S.type)||"Memo";case x:C=S._payload,S=S._init;try{return Ot(S(C))}catch{}}return null}var oe={},he=null;function Kt(S,C){if(S!==C){S.context._currentValue2=S.parentValue,S=S.parent;var k=C.parent;if(S===null){if(k!==null)throw Error(i(401))}else{if(k===null)throw Error(i(401));Kt(S,k)}C.context._currentValue2=C.value}}function le(S){S.context._currentValue2=S.parentValue,S=S.parent,S!==null&&le(S)}function ge(S){var C=S.parent;C!==null&&ge(C),S.context._currentValue2=S.value}function ue(S,C){if(S.context._currentValue2=S.parentValue,S=S.parent,S===null)throw Error(i(402));S.depth===C.depth?Kt(S,C):ue(S,C)}function _e(S,C){var k=C.parent;if(k===null)throw Error(i(402));S.depth===k.depth?Kt(S,k):_e(S,k),C.context._currentValue2=C.value}function me(S){var C=he;C!==S&&(C===null?ge(S):S===null?le(C):C.depth===S.depth?Kt(C,S):C.depth>S.depth?ue(C,S):_e(C,S),he=S)}var Te={enqueueSetState:function(S,C){S=S._reactInternals,S.queue!==null&&S.queue.push(C)},enqueueReplaceState:function(S,C){S=S._reactInternals,S.replace=!0,S.queue=[C]},enqueueForceUpdate:function(){}},Ie={id:1,overflow:""};function Le(S,C,k){var G=S.id;S=S.overflow;var Q=32-We(G)-1;G&=~(1<<Q),k+=1;var nt=32-We(C)+Q;if(30<nt){var mt=Q-Q%5;return nt=(G&(1<<mt)-1).toString(32),G>>=mt,Q-=mt,{id:1<<32-We(C)+Q|k<<Q|G,overflow:nt+S}}return{id:1<<nt|k<<Q|G,overflow:S}}var We=Math.clz32?Math.clz32:Si,$e=Math.log,Ei=Math.LN2;function Si(S){return S>>>=0,S===0?32:31-($e(S)/Ei|0)|0}var ui=Error(i(460));function Zi(){}function En(S,C,k){switch(k=S[k],k===void 0?S.push(C):k!==C&&(C.then(Zi,Zi),C=k),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Zi,Zi):(S=C,S.status="pending",S.then(function(G){if(C.status==="pending"){var Q=C;Q.status="fulfilled",Q.value=G}},function(G){if(C.status==="pending"){var Q=C;Q.status="rejected",Q.reason=G}})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}throw Wi=C,ui}}var Wi=null;function Vi(){if(Wi===null)throw Error(i(459));var S=Wi;return Wi=null,S}function hn(S,C){return S===C&&(S!==0||1/S===1/C)||S!==S&&C!==C}var Nn=typeof Object.is=="function"?Object.is:hn,Ai=null,vs=null,Ao=null,Pe=null,dn=null,Me=null,rn=!1,qi=!1,Ri=0,cn=0,Bn=-1,Ys=0,Xs=null,Ui=null,As=0;function xr(){if(Ai===null)throw Error(i(321));return Ai}function Ts(){if(0<As)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function ao(){return Me===null?dn===null?(rn=!1,dn=Me=Ts()):(rn=!0,Me=dn):Me.next===null?(rn=!1,Me=Me.next=Ts()):(rn=!0,Me=Me.next),Me}function kr(){var S=Xs;return Xs=null,S}function br(){Pe=Ao=vs=Ai=null,qi=!1,dn=null,As=0,Me=Ui=null}function Mu(S,C){return typeof C=="function"?C(S):C}function za(S,C,k){if(Ai=xr(),Me=ao(),rn){var G=Me.queue;if(C=G.dispatch,Ui!==null&&(k=Ui.get(G),k!==void 0)){Ui.delete(G),G=Me.memoizedState;do G=S(G,k.action),k=k.next;while(k!==null);return Me.memoizedState=G,[G,C]}return[Me.memoizedState,C]}return S=S===Mu?typeof C=="function"?C():C:k!==void 0?k(C):C,Me.memoizedState=S,S=Me.queue={last:null,dispatch:null},S=S.dispatch=Da.bind(null,Ai,S),[Me.memoizedState,S]}function _i(S,C){if(Ai=xr(),Me=ao(),C=C===void 0?null:C,Me!==null){var k=Me.memoizedState;if(k!==null&&C!==null){var G=k[1];t:if(G===null)G=!1;else{for(var Q=0;Q<G.length&&Q<C.length;Q++)if(!Nn(C[Q],G[Q])){G=!1;break t}G=!0}if(G)return k[0]}}return S=S(),Me.memoizedState=[S,C],S}function Da(S,C,k){if(25<=As)throw Error(i(301));if(S===Ai)if(qi=!0,S={action:k,next:null},Ui===null&&(Ui=new Map),k=Ui.get(C),k===void 0)Ui.set(C,S);else{for(C=k;C.next!==null;)C=C.next;C.next=S}}function Zs(){throw Error(i(394))}function ha(){throw Error(i(479))}function Vl(S,C,k){xr();var G=cn++,Q=Ao;if(typeof S.$$FORM_ACTION=="function"){var nt=null,mt=Pe;Q=Q.formState;var Jt=S.$$IS_SIGNATURE_EQUAL;if(Q!==null&&typeof Jt=="function"){var Pt=Q[1];Jt.call(S,Q[2],Q[3])&&(nt=k!==void 0?"p"+k:"k"+V(JSON.stringify([mt,null,G]),0),Pt===nt&&(Bn=G,C=Q[0]))}var qt=S.bind(null,C);return S=function(pe){qt(pe)},typeof qt.$$FORM_ACTION=="function"&&(S.$$FORM_ACTION=function(pe){pe=qt.$$FORM_ACTION(pe),k!==void 0&&(k+="",pe.action=k);var De=pe.data;return De&&(nt===null&&(nt=k!==void 0?"p"+k:"k"+V(JSON.stringify([mt,null,G]),0)),De.append("$ACTION_KEY",nt)),pe}),[C,S,!1]}var xe=S.bind(null,C);return[C,function(pe){xe(pe)},!1]}function Nu(S){var C=Ys;return Ys+=1,Xs===null&&(Xs=[]),En(Xs,S,C)}function Yl(){throw Error(i(393))}function ko(){}var Xl={readContext:function(S){return S._currentValue2},use:function(S){if(S!==null&&typeof S=="object"){if(typeof S.then=="function")return Nu(S);if(S.$$typeof===g)return S._currentValue2}throw Error(i(438,String(S)))},useContext:function(S){return xr(),S._currentValue2},useMemo:_i,useReducer:za,useRef:function(S){Ai=xr(),Me=ao();var C=Me.memoizedState;return C===null?(S={current:S},Me.memoizedState=S):C},useState:function(S){return za(Mu,S)},useInsertionEffect:ko,useLayoutEffect:ko,useCallback:function(S,C){return _i(function(){return S},C)},useImperativeHandle:ko,useEffect:ko,useDebugValue:ko,useDeferredValue:function(S,C){return xr(),C!==void 0?C:S},useTransition:function(){return xr(),[!1,Zs]},useId:function(){var S=vs.treeContext,C=S.overflow;S=S.id,S=(S&~(1<<32-We(S)-1)).toString(32)+C;var k=cl;if(k===null)throw Error(i(404));return C=Ri++,S=""+k.idPrefix+"R"+S,0<C&&(S+="H"+C.toString(32)),S+""},useSyncExternalStore:function(S,C,k){if(k===void 0)throw Error(i(407));return k()},useOptimistic:function(S){return xr(),[S,ha]},useActionState:Vl,useFormState:Vl,useHostTransitionStatus:function(){return xr(),At},useMemoCache:function(S){for(var C=Array(S),k=0;k<S;k++)C[k]=R;return C},useCacheRefresh:function(){return Yl}},cl=null,wh={getCacheForType:function(){throw Error(i(248))}},ka,Ru;function ws(S){if(ka===void 0)try{throw Error()}catch(k){var C=k.stack.trim().match(/\n( *(at )?)/);ka=C&&C[1]||"",Ru=-1<k.stack.indexOf(`
    at`)?" (<anonymous>)":-1<k.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+S+Ru}var Zl=!1;function Fa(S,C){if(!S||Zl)return"";Zl=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var G={DetermineComponentFrameRoot:function(){try{if(C){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(Qe){var De=Qe}Reflect.construct(S,[],pe)}else{try{pe.call()}catch(Qe){De=Qe}S.call(pe.prototype)}}else{try{throw Error()}catch(Qe){De=Qe}(pe=S())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(Qe){if(Qe&&De&&typeof Qe.stack=="string")return[Qe.stack,De.stack]}return[null,null]}};G.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(G.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(G.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var nt=G.DetermineComponentFrameRoot(),mt=nt[0],Jt=nt[1];if(mt&&Jt){var Pt=mt.split(`
`),qt=Jt.split(`
`);for(Q=G=0;G<Pt.length&&!Pt[G].includes("DetermineComponentFrameRoot");)G++;for(;Q<qt.length&&!qt[Q].includes("DetermineComponentFrameRoot");)Q++;if(G===Pt.length||Q===qt.length)for(G=Pt.length-1,Q=qt.length-1;1<=G&&0<=Q&&Pt[G]!==qt[Q];)Q--;for(;1<=G&&0<=Q;G--,Q--)if(Pt[G]!==qt[Q]){if(G!==1||Q!==1)do if(G--,Q--,0>Q||Pt[G]!==qt[Q]){var xe=`
`+Pt[G].replace(" at new "," at ");return S.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",S.displayName)),xe}while(1<=G&&0<=Q);break}}}finally{Zl=!1,Error.prepareStackTrace=k}return(k=S?S.displayName||S.name:"")?ws(k):""}function lo(S){if(typeof S=="string")return ws(S);if(typeof S=="function")return S.prototype&&S.prototype.isReactComponent?Fa(S,!0):Fa(S,!1);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _:return Fa(S.render,!1);case b:return Fa(S.type,!1);case x:var C=S,k=C._payload;C=C._init;try{S=C(k)}catch{return ws("Lazy")}return lo(S)}if(typeof S.name=="string")return k=S.env,ws(S.name+(k?" ["+k+"]":""))}switch(S){case v:return ws("SuspenseList");case m:return ws("Suspense")}return""}function da(S){if(typeof S=="object"&&S!==null&&typeof S.environmentName=="string"){var C=S.environmentName;S=[S].slice(0),typeof S[0]=="string"?S.splice(0,1,"[%s] "+S[0]," "+C+" "):S.splice(0,0,"[%s] "," "+C+" "),S.unshift(console),C=Ft.apply(console.error,S),C()}else console.error(S);return null}function uo(){}function Wl(S,C,k,G,Q,nt,mt,Jt,Pt,qt,xe){var pe=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=S,this.renderState=C,this.rootFormatContext=k,this.progressiveChunkSize=G===void 0?12800:G,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.abortableTasks=pe,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=Q===void 0?da:Q,this.onPostpone=qt===void 0?uo:qt,this.onAllReady=nt===void 0?uo:nt,this.onShellReady=mt===void 0?uo:mt,this.onShellError=Jt===void 0?uo:Jt,this.onFatalError=Pt===void 0?uo:Pt,this.formState=xe===void 0?null:xe}function Lh(S,C,k,G,Q,nt,mt,Jt,Pt,qt,xe,pe){return C=new Wl(C,k,G,Q,nt,mt,Jt,Pt,qt,xe,pe),k=Uo(C,0,null,G,!1,!1),k.parentFlushed=!0,S=Ba(C,null,S,-1,null,k,null,null,C.abortableTasks,null,G,null,Ie,null,!1),xs(S),C.pingedTasks.push(S),C}var hs=null;function Fo(S,C){S.pingedTasks.push(C),S.pingedTasks.length===1&&(S.flushScheduled=S.destination!==null,Ho(S))}function Bo(S,C,k,G){return{status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,completedSegments:[],byteSize:0,fallbackAbortableTasks:C,errorDigest:null,contentState:Ss(),fallbackState:Ss(),contentPreamble:k,fallbackPreamble:G,trackedContentKeyPath:null,trackedFallbackNode:null}}function Ba(S,C,k,G,Q,nt,mt,Jt,Pt,qt,xe,pe,De,Qe,Ve){S.allPendingTasks++,Q===null?S.pendingRootTasks++:Q.pendingTasks++;var ii={replay:null,node:k,childIndex:G,ping:function(){return Fo(S,ii)},blockedBoundary:Q,blockedSegment:nt,blockedPreamble:mt,hoistableState:Jt,abortSet:Pt,keyPath:qt,formatContext:xe,context:pe,treeContext:De,componentStack:Qe,thenableState:C,isFallback:Ve};return Pt.add(ii),ii}function fl(S,C,k,G,Q,nt,mt,Jt,Pt,qt,xe,pe,De,Qe){S.allPendingTasks++,nt===null?S.pendingRootTasks++:nt.pendingTasks++,k.pendingTasks++;var Ve={replay:k,node:G,childIndex:Q,ping:function(){return Fo(S,Ve)},blockedBoundary:nt,blockedSegment:null,blockedPreamble:null,hoistableState:mt,abortSet:Jt,keyPath:Pt,formatContext:qt,context:xe,treeContext:pe,componentStack:De,thenableState:C,isFallback:Qe};return Jt.add(Ve),Ve}function Uo(S,C,k,G,Q,nt){return{status:0,parentFlushed:!1,id:-1,index:C,chunks:[],children:[],preambleChildren:[],parentFormatContext:G,boundary:k,lastPushedText:Q,textEmbedded:nt}}function xs(S){var C=S.node;if(typeof C=="object"&&C!==null)switch(C.$$typeof){case n:S.componentStack={parent:S.componentStack,type:C.type}}}function Ps(S){var C={};return S&&Object.defineProperty(C,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var k="",G=S;do k+=lo(G.type),G=G.parent;while(G);var Q=k}catch(nt){Q=`
Error generating stack: `+nt.message+`
`+nt.stack}return Object.defineProperty(C,"componentStack",{value:Q}),Q}}),C}function Ls(S,C,k){if(S=S.onError,C=S(C,k),C==null||typeof C=="string")return C}function Er(S,C){var k=S.onShellError,G=S.onFatalError;k(C),G(C),S.destination!==null?(S.status=14,S.destination.destroy(C)):(S.status=13,S.fatalError=C)}function Ou(S,C,k,G,Q,nt){var mt=C.thenableState;for(C.thenableState=null,Ai={},vs=C,Ao=S,Pe=k,cn=Ri=0,Bn=-1,Ys=0,Xs=mt,S=G(Q,nt);qi;)qi=!1,cn=Ri=0,Bn=-1,Ys=0,As+=1,Me=null,S=G(Q,nt);return br(),S}function ho(S,C,k,G,Q,nt,mt){var Jt=!1;if(nt!==0&&S.formState!==null){var Pt=C.blockedSegment;if(Pt!==null){Jt=!0,Pt=Pt.chunks;for(var qt=0;qt<nt;qt++)qt===mt?Pt.push("<!--F!-->"):Pt.push("<!--F-->")}}nt=C.keyPath,C.keyPath=k,Q?(k=C.treeContext,C.treeContext=Le(k,1,0),qs(S,C,G,-1),C.treeContext=k):Jt?qs(S,C,G,-1):Ws(S,C,G,-1),C.keyPath=nt}function es(S,C,k,G,Q,nt){if(typeof G=="function")if(G.prototype&&G.prototype.isReactComponent){var mt=Q;if("ref"in Q){mt={};for(var Jt in Q)Jt!=="ref"&&(mt[Jt]=Q[Jt])}var Pt=G.defaultProps;if(Pt){mt===Q&&(mt=Y({},mt,Q));for(var qt in Pt)mt[qt]===void 0&&(mt[qt]=Pt[qt])}Q=mt,mt=oe,Pt=G.contextType,typeof Pt=="object"&&Pt!==null&&(mt=Pt._currentValue2),mt=new G(Q,mt);var xe=mt.state!==void 0?mt.state:null;if(mt.updater=Te,mt.props=Q,mt.state=xe,Pt={queue:[],replace:!1},mt._reactInternals=Pt,nt=G.contextType,mt.context=typeof nt=="object"&&nt!==null?nt._currentValue2:oe,nt=G.getDerivedStateFromProps,typeof nt=="function"&&(nt=nt(Q,xe),xe=nt==null?xe:Y({},xe,nt),mt.state=xe),typeof G.getDerivedStateFromProps!="function"&&typeof mt.getSnapshotBeforeUpdate!="function"&&(typeof mt.UNSAFE_componentWillMount=="function"||typeof mt.componentWillMount=="function"))if(G=mt.state,typeof mt.componentWillMount=="function"&&mt.componentWillMount(),typeof mt.UNSAFE_componentWillMount=="function"&&mt.UNSAFE_componentWillMount(),G!==mt.state&&Te.enqueueReplaceState(mt,mt.state,null),Pt.queue!==null&&0<Pt.queue.length)if(G=Pt.queue,nt=Pt.replace,Pt.queue=null,Pt.replace=!1,nt&&G.length===1)mt.state=G[0];else{for(Pt=nt?G[0]:mt.state,xe=!0,nt=nt?1:0;nt<G.length;nt++)qt=G[nt],qt=typeof qt=="function"?qt.call(mt,Pt,Q,void 0):qt,qt!=null&&(xe?(xe=!1,Pt=Y({},Pt,qt)):Y(Pt,qt));mt.state=Pt}else Pt.queue=null;if(G=mt.render(),S.status===12)throw null;Q=C.keyPath,C.keyPath=k,Ws(S,C,G,-1),C.keyPath=Q}else{if(G=Ou(S,C,k,G,Q,void 0),S.status===12)throw null;ho(S,C,k,G,Ri!==0,cn,Bn)}else if(typeof G=="string")if(mt=C.blockedSegment,mt===null)mt=Q.children,Pt=C.formatContext,xe=C.keyPath,C.formatContext=kt(Pt,G,Q),C.keyPath=k,qs(S,C,mt,-1),C.formatContext=Pt,C.keyPath=xe;else{nt=gi(mt.chunks,G,Q,S.resumableState,S.renderState,C.blockedPreamble,C.hoistableState,C.formatContext,mt.lastPushedText,C.isFallback),mt.lastPushedText=!1,Pt=C.formatContext,xe=C.keyPath,C.keyPath=k,(C.formatContext=kt(Pt,G,Q)).insertionMode===3?(k=Uo(S,0,null,C.formatContext,!1,!1),mt.preambleChildren.push(k),k=Ba(S,null,nt,-1,C.blockedBoundary,k,C.blockedPreamble,C.hoistableState,S.abortableTasks,C.keyPath,C.formatContext,C.context,C.treeContext,C.componentStack,C.isFallback),xs(k),S.pingedTasks.push(k)):qs(S,C,nt,-1),C.formatContext=Pt,C.keyPath=xe;t:{switch(C=mt.chunks,S=S.resumableState,G){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break t;case"body":if(1>=Pt.insertionMode){S.hasBody=!0;break t}break;case"html":if(Pt.insertionMode===0){S.hasHtml=!0;break t}break;case"head":if(1>=Pt.insertionMode)break t}C.push(ys(G))}mt.lastPushedText=!1}else{switch(G){case O:case a:case u:case r:G=C.keyPath,C.keyPath=k,Ws(S,C,Q.children,-1),C.keyPath=G;return;case N:Q.mode!=="hidden"&&(G=C.keyPath,C.keyPath=k,Ws(S,C,Q.children,-1),C.keyPath=G);return;case v:G=C.keyPath,C.keyPath=k,Ws(S,C,Q.children,-1),C.keyPath=G;return;case P:case M:throw Error(i(343));case m:t:if(C.replay!==null){G=C.keyPath,C.keyPath=k,k=Q.children;try{qs(S,C,k,-1)}finally{C.keyPath=G}}else{G=C.keyPath;var pe=C.blockedBoundary;nt=C.blockedPreamble;var De=C.hoistableState;qt=C.blockedSegment,Jt=Q.fallback,Q=Q.children;var Qe=new Set,Ve=2>C.formatContext.insertionMode?Bo(S,Qe,Gt(),Gt()):Bo(S,Qe,null,null);S.trackedPostpones!==null&&(Ve.trackedContentKeyPath=k);var ii=Uo(S,qt.chunks.length,Ve,C.formatContext,!1,!1);qt.children.push(ii),qt.lastPushedText=!1;var mi=Uo(S,0,null,C.formatContext,!1,!1);if(mi.parentFlushed=!0,S.trackedPostpones!==null){mt=[k[0],"Suspense Fallback",k[2]],Pt=[mt[1],mt[2],[],null],S.trackedPostpones.workingMap.set(mt,Pt),Ve.trackedFallbackNode=Pt,C.blockedSegment=ii,C.blockedPreamble=Ve.fallbackPreamble,C.keyPath=mt,ii.status=6;try{qs(S,C,Jt,-1),Nt(ii.chunks,S.renderState,ii.lastPushedText,ii.textEmbedded),ii.status=1}catch(Pi){throw ii.status=S.status===12?3:4,Pi}finally{C.blockedSegment=qt,C.blockedPreamble=nt,C.keyPath=G}C=Ba(S,null,Q,-1,Ve,mi,Ve.contentPreamble,Ve.contentState,C.abortSet,k,C.formatContext,C.context,C.treeContext,C.componentStack,C.isFallback),xs(C),S.pingedTasks.push(C)}else{C.blockedBoundary=Ve,C.blockedPreamble=Ve.contentPreamble,C.hoistableState=Ve.contentState,C.blockedSegment=mi,C.keyPath=k,mi.status=6;try{if(qs(S,C,Q,-1),Nt(mi.chunks,S.renderState,mi.lastPushedText,mi.textEmbedded),mi.status=1,Fr(Ve,mi),Ve.pendingTasks===0&&Ve.status===0){Ve.status=1,S.pendingRootTasks===0&&C.blockedPreamble&&Br(S);break t}}catch(Pi){Ve.status=4,S.status===12?(mi.status=3,mt=S.fatalError):(mi.status=4,mt=Pi),Pt=Ps(C.componentStack),xe=Ls(S,mt,Pt),Ve.errorDigest=xe,Go(S,Ve)}finally{C.blockedBoundary=pe,C.blockedPreamble=nt,C.hoistableState=De,C.blockedSegment=qt,C.keyPath=G}C=Ba(S,null,Jt,-1,pe,ii,Ve.fallbackPreamble,Ve.fallbackState,Qe,[k[0],"Suspense Fallback",k[2]],C.formatContext,C.context,C.treeContext,C.componentStack,!0),xs(C),S.pingedTasks.push(C)}}return}if(typeof G=="object"&&G!==null)switch(G.$$typeof){case _:if("ref"in Q)for(Ve in mt={},Q)Ve!=="ref"&&(mt[Ve]=Q[Ve]);else mt=Q;G=Ou(S,C,k,G.render,mt,nt),ho(S,C,k,G,Ri!==0,cn,Bn);return;case b:es(S,C,k,G.type,Q,nt);return;case h:case g:if(Pt=Q.children,mt=C.keyPath,Q=Q.value,xe=G._currentValue2,G._currentValue2=Q,nt=he,he=G={parent:nt,depth:nt===null?0:nt.depth+1,context:G,parentValue:xe,value:Q},C.context=G,C.keyPath=k,Ws(S,C,Pt,-1),S=he,S===null)throw Error(i(403));S.context._currentValue2=S.parentValue,S=he=S.parent,C.context=S,C.keyPath=mt;return;case c:Q=Q.children,G=Q(G._context._currentValue2),Q=C.keyPath,C.keyPath=k,Ws(S,C,G,-1),C.keyPath=Q;return;case x:if(mt=G._init,G=mt(G._payload),S.status===12)throw null;es(S,C,k,G,Q,nt);return}throw Error(i(130,G==null?G:typeof G,""))}}function gl(S,C,k,G,Q){var nt=C.replay,mt=C.blockedBoundary,Jt=Uo(S,0,null,C.formatContext,!1,!1);Jt.id=k,Jt.parentFlushed=!0;try{C.replay=null,C.blockedSegment=Jt,qs(S,C,G,Q),Jt.status=1,mt===null?S.completedRootSegment=Jt:(Fr(mt,Jt),mt.parentFlushed&&S.partialBoundaries.push(mt))}finally{C.replay=nt,C.blockedSegment=null}}function Ws(S,C,k,G){C.replay!==null&&typeof C.replay.slots=="number"?gl(S,C,C.replay.slots,k,G):(C.node=k,C.childIndex=G,k=C.componentStack,xs(C),_l(S,C),C.componentStack=k)}function _l(S,C){var k=C.node,G=C.childIndex;if(k!==null){if(typeof k=="object"){switch(k.$$typeof){case n:var Q=k.type,nt=k.key,mt=k.props;k=mt.ref;var Jt=k!==void 0?k:null,Pt=Ot(Q),qt=nt??(G===-1?0:G);if(nt=[C.keyPath,Pt,qt],C.replay!==null)t:{var xe=C.replay;for(G=xe.nodes,k=0;k<G.length;k++){var pe=G[k];if(qt===pe[1]){if(pe.length===4){if(Pt!==null&&Pt!==pe[0])throw Error(i(490,pe[0],Pt));var De=pe[2];Pt=pe[3],qt=C.node,C.replay={nodes:De,slots:Pt,pendingTasks:1};try{if(es(S,C,nt,Q,mt,Jt),C.replay.pendingTasks===1&&0<C.replay.nodes.length)throw Error(i(488));C.replay.pendingTasks--}catch(Ye){if(typeof Ye=="object"&&Ye!==null&&(Ye===ui||typeof Ye.then=="function"))throw C.node===qt&&(C.replay=xe),Ye;C.replay.pendingTasks--,mt=Ps(C.componentStack),nt=C.blockedBoundary,Q=Ye,mt=Ls(S,Q,mt),zs(S,nt,De,Pt,Q,mt)}C.replay=xe}else{if(Q!==m)throw Error(i(490,"Suspense",Ot(Q)||"Unknown"));e:{xe=void 0,Q=pe[5],Jt=pe[2],Pt=pe[3],qt=pe[4]===null?[]:pe[4][2],pe=pe[4]===null?null:pe[4][3];var Qe=C.keyPath,Ve=C.replay,ii=C.blockedBoundary,mi=C.hoistableState,Pi=mt.children,Qi=mt.fallback,nn=new Set;mt=2>C.formatContext.insertionMode?Bo(S,nn,Gt(),Gt()):Bo(S,nn,null,null),mt.parentFlushed=!0,mt.rootSegmentID=Q,C.blockedBoundary=mt,C.hoistableState=mt.contentState,C.keyPath=nt,C.replay={nodes:Jt,slots:Pt,pendingTasks:1};try{if(qs(S,C,Pi,-1),C.replay.pendingTasks===1&&0<C.replay.nodes.length)throw Error(i(488));if(C.replay.pendingTasks--,mt.pendingTasks===0&&mt.status===0){mt.status=1,S.completedBoundaries.push(mt);break e}}catch(Ye){mt.status=4,De=Ps(C.componentStack),xe=Ls(S,Ye,De),mt.errorDigest=xe,C.replay.pendingTasks--,S.clientRenderedBoundaries.push(mt)}finally{C.blockedBoundary=ii,C.hoistableState=mi,C.replay=Ve,C.keyPath=Qe}C=fl(S,null,{nodes:qt,slots:pe,pendingTasks:0},Qi,-1,ii,mt.fallbackState,nn,[nt[0],"Suspense Fallback",nt[2]],C.formatContext,C.context,C.treeContext,C.componentStack,!0),xs(C),S.pingedTasks.push(C)}}G.splice(k,1);break t}}}else es(S,C,nt,Q,mt,Jt);return;case s:throw Error(i(257));case x:if(De=k._init,k=De(k._payload),S.status===12)throw null;Ws(S,C,k,G);return}if(U(k)){ca(S,C,k,G);return}if(k===null||typeof k!="object"?De=null:(De=F&&k[F]||k["@@iterator"],De=typeof De=="function"?De:null),De&&(De=De.call(k))){if(k=De.next(),!k.done){mt=[];do mt.push(k.value),k=De.next();while(!k.done);ca(S,C,mt,G)}return}if(typeof k.then=="function")return C.thenableState=null,Ws(S,C,Nu(k),G);if(k.$$typeof===g)return Ws(S,C,k._currentValue2,G);throw G=Object.prototype.toString.call(k),Error(i(31,G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G))}typeof k=="string"?(G=C.blockedSegment,G!==null&&(G.lastPushedText=wt(G.chunks,k,S.renderState,G.lastPushedText))):(typeof k=="number"||typeof k=="bigint")&&(G=C.blockedSegment,G!==null&&(G.lastPushedText=wt(G.chunks,""+k,S.renderState,G.lastPushedText)))}}function ca(S,C,k,G){var Q=C.keyPath;if(G!==-1&&(C.keyPath=[C.keyPath,"Fragment",G],C.replay!==null)){for(var nt=C.replay,mt=nt.nodes,Jt=0;Jt<mt.length;Jt++){var Pt=mt[Jt];if(Pt[1]===G){G=Pt[2],Pt=Pt[3],C.replay={nodes:G,slots:Pt,pendingTasks:1};try{if(ca(S,C,k,-1),C.replay.pendingTasks===1&&0<C.replay.nodes.length)throw Error(i(488));C.replay.pendingTasks--}catch(pe){if(typeof pe=="object"&&pe!==null&&(pe===ui||typeof pe.then=="function"))throw pe;C.replay.pendingTasks--,k=Ps(C.componentStack);var qt=C.blockedBoundary,xe=pe;k=Ls(S,xe,k),zs(S,qt,G,Pt,xe,k)}C.replay=nt,mt.splice(Jt,1);break}}C.keyPath=Q;return}if(nt=C.treeContext,mt=k.length,C.replay!==null&&(Jt=C.replay.slots,Jt!==null&&typeof Jt=="object")){for(G=0;G<mt;G++)Pt=k[G],C.treeContext=Le(nt,mt,G),qt=Jt[G],typeof qt=="number"?(gl(S,C,qt,Pt,G),delete Jt[G]):qs(S,C,Pt,G);C.treeContext=nt,C.keyPath=Q;return}for(Jt=0;Jt<mt;Jt++)G=k[Jt],C.treeContext=Le(nt,mt,Jt),qs(S,C,G,Jt);C.treeContext=nt,C.keyPath=Q}function Go(S,C){S=S.trackedPostpones,S!==null&&(C=C.trackedContentKeyPath,C!==null&&(C=S.workingMap.get(C),C!==void 0&&(C.length=4,C[2]=[],C[3]=null)))}function ml(S,C,k){return fl(S,k,C.replay,C.node,C.childIndex,C.blockedBoundary,C.hoistableState,C.abortSet,C.keyPath,C.formatContext,C.context,C.treeContext,C.componentStack,C.isFallback)}function co(S,C,k){var G=C.blockedSegment,Q=Uo(S,G.chunks.length,null,C.formatContext,G.lastPushedText,!0);return G.children.push(Q),G.lastPushedText=!1,Ba(S,k,C.node,C.childIndex,C.blockedBoundary,Q,C.blockedPreamble,C.hoistableState,C.abortSet,C.keyPath,C.formatContext,C.context,C.treeContext,C.componentStack,C.isFallback)}function qs(S,C,k,G){var Q=C.formatContext,nt=C.context,mt=C.keyPath,Jt=C.treeContext,Pt=C.componentStack,qt=C.blockedSegment;if(qt===null)try{return Ws(S,C,k,G)}catch(De){if(br(),k=De===ui?Vi():De,typeof k=="object"&&k!==null){if(typeof k.then=="function"){G=kr(),S=ml(S,C,G).ping,k.then(S,S),C.formatContext=Q,C.context=nt,C.keyPath=mt,C.treeContext=Jt,C.componentStack=Pt,me(nt);return}if(k.message==="Maximum call stack size exceeded"){k=kr(),k=ml(S,C,k),S.pingedTasks.push(k),C.formatContext=Q,C.context=nt,C.keyPath=mt,C.treeContext=Jt,C.componentStack=Pt,me(nt);return}}}else{var xe=qt.children.length,pe=qt.chunks.length;try{return Ws(S,C,k,G)}catch(De){if(br(),qt.children.length=xe,qt.chunks.length=pe,k=De===ui?Vi():De,typeof k=="object"&&k!==null){if(typeof k.then=="function"){G=kr(),S=co(S,C,G).ping,k.then(S,S),C.formatContext=Q,C.context=nt,C.keyPath=mt,C.treeContext=Jt,C.componentStack=Pt,me(nt);return}if(k.message==="Maximum call stack size exceeded"){k=kr(),k=co(S,C,k),S.pingedTasks.push(k),C.formatContext=Q,C.context=nt,C.keyPath=mt,C.treeContext=Jt,C.componentStack=Pt,me(nt);return}}}}throw C.formatContext=Q,C.context=nt,C.keyPath=mt,C.treeContext=Jt,me(nt),k}function Ch(S){var C=S.blockedBoundary;S=S.blockedSegment,S!==null&&(S.status=3,fa(this,C,S))}function zs(S,C,k,G,Q,nt){for(var mt=0;mt<k.length;mt++){var Jt=k[mt];if(Jt.length===4)zs(S,C,Jt[2],Jt[3],Q,nt);else{Jt=Jt[5];var Pt=S,qt=nt,xe=Bo(Pt,new Set,null,null);xe.parentFlushed=!0,xe.rootSegmentID=Jt,xe.status=4,xe.errorDigest=qt,xe.parentFlushed&&Pt.clientRenderedBoundaries.push(xe)}}if(k.length=0,G!==null){if(C===null)throw Error(i(487));if(C.status!==4&&(C.status=4,C.errorDigest=nt,C.parentFlushed&&S.clientRenderedBoundaries.push(C)),typeof G=="object")for(var pe in G)delete G[pe]}}function fo(S,C,k){var G=S.blockedBoundary,Q=S.blockedSegment;if(Q!==null){if(Q.status===6)return;Q.status=3}if(Q=Ps(S.componentStack),G===null){if(C.status!==13&&C.status!==14){if(G=S.replay,G===null){Ls(C,k,Q),Er(C,k);return}G.pendingTasks--,G.pendingTasks===0&&0<G.nodes.length&&(S=Ls(C,k,Q),zs(C,null,G.nodes,G.slots,k,S)),C.pendingRootTasks--,C.pendingRootTasks===0&&Ds(C)}}else G.pendingTasks--,G.status!==4&&(G.status=4,S=Ls(C,k,Q),G.status=4,G.errorDigest=S,Go(C,G),G.parentFlushed&&C.clientRenderedBoundaries.push(G)),G.fallbackAbortableTasks.forEach(function(nt){return fo(nt,C,k)}),G.fallbackAbortableTasks.clear();C.allPendingTasks--,C.allPendingTasks===0&&To(C)}function pl(S,C){try{var k=S.renderState,G=k.onHeaders;if(G){var Q=k.headers;if(Q){k.headers=null;var nt=Q.preconnects;if(Q.fontPreloads&&(nt&&(nt+=", "),nt+=Q.fontPreloads),Q.highImagePreloads&&(nt&&(nt+=", "),nt+=Q.highImagePreloads),!C){var mt=k.styles.values(),Jt=mt.next();t:for(;0<Q.remainingCapacity&&!Jt.done;Jt=mt.next())for(var Pt=Jt.value.sheets.values(),qt=Pt.next();0<Q.remainingCapacity&&!qt.done;qt=Pt.next()){var xe=qt.value,pe=xe.props,De=pe.href,Qe=xe.props,Ve=it(Qe.href,"style",{crossOrigin:Qe.crossOrigin,integrity:Qe.integrity,nonce:Qe.nonce,type:Qe.type,fetchPriority:Qe.fetchPriority,referrerPolicy:Qe.referrerPolicy,media:Qe.media});if(0<=(Q.remainingCapacity-=Ve.length+2))k.resets.style[De]=jt,nt&&(nt+=", "),nt+=Ve,k.resets.style[De]=typeof pe.crossOrigin=="string"||typeof pe.integrity=="string"?[pe.crossOrigin,pe.integrity]:jt;else break t}}G(nt?{Link:nt}:{})}}}catch(ii){Ls(S,ii,{})}}function Ds(S){S.trackedPostpones===null&&pl(S,!0),S.trackedPostpones===null&&Br(S),S.onShellError=uo,S=S.onShellReady,S()}function To(S){pl(S,S.trackedPostpones===null?!0:S.completedRootSegment===null||S.completedRootSegment.status!==5),Br(S),S=S.onAllReady,S()}function Fr(S,C){if(C.chunks.length===0&&C.children.length===1&&C.children[0].boundary===null&&C.children[0].id===-1){var k=C.children[0];k.id=C.id,k.parentFlushed=!0,k.status===1&&Fr(S,k)}else S.completedSegments.push(C)}function fa(S,C,k){if(C===null){if(k!==null&&k.parentFlushed){if(S.completedRootSegment!==null)throw Error(i(389));S.completedRootSegment=k}S.pendingRootTasks--,S.pendingRootTasks===0&&Ds(S)}else C.pendingTasks--,C.status!==4&&(C.pendingTasks===0?(C.status===0&&(C.status=1),k!==null&&k.parentFlushed&&k.status===1&&Fr(C,k),C.parentFlushed&&S.completedBoundaries.push(C),C.status===1&&(C.fallbackAbortableTasks.forEach(Ch,S),C.fallbackAbortableTasks.clear(),S.pendingRootTasks===0&&S.trackedPostpones===null&&C.contentPreamble!==null&&Br(S))):k!==null&&k.parentFlushed&&k.status===1&&(Fr(C,k),C.completedSegments.length===1&&C.parentFlushed&&S.partialBoundaries.push(C)));S.allPendingTasks--,S.allPendingTasks===0&&To(S)}function Ho(S){if(S.status!==14&&S.status!==13){var C=he,k=Dt.H;Dt.H=Xl;var G=Dt.A;Dt.A=wh;var Q=hs;hs=S;var nt=cl;cl=S.resumableState;try{var mt=S.pingedTasks,Jt;for(Jt=0;Jt<mt.length;Jt++){var Pt=mt[Jt],qt=S,xe=Pt.blockedSegment;if(xe===null){var pe=qt;if(Pt.replay.pendingTasks!==0){me(Pt.context);try{if(typeof Pt.replay.slots=="number"?gl(pe,Pt,Pt.replay.slots,Pt.node,Pt.childIndex):_l(pe,Pt),Pt.replay.pendingTasks===1&&0<Pt.replay.nodes.length)throw Error(i(488));Pt.replay.pendingTasks--,Pt.abortSet.delete(Pt),fa(pe,Pt.blockedBoundary,null)}catch(Gi){br();var De=Gi===ui?Vi():Gi;if(typeof De=="object"&&De!==null&&typeof De.then=="function"){var Qe=Pt.ping;De.then(Qe,Qe),Pt.thenableState=kr()}else{Pt.replay.pendingTasks--,Pt.abortSet.delete(Pt);var Ve=Ps(Pt.componentStack);qt=void 0;var ii=pe,mi=Pt.blockedBoundary,Pi=pe.status===12?pe.fatalError:De,Qi=Pt.replay.nodes,nn=Pt.replay.slots;qt=Ls(ii,Pi,Ve),zs(ii,mi,Qi,nn,Pi,qt),pe.pendingRootTasks--,pe.pendingRootTasks===0&&Ds(pe),pe.allPendingTasks--,pe.allPendingTasks===0&&To(pe)}}finally{}}}else if(pe=void 0,ii=xe,ii.status===0){ii.status=6,me(Pt.context);var Ye=ii.children.length,Sn=ii.chunks.length;try{_l(qt,Pt),Nt(ii.chunks,qt.renderState,ii.lastPushedText,ii.textEmbedded),Pt.abortSet.delete(Pt),ii.status=1,fa(qt,Pt.blockedBoundary,ii)}catch(Gi){br(),ii.children.length=Ye,ii.chunks.length=Sn;var pi=Gi===ui?Vi():qt.status===12?qt.fatalError:Gi;if(typeof pi=="object"&&pi!==null&&typeof pi.then=="function"){ii.status=0,Pt.thenableState=kr();var vn=Pt.ping;pi.then(vn,vn)}else{var on=Ps(Pt.componentStack);Pt.abortSet.delete(Pt),ii.status=4;var Je=Pt.blockedBoundary;pe=Ls(qt,pi,on),Je===null?Er(qt,pi):(Je.pendingTasks--,Je.status!==4&&(Je.status=4,Je.errorDigest=pe,Go(qt,Je),Je.parentFlushed&&qt.clientRenderedBoundaries.push(Je),qt.pendingRootTasks===0&&qt.trackedPostpones===null&&Je.contentPreamble!==null&&Br(qt))),qt.allPendingTasks--,qt.allPendingTasks===0&&To(qt)}}finally{}}}mt.splice(0,Jt),S.destination!==null&&nr(S,S.destination)}catch(Gi){Ls(S,Gi,{}),Er(S,Gi)}finally{cl=nt,Dt.H=k,Dt.A=G,k===Xl&&me(C),hs=Q}}}function Ua(S,C,k){C.preambleChildren.length&&k.push(C.preambleChildren);for(var G=!1,Q=0;Q<C.children.length;Q++)G=Sr(S,C.children[Q],k)||G;return G}function Sr(S,C,k){var G=C.boundary;if(G===null)return Ua(S,C,k);var Q=G.contentPreamble,nt=G.fallbackPreamble;if(Q===null||nt===null)return!1;switch(G.status){case 1:if(Hi(S.renderState,Q),C=G.completedSegments[0],!C)throw Error(i(391));return Ua(S,C,k);case 5:if(S.trackedPostpones!==null)return!0;case 4:if(C.status===1)return Hi(S.renderState,nt),Ua(S,C,k);default:return!0}}function Br(S){if(S.completedRootSegment&&S.completedPreambleSegments===null){var C=[],k=Sr(S,S.completedRootSegment,C),G=S.renderState.preamble;(k===!1||G.headChunks&&G.bodyChunks)&&(S.completedPreambleSegments=C)}}function Qs(S,C,k,G){switch(k.parentFlushed=!0,k.status){case 0:k.id=S.nextSegmentId++;case 5:return G=k.id,k.lastPushedText=!1,k.textEmbedded=!1,S=S.renderState,C.push('<template id="'),C.push(S.placeholderPrefix),S=G.toString(16),C.push(S),C.push('"></template>');case 1:k.status=2;var Q=!0,nt=k.chunks,mt=0;k=k.children;for(var Jt=0;Jt<k.length;Jt++){for(Q=k[Jt];mt<Q.index;mt++)C.push(nt[mt]);Q=Ar(S,C,Q,G)}for(;mt<nt.length-1;mt++)C.push(nt[mt]);return mt<nt.length&&(Q=C.push(nt[mt])),Q;default:throw Error(i(390))}}function Ar(S,C,k,G){var Q=k.boundary;if(Q===null)return Qs(S,C,k,G);if(Q.parentFlushed=!0,Q.status===4){if(!S.renderState.generateStaticMarkup){var nt=Q.errorDigest;C.push("<!--$!-->"),C.push("<template"),nt&&(C.push(' data-dgst="'),nt=st(nt),C.push(nt),C.push('"')),C.push("></template>")}return Qs(S,C,k,G),S.renderState.generateStaticMarkup?C=!0:((S=Q.fallbackPreamble)&&zr(C,S),C=C.push("<!--/$-->")),C}if(Q.status!==1)return Q.status===0&&(Q.rootSegmentID=S.nextSegmentId++),0<Q.completedSegments.length&&S.partialBoundaries.push(Q),Mn(C,S.renderState,Q.rootSegmentID),G&&(Q=Q.fallbackState,Q.styles.forEach(St,G),Q.stylesheets.forEach(Tt,G)),Qs(S,C,k,G),C.push("<!--/$-->");if(Q.byteSize>S.progressiveChunkSize)return Q.rootSegmentID=S.nextSegmentId++,S.completedBoundaries.push(Q),Mn(C,S.renderState,Q.rootSegmentID),Qs(S,C,k,G),C.push("<!--/$-->");if(G&&(k=Q.contentState,k.styles.forEach(St,G),k.stylesheets.forEach(Tt,G)),S.renderState.generateStaticMarkup||C.push("<!--$-->"),k=Q.completedSegments,k.length!==1)throw Error(i(391));return Ar(S,C,k[0],G),S.renderState.generateStaticMarkup?C=!0:((S=Q.contentPreamble)&&zr(C,S),C=C.push("<!--/$-->")),C}function ga(S,C,k,G){return ur(C,S.renderState,k.parentFormatContext,k.id),Ar(S,C,k,G),Xi(C,k.parentFormatContext)}function _a(S,C,k){for(var G=k.completedSegments,Q=0;Q<G.length;Q++)ql(S,C,k,G[Q]);G.length=0,Fn(C,k.contentState,S.renderState),G=S.resumableState,S=S.renderState,Q=k.rootSegmentID,k=k.contentState;var nt=S.stylesToHoist;return S.stylesToHoist=!1,C.push(S.startInlineScript),nt?(G.instructions&2)===0?(G.instructions|=10,C.push(`$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RM=new Map;
$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?x.push(b):("LINK"===b.tagName&&p.set(b.getAttribute("href"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement("link");a.href=
d;a.rel="stylesheet";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute("media");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,
t,u,""),w.bind(null,t,u,"Resource failed to load"))};$RR("`)):(G.instructions&8)===0?(G.instructions|=8,C.push(`$RM=new Map;
$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?x.push(b):("LINK"===b.tagName&&p.set(b.getAttribute("href"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement("link");a.href=
d;a.rel="stylesheet";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute("media");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,
t,u,""),w.bind(null,t,u,"Resource failed to load"))};$RR("`)):C.push('$RR("'):(G.instructions&2)===0?(G.instructions|=2,C.push('$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RC("')):C.push('$RC("'),G=Q.toString(16),C.push(S.boundaryPrefix),C.push(G),C.push('","'),C.push(S.segmentPrefix),C.push(G),nt?(C.push('",'),ts(C,k)):C.push('"'),k=C.push(")<\/script>"),$i(C,S)&&k}function ql(S,C,k,G){if(G.status===2)return!0;var Q=k.contentState,nt=G.id;if(nt===-1){if((G.id=k.rootSegmentID)===-1)throw Error(i(392));return ga(S,C,G,Q)}return nt===k.rootSegmentID?ga(S,C,G,Q):(ga(S,C,G,Q),k=S.resumableState,S=S.renderState,C.push(S.startInlineScript),(k.instructions&1)===0?(k.instructions|=1,C.push('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')):C.push('$RS("'),C.push(S.segmentPrefix),nt=nt.toString(16),C.push(nt),C.push('","'),C.push(S.placeholderPrefix),C.push(nt),C=C.push('")<\/script>'),C)}function nr(S,C){try{if(!(0<S.pendingRootTasks)){var k,G=S.completedRootSegment;if(G!==null){if(G.status===5)return;var Q=S.completedPreambleSegments;if(Q===null)return;var nt=S.renderState,mt=nt.preamble,Jt=mt.htmlChunks,Pt=mt.headChunks,qt;if(Jt){for(qt=0;qt<Jt.length;qt++)C.push(Jt[qt]);if(Pt)for(qt=0;qt<Pt.length;qt++)C.push(Pt[qt]);else{var xe=di("head");C.push(xe),C.push(">")}}else if(Pt)for(qt=0;qt<Pt.length;qt++)C.push(Pt[qt]);var pe=nt.charsetChunks;for(qt=0;qt<pe.length;qt++)C.push(pe[qt]);pe.length=0,nt.preconnects.forEach(Ee,C),nt.preconnects.clear();var De=nt.viewportChunks;for(qt=0;qt<De.length;qt++)C.push(De[qt]);De.length=0,nt.fontPreloads.forEach(Ee,C),nt.fontPreloads.clear(),nt.highImagePreloads.forEach(Ee,C),nt.highImagePreloads.clear(),nt.styles.forEach(er,C);var Qe=nt.importMapChunks;for(qt=0;qt<Qe.length;qt++)C.push(Qe[qt]);Qe.length=0,nt.bootstrapScripts.forEach(Ee,C),nt.scripts.forEach(Ee,C),nt.scripts.clear(),nt.bulkPreloads.forEach(Ee,C),nt.bulkPreloads.clear();var Ve=nt.hoistableChunks;for(qt=0;qt<Ve.length;qt++)C.push(Ve[qt]);for(nt=Ve.length=0;nt<Q.length;nt++){var ii=Q[nt];for(mt=0;mt<ii.length;mt++)Ar(S,C,ii[mt],null)}var mi=S.renderState.preamble,Pi=mi.headChunks;if(mi.htmlChunks||Pi){var Qi=ys("head");C.push(Qi)}var nn=mi.bodyChunks;if(nn)for(Q=0;Q<nn.length;Q++)C.push(nn[Q]);Ar(S,C,G,null),S.completedRootSegment=null,$i(C,S.renderState)}var Ye=S.renderState;G=0;var Sn=Ye.viewportChunks;for(G=0;G<Sn.length;G++)C.push(Sn[G]);Sn.length=0,Ye.preconnects.forEach(Ee,C),Ye.preconnects.clear(),Ye.fontPreloads.forEach(Ee,C),Ye.fontPreloads.clear(),Ye.highImagePreloads.forEach(Ee,C),Ye.highImagePreloads.clear(),Ye.styles.forEach(Fi,C),Ye.scripts.forEach(Ee,C),Ye.scripts.clear(),Ye.bulkPreloads.forEach(Ee,C),Ye.bulkPreloads.clear();var pi=Ye.hoistableChunks;for(G=0;G<pi.length;G++)C.push(pi[G]);pi.length=0;var vn=S.clientRenderedBoundaries;for(k=0;k<vn.length;k++){var on=vn[k];Ye=C;var Je=S.resumableState,Gi=S.renderState,Zn=on.rootSegmentID,Rn=on.errorDigest;Ye.push(Gi.startInlineScript),(Je.instructions&4)===0?(Je.instructions|=4,Ye.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("')):Ye.push('$RX("'),Ye.push(Gi.boundaryPrefix);var is=Zn.toString(16);if(Ye.push(is),Ye.push('"'),Rn){Ye.push(",");var Ms=vi(Rn||"");Ye.push(Ms)}var Un=Ye.push(")<\/script>");if(!Un){S.destination=null,k++,vn.splice(0,k);return}}vn.splice(0,k);var Gn=S.completedBoundaries;for(k=0;k<Gn.length;k++)if(!_a(S,C,Gn[k])){S.destination=null,k++,Gn.splice(0,k);return}Gn.splice(0,k);var Hn=S.partialBoundaries;for(k=0;k<Hn.length;k++){var sr=Hn[k];t:{vn=S,on=C;var On=sr.completedSegments;for(Un=0;Un<On.length;Un++)if(!ql(vn,on,sr,On[Un])){Un++,On.splice(0,Un);var cr=!1;break t}On.splice(0,Un),cr=Fn(on,sr.contentState,vn.renderState)}if(!cr){S.destination=null,k++,Hn.splice(0,k);return}}Hn.splice(0,k);var Ur=S.completedBoundaries;for(k=0;k<Ur.length;k++)if(!_a(S,C,Ur[k])){S.destination=null,k++,Ur.splice(0,k);return}Ur.splice(0,k)}}finally{S.allPendingTasks===0&&S.pingedTasks.length===0&&S.clientRenderedBoundaries.length===0&&S.completedBoundaries.length===0&&(S.flushScheduled=!1,k=S.resumableState,k.hasBody&&(Hn=ys("body"),C.push(Hn)),k.hasHtml&&(k=ys("html"),C.push(k)),S.status=14,C.push(null),S.destination=null)}}function Vo(S){if(S.flushScheduled===!1&&S.pingedTasks.length===0&&S.destination!==null){S.flushScheduled=!0;var C=S.destination;C?nr(S,C):S.flushScheduled=!1}}function ma(S,C){if(S.status===13)S.status=14,C.destroy(S.fatalError);else if(S.status!==14&&S.destination===null){S.destination=C;try{nr(S,C)}catch(k){Ls(S,k,{}),Er(S,k)}}}function Cs(S,C){(S.status===11||S.status===10)&&(S.status=12);try{var k=S.abortableTasks;if(0<k.size){var G=C===void 0?Error(i(432)):typeof C=="object"&&C!==null&&typeof C.then=="function"?Error(i(530)):C;S.fatalError=G,k.forEach(function(Q){return fo(Q,S,G)}),k.clear()}S.destination!==null&&nr(S,S.destination)}catch(Q){Ls(S,Q,{}),Er(S,Q)}}function Ks(){}function dr(S,C,k,G){var Q=!1,nt=null,mt="",Jt=!1;if(C=Lt(C?C.identifierPrefix:void 0),S=Lh(S,C,Wt(C,k),ie(0,null,0),1/0,Ks,void 0,function(){Jt=!0},void 0,void 0,void 0),S.flushScheduled=S.destination!==null,Ho(S),S.status===10&&(S.status=11),S.trackedPostpones===null&&pl(S,S.pendingRootTasks===0),Cs(S,G),ma(S,{push:function(Pt){return Pt!==null&&(mt+=Pt),!0},destroy:function(Pt){Q=!0,nt=Pt}}),Q&&nt!==G)throw nt;if(!Jt)throw Error(i(426));return mt}return Xf.renderToStaticMarkup=function(S,C){return dr(S,C,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Xf.renderToString=function(S,C){return dr(S,C,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Xf.version="19.1.0",Xf}var Zf={};/**
 * @license React
 * react-dom-server.browser.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function rY(){if(hw)return Zf;hw=1;var t=Dg(),e=gp();function i(E){var T="https://react.dev/errors/"+E;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)T+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+E+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),c=Symbol.for("react.consumer"),g=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.scope"),N=Symbol.for("react.activity"),O=Symbol.for("react.legacy_hidden"),R=Symbol.for("react.memo_cache_sentinel"),P=Symbol.for("react.view_transition"),F=Symbol.iterator,U=Array.isArray;function V(E,T){var D=E.length&3,H=E.length-D,q=T;for(T=0;T<H;){var rt=E.charCodeAt(T)&255|(E.charCodeAt(++T)&255)<<8|(E.charCodeAt(++T)&255)<<16|(E.charCodeAt(++T)&255)<<24;++T,rt=3432918353*(rt&65535)+((3432918353*(rt>>>16)&65535)<<16)&4294967295,rt=rt<<15|rt>>>17,rt=461845907*(rt&65535)+((461845907*(rt>>>16)&65535)<<16)&4294967295,q^=rt,q=q<<13|q>>>19,q=5*(q&65535)+((5*(q>>>16)&65535)<<16)&4294967295,q=(q&65535)+27492+(((q>>>16)+58964&65535)<<16)}switch(rt=0,D){case 3:rt^=(E.charCodeAt(T+2)&255)<<16;case 2:rt^=(E.charCodeAt(T+1)&255)<<8;case 1:rt^=E.charCodeAt(T)&255,rt=3432918353*(rt&65535)+((3432918353*(rt>>>16)&65535)<<16)&4294967295,rt=rt<<15|rt>>>17,q^=461845907*(rt&65535)+((461845907*(rt>>>16)&65535)<<16)&4294967295}return q^=E.length,q^=q>>>16,q=2246822507*(q&65535)+((2246822507*(q>>>16)&65535)<<16)&4294967295,q^=q>>>13,q=3266489909*(q&65535)+((3266489909*(q>>>16)&65535)<<16)&4294967295,(q^q>>>16)>>>0}var Y=new MessageChannel,K=[];Y.port1.onmessage=function(){var E=K.shift();E&&E()};function tt(E){K.push(E),Y.port2.postMessage(null)}function j(E){setTimeout(function(){throw E})}var lt=Promise,pt=typeof queueMicrotask=="function"?queueMicrotask:function(E){lt.resolve(null).then(E).catch(j)},ft=null,ht=0;function W(E,T){if(T.byteLength!==0)if(2048<T.byteLength)0<ht&&(E.enqueue(new Uint8Array(ft.buffer,0,ht)),ft=new Uint8Array(2048),ht=0),E.enqueue(T);else{var D=ft.length-ht;D<T.byteLength&&(D===0?E.enqueue(ft):(ft.set(T.subarray(0,D),ht),E.enqueue(ft),T=T.subarray(D)),ft=new Uint8Array(2048),ht=0),ft.set(T,ht),ht+=T.byteLength}}function st(E,T){return W(E,T),!0}function _t(E){ft&&0<ht&&(E.enqueue(new Uint8Array(ft.buffer,0,ht)),ft=null,ht=0)}var Vt=new TextEncoder;function X(E){return Vt.encode(E)}function et(E){return Vt.encode(E)}function Dt(E,T){typeof E.error=="function"?E.error(T):E.close()}var Mt=Object.assign,At=Object.prototype.hasOwnProperty,Xt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Ge={};function Se(E){return At.call(Ge,E)?!0:At.call(jt,E)?!1:Xt.test(E)?Ge[E]=!0:(jt[E]=!0,!1)}var Lt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),Gt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ie=/["'&<>]/;function kt(E){if(typeof E=="boolean"||typeof E=="number"||typeof E=="bigint")return""+E;E=""+E;var T=ie.exec(E);if(T){var D="",H,q=0;for(H=T.index;H<E.length;H++){switch(E.charCodeAt(H)){case 34:T="&quot;";break;case 38:T="&amp;";break;case 39:T="&#x27;";break;case 60:T="&lt;";break;case 62:T="&gt;";break;default:continue}q!==H&&(D+=E.slice(q,H)),q=H+1,D+=T}E=q!==H?D+E.slice(q,H):D}return E}var $t=/([A-Z])/g,ne=/^ms-/,ee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function se(E){return ee.test(""+E)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":E}var ve=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},Xe=Oe.d;Oe.d={f:Xe.f,r:Xe.r,D:pl,C:Ds,L:To,m:Fr,X:Ho,S:fa,M:Ua};var Be=[];et('"></template>');var Ae=et("<script>"),Ze=et("<\/script>"),ki=et('<script src="'),ei=et('<script type="module" src="'),qe=et('" nonce="'),hi=et('" integrity="'),Ji=et('" crossorigin="'),Mi=et('" async=""><\/script>'),Vs=/(<\/|<)(s)(cript)/gi;function ls(E,T,D,H){return""+T+(D==="s"?"\\u0073":"\\u0053")+H}var Is=et('<script type="importmap">'),Jn=et("<\/script>");function Cn(E,T,D,H,q,rt){var gt=T===void 0?Ae:et('<script nonce="'+kt(T)+'">'),Bt=E.idPrefix;D=[];var xt=E.bootstrapScriptContent,It=E.bootstrapScripts,ye=E.bootstrapModules;if(xt!==void 0&&D.push(gt,X((""+xt).replace(Vs,ls)),Ze),xt=[],H!==void 0&&(xt.push(Is),xt.push(X((""+JSON.stringify(H)).replace(Vs,ls))),xt.push(Jn)),H=q?{preconnects:"",fontPreloads:"",highImagePreloads:"",remainingCapacity:2+(typeof rt=="number"?rt:2e3)}:null,q={placeholderPrefix:et(Bt+"P:"),segmentPrefix:et(Bt+"S:"),boundaryPrefix:et(Bt+"B:"),startInlineScript:gt,preamble:di(),externalRuntimeScript:null,bootstrapChunks:D,importMapChunks:xt,onHeaders:q,headers:H,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:T,hoistableState:null,stylesToHoist:!1},It!==void 0)for(H=0;H<It.length;H++){var re=It[H];Bt=gt=void 0,xt={rel:"preload",as:"script",fetchPriority:"low",nonce:T},typeof re=="string"?xt.href=rt=re:(xt.href=rt=re.src,xt.integrity=Bt=typeof re.integrity=="string"?re.integrity:void 0,xt.crossOrigin=gt=typeof re=="string"||re.crossOrigin==null?void 0:re.crossOrigin==="use-credentials"?"use-credentials":""),re=E;var Ne=rt;re.scriptResources[Ne]=null,re.moduleScriptResources[Ne]=null,re=[],en(re,xt),q.bootstrapScripts.add(re),D.push(ki,X(kt(rt))),T&&D.push(qe,X(kt(T))),typeof Bt=="string"&&D.push(hi,X(kt(Bt))),typeof gt=="string"&&D.push(Ji,X(kt(gt))),D.push(Mi)}if(ye!==void 0)for(It=0;It<ye.length;It++)xt=ye[It],gt=rt=void 0,Bt={rel:"modulepreload",fetchPriority:"low",nonce:T},typeof xt=="string"?Bt.href=H=xt:(Bt.href=H=xt.src,Bt.integrity=gt=typeof xt.integrity=="string"?xt.integrity:void 0,Bt.crossOrigin=rt=typeof xt=="string"||xt.crossOrigin==null?void 0:xt.crossOrigin==="use-credentials"?"use-credentials":""),xt=E,re=H,xt.scriptResources[re]=null,xt.moduleScriptResources[re]=null,xt=[],en(xt,Bt),q.bootstrapScripts.add(xt),D.push(ei,X(kt(H))),T&&D.push(qe,X(kt(T))),typeof gt=="string"&&D.push(hi,X(kt(gt))),typeof rt=="string"&&D.push(Ji,X(kt(rt))),D.push(Mi);return q}function bn(E,T,D,H,q){return{idPrefix:E===void 0?"":E,nextFormID:0,streamingFormat:0,bootstrapScriptContent:D,bootstrapScripts:H,bootstrapModules:q,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function di(){return{htmlChunks:null,headChunks:null,bodyChunks:null,contribution:0}}function gi(E,T,D){return{insertionMode:E,selectedValue:T,tagScope:D}}function lr(E){return gi(E==="http://www.w3.org/2000/svg"?4:E==="http://www.w3.org/1998/Math/MathML"?5:0,null,0)}function ys(E,T,D){switch(T){case"noscript":return gi(2,null,E.tagScope|1);case"select":return gi(2,D.value!=null?D.value:D.defaultValue,E.tagScope);case"svg":return gi(4,null,E.tagScope);case"picture":return gi(2,null,E.tagScope|2);case"math":return gi(5,null,E.tagScope);case"foreignObject":return gi(2,null,E.tagScope);case"table":return gi(6,null,E.tagScope);case"thead":case"tbody":case"tfoot":return gi(7,null,E.tagScope);case"colgroup":return gi(9,null,E.tagScope);case"tr":return gi(8,null,E.tagScope);case"head":if(2>E.insertionMode)return gi(3,null,E.tagScope);break;case"html":if(E.insertionMode===0)return gi(1,null,E.tagScope)}return 6<=E.insertionMode||2>E.insertionMode?gi(2,null,E.tagScope):E}var Hi=et("<!-- -->");function $i(E,T,D,H){return T===""?H:(H&&E.push(Hi),E.push(X(kt(T))),!0)}var Mn=new Map,zr=et(' style="'),ur=et(":"),Xi=et(";");function us(E,T){if(typeof T!="object")throw Error(i(62));var D=!0,H;for(H in T)if(At.call(T,H)){var q=T[H];if(q!=null&&typeof q!="boolean"&&q!==""){if(H.indexOf("--")===0){var rt=X(kt(H));q=X(kt((""+q).trim()))}else rt=Mn.get(H),rt===void 0&&(rt=et(kt(H.replace($t,"-$1").toLowerCase().replace(ne,"-ms-"))),Mn.set(H,rt)),q=typeof q=="number"?q===0||Lt.has(H)?X(""+q):X(q+"px"):X(kt((""+q).trim()));D?(D=!1,E.push(zr,rt,ur,q)):E.push(Xi,rt,ur,q)}}D||E.push(Ni)}var vi=et(" "),pn=et('="'),Ni=et('"'),yn=et('=""');function Ii(E,T,D){D&&typeof D!="function"&&typeof D!="symbol"&&E.push(vi,X(T),yn)}function Fe(E,T,D){typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&E.push(vi,X(T),pn,X(kt(D)),Ni)}var $n=et(kt("javascript:throw new Error('React form unexpectedly submitted.')")),Fn=et('<input type="hidden"');function Ee(E,T){this.push(Fn),xi(E),Fe(this,"name",T),Fe(this,"value",E),this.push(ts)}function xi(E){if(typeof E!="string")throw Error(i(480))}function Dr(E,T){if(typeof T.$$FORM_ACTION=="function"){var D=E.nextFormID++;E=E.idPrefix+D;try{var H=T.$$FORM_ACTION(E);if(H){var q=H.data;q!=null&&q.forEach(xi)}return H}catch(rt){if(typeof rt=="object"&&rt!==null&&typeof rt.then=="function")throw rt}}return null}function er(E,T,D,H,q,rt,gt,Bt){var xt=null;if(typeof H=="function"){var It=Dr(T,H);It!==null?(Bt=It.name,H=It.action||"",q=It.encType,rt=It.method,gt=It.target,xt=It.data):(E.push(vi,X("formAction"),pn,$n,Ni),gt=rt=q=H=Bt=null,oo(T,D))}return Bt!=null&&ci(E,"name",Bt),H!=null&&ci(E,"formAction",H),q!=null&&ci(E,"formEncType",q),rt!=null&&ci(E,"formMethod",rt),gt!=null&&ci(E,"formTarget",gt),xt}function ci(E,T,D){switch(T){case"className":Fe(E,"class",D);break;case"tabIndex":Fe(E,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Fe(E,T,D);break;case"style":us(E,D);break;case"src":case"href":if(D==="")break;case"action":case"formAction":if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean")break;D=se(""+D),E.push(vi,X(T),pn,X(kt(D)),Ni);break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":Ii(E,T.toLowerCase(),D);break;case"xlinkHref":if(typeof D=="function"||typeof D=="symbol"||typeof D=="boolean")break;D=se(""+D),E.push(vi,X("xlink:href"),pn,X(kt(D)),Ni);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof D!="function"&&typeof D!="symbol"&&E.push(vi,X(T),pn,X(kt(D)),Ni);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"&&E.push(vi,X(T),yn);break;case"capture":case"download":D===!0?E.push(vi,X(T),yn):D!==!1&&typeof D!="function"&&typeof D!="symbol"&&E.push(vi,X(T),pn,X(kt(D)),Ni);break;case"cols":case"rows":case"size":case"span":typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D&&E.push(vi,X(T),pn,X(kt(D)),Ni);break;case"rowSpan":case"start":typeof D=="function"||typeof D=="symbol"||isNaN(D)||E.push(vi,X(T),pn,X(kt(D)),Ni);break;case"xlinkActuate":Fe(E,"xlink:actuate",D);break;case"xlinkArcrole":Fe(E,"xlink:arcrole",D);break;case"xlinkRole":Fe(E,"xlink:role",D);break;case"xlinkShow":Fe(E,"xlink:show",D);break;case"xlinkTitle":Fe(E,"xlink:title",D);break;case"xlinkType":Fe(E,"xlink:type",D);break;case"xmlBase":Fe(E,"xml:base",D);break;case"xmlLang":Fe(E,"xml:lang",D);break;case"xmlSpace":Fe(E,"xml:space",D);break;default:if((!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=Gt.get(T)||T,Se(T))){switch(typeof D){case"function":case"symbol":return;case"boolean":var H=T.toLowerCase().slice(0,5);if(H!=="data-"&&H!=="aria-")return}E.push(vi,X(T),pn,X(kt(D)),Ni)}}}var Fi=et(">"),ts=et("/>");function Bi(E,T,D){if(T!=null){if(D!=null)throw Error(i(60));if(typeof T!="object"||!("__html"in T))throw Error(i(61));T=T.__html,T!=null&&E.push(X(""+T))}}function Ss(E){var T="";return t.Children.forEach(E,function(D){D!=null&&(T+=D)}),T}var tn=et(' selected=""'),ro=et(`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`);function oo(E,T){(E.instructions&16)===0&&(E.instructions|=16,T.bootstrapChunks.unshift(T.startInlineScript,ro,Ze))}var ir=et("<!--F!-->"),hr=et("<!--F-->");function en(E,T){E.push(wt("link"));for(var D in T)if(At.call(T,D)){var H=T[D];if(H!=null)switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"link"));default:ci(E,D,H)}}return E.push(ts),null}var ot=/(<\/|<)(s)(tyle)/gi;function at(E,T,D,H){return""+T+(D==="s"?"\\73 ":"\\53 ")+H}function it(E,T,D){E.push(wt(D));for(var H in T)if(At.call(T,H)){var q=T[H];if(q!=null)switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,D));default:ci(E,H,q)}}return E.push(ts),null}function ut(E,T){E.push(wt("title"));var D=null,H=null,q;for(q in T)if(At.call(T,q)){var rt=T[q];if(rt!=null)switch(q){case"children":D=rt;break;case"dangerouslySetInnerHTML":H=rt;break;default:ci(E,q,rt)}}return E.push(Fi),T=Array.isArray(D)?2>D.length?D[0]:null:D,typeof T!="function"&&typeof T!="symbol"&&T!==null&&T!==void 0&&E.push(X(kt(""+T))),Bi(E,H,D),E.push(Ot("title")),null}function yt(E,T){E.push(wt("script"));var D=null,H=null,q;for(q in T)if(At.call(T,q)){var rt=T[q];if(rt!=null)switch(q){case"children":D=rt;break;case"dangerouslySetInnerHTML":H=rt;break;default:ci(E,q,rt)}}return E.push(Fi),Bi(E,H,D),typeof D=="string"&&E.push(X((""+D).replace(Vs,ls))),E.push(Ot("script")),null}function bt(E,T,D){E.push(wt(D));var H=D=null,q;for(q in T)if(At.call(T,q)){var rt=T[q];if(rt!=null)switch(q){case"children":D=rt;break;case"dangerouslySetInnerHTML":H=rt;break;default:ci(E,q,rt)}}return E.push(Fi),Bi(E,H,D),D}function vt(E,T,D){E.push(wt(D));var H=D=null,q;for(q in T)if(At.call(T,q)){var rt=T[q];if(rt!=null)switch(q){case"children":D=rt;break;case"dangerouslySetInnerHTML":H=rt;break;default:ci(E,q,rt)}}return E.push(Fi),Bi(E,H,D),typeof D=="string"?(E.push(X(kt(D))),null):D}var St=et(`
`),Tt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Wt=new Map;function wt(E){var T=Wt.get(E);if(T===void 0){if(!Tt.test(E))throw Error(i(65,E));T=et("<"+E),Wt.set(E,T)}return T}var Nt=et("<!DOCTYPE html>");function Ft(E,T,D,H,q,rt,gt,Bt,xt,It){switch(T){case"div":case"span":case"svg":case"path":break;case"a":E.push(wt("a"));var ye=null,re=null,Ne;for(Ne in D)if(At.call(D,Ne)){var Ue=D[Ne];if(Ue!=null)switch(Ne){case"children":ye=Ue;break;case"dangerouslySetInnerHTML":re=Ue;break;case"href":Ue===""?Fe(E,"href",""):ci(E,Ne,Ue);break;default:ci(E,Ne,Ue)}}if(E.push(Fi),Bi(E,re,ye),typeof ye=="string"){E.push(X(kt(ye)));var Ke=null}else Ke=ye;return Ke;case"g":case"p":case"li":break;case"select":E.push(wt("select"));var oi=null,fn=null,An;for(An in D)if(At.call(D,An)){var Ti=D[An];if(Ti!=null)switch(An){case"children":oi=Ti;break;case"dangerouslySetInnerHTML":fn=Ti;break;case"defaultValue":case"value":break;default:ci(E,An,Ti)}}return E.push(Fi),Bi(E,fn,oi),oi;case"option":var Fs=Bt.selectedValue;E.push(wt("option"));var Vn=null,Js=null,zn=null,ni=null,yi;for(yi in D)if(At.call(D,yi)){var bi=D[yi];if(bi!=null)switch(yi){case"children":Vn=bi;break;case"selected":zn=bi;break;case"dangerouslySetInnerHTML":ni=bi;break;case"value":Js=bi;default:ci(E,yi,bi)}}if(Fs!=null){var qn=Js!==null?""+Js:Ss(Vn);if(U(Fs)){for(var gn=0;gn<Fs.length;gn++)if(""+Fs[gn]===qn){E.push(tn);break}}else""+Fs===qn&&E.push(tn)}else zn&&E.push(tn);return E.push(Fi),Bi(E,ni,Vn),Vn;case"textarea":E.push(wt("textarea"));var Qn=null,$o=null,qr=null,Cr;for(Cr in D)if(At.call(D,Cr)){var bl=D[Cr];if(bl!=null)switch(Cr){case"children":qr=bl;break;case"value":Qn=bl;break;case"defaultValue":$o=bl;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:ci(E,Cr,bl)}}if(Qn===null&&$o!==null&&(Qn=$o),E.push(Fi),qr!=null){if(Qn!=null)throw Error(i(92));if(U(qr)){if(1<qr.length)throw Error(i(93));Qn=""+qr[0]}Qn=""+qr}return typeof Qn=="string"&&Qn[0]===`
`&&E.push(St),Qn!==null&&E.push(X(kt(""+Qn))),null;case"input":E.push(wt("input"));var Tn=null,Ld=null,Cd=null,Gc=null,Hc=null,Vc=null,Nh=null,Rh=null,Oh=null,$s;for($s in D)if(At.call(D,$s)){var an=D[$s];if(an!=null)switch($s){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"name":Tn=an;break;case"formAction":Ld=an;break;case"formEncType":Cd=an;break;case"formMethod":Gc=an;break;case"formTarget":Hc=an;break;case"defaultChecked":Oh=an;break;case"defaultValue":Nh=an;break;case"checked":Rh=an;break;case"value":Vc=an;break;default:ci(E,$s,an)}}var Md=er(E,H,q,Ld,Cd,Gc,Hc,Tn);return Rh!==null?Ii(E,"checked",Rh):Oh!==null&&Ii(E,"checked",Oh),Vc!==null?ci(E,"value",Vc):Nh!==null&&ci(E,"value",Nh),E.push(ts),Md!=null&&Md.forEach(Ee,E),null;case"button":E.push(wt("button"));var Xa=null,Ih=null,Nd=null,xa=null,Ph=null,Rd=null,Od=null,Iu;for(Iu in D)if(At.call(D,Iu)){var ba=D[Iu];if(ba!=null)switch(Iu){case"children":Xa=ba;break;case"dangerouslySetInnerHTML":Ih=ba;break;case"name":Nd=ba;break;case"formAction":xa=ba;break;case"formEncType":Ph=ba;break;case"formMethod":Rd=ba;break;case"formTarget":Od=ba;break;default:ci(E,Iu,ba)}}var Yc=er(E,H,q,xa,Ph,Rd,Od,Nd);if(E.push(Fi),Yc!=null&&Yc.forEach(Ee,E),Bi(E,Ih,Xa),typeof Xa=="string"){E.push(X(kt(Xa)));var Xc=null}else Xc=Xa;return Xc;case"form":E.push(wt("form"));var Pu=null,Zc=null,Za=null,zu=null,zh=null,Du=null,ku;for(ku in D)if(At.call(D,ku)){var Wa=D[ku];if(Wa!=null)switch(ku){case"children":Pu=Wa;break;case"dangerouslySetInnerHTML":Zc=Wa;break;case"action":Za=Wa;break;case"encType":zu=Wa;break;case"method":zh=Wa;break;case"target":Du=Wa;break;default:ci(E,ku,Wa)}}var Dh=null,Id=null;if(typeof Za=="function"){var El=Dr(H,Za);El!==null?(Za=El.action||"",zu=El.encType,zh=El.method,Du=El.target,Dh=El.data,Id=El.name):(E.push(vi,X("action"),pn,$n,Ni),Du=zh=zu=Za=null,oo(H,q))}if(Za!=null&&ci(E,"action",Za),zu!=null&&ci(E,"encType",zu),zh!=null&&ci(E,"method",zh),Du!=null&&ci(E,"target",Du),E.push(Fi),Id!==null&&(E.push(Fn),Fe(E,"name",Id),E.push(ts),Dh!=null&&Dh.forEach(Ee,E)),Bi(E,Zc,Pu),typeof Pu=="string"){E.push(X(kt(Pu)));var Wc=null}else Wc=Pu;return Wc;case"menuitem":E.push(wt("menuitem"));for(var kh in D)if(At.call(D,kh)){var qc=D[kh];if(qc!=null)switch(kh){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:ci(E,kh,qc)}}return E.push(Fi),null;case"object":E.push(wt("object"));var Fh=null,Qc=null,Ea;for(Ea in D)if(At.call(D,Ea)){var Sl=D[Ea];if(Sl!=null)switch(Ea){case"children":Fh=Sl;break;case"dangerouslySetInnerHTML":Qc=Sl;break;case"data":var Kc=se(""+Sl);if(Kc==="")break;E.push(vi,X("data"),pn,X(kt(Kc)),Ni);break;default:ci(E,Ea,Sl)}}if(E.push(Fi),Bi(E,Qc,Fh),typeof Fh=="string"){E.push(X(kt(Fh)));var Bh=null}else Bh=Fh;return Bh;case"title":if(Bt.insertionMode===4||Bt.tagScope&1||D.itemProp!=null)var Kl=ut(E,D);else It?Kl=null:(ut(q.hoistableChunks,D),Kl=void 0);return Kl;case"link":var $g=D.rel,qa=D.href,Uh=D.precedence;if(Bt.insertionMode===4||Bt.tagScope&1||D.itemProp!=null||typeof $g!="string"||typeof qa!="string"||qa===""){en(E,D);var Fu=null}else if(D.rel==="stylesheet")if(typeof Uh!="string"||D.disabled!=null||D.onLoad||D.onError)Fu=en(E,D);else{var jl=q.styles.get(Uh),Gh=H.styleResources.hasOwnProperty(qa)?H.styleResources[qa]:void 0;if(Gh!==null){H.styleResources[qa]=null,jl||(jl={precedence:X(kt(Uh)),rules:[],hrefs:[],sheets:new Map},q.styles.set(Uh,jl));var Bu={state:0,props:Mt({},D,{"data-precedence":D.precedence,precedence:null})};if(Gh){Gh.length===2&&Sr(Bu.props,Gh);var Pd=q.preloads.stylesheets.get(qa);Pd&&0<Pd.length?Pd.length=0:Bu.state=1}jl.sheets.set(qa,Bu),gt&&gt.stylesheets.add(Bu)}else if(jl){var jc=jl.sheets.get(qa);jc&&gt&&gt.stylesheets.add(jc)}xt&&E.push(Hi),Fu=null}else D.onLoad||D.onError?Fu=en(E,D):(xt&&E.push(Hi),Fu=It?null:en(q.hoistableChunks,D));return Fu;case"script":var Hh=D.async;if(typeof D.src!="string"||!D.src||!Hh||typeof Hh=="function"||typeof Hh=="symbol"||D.onLoad||D.onError||Bt.insertionMode===4||Bt.tagScope&1||D.itemProp!=null)var Jc=yt(E,D);else{var Vh=D.src;if(D.type==="module")var zd=H.moduleScriptResources,Dd=q.preloads.moduleScripts;else zd=H.scriptResources,Dd=q.preloads.scripts;var Yh=zd.hasOwnProperty(Vh)?zd[Vh]:void 0;if(Yh!==null){zd[Vh]=null;var kd=D;if(Yh){Yh.length===2&&(kd=Mt({},D),Sr(kd,Yh));var Fd=Dd.get(Vh);Fd&&(Fd.length=0)}var $c=[];q.scripts.add($c),yt($c,kd)}xt&&E.push(Hi),Jc=null}return Jc;case"style":var Xh=D.precedence,Jl=D.href;if(Bt.insertionMode===4||Bt.tagScope&1||D.itemProp!=null||typeof Xh!="string"||typeof Jl!="string"||Jl===""){E.push(wt("style"));var Uu=null,tf=null,Qa;for(Qa in D)if(At.call(D,Qa)){var Gu=D[Qa];if(Gu!=null)switch(Qa){case"children":Uu=Gu;break;case"dangerouslySetInnerHTML":tf=Gu;break;default:ci(E,Qa,Gu)}}E.push(Fi);var Al=Array.isArray(Uu)?2>Uu.length?Uu[0]:null:Uu;typeof Al!="function"&&typeof Al!="symbol"&&Al!==null&&Al!==void 0&&E.push(X((""+Al).replace(ot,at))),Bi(E,tf,Uu),E.push(Ot("style"));var ef=null}else{var Tl=q.styles.get(Xh);if((H.styleResources.hasOwnProperty(Jl)?H.styleResources[Jl]:void 0)!==null){H.styleResources[Jl]=null,Tl?Tl.hrefs.push(X(kt(Jl))):(Tl={precedence:X(kt(Xh)),rules:[],hrefs:[X(kt(Jl))],sheets:new Map},q.styles.set(Xh,Tl));var Zh=Tl.rules,$l=null,nf=null,Bd;for(Bd in D)if(At.call(D,Bd)){var wl=D[Bd];if(wl!=null)switch(Bd){case"children":$l=wl;break;case"dangerouslySetInnerHTML":nf=wl}}var Ka=Array.isArray($l)?2>$l.length?$l[0]:null:$l;typeof Ka!="function"&&typeof Ka!="symbol"&&Ka!==null&&Ka!==void 0&&Zh.push(X((""+Ka).replace(ot,at))),Bi(Zh,nf,$l)}Tl&&gt&&gt.styles.add(Tl),xt&&E.push(Hi),ef=void 0}return ef;case"meta":if(Bt.insertionMode===4||Bt.tagScope&1||D.itemProp!=null)var Wh=it(E,D,"meta");else xt&&E.push(Hi),Wh=It?null:typeof D.charSet=="string"?it(q.charsetChunks,D,"meta"):D.name==="viewport"?it(q.viewportChunks,D,"meta"):it(q.hoistableChunks,D,"meta");return Wh;case"listing":case"pre":E.push(wt(T));var ja=null,Ll=null,Hu;for(Hu in D)if(At.call(D,Hu)){var qh=D[Hu];if(qh!=null)switch(Hu){case"children":ja=qh;break;case"dangerouslySetInnerHTML":Ll=qh;break;default:ci(E,Hu,qh)}}if(E.push(Fi),Ll!=null){if(ja!=null)throw Error(i(60));if(typeof Ll!="object"||!("__html"in Ll))throw Error(i(61));var No=Ll.__html;No!=null&&(typeof No=="string"&&0<No.length&&No[0]===`
`?E.push(St,X(No)):E.push(X(""+No)))}return typeof ja=="string"&&ja[0]===`
`&&E.push(St),ja;case"img":var ar=D.src,xn=D.srcSet;if(!(D.loading==="lazy"||!ar&&!xn||typeof ar!="string"&&ar!=null||typeof xn!="string"&&xn!=null)&&D.fetchPriority!=="low"&&!(Bt.tagScope&3)&&(typeof ar!="string"||ar[4]!==":"||ar[0]!=="d"&&ar[0]!=="D"||ar[1]!=="a"&&ar[1]!=="A"||ar[2]!=="t"&&ar[2]!=="T"||ar[3]!=="a"&&ar[3]!=="A")&&(typeof xn!="string"||xn[4]!==":"||xn[0]!=="d"&&xn[0]!=="D"||xn[1]!=="a"&&xn[1]!=="A"||xn[2]!=="t"&&xn[2]!=="T"||xn[3]!=="a"&&xn[3]!=="A")){var ta=typeof D.sizes=="string"?D.sizes:void 0,mo=xn?xn+`
`+(ta||""):ar,Ud=q.preloads.images,Qr=Ud.get(mo);if(Qr)(D.fetchPriority==="high"||10>q.highImagePreloads.size)&&(Ud.delete(mo),q.highImagePreloads.add(Qr));else if(!H.imageResources.hasOwnProperty(mo)){H.imageResources[mo]=Be;var ea=D.crossOrigin,Ns=typeof ea=="string"?ea==="use-credentials"?ea:"":void 0,Sa=q.headers,Qh;Sa&&0<Sa.remainingCapacity&&typeof D.srcSet!="string"&&(D.fetchPriority==="high"||500>Sa.highImagePreloads.length)&&(Qh=Br(ar,"image",{imageSrcSet:D.srcSet,imageSizes:D.sizes,crossOrigin:Ns,integrity:D.integrity,nonce:D.nonce,type:D.type,fetchPriority:D.fetchPriority,referrerPolicy:D.refererPolicy}),0<=(Sa.remainingCapacity-=Qh.length+2))?(q.resets.image[mo]=Be,Sa.highImagePreloads&&(Sa.highImagePreloads+=", "),Sa.highImagePreloads+=Qh):(Qr=[],en(Qr,{rel:"preload",as:"image",href:xn?void 0:ar,imageSrcSet:xn,imageSizes:ta,crossOrigin:Ns,integrity:D.integrity,type:D.type,fetchPriority:D.fetchPriority,referrerPolicy:D.referrerPolicy}),D.fetchPriority==="high"||10>q.highImagePreloads.size?q.highImagePreloads.add(Qr):(q.bulkPreloads.add(Qr),Ud.set(mo,Qr)))}}return it(E,D,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return it(E,D,T);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>Bt.insertionMode){var Kh=rt||q.preamble;if(Kh.headChunks)throw Error(i(545,"`<head>`"));Kh.headChunks=[];var sf=bt(Kh.headChunks,D,"head")}else sf=vt(E,D,"head");return sf;case"body":if(2>Bt.insertionMode){var Gd=rt||q.preamble;if(Gd.bodyChunks)throw Error(i(545,"`<body>`"));Gd.bodyChunks=[];var Cl=bt(Gd.bodyChunks,D,"body")}else Cl=vt(E,D,"body");return Cl;case"html":if(Bt.insertionMode===0){var Vu=rt||q.preamble;if(Vu.htmlChunks)throw Error(i(545,"`<html>`"));Vu.htmlChunks=[Nt];var rf=bt(Vu.htmlChunks,D,"html")}else rf=vt(E,D,"html");return rf;default:if(T.indexOf("-")!==-1){E.push(wt(T));var Hd=null,of=null,Ja;for(Ja in D)if(At.call(D,Ja)){var Ro=D[Ja];if(Ro!=null){var Vd=Ja;switch(Ja){case"children":Hd=Ro;break;case"dangerouslySetInnerHTML":of=Ro;break;case"style":us(E,Ro);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":Vd="class";default:if(Se(Ja)&&typeof Ro!="function"&&typeof Ro!="symbol"&&Ro!==!1){if(Ro===!0)Ro="";else if(typeof Ro=="object")continue;E.push(vi,X(Vd),pn,X(kt(Ro)),Ni)}}}}return E.push(Fi),Bi(E,of,Hd),Hd}}return vt(E,D,T)}var te=new Map;function Ot(E){var T=te.get(E);return T===void 0&&(T=et("</"+E+">"),te.set(E,T)),T}function oe(E,T){E=E.preamble,E.htmlChunks===null&&T.htmlChunks&&(E.htmlChunks=T.htmlChunks,T.contribution|=1),E.headChunks===null&&T.headChunks&&(E.headChunks=T.headChunks,T.contribution|=4),E.bodyChunks===null&&T.bodyChunks&&(E.bodyChunks=T.bodyChunks,T.contribution|=2)}function he(E,T){T=T.bootstrapChunks;for(var D=0;D<T.length-1;D++)W(E,T[D]);return D<T.length?(D=T[D],T.length=0,st(E,D)):!0}var Kt=et('<template id="'),le=et('"></template>'),ge=et("<!--$-->"),ue=et('<!--$?--><template id="'),_e=et('"></template>'),me=et("<!--$!-->"),Te=et("<!--/$-->"),Ie=et("<template"),Le=et('"'),We=et(' data-dgst="');et(' data-msg="'),et(' data-stck="'),et(' data-cstck="');var $e=et("></template>");function Ei(E,T,D){if(W(E,ue),D===null)throw Error(i(395));return W(E,T.boundaryPrefix),W(E,X(D.toString(16))),st(E,_e)}var Si=et("<!--"),ui=et("-->");function Zi(E,T){T=T.contribution,T!==0&&(W(E,Si),W(E,X(""+T)),W(E,ui))}var En=et('<div hidden id="'),Wi=et('">'),Vi=et("</div>"),hn=et('<svg aria-hidden="true" style="display:none" id="'),Nn=et('">'),Ai=et("</svg>"),vs=et('<math aria-hidden="true" style="display:none" id="'),Ao=et('">'),Pe=et("</math>"),dn=et('<table hidden id="'),Me=et('">'),rn=et("</table>"),qi=et('<table hidden><tbody id="'),Ri=et('">'),cn=et("</tbody></table>"),Bn=et('<table hidden><tr id="'),Ys=et('">'),Xs=et("</tr></table>"),Ui=et('<table hidden><colgroup id="'),As=et('">'),xr=et("</colgroup></table>");function Ts(E,T,D,H){switch(D.insertionMode){case 0:case 1:case 3:case 2:return W(E,En),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Wi);case 4:return W(E,hn),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Nn);case 5:return W(E,vs),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Ao);case 6:return W(E,dn),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Me);case 7:return W(E,qi),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Ri);case 8:return W(E,Bn),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,Ys);case 9:return W(E,Ui),W(E,T.segmentPrefix),W(E,X(H.toString(16))),st(E,As);default:throw Error(i(397))}}function ao(E,T){switch(T.insertionMode){case 0:case 1:case 3:case 2:return st(E,Vi);case 4:return st(E,Ai);case 5:return st(E,Pe);case 6:return st(E,rn);case 7:return st(E,cn);case 8:return st(E,Xs);case 9:return st(E,xr);default:throw Error(i(397))}}var kr=et('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),br=et('$RS("'),Mu=et('","'),za=et('")<\/script>');et('<template data-rsi="" data-sid="'),et('" data-pid="');var _i=et('$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RC("'),Da=et('$RC("'),Zs=et(`$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RM=new Map;
$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?x.push(b):("LINK"===b.tagName&&p.set(b.getAttribute("href"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement("link");a.href=
d;a.rel="stylesheet";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute("media");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,
t,u,""),w.bind(null,t,u,"Resource failed to load"))};$RR("`),ha=et(`$RM=new Map;
$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?x.push(b):("LINK"===b.tagName&&p.set(b.getAttribute("href"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement("link");a.href=
d;a.rel="stylesheet";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute("media");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,
t,u,""),w.bind(null,t,u,"Resource failed to load"))};$RR("`),Vl=et('$RR("'),Nu=et('","'),Yl=et('",'),ko=et('"'),Xl=et(")<\/script>");et('<template data-rci="" data-bid="'),et('<template data-rri="" data-bid="'),et('" data-sid="'),et('" data-sty="');var cl=et('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'),wh=et('$RX("'),ka=et('"'),Ru=et(","),ws=et(")<\/script>");et('<template data-rxi="" data-bid="'),et('" data-dgst="'),et('" data-msg="'),et('" data-stck="'),et('" data-cstck="');var Zl=/[<\u2028\u2029]/g;function Fa(E){return JSON.stringify(E).replace(Zl,function(T){switch(T){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var lo=/[&><\u2028\u2029]/g;function da(E){return JSON.stringify(E).replace(lo,function(T){switch(T){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var uo=et('<style media="not all" data-precedence="'),Wl=et('" data-href="'),Lh=et('">'),hs=et("</style>"),Fo=!1,Bo=!0;function Ba(E){var T=E.rules,D=E.hrefs,H=0;if(D.length){for(W(this,uo),W(this,E.precedence),W(this,Wl);H<D.length-1;H++)W(this,D[H]),W(this,ho);for(W(this,D[H]),W(this,Lh),H=0;H<T.length;H++)W(this,T[H]);Bo=st(this,hs),Fo=!0,T.length=0,D.length=0}}function fl(E){return E.state!==2?Fo=!0:!1}function Uo(E,T,D){return Fo=!1,Bo=!0,T.styles.forEach(Ba,E),T.stylesheets.forEach(fl),Fo&&(D.stylesToHoist=!0),Bo}function xs(E){for(var T=0;T<E.length;T++)W(this,E[T]);E.length=0}var Ps=[];function Ls(E){en(Ps,E.props);for(var T=0;T<Ps.length;T++)W(this,Ps[T]);Ps.length=0,E.state=2}var Er=et('<style data-precedence="'),Ou=et('" data-href="'),ho=et(" "),es=et('">'),gl=et("</style>");function Ws(E){var T=0<E.sheets.size;E.sheets.forEach(Ls,this),E.sheets.clear();var D=E.rules,H=E.hrefs;if(!T||H.length){if(W(this,Er),W(this,E.precedence),E=0,H.length){for(W(this,Ou);E<H.length-1;E++)W(this,H[E]),W(this,ho);W(this,H[E])}for(W(this,es),E=0;E<D.length;E++)W(this,D[E]);W(this,gl),D.length=0,H.length=0}}function _l(E){if(E.state===0){E.state=1;var T=E.props;for(en(Ps,{rel:"preload",as:"style",href:E.props.href,crossOrigin:T.crossOrigin,fetchPriority:T.fetchPriority,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy}),E=0;E<Ps.length;E++)W(this,Ps[E]);Ps.length=0}}function ca(E){E.sheets.forEach(_l,this),E.sheets.clear()}var Go=et("["),ml=et(",["),co=et(","),qs=et("]");function Ch(E,T){W(E,Go);var D=Go;T.stylesheets.forEach(function(H){if(H.state!==2)if(H.state===3)W(E,D),W(E,X(da(""+H.props.href))),W(E,qs),D=ml;else{W(E,D);var q=H.props["data-precedence"],rt=H.props,gt=se(""+H.props.href);W(E,X(da(gt))),q=""+q,W(E,co),W(E,X(da(q)));for(var Bt in rt)if(At.call(rt,Bt)&&(q=rt[Bt],q!=null))switch(Bt){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"link"));default:zs(E,Bt,q)}W(E,qs),D=ml,H.state=3}}),W(E,qs)}function zs(E,T,D){var H=T.toLowerCase();switch(typeof D){case"function":case"symbol":return}switch(T){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":H="class",T=""+D;break;case"hidden":if(D===!1)return;T="";break;case"src":case"href":D=se(D),T=""+D;break;default:if(2<T.length&&(T[0]==="o"||T[0]==="O")&&(T[1]==="n"||T[1]==="N")||!Se(T))return;T=""+D}W(E,co),W(E,X(da(H))),W(E,co),W(E,X(da(T)))}function fo(){return{styles:new Set,stylesheets:new Set}}function pl(E){var T=Li||null;if(T){var D=T.resumableState,H=T.renderState;if(typeof E=="string"&&E){if(!D.dnsResources.hasOwnProperty(E)){D.dnsResources[E]=null,D=H.headers;var q,rt;(rt=D&&0<D.remainingCapacity)&&(rt=(q="<"+(""+E).replace(Qs,Ar)+">; rel=dns-prefetch",0<=(D.remainingCapacity-=q.length+2))),rt?(H.resets.dns[E]=null,D.preconnects&&(D.preconnects+=", "),D.preconnects+=q):(q=[],en(q,{href:E,rel:"dns-prefetch"}),H.preconnects.add(q))}jo(T)}}else Xe.D(E)}function Ds(E,T){var D=Li||null;if(D){var H=D.resumableState,q=D.renderState;if(typeof E=="string"&&E){var rt=T==="use-credentials"?"credentials":typeof T=="string"?"anonymous":"default";if(!H.connectResources[rt].hasOwnProperty(E)){H.connectResources[rt][E]=null,H=q.headers;var gt,Bt;if(Bt=H&&0<H.remainingCapacity){if(Bt="<"+(""+E).replace(Qs,Ar)+">; rel=preconnect",typeof T=="string"){var xt=(""+T).replace(ga,_a);Bt+='; crossorigin="'+xt+'"'}Bt=(gt=Bt,0<=(H.remainingCapacity-=gt.length+2))}Bt?(q.resets.connect[rt][E]=null,H.preconnects&&(H.preconnects+=", "),H.preconnects+=gt):(rt=[],en(rt,{rel:"preconnect",href:E,crossOrigin:T}),q.preconnects.add(rt))}jo(D)}}else Xe.C(E,T)}function To(E,T,D){var H=Li||null;if(H){var q=H.resumableState,rt=H.renderState;if(T&&E){switch(T){case"image":if(D)var gt=D.imageSrcSet,Bt=D.imageSizes,xt=D.fetchPriority;var It=gt?gt+`
`+(Bt||""):E;if(q.imageResources.hasOwnProperty(It))return;q.imageResources[It]=Be,q=rt.headers;var ye;q&&0<q.remainingCapacity&&typeof gt!="string"&&xt==="high"&&(ye=Br(E,T,D),0<=(q.remainingCapacity-=ye.length+2))?(rt.resets.image[It]=Be,q.highImagePreloads&&(q.highImagePreloads+=", "),q.highImagePreloads+=ye):(q=[],en(q,Mt({rel:"preload",href:gt?void 0:E,as:T},D)),xt==="high"?rt.highImagePreloads.add(q):(rt.bulkPreloads.add(q),rt.preloads.images.set(It,q)));break;case"style":if(q.styleResources.hasOwnProperty(E))return;gt=[],en(gt,Mt({rel:"preload",href:E,as:T},D)),q.styleResources[E]=!D||typeof D.crossOrigin!="string"&&typeof D.integrity!="string"?Be:[D.crossOrigin,D.integrity],rt.preloads.stylesheets.set(E,gt),rt.bulkPreloads.add(gt);break;case"script":if(q.scriptResources.hasOwnProperty(E))return;gt=[],rt.preloads.scripts.set(E,gt),rt.bulkPreloads.add(gt),en(gt,Mt({rel:"preload",href:E,as:T},D)),q.scriptResources[E]=!D||typeof D.crossOrigin!="string"&&typeof D.integrity!="string"?Be:[D.crossOrigin,D.integrity];break;default:if(q.unknownResources.hasOwnProperty(T)){if(gt=q.unknownResources[T],gt.hasOwnProperty(E))return}else gt={},q.unknownResources[T]=gt;if(gt[E]=Be,(q=rt.headers)&&0<q.remainingCapacity&&T==="font"&&(It=Br(E,T,D),0<=(q.remainingCapacity-=It.length+2)))rt.resets.font[E]=Be,q.fontPreloads&&(q.fontPreloads+=", "),q.fontPreloads+=It;else switch(q=[],E=Mt({rel:"preload",href:E,as:T},D),en(q,E),T){case"font":rt.fontPreloads.add(q);break;default:rt.bulkPreloads.add(q)}}jo(H)}}else Xe.L(E,T,D)}function Fr(E,T){var D=Li||null;if(D){var H=D.resumableState,q=D.renderState;if(E){var rt=T&&typeof T.as=="string"?T.as:"script";switch(rt){case"script":if(H.moduleScriptResources.hasOwnProperty(E))return;rt=[],H.moduleScriptResources[E]=!T||typeof T.crossOrigin!="string"&&typeof T.integrity!="string"?Be:[T.crossOrigin,T.integrity],q.preloads.moduleScripts.set(E,rt);break;default:if(H.moduleUnknownResources.hasOwnProperty(rt)){var gt=H.unknownResources[rt];if(gt.hasOwnProperty(E))return}else gt={},H.moduleUnknownResources[rt]=gt;rt=[],gt[E]=Be}en(rt,Mt({rel:"modulepreload",href:E},T)),q.bulkPreloads.add(rt),jo(D)}}else Xe.m(E,T)}function fa(E,T,D){var H=Li||null;if(H){var q=H.resumableState,rt=H.renderState;if(E){T=T||"default";var gt=rt.styles.get(T),Bt=q.styleResources.hasOwnProperty(E)?q.styleResources[E]:void 0;Bt!==null&&(q.styleResources[E]=null,gt||(gt={precedence:X(kt(T)),rules:[],hrefs:[],sheets:new Map},rt.styles.set(T,gt)),T={state:0,props:Mt({rel:"stylesheet",href:E,"data-precedence":T},D)},Bt&&(Bt.length===2&&Sr(T.props,Bt),(rt=rt.preloads.stylesheets.get(E))&&0<rt.length?rt.length=0:T.state=1),gt.sheets.set(E,T),jo(H))}}else Xe.S(E,T,D)}function Ho(E,T){var D=Li||null;if(D){var H=D.resumableState,q=D.renderState;if(E){var rt=H.scriptResources.hasOwnProperty(E)?H.scriptResources[E]:void 0;rt!==null&&(H.scriptResources[E]=null,T=Mt({src:E,async:!0},T),rt&&(rt.length===2&&Sr(T,rt),E=q.preloads.scripts.get(E))&&(E.length=0),E=[],q.scripts.add(E),yt(E,T),jo(D))}}else Xe.X(E,T)}function Ua(E,T){var D=Li||null;if(D){var H=D.resumableState,q=D.renderState;if(E){var rt=H.moduleScriptResources.hasOwnProperty(E)?H.moduleScriptResources[E]:void 0;rt!==null&&(H.moduleScriptResources[E]=null,T=Mt({src:E,type:"module",async:!0},T),rt&&(rt.length===2&&Sr(T,rt),E=q.preloads.moduleScripts.get(E))&&(E.length=0),E=[],q.scripts.add(E),yt(E,T),jo(D))}}else Xe.M(E,T)}function Sr(E,T){E.crossOrigin==null&&(E.crossOrigin=T[0]),E.integrity==null&&(E.integrity=T[1])}function Br(E,T,D){E=(""+E).replace(Qs,Ar),T=(""+T).replace(ga,_a),T="<"+E+'>; rel=preload; as="'+T+'"';for(var H in D)At.call(D,H)&&(E=D[H],typeof E=="string"&&(T+="; "+H.toLowerCase()+'="'+(""+E).replace(ga,_a)+'"'));return T}var Qs=/[<>\r\n]/g;function Ar(E){switch(E){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var ga=/["';,\r\n]/g;function _a(E){switch(E){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function ql(E){this.styles.add(E)}function nr(E){this.stylesheets.add(E)}var Vo=Function.prototype.bind,ma=Symbol.for("react.client.reference");function Cs(E){if(E==null)return null;if(typeof E=="function")return E.$$typeof===ma?null:E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case r:return"Fragment";case u:return"Profiler";case a:return"StrictMode";case m:return"Suspense";case v:return"SuspenseList";case N:return"Activity"}if(typeof E=="object")switch(E.$$typeof){case s:return"Portal";case g:return(E.displayName||"Context")+".Provider";case c:return(E._context.displayName||"Context")+".Consumer";case _:var T=E.render;return E=E.displayName,E||(E=T.displayName||T.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case b:return T=E.displayName||null,T!==null?T:Cs(E.type)||"Memo";case x:T=E._payload,E=E._init;try{return Cs(E(T))}catch{}}return null}var Ks={},dr=null;function S(E,T){if(E!==T){E.context._currentValue=E.parentValue,E=E.parent;var D=T.parent;if(E===null){if(D!==null)throw Error(i(401))}else{if(D===null)throw Error(i(401));S(E,D)}T.context._currentValue=T.value}}function C(E){E.context._currentValue=E.parentValue,E=E.parent,E!==null&&C(E)}function k(E){var T=E.parent;T!==null&&k(T),E.context._currentValue=E.value}function G(E,T){if(E.context._currentValue=E.parentValue,E=E.parent,E===null)throw Error(i(402));E.depth===T.depth?S(E,T):G(E,T)}function Q(E,T){var D=T.parent;if(D===null)throw Error(i(402));E.depth===D.depth?S(E,D):Q(E,D),T.context._currentValue=T.value}function nt(E){var T=dr;T!==E&&(T===null?k(E):E===null?C(T):T.depth===E.depth?S(T,E):T.depth>E.depth?G(T,E):Q(T,E),dr=E)}var mt={enqueueSetState:function(E,T){E=E._reactInternals,E.queue!==null&&E.queue.push(T)},enqueueReplaceState:function(E,T){E=E._reactInternals,E.replace=!0,E.queue=[T]},enqueueForceUpdate:function(){}},Jt={id:1,overflow:""};function Pt(E,T,D){var H=E.id;E=E.overflow;var q=32-qt(H)-1;H&=~(1<<q),D+=1;var rt=32-qt(T)+q;if(30<rt){var gt=q-q%5;return rt=(H&(1<<gt)-1).toString(32),H>>=gt,q-=gt,{id:1<<32-qt(T)+q|D<<q|H,overflow:rt+E}}return{id:1<<rt|D<<q|H,overflow:E}}var qt=Math.clz32?Math.clz32:De,xe=Math.log,pe=Math.LN2;function De(E){return E>>>=0,E===0?32:31-(xe(E)/pe|0)|0}var Qe=Error(i(460));function Ve(){}function ii(E,T,D){switch(D=E[D],D===void 0?E.push(T):D!==T&&(T.then(Ve,Ve),T=D),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Ve,Ve):(E=T,E.status="pending",E.then(function(H){if(T.status==="pending"){var q=T;q.status="fulfilled",q.value=H}},function(H){if(T.status==="pending"){var q=T;q.status="rejected",q.reason=H}})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}throw mi=T,Qe}}var mi=null;function Pi(){if(mi===null)throw Error(i(459));var E=mi;return mi=null,E}function Qi(E,T){return E===T&&(E!==0||1/E===1/T)||E!==E&&T!==T}var nn=typeof Object.is=="function"?Object.is:Qi,Ye=null,Sn=null,pi=null,vn=null,on=null,Je=null,Gi=!1,Zn=!1,Rn=0,is=0,Ms=-1,Un=0,Gn=null,Hn=null,sr=0;function On(){if(Ye===null)throw Error(i(321));return Ye}function cr(){if(0<sr)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Ur(){return Je===null?on===null?(Gi=!1,on=Je=cr()):(Gi=!0,Je=on):Je.next===null?(Gi=!1,Je=Je.next=cr()):(Gi=!0,Je=Je.next),Je}function Wn(){var E=Gn;return Gn=null,E}function Gr(){vn=pi=Sn=Ye=null,Zn=!1,on=null,sr=0,Je=Hn=null}function rr(E,T){return typeof T=="function"?T(E):T}function pa(E,T,D){if(Ye=On(),Je=Ur(),Gi){var H=Je.queue;if(T=H.dispatch,Hn!==null&&(D=Hn.get(H),D!==void 0)){Hn.delete(H),H=Je.memoizedState;do H=E(H,D.action),D=D.next;while(D!==null);return Je.memoizedState=H,[H,T]}return[Je.memoizedState,T]}return E=E===rr?typeof T=="function"?T():T:D!==void 0?D(T):T,Je.memoizedState=E,E=Je.queue={last:null,dispatch:null},E=E.dispatch=ds.bind(null,Ye,E),[Je.memoizedState,E]}function Hr(E,T){if(Ye=On(),Je=Ur(),T=T===void 0?null:T,Je!==null){var D=Je.memoizedState;if(D!==null&&T!==null){var H=D[1];t:if(H===null)H=!1;else{for(var q=0;q<H.length&&q<T.length;q++)if(!nn(T[q],H[q])){H=!1;break t}H=!0}if(H)return D[0]}}return E=E(),Je.memoizedState=[E,T],E}function ds(E,T,D){if(25<=sr)throw Error(i(301));if(E===Ye)if(Zn=!0,E={action:D,next:null},Hn===null&&(Hn=new Map),D=Hn.get(T),D===void 0)Hn.set(T,E);else{for(T=D;T.next!==null;)T=T.next;T.next=E}}function yl(){throw Error(i(394))}function wo(){throw Error(i(479))}function go(E,T,D){On();var H=is++,q=pi;if(typeof E.$$FORM_ACTION=="function"){var rt=null,gt=vn;q=q.formState;var Bt=E.$$IS_SIGNATURE_EQUAL;if(q!==null&&typeof Bt=="function"){var xt=q[1];Bt.call(E,q[2],q[3])&&(rt=D!==void 0?"p"+D:"k"+V(JSON.stringify([gt,null,H]),0),xt===rt&&(Ms=H,T=q[0]))}var It=E.bind(null,T);return E=function(re){It(re)},typeof It.$$FORM_ACTION=="function"&&(E.$$FORM_ACTION=function(re){re=It.$$FORM_ACTION(re),D!==void 0&&(D+="",re.action=D);var Ne=re.data;return Ne&&(rt===null&&(rt=D!==void 0?"p"+D:"k"+V(JSON.stringify([gt,null,H]),0)),Ne.append("$ACTION_KEY",rt)),re}),[T,E,!1]}var ye=E.bind(null,T);return[T,function(re){ye(re)},!1]}function Lo(E){var T=Un;return Un+=1,Gn===null&&(Gn=[]),ii(Gn,E,T)}function d(){throw Error(i(393))}function p(){}var A={readContext:function(E){return E._currentValue},use:function(E){if(E!==null&&typeof E=="object"){if(typeof E.then=="function")return Lo(E);if(E.$$typeof===g)return E._currentValue}throw Error(i(438,String(E)))},useContext:function(E){return On(),E._currentValue},useMemo:Hr,useReducer:pa,useRef:function(E){Ye=On(),Je=Ur();var T=Je.memoizedState;return T===null?(E={current:E},Je.memoizedState=E):T},useState:function(E){return pa(rr,E)},useInsertionEffect:p,useLayoutEffect:p,useCallback:function(E,T){return Hr(function(){return E},T)},useImperativeHandle:p,useEffect:p,useDebugValue:p,useDeferredValue:function(E,T){return On(),T!==void 0?T:E},useTransition:function(){return On(),[!1,yl]},useId:function(){var E=Sn.treeContext,T=E.overflow;E=E.id,E=(E&~(1<<32-qt(E)-1)).toString(32)+T;var D=z;if(D===null)throw Error(i(404));return T=Rn++,E=""+D.idPrefix+"R"+E,0<T&&(E+="H"+T.toString(32)),E+""},useSyncExternalStore:function(E,T,D){if(D===void 0)throw Error(i(407));return D()},useOptimistic:function(E){return On(),[E,wo]},useActionState:go,useFormState:go,useHostTransitionStatus:function(){return On(),ke},useMemoCache:function(E){for(var T=Array(E),D=0;D<E;D++)T[D]=R;return T},useCacheRefresh:function(){return d}},z=null,B={getCacheForType:function(){throw Error(i(248))}},J,dt;function Ct(E){if(J===void 0)try{throw Error()}catch(D){var T=D.stack.trim().match(/\n( *(at )?)/);J=T&&T[1]||"",dt=-1<D.stack.indexOf(`
    at`)?" (<anonymous>)":-1<D.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+E+dt}var Ht=!1;function ce(E,T){if(!E||Ht)return"";Ht=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var H={DetermineComponentFrameRoot:function(){try{if(T){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Ue){var Ne=Ue}Reflect.construct(E,[],re)}else{try{re.call()}catch(Ue){Ne=Ue}E.call(re.prototype)}}else{try{throw Error()}catch(Ue){Ne=Ue}(re=E())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Ue){if(Ue&&Ne&&typeof Ue.stack=="string")return[Ue.stack,Ne.stack]}return[null,null]}};H.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var q=Object.getOwnPropertyDescriptor(H.DetermineComponentFrameRoot,"name");q&&q.configurable&&Object.defineProperty(H.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var rt=H.DetermineComponentFrameRoot(),gt=rt[0],Bt=rt[1];if(gt&&Bt){var xt=gt.split(`
`),It=Bt.split(`
`);for(q=H=0;H<xt.length&&!xt[H].includes("DetermineComponentFrameRoot");)H++;for(;q<It.length&&!It[q].includes("DetermineComponentFrameRoot");)q++;if(H===xt.length||q===It.length)for(H=xt.length-1,q=It.length-1;1<=H&&0<=q&&xt[H]!==It[q];)q--;for(;1<=H&&0<=q;H--,q--)if(xt[H]!==It[q]){if(H!==1||q!==1)do if(H--,q--,0>q||xt[H]!==It[q]){var ye=`
`+xt[H].replace(" at new "," at ");return E.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",E.displayName)),ye}while(1<=H&&0<=q);break}}}finally{Ht=!1,Error.prepareStackTrace=D}return(D=E?E.displayName||E.name:"")?Ct(D):""}function be(E){if(typeof E=="string")return Ct(E);if(typeof E=="function")return E.prototype&&E.prototype.isReactComponent?ce(E,!0):ce(E,!1);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case _:return ce(E.render,!1);case b:return ce(E.type,!1);case x:var T=E,D=T._payload;T=T._init;try{E=T(D)}catch{return Ct("Lazy")}return be(E)}if(typeof E.name=="string")return D=E.env,Ct(E.name+(D?" ["+D+"]":""))}switch(E){case v:return Ct("SuspenseList");case m:return Ct("Suspense")}return""}function Ce(E){if(typeof E=="object"&&E!==null&&typeof E.environmentName=="string"){var T=E.environmentName;E=[E].slice(0),typeof E[0]=="string"?E.splice(0,1,"%c%s%c "+E[0],"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+T+" ",""):E.splice(0,0,"%c%s%c ","background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+T+" ",""),E.unshift(console),T=Vo.apply(console.error,E),T()}else console.error(E);return null}function we(){}function ti(E,T,D,H,q,rt,gt,Bt,xt,It,ye){var re=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=E,this.renderState=T,this.rootFormatContext=D,this.progressiveChunkSize=H===void 0?12800:H,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.abortableTasks=re,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=q===void 0?Ce:q,this.onPostpone=It===void 0?we:It,this.onAllReady=rt===void 0?we:rt,this.onShellReady=gt===void 0?we:gt,this.onShellError=Bt===void 0?we:Bt,this.onFatalError=xt===void 0?we:xt,this.formState=ye===void 0?null:ye}function Yi(E,T,D,H,q,rt,gt,Bt,xt,It,ye,re){return T=new ti(T,D,H,q,rt,gt,Bt,xt,It,ye,re),D=gr(T,0,null,H,!1,!1),D.parentFlushed=!0,E=Yo(T,null,E,-1,null,D,null,null,T.abortableTasks,null,H,null,Jt,null,!1),Tr(E),T.pingedTasks.push(E),T}function Ki(E,T,D,H,q,rt,gt,Bt,xt,It,ye){return E=Yi(E,T,D,H,q,rt,gt,Bt,xt,It,ye,void 0),E.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},E}var Li=null;function ks(E,T){E.pingedTasks.push(T),E.pingedTasks.length===1&&(E.flushScheduled=E.destination!==null,E.trackedPostpones!==null||E.status===10?pt(function(){return Wo(E)}):tt(function(){return Wo(E)}))}function fr(E,T,D,H){return{status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,completedSegments:[],byteSize:0,fallbackAbortableTasks:T,errorDigest:null,contentState:fo(),fallbackState:fo(),contentPreamble:D,fallbackPreamble:H,trackedContentKeyPath:null,trackedFallbackNode:null}}function Yo(E,T,D,H,q,rt,gt,Bt,xt,It,ye,re,Ne,Ue,Ke){E.allPendingTasks++,q===null?E.pendingRootTasks++:q.pendingTasks++;var oi={replay:null,node:D,childIndex:H,ping:function(){return ks(E,oi)},blockedBoundary:q,blockedSegment:rt,blockedPreamble:gt,hoistableState:Bt,abortSet:xt,keyPath:It,formatContext:ye,context:re,treeContext:Ne,componentStack:Ue,thenableState:T,isFallback:Ke};return xt.add(oi),oi}function _o(E,T,D,H,q,rt,gt,Bt,xt,It,ye,re,Ne,Ue){E.allPendingTasks++,rt===null?E.pendingRootTasks++:rt.pendingTasks++,D.pendingTasks++;var Ke={replay:D,node:H,childIndex:q,ping:function(){return ks(E,Ke)},blockedBoundary:rt,blockedSegment:null,blockedPreamble:null,hoistableState:gt,abortSet:Bt,keyPath:xt,formatContext:It,context:ye,treeContext:re,componentStack:Ne,thenableState:T,isFallback:Ue};return Bt.add(Ke),Ke}function gr(E,T,D,H,q,rt){return{status:0,parentFlushed:!1,id:-1,index:T,chunks:[],children:[],preambleChildren:[],parentFormatContext:H,boundary:D,lastPushedText:q,textEmbedded:rt}}function Tr(E){var T=E.node;if(typeof T=="object"&&T!==null)switch(T.$$typeof){case n:E.componentStack={parent:E.componentStack,type:T.type}}}function or(E){var T={};return E&&Object.defineProperty(T,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var D="",H=E;do D+=be(H.type),H=H.parent;while(H);var q=D}catch(rt){q=`
Error generating stack: `+rt.message+`
`+rt.stack}return Object.defineProperty(T,"componentStack",{value:q}),q}}),T}function fi(E,T,D){if(E=E.onError,T=E(T,D),T==null||typeof T=="string")return T}function cs(E,T){var D=E.onShellError,H=E.onFatalError;D(T),H(T),E.destination!==null?(E.status=14,Dt(E.destination,T)):(E.status=13,E.fatalError=T)}function wr(E,T,D,H,q,rt){var gt=T.thenableState;for(T.thenableState=null,Ye={},Sn=T,pi=E,vn=D,is=Rn=0,Ms=-1,Un=0,Gn=gt,E=H(q,rt);Zn;)Zn=!1,is=Rn=0,Ms=-1,Un=0,sr+=1,Je=null,E=H(q,rt);return Gr(),E}function Vr(E,T,D,H,q,rt,gt){var Bt=!1;if(rt!==0&&E.formState!==null){var xt=T.blockedSegment;if(xt!==null){Bt=!0,xt=xt.chunks;for(var It=0;It<rt;It++)It===gt?xt.push(ir):xt.push(hr)}}rt=T.keyPath,T.keyPath=D,q?(D=T.treeContext,T.treeContext=Pt(D,1,0),mr(E,T,H,-1),T.treeContext=D):Bt?mr(E,T,H,-1):In(E,T,H,-1),T.keyPath=rt}function js(E,T,D,H,q,rt){if(typeof H=="function")if(H.prototype&&H.prototype.isReactComponent){var gt=q;if("ref"in q){gt={};for(var Bt in q)Bt!=="ref"&&(gt[Bt]=q[Bt])}var xt=H.defaultProps;if(xt){gt===q&&(gt=Mt({},gt,q));for(var It in xt)gt[It]===void 0&&(gt[It]=xt[It])}q=gt,gt=Ks,xt=H.contextType,typeof xt=="object"&&xt!==null&&(gt=xt._currentValue),gt=new H(q,gt);var ye=gt.state!==void 0?gt.state:null;if(gt.updater=mt,gt.props=q,gt.state=ye,xt={queue:[],replace:!1},gt._reactInternals=xt,rt=H.contextType,gt.context=typeof rt=="object"&&rt!==null?rt._currentValue:Ks,rt=H.getDerivedStateFromProps,typeof rt=="function"&&(rt=rt(q,ye),ye=rt==null?ye:Mt({},ye,rt),gt.state=ye),typeof H.getDerivedStateFromProps!="function"&&typeof gt.getSnapshotBeforeUpdate!="function"&&(typeof gt.UNSAFE_componentWillMount=="function"||typeof gt.componentWillMount=="function"))if(H=gt.state,typeof gt.componentWillMount=="function"&&gt.componentWillMount(),typeof gt.UNSAFE_componentWillMount=="function"&&gt.UNSAFE_componentWillMount(),H!==gt.state&&mt.enqueueReplaceState(gt,gt.state,null),xt.queue!==null&&0<xt.queue.length)if(H=xt.queue,rt=xt.replace,xt.queue=null,xt.replace=!1,rt&&H.length===1)gt.state=H[0];else{for(xt=rt?H[0]:gt.state,ye=!0,rt=rt?1:0;rt<H.length;rt++)It=H[rt],It=typeof It=="function"?It.call(gt,xt,q,void 0):It,It!=null&&(ye?(ye=!1,xt=Mt({},xt,It)):Mt(xt,It));gt.state=xt}else xt.queue=null;if(H=gt.render(),E.status===12)throw null;q=T.keyPath,T.keyPath=D,In(E,T,H,-1),T.keyPath=q}else{if(H=wr(E,T,D,H,q,void 0),E.status===12)throw null;Vr(E,T,D,H,Rn!==0,is,Ms)}else if(typeof H=="string")if(gt=T.blockedSegment,gt===null)gt=q.children,xt=T.formatContext,ye=T.keyPath,T.formatContext=ys(xt,H,q),T.keyPath=D,mr(E,T,gt,-1),T.formatContext=xt,T.keyPath=ye;else{rt=Ft(gt.chunks,H,q,E.resumableState,E.renderState,T.blockedPreamble,T.hoistableState,T.formatContext,gt.lastPushedText,T.isFallback),gt.lastPushedText=!1,xt=T.formatContext,ye=T.keyPath,T.keyPath=D,(T.formatContext=ys(xt,H,q)).insertionMode===3?(D=gr(E,0,null,T.formatContext,!1,!1),gt.preambleChildren.push(D),D=Yo(E,null,rt,-1,T.blockedBoundary,D,T.blockedPreamble,T.hoistableState,E.abortableTasks,T.keyPath,T.formatContext,T.context,T.treeContext,T.componentStack,T.isFallback),Tr(D),E.pingedTasks.push(D)):mr(E,T,rt,-1),T.formatContext=xt,T.keyPath=ye;t:{switch(T=gt.chunks,E=E.resumableState,H){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break t;case"body":if(1>=xt.insertionMode){E.hasBody=!0;break t}break;case"html":if(xt.insertionMode===0){E.hasHtml=!0;break t}break;case"head":if(1>=xt.insertionMode)break t}T.push(Ot(H))}gt.lastPushedText=!1}else{switch(H){case O:case a:case u:case r:H=T.keyPath,T.keyPath=D,In(E,T,q.children,-1),T.keyPath=H;return;case N:q.mode!=="hidden"&&(H=T.keyPath,T.keyPath=D,In(E,T,q.children,-1),T.keyPath=H);return;case v:H=T.keyPath,T.keyPath=D,In(E,T,q.children,-1),T.keyPath=H;return;case P:case M:throw Error(i(343));case m:t:if(T.replay!==null){H=T.keyPath,T.keyPath=D,D=q.children;try{mr(E,T,D,-1)}finally{T.keyPath=H}}else{H=T.keyPath;var re=T.blockedBoundary;rt=T.blockedPreamble;var Ne=T.hoistableState;It=T.blockedSegment,Bt=q.fallback,q=q.children;var Ue=new Set,Ke=2>T.formatContext.insertionMode?fr(E,Ue,di(),di()):fr(E,Ue,null,null);E.trackedPostpones!==null&&(Ke.trackedContentKeyPath=D);var oi=gr(E,It.chunks.length,Ke,T.formatContext,!1,!1);It.children.push(oi),It.lastPushedText=!1;var fn=gr(E,0,null,T.formatContext,!1,!1);if(fn.parentFlushed=!0,E.trackedPostpones!==null){gt=[D[0],"Suspense Fallback",D[2]],xt=[gt[1],gt[2],[],null],E.trackedPostpones.workingMap.set(gt,xt),Ke.trackedFallbackNode=xt,T.blockedSegment=oi,T.blockedPreamble=Ke.fallbackPreamble,T.keyPath=gt,oi.status=6;try{mr(E,T,Bt,-1),oi.lastPushedText&&oi.textEmbedded&&oi.chunks.push(Hi),oi.status=1}catch(An){throw oi.status=E.status===12?3:4,An}finally{T.blockedSegment=It,T.blockedPreamble=rt,T.keyPath=H}T=Yo(E,null,q,-1,Ke,fn,Ke.contentPreamble,Ke.contentState,T.abortSet,D,T.formatContext,T.context,T.treeContext,T.componentStack,T.isFallback),Tr(T),E.pingedTasks.push(T)}else{T.blockedBoundary=Ke,T.blockedPreamble=Ke.contentPreamble,T.hoistableState=Ke.contentState,T.blockedSegment=fn,T.keyPath=D,fn.status=6;try{if(mr(E,T,q,-1),fn.lastPushedText&&fn.textEmbedded&&fn.chunks.push(Hi),fn.status=1,Xr(Ke,fn),Ke.pendingTasks===0&&Ke.status===0){Ke.status=1,E.pendingRootTasks===0&&T.blockedPreamble&&Zr(E);break t}}catch(An){Ke.status=4,E.status===12?(fn.status=3,gt=E.fatalError):(fn.status=4,gt=An),xt=or(T.componentStack),ye=fi(E,gt,xt),Ke.errorDigest=ye,_r(E,Ke)}finally{T.blockedBoundary=re,T.blockedPreamble=rt,T.hoistableState=Ne,T.blockedSegment=It,T.keyPath=H}T=Yo(E,null,Bt,-1,re,oi,Ke.fallbackPreamble,Ke.fallbackState,Ue,[D[0],"Suspense Fallback",D[2]],T.formatContext,T.context,T.treeContext,T.componentStack,!0),Tr(T),E.pingedTasks.push(T)}}return}if(typeof H=="object"&&H!==null)switch(H.$$typeof){case _:if("ref"in q)for(Ke in gt={},q)Ke!=="ref"&&(gt[Ke]=q[Ke]);else gt=q;H=wr(E,T,D,H.render,gt,rt),Vr(E,T,D,H,Rn!==0,is,Ms);return;case b:js(E,T,D,H.type,q,rt);return;case h:case g:if(xt=q.children,gt=T.keyPath,q=q.value,ye=H._currentValue,H._currentValue=q,rt=dr,dr=H={parent:rt,depth:rt===null?0:rt.depth+1,context:H,parentValue:ye,value:q},T.context=H,T.keyPath=D,In(E,T,xt,-1),E=dr,E===null)throw Error(i(403));E.context._currentValue=E.parentValue,E=dr=E.parent,T.context=E,T.keyPath=gt;return;case c:q=q.children,H=q(H._context._currentValue),q=T.keyPath,T.keyPath=D,In(E,T,H,-1),T.keyPath=q;return;case x:if(gt=H._init,H=gt(H._payload),E.status===12)throw null;js(E,T,D,H,q,rt);return}throw Error(i(130,H==null?H:typeof H,""))}}function Xo(E,T,D,H,q){var rt=T.replay,gt=T.blockedBoundary,Bt=gr(E,0,null,T.formatContext,!1,!1);Bt.id=D,Bt.parentFlushed=!0;try{T.replay=null,T.blockedSegment=Bt,mr(E,T,H,q),Bt.status=1,gt===null?E.completedRootSegment=Bt:(Xr(gt,Bt),gt.parentFlushed&&E.partialBoundaries.push(gt))}finally{T.replay=rt,T.blockedSegment=null}}function In(E,T,D,H){T.replay!==null&&typeof T.replay.slots=="number"?Xo(E,T,T.replay.slots,D,H):(T.node=D,T.childIndex=H,D=T.componentStack,Tr(T),Yr(E,T),T.componentStack=D)}function Yr(E,T){var D=T.node,H=T.childIndex;if(D!==null){if(typeof D=="object"){switch(D.$$typeof){case n:var q=D.type,rt=D.key,gt=D.props;D=gt.ref;var Bt=D!==void 0?D:null,xt=Cs(q),It=rt??(H===-1?0:H);if(rt=[T.keyPath,xt,It],T.replay!==null)t:{var ye=T.replay;for(H=ye.nodes,D=0;D<H.length;D++){var re=H[D];if(It===re[1]){if(re.length===4){if(xt!==null&&xt!==re[0])throw Error(i(490,re[0],xt));var Ne=re[2];xt=re[3],It=T.node,T.replay={nodes:Ne,slots:xt,pendingTasks:1};try{if(js(E,T,rt,q,gt,Bt),T.replay.pendingTasks===1&&0<T.replay.nodes.length)throw Error(i(488));T.replay.pendingTasks--}catch(Vn){if(typeof Vn=="object"&&Vn!==null&&(Vn===Qe||typeof Vn.then=="function"))throw T.node===It&&(T.replay=ye),Vn;T.replay.pendingTasks--,gt=or(T.componentStack),rt=T.blockedBoundary,q=Vn,gt=fi(E,q,gt),Ga(E,rt,Ne,xt,q,gt)}T.replay=ye}else{if(q!==m)throw Error(i(490,"Suspense",Cs(q)||"Unknown"));e:{ye=void 0,q=re[5],Bt=re[2],xt=re[3],It=re[4]===null?[]:re[4][2],re=re[4]===null?null:re[4][3];var Ue=T.keyPath,Ke=T.replay,oi=T.blockedBoundary,fn=T.hoistableState,An=gt.children,Ti=gt.fallback,Fs=new Set;gt=2>T.formatContext.insertionMode?fr(E,Fs,di(),di()):fr(E,Fs,null,null),gt.parentFlushed=!0,gt.rootSegmentID=q,T.blockedBoundary=gt,T.hoistableState=gt.contentState,T.keyPath=rt,T.replay={nodes:Bt,slots:xt,pendingTasks:1};try{if(mr(E,T,An,-1),T.replay.pendingTasks===1&&0<T.replay.nodes.length)throw Error(i(488));if(T.replay.pendingTasks--,gt.pendingTasks===0&&gt.status===0){gt.status=1,E.completedBoundaries.push(gt);break e}}catch(Vn){gt.status=4,Ne=or(T.componentStack),ye=fi(E,Vn,Ne),gt.errorDigest=ye,T.replay.pendingTasks--,E.clientRenderedBoundaries.push(gt)}finally{T.blockedBoundary=oi,T.hoistableState=fn,T.replay=Ke,T.keyPath=Ue}T=_o(E,null,{nodes:It,slots:re,pendingTasks:0},Ti,-1,oi,gt.fallbackState,Fs,[rt[0],"Suspense Fallback",rt[2]],T.formatContext,T.context,T.treeContext,T.componentStack,!0),Tr(T),E.pingedTasks.push(T)}}H.splice(D,1);break t}}}else js(E,T,rt,q,gt,Bt);return;case s:throw Error(i(257));case x:if(Ne=D._init,D=Ne(D._payload),E.status===12)throw null;In(E,T,D,H);return}if(U(D)){Co(E,T,D,H);return}if(D===null||typeof D!="object"?Ne=null:(Ne=F&&D[F]||D["@@iterator"],Ne=typeof Ne=="function"?Ne:null),Ne&&(Ne=Ne.call(D))){if(D=Ne.next(),!D.done){gt=[];do gt.push(D.value),D=Ne.next();while(!D.done);Co(E,T,gt,H)}return}if(typeof D.then=="function")return T.thenableState=null,In(E,T,Lo(D),H);if(D.$$typeof===g)return In(E,T,D._currentValue,H);throw H=Object.prototype.toString.call(D),Error(i(31,H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H))}typeof D=="string"?(H=T.blockedSegment,H!==null&&(H.lastPushedText=$i(H.chunks,D,E.renderState,H.lastPushedText))):(typeof D=="number"||typeof D=="bigint")&&(H=T.blockedSegment,H!==null&&(H.lastPushedText=$i(H.chunks,""+D,E.renderState,H.lastPushedText)))}}function Co(E,T,D,H){var q=T.keyPath;if(H!==-1&&(T.keyPath=[T.keyPath,"Fragment",H],T.replay!==null)){for(var rt=T.replay,gt=rt.nodes,Bt=0;Bt<gt.length;Bt++){var xt=gt[Bt];if(xt[1]===H){H=xt[2],xt=xt[3],T.replay={nodes:H,slots:xt,pendingTasks:1};try{if(Co(E,T,D,-1),T.replay.pendingTasks===1&&0<T.replay.nodes.length)throw Error(i(488));T.replay.pendingTasks--}catch(re){if(typeof re=="object"&&re!==null&&(re===Qe||typeof re.then=="function"))throw re;T.replay.pendingTasks--,D=or(T.componentStack);var It=T.blockedBoundary,ye=re;D=fi(E,ye,D),Ga(E,It,H,xt,ye,D)}T.replay=rt,gt.splice(Bt,1);break}}T.keyPath=q;return}if(rt=T.treeContext,gt=D.length,T.replay!==null&&(Bt=T.replay.slots,Bt!==null&&typeof Bt=="object")){for(H=0;H<gt;H++)xt=D[H],T.treeContext=Pt(rt,gt,H),It=Bt[H],typeof It=="number"?(Xo(E,T,It,xt,H),delete Bt[H]):mr(E,T,xt,H);T.treeContext=rt,T.keyPath=q;return}for(Bt=0;Bt<gt;Bt++)H=D[Bt],T.treeContext=Pt(rt,gt,Bt),mr(E,T,H,Bt);T.treeContext=rt,T.keyPath=q}function _r(E,T){E=E.trackedPostpones,E!==null&&(T=T.trackedContentKeyPath,T!==null&&(T=E.workingMap.get(T),T!==void 0&&(T.length=4,T[2]=[],T[3]=null)))}function fs(E,T,D){return _o(E,D,T.replay,T.node,T.childIndex,T.blockedBoundary,T.hoistableState,T.abortSet,T.keyPath,T.formatContext,T.context,T.treeContext,T.componentStack,T.isFallback)}function ya(E,T,D){var H=T.blockedSegment,q=gr(E,H.chunks.length,null,T.formatContext,H.lastPushedText,!0);return H.children.push(q),H.lastPushedText=!1,Yo(E,D,T.node,T.childIndex,T.blockedBoundary,q,T.blockedPreamble,T.hoistableState,T.abortSet,T.keyPath,T.formatContext,T.context,T.treeContext,T.componentStack,T.isFallback)}function mr(E,T,D,H){var q=T.formatContext,rt=T.context,gt=T.keyPath,Bt=T.treeContext,xt=T.componentStack,It=T.blockedSegment;if(It===null)try{return In(E,T,D,H)}catch(Ne){if(Gr(),D=Ne===Qe?Pi():Ne,typeof D=="object"&&D!==null){if(typeof D.then=="function"){H=Wn(),E=fs(E,T,H).ping,D.then(E,E),T.formatContext=q,T.context=rt,T.keyPath=gt,T.treeContext=Bt,T.componentStack=xt,nt(rt);return}if(D.message==="Maximum call stack size exceeded"){D=Wn(),D=fs(E,T,D),E.pingedTasks.push(D),T.formatContext=q,T.context=rt,T.keyPath=gt,T.treeContext=Bt,T.componentStack=xt,nt(rt);return}}}else{var ye=It.children.length,re=It.chunks.length;try{return In(E,T,D,H)}catch(Ne){if(Gr(),It.children.length=ye,It.chunks.length=re,D=Ne===Qe?Pi():Ne,typeof D=="object"&&D!==null){if(typeof D.then=="function"){H=Wn(),E=ya(E,T,H).ping,D.then(E,E),T.formatContext=q,T.context=rt,T.keyPath=gt,T.treeContext=Bt,T.componentStack=xt,nt(rt);return}if(D.message==="Maximum call stack size exceeded"){D=Wn(),D=ya(E,T,D),E.pingedTasks.push(D),T.formatContext=q,T.context=rt,T.keyPath=gt,T.treeContext=Bt,T.componentStack=xt,nt(rt);return}}}}throw T.formatContext=q,T.context=rt,T.keyPath=gt,T.treeContext=Bt,nt(rt),D}function wd(E){var T=E.blockedBoundary;E=E.blockedSegment,E!==null&&(E.status=3,Ha(this,T,E))}function Ga(E,T,D,H,q,rt){for(var gt=0;gt<D.length;gt++){var Bt=D[gt];if(Bt.length===4)Ga(E,T,Bt[2],Bt[3],q,rt);else{Bt=Bt[5];var xt=E,It=rt,ye=fr(xt,new Set,null,null);ye.parentFlushed=!0,ye.rootSegmentID=Bt,ye.status=4,ye.errorDigest=It,ye.parentFlushed&&xt.clientRenderedBoundaries.push(ye)}}if(D.length=0,H!==null){if(T===null)throw Error(i(487));if(T.status!==4&&(T.status=4,T.errorDigest=rt,T.parentFlushed&&E.clientRenderedBoundaries.push(T)),typeof H=="object")for(var re in H)delete H[re]}}function Mh(E,T,D){var H=E.blockedBoundary,q=E.blockedSegment;if(q!==null){if(q.status===6)return;q.status=3}if(q=or(E.componentStack),H===null){if(T.status!==13&&T.status!==14){if(H=E.replay,H===null){fi(T,D,q),cs(T,D);return}H.pendingTasks--,H.pendingTasks===0&&0<H.nodes.length&&(E=fi(T,D,q),Ga(T,null,H.nodes,H.slots,D,E)),T.pendingRootTasks--,T.pendingRootTasks===0&&va(T)}}else H.pendingTasks--,H.status!==4&&(H.status=4,E=fi(T,D,q),H.status=4,H.errorDigest=E,_r(T,H),H.parentFlushed&&T.clientRenderedBoundaries.push(H)),H.fallbackAbortableTasks.forEach(function(rt){return Mh(rt,T,D)}),H.fallbackAbortableTasks.clear();T.allPendingTasks--,T.allPendingTasks===0&&Zo(T)}function Pn(E,T){try{var D=E.renderState,H=D.onHeaders;if(H){var q=D.headers;if(q){D.headers=null;var rt=q.preconnects;if(q.fontPreloads&&(rt&&(rt+=", "),rt+=q.fontPreloads),q.highImagePreloads&&(rt&&(rt+=", "),rt+=q.highImagePreloads),!T){var gt=D.styles.values(),Bt=gt.next();t:for(;0<q.remainingCapacity&&!Bt.done;Bt=gt.next())for(var xt=Bt.value.sheets.values(),It=xt.next();0<q.remainingCapacity&&!It.done;It=xt.next()){var ye=It.value,re=ye.props,Ne=re.href,Ue=ye.props,Ke=Br(Ue.href,"style",{crossOrigin:Ue.crossOrigin,integrity:Ue.integrity,nonce:Ue.nonce,type:Ue.type,fetchPriority:Ue.fetchPriority,referrerPolicy:Ue.referrerPolicy,media:Ue.media});if(0<=(q.remainingCapacity-=Ke.length+2))D.resets.style[Ne]=Be,rt&&(rt+=", "),rt+=Ke,D.resets.style[Ne]=typeof re.crossOrigin=="string"||typeof re.integrity=="string"?[re.crossOrigin,re.integrity]:Be;else break t}}H(rt?{Link:rt}:{})}}}catch(oi){fi(E,oi,{})}}function va(E){E.trackedPostpones===null&&Pn(E,!0),E.trackedPostpones===null&&Zr(E),E.onShellError=we,E=E.onShellReady,E()}function Zo(E){Pn(E,E.trackedPostpones===null?!0:E.completedRootSegment===null||E.completedRootSegment.status!==5),Zr(E),E=E.onAllReady,E()}function Xr(E,T){if(T.chunks.length===0&&T.children.length===1&&T.children[0].boundary===null&&T.children[0].id===-1){var D=T.children[0];D.id=T.id,D.parentFlushed=!0,D.status===1&&Xr(E,D)}else E.completedSegments.push(T)}function Ha(E,T,D){if(T===null){if(D!==null&&D.parentFlushed){if(E.completedRootSegment!==null)throw Error(i(389));E.completedRootSegment=D}E.pendingRootTasks--,E.pendingRootTasks===0&&va(E)}else T.pendingTasks--,T.status!==4&&(T.pendingTasks===0?(T.status===0&&(T.status=1),D!==null&&D.parentFlushed&&D.status===1&&Xr(T,D),T.parentFlushed&&E.completedBoundaries.push(T),T.status===1&&(T.fallbackAbortableTasks.forEach(wd,E),T.fallbackAbortableTasks.clear(),E.pendingRootTasks===0&&E.trackedPostpones===null&&T.contentPreamble!==null&&Zr(E))):D!==null&&D.parentFlushed&&D.status===1&&(Xr(T,D),T.completedSegments.length===1&&T.parentFlushed&&E.partialBoundaries.push(T)));E.allPendingTasks--,E.allPendingTasks===0&&Zo(E)}function Wo(E){if(E.status!==14&&E.status!==13){var T=dr,D=ve.H;ve.H=A;var H=ve.A;ve.A=B;var q=Li;Li=E;var rt=z;z=E.resumableState;try{var gt=E.pingedTasks,Bt;for(Bt=0;Bt<gt.length;Bt++){var xt=gt[Bt],It=E,ye=xt.blockedSegment;if(ye===null){var re=It;if(xt.replay.pendingTasks!==0){nt(xt.context);try{if(typeof xt.replay.slots=="number"?Xo(re,xt,xt.replay.slots,xt.node,xt.childIndex):Yr(re,xt),xt.replay.pendingTasks===1&&0<xt.replay.nodes.length)throw Error(i(488));xt.replay.pendingTasks--,xt.abortSet.delete(xt),Ha(re,xt.blockedBoundary,null)}catch(qn){Gr();var Ne=qn===Qe?Pi():qn;if(typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"){var Ue=xt.ping;Ne.then(Ue,Ue),xt.thenableState=Wn()}else{xt.replay.pendingTasks--,xt.abortSet.delete(xt);var Ke=or(xt.componentStack);It=void 0;var oi=re,fn=xt.blockedBoundary,An=re.status===12?re.fatalError:Ne,Ti=xt.replay.nodes,Fs=xt.replay.slots;It=fi(oi,An,Ke),Ga(oi,fn,Ti,Fs,An,It),re.pendingRootTasks--,re.pendingRootTasks===0&&va(re),re.allPendingTasks--,re.allPendingTasks===0&&Zo(re)}}finally{}}}else if(re=void 0,oi=ye,oi.status===0){oi.status=6,nt(xt.context);var Vn=oi.children.length,Js=oi.chunks.length;try{Yr(It,xt),oi.lastPushedText&&oi.textEmbedded&&oi.chunks.push(Hi),xt.abortSet.delete(xt),oi.status=1,Ha(It,xt.blockedBoundary,oi)}catch(qn){Gr(),oi.children.length=Vn,oi.chunks.length=Js;var zn=qn===Qe?Pi():It.status===12?It.fatalError:qn;if(typeof zn=="object"&&zn!==null&&typeof zn.then=="function"){oi.status=0,xt.thenableState=Wn();var ni=xt.ping;zn.then(ni,ni)}else{var yi=or(xt.componentStack);xt.abortSet.delete(xt),oi.status=4;var bi=xt.blockedBoundary;re=fi(It,zn,yi),bi===null?cs(It,zn):(bi.pendingTasks--,bi.status!==4&&(bi.status=4,bi.errorDigest=re,_r(It,bi),bi.parentFlushed&&It.clientRenderedBoundaries.push(bi),It.pendingRootTasks===0&&It.trackedPostpones===null&&bi.contentPreamble!==null&&Zr(It))),It.allPendingTasks--,It.allPendingTasks===0&&Zo(It)}}finally{}}}gt.splice(0,Bt),E.destination!==null&&vl(E,E.destination)}catch(qn){fi(E,qn,{}),cs(E,qn)}finally{z=rt,ve.H=D,ve.A=H,D===A&&nt(T),Li=q}}}function qo(E,T,D){T.preambleChildren.length&&D.push(T.preambleChildren);for(var H=!1,q=0;q<T.children.length;q++)H=Ql(E,T.children[q],D)||H;return H}function Ql(E,T,D){var H=T.boundary;if(H===null)return qo(E,T,D);var q=H.contentPreamble,rt=H.fallbackPreamble;if(q===null||rt===null)return!1;switch(H.status){case 1:if(oe(E.renderState,q),T=H.completedSegments[0],!T)throw Error(i(391));return qo(E,T,D);case 5:if(E.trackedPostpones!==null)return!0;case 4:if(T.status===1)return oe(E.renderState,rt),qo(E,T,D);default:return!0}}function Zr(E){if(E.completedRootSegment&&E.completedPreambleSegments===null){var T=[],D=Ql(E,E.completedRootSegment,T),H=E.renderState.preamble;(D===!1||H.headChunks&&H.bodyChunks)&&(E.completedPreambleSegments=T)}}function Qo(E,T,D,H){switch(D.parentFlushed=!0,D.status){case 0:D.id=E.nextSegmentId++;case 5:return H=D.id,D.lastPushedText=!1,D.textEmbedded=!1,E=E.renderState,W(T,Kt),W(T,E.placeholderPrefix),E=X(H.toString(16)),W(T,E),st(T,le);case 1:D.status=2;var q=!0,rt=D.chunks,gt=0;D=D.children;for(var Bt=0;Bt<D.length;Bt++){for(q=D[Bt];gt<q.index;gt++)W(T,rt[gt]);q=Va(E,T,q,H)}for(;gt<rt.length-1;gt++)W(T,rt[gt]);return gt<rt.length&&(q=st(T,rt[gt])),q;default:throw Error(i(390))}}function Va(E,T,D,H){var q=D.boundary;if(q===null)return Qo(E,T,D,H);if(q.parentFlushed=!0,q.status===4){var rt=q.errorDigest;return st(T,me),W(T,Ie),rt&&(W(T,We),W(T,X(kt(rt))),W(T,Le)),st(T,$e),Qo(E,T,D,H),(E=q.fallbackPreamble)&&Zi(T,E),st(T,Te)}if(q.status!==1)return q.status===0&&(q.rootSegmentID=E.nextSegmentId++),0<q.completedSegments.length&&E.partialBoundaries.push(q),Ei(T,E.renderState,q.rootSegmentID),H&&(q=q.fallbackState,q.styles.forEach(ql,H),q.stylesheets.forEach(nr,H)),Qo(E,T,D,H),st(T,Te);if(q.byteSize>E.progressiveChunkSize)return q.rootSegmentID=E.nextSegmentId++,E.completedBoundaries.push(q),Ei(T,E.renderState,q.rootSegmentID),Qo(E,T,D,H),st(T,Te);if(H&&(D=q.contentState,D.styles.forEach(ql,H),D.stylesheets.forEach(nr,H)),st(T,ge),D=q.completedSegments,D.length!==1)throw Error(i(391));return Va(E,T,D[0],H),(E=q.contentPreamble)&&Zi(T,E),st(T,Te)}function Lr(E,T,D,H){return Ts(T,E.renderState,D.parentFormatContext,D.id),Va(E,T,D,H),ao(T,D.parentFormatContext)}function Ya(E,T,D){for(var H=D.completedSegments,q=0;q<H.length;q++)Ko(E,T,D,H[q]);H.length=0,Uo(T,D.contentState,E.renderState),H=E.resumableState,E=E.renderState,q=D.rootSegmentID,D=D.contentState;var rt=E.stylesToHoist;return E.stylesToHoist=!1,W(T,E.startInlineScript),rt?(H.instructions&2)===0?(H.instructions|=10,W(T,Zs)):(H.instructions&8)===0?(H.instructions|=8,W(T,ha)):W(T,Vl):(H.instructions&2)===0?(H.instructions|=2,W(T,_i)):W(T,Da),H=X(q.toString(16)),W(T,E.boundaryPrefix),W(T,H),W(T,Nu),W(T,E.segmentPrefix),W(T,H),rt?(W(T,Yl),Ch(T,D)):W(T,ko),D=st(T,Xl),he(T,E)&&D}function Ko(E,T,D,H){if(H.status===2)return!0;var q=D.contentState,rt=H.id;if(rt===-1){if((H.id=D.rootSegmentID)===-1)throw Error(i(392));return Lr(E,T,H,q)}return rt===D.rootSegmentID?Lr(E,T,H,q):(Lr(E,T,H,q),D=E.resumableState,E=E.renderState,W(T,E.startInlineScript),(D.instructions&1)===0?(D.instructions|=1,W(T,kr)):W(T,br),W(T,E.segmentPrefix),rt=X(rt.toString(16)),W(T,rt),W(T,Mu),W(T,E.placeholderPrefix),W(T,rt),T=st(T,za),T)}function vl(E,T){ft=new Uint8Array(2048),ht=0;try{if(!(0<E.pendingRootTasks)){var D,H=E.completedRootSegment;if(H!==null){if(H.status===5)return;var q=E.completedPreambleSegments;if(q===null)return;var rt=E.renderState,gt=rt.preamble,Bt=gt.htmlChunks,xt=gt.headChunks,It;if(Bt){for(It=0;It<Bt.length;It++)W(T,Bt[It]);if(xt)for(It=0;It<xt.length;It++)W(T,xt[It]);else W(T,wt("head")),W(T,Fi)}else if(xt)for(It=0;It<xt.length;It++)W(T,xt[It]);var ye=rt.charsetChunks;for(It=0;It<ye.length;It++)W(T,ye[It]);ye.length=0,rt.preconnects.forEach(xs,T),rt.preconnects.clear();var re=rt.viewportChunks;for(It=0;It<re.length;It++)W(T,re[It]);re.length=0,rt.fontPreloads.forEach(xs,T),rt.fontPreloads.clear(),rt.highImagePreloads.forEach(xs,T),rt.highImagePreloads.clear(),rt.styles.forEach(Ws,T);var Ne=rt.importMapChunks;for(It=0;It<Ne.length;It++)W(T,Ne[It]);Ne.length=0,rt.bootstrapScripts.forEach(xs,T),rt.scripts.forEach(xs,T),rt.scripts.clear(),rt.bulkPreloads.forEach(xs,T),rt.bulkPreloads.clear();var Ue=rt.hoistableChunks;for(It=0;It<Ue.length;It++)W(T,Ue[It]);for(rt=Ue.length=0;rt<q.length;rt++){var Ke=q[rt];for(gt=0;gt<Ke.length;gt++)Va(E,T,Ke[gt],null)}var oi=E.renderState.preamble,fn=oi.headChunks;(oi.htmlChunks||fn)&&W(T,Ot("head"));var An=oi.bodyChunks;if(An)for(q=0;q<An.length;q++)W(T,An[q]);Va(E,T,H,null),E.completedRootSegment=null,he(T,E.renderState)}var Ti=E.renderState;H=0;var Fs=Ti.viewportChunks;for(H=0;H<Fs.length;H++)W(T,Fs[H]);Fs.length=0,Ti.preconnects.forEach(xs,T),Ti.preconnects.clear(),Ti.fontPreloads.forEach(xs,T),Ti.fontPreloads.clear(),Ti.highImagePreloads.forEach(xs,T),Ti.highImagePreloads.clear(),Ti.styles.forEach(ca,T),Ti.scripts.forEach(xs,T),Ti.scripts.clear(),Ti.bulkPreloads.forEach(xs,T),Ti.bulkPreloads.clear();var Vn=Ti.hoistableChunks;for(H=0;H<Vn.length;H++)W(T,Vn[H]);Vn.length=0;var Js=E.clientRenderedBoundaries;for(D=0;D<Js.length;D++){var zn=Js[D];Ti=T;var ni=E.resumableState,yi=E.renderState,bi=zn.rootSegmentID,qn=zn.errorDigest;W(Ti,yi.startInlineScript),(ni.instructions&4)===0?(ni.instructions|=4,W(Ti,cl)):W(Ti,wh),W(Ti,yi.boundaryPrefix),W(Ti,X(bi.toString(16))),W(Ti,ka),qn&&(W(Ti,Ru),W(Ti,X(Fa(qn||""))));var gn=st(Ti,ws);if(!gn){E.destination=null,D++,Js.splice(0,D);return}}Js.splice(0,D);var Qn=E.completedBoundaries;for(D=0;D<Qn.length;D++)if(!Ya(E,T,Qn[D])){E.destination=null,D++,Qn.splice(0,D);return}Qn.splice(0,D),_t(T),ft=new Uint8Array(2048),ht=0;var $o=E.partialBoundaries;for(D=0;D<$o.length;D++){var qr=$o[D];t:{Js=E,zn=T;var Cr=qr.completedSegments;for(gn=0;gn<Cr.length;gn++)if(!Ko(Js,zn,qr,Cr[gn])){gn++,Cr.splice(0,gn);var bl=!1;break t}Cr.splice(0,gn),bl=Uo(zn,qr.contentState,Js.renderState)}if(!bl){E.destination=null,D++,$o.splice(0,D);return}}$o.splice(0,D);var Tn=E.completedBoundaries;for(D=0;D<Tn.length;D++)if(!Ya(E,T,Tn[D])){E.destination=null,D++,Tn.splice(0,D);return}Tn.splice(0,D)}}finally{E.allPendingTasks===0&&E.pingedTasks.length===0&&E.clientRenderedBoundaries.length===0&&E.completedBoundaries.length===0?(E.flushScheduled=!1,D=E.resumableState,D.hasBody&&W(T,Ot("body")),D.hasHtml&&W(T,Ot("html")),_t(T),E.status=14,T.close(),E.destination=null):_t(T)}}function Wr(E){E.flushScheduled=E.destination!==null,pt(function(){return Wo(E)}),tt(function(){E.status===10&&(E.status=11),E.trackedPostpones===null&&Pn(E,E.pendingRootTasks===0)})}function jo(E){E.flushScheduled===!1&&E.pingedTasks.length===0&&E.destination!==null&&(E.flushScheduled=!0,tt(function(){var T=E.destination;T?vl(E,T):E.flushScheduled=!1}))}function Mo(E,T){if(E.status===13)E.status=14,Dt(T,E.fatalError);else if(E.status!==14&&E.destination===null){E.destination=T;try{vl(E,T)}catch(D){fi(E,D,{}),cs(E,D)}}}function Jo(E,T){(E.status===11||E.status===10)&&(E.status=12);try{var D=E.abortableTasks;if(0<D.size){var H=T===void 0?Error(i(432)):typeof T=="object"&&T!==null&&typeof T.then=="function"?Error(i(530)):T;E.fatalError=H,D.forEach(function(q){return Mh(q,E,H)}),D.clear()}E.destination!==null&&vl(E,E.destination)}catch(q){fi(E,q,{}),cs(E,q)}}function xl(){var E=t.version;if(E!=="19.1.0")throw Error(i(527,E,"19.1.0"))}return xl(),xl(),Zf.prerender=function(E,T){return new Promise(function(D,H){var q=T?T.onHeaders:void 0,rt;q&&(rt=function(ye){q(new Headers(ye))});var gt=bn(T?T.identifierPrefix:void 0,T?T.unstable_externalRuntimeSrc:void 0,T?T.bootstrapScriptContent:void 0,T?T.bootstrapScripts:void 0,T?T.bootstrapModules:void 0),Bt=Ki(E,gt,Cn(gt,void 0,T?T.unstable_externalRuntimeSrc:void 0,T?T.importMap:void 0,rt,T?T.maxHeadersLength:void 0),lr(T?T.namespaceURI:void 0),T?T.progressiveChunkSize:void 0,T?T.onError:void 0,function(){var ye={prelude:new ReadableStream({type:"bytes",pull:function(re){Mo(Bt,re)},cancel:function(re){Bt.destination=null,Jo(Bt,re)}},{highWaterMark:0})};D(ye)},void 0,void 0,H,T?T.onPostpone:void 0);if(T&&T.signal){var xt=T.signal;if(xt.aborted)Jo(Bt,xt.reason);else{var It=function(){Jo(Bt,xt.reason),xt.removeEventListener("abort",It)};xt.addEventListener("abort",It)}}Wr(Bt)})},Zf.renderToReadableStream=function(E,T){return new Promise(function(D,H){var q,rt,gt=new Promise(function(Ue,Ke){rt=Ue,q=Ke}),Bt=T?T.onHeaders:void 0,xt;Bt&&(xt=function(Ue){Bt(new Headers(Ue))});var It=bn(T?T.identifierPrefix:void 0,T?T.unstable_externalRuntimeSrc:void 0,T?T.bootstrapScriptContent:void 0,T?T.bootstrapScripts:void 0,T?T.bootstrapModules:void 0),ye=Yi(E,It,Cn(It,T?T.nonce:void 0,T?T.unstable_externalRuntimeSrc:void 0,T?T.importMap:void 0,xt,T?T.maxHeadersLength:void 0),lr(T?T.namespaceURI:void 0),T?T.progressiveChunkSize:void 0,T?T.onError:void 0,rt,function(){var Ue=new ReadableStream({type:"bytes",pull:function(Ke){Mo(ye,Ke)},cancel:function(Ke){ye.destination=null,Jo(ye,Ke)}},{highWaterMark:0});Ue.allReady=gt,D(Ue)},function(Ue){gt.catch(function(){}),H(Ue)},q,T?T.onPostpone:void 0,T?T.formState:void 0);if(T&&T.signal){var re=T.signal;if(re.aborted)Jo(ye,re.reason);else{var Ne=function(){Jo(ye,re.reason),re.removeEventListener("abort",Ne)};re.addEventListener("abort",Ne)}}Wr(ye)})},Zf.version="19.1.0",Zf}var dw;function oY(){if(dw)return ed;dw=1;var t,e;return t=sY(),e=rY(),ed.version=t.version,ed.renderToString=t.renderToString,ed.renderToStaticMarkup=t.renderToStaticMarkup,ed.renderToReadableStream=e.renderToReadableStream,e.resume&&(ed.resume=e.resume),ed}var s0=oY();function ZN(t,e,i,n){return typeof i=="string"?i:typeof i=="function"?s0.renderToString(i(t,e)):s0.renderToString(n)}function zg(t,e){return typeof t=="function"?t(e):t}const fp=(t,e)=>`${t} ${t}--${e}`;function aY(t="&times;",e){if(t){const i=typeof t=="string"?t:s0.renderToString(t);return`<div class=${e}>${i}</div>`}return""}function lY(t,e,i,n){const{width:s,height:r}=n.view.getSize(),{x:a,y:u}=n.view.graphToScreenCoordinates(t);let h=e;const{width:c,height:g}=i;return e==="left"&&a-c<0?h="right":e==="right"&&a+c>s?h="left":e==="bottom"&&u+g>r?h="top":e==="top"&&u-g<0&&(h="bottom"),h==="right"||h==="left"?u+g/2>r?h="top":u-g/2<0&&(h="bottom"):a+c/2>s?h="left":a-c/2<0&&(h="right"),h}function uY(){}var Ab=gp();const Bv={x:-9999,y:-9999},hY="ogma-popup--content",dY="ogma-popup--close",cY="ogma-popup--body",fY="ogma-popup",gY=({content:t,position:e,children:i,isOpen:n=!0,closeButton:s,onClose:r=uY,placement:a="top",popupClass:u=fY,closeButtonClass:h=dY,contentClass:c=hY,popupBodyClass:g=cY,size:_,closeOnEsc:m=!0},v)=>{const b=Es(),[x,M]=Qt.useState(null);if(Qt.useImperativeHandle(v,()=>x,[x]),Qt.useEffect(()=>{let O=null,R=null,P=null;if(n){const F=zg(e,b)||Bv;if(O=b.layers.addOverlay({position:F||Bv,element:`<div class="${fp(u,a)}"/>
          <div class="${g}">
            ${aY(s,h)}
            <div class="${c} "></div>
          </div>
        </div>`,size:_||{width:"auto",height:"auto"},scaled:!1}),P=U=>{const V=O==null?void 0:O.element.querySelector(`.${h}`);U.target&&V.contains(U.target)&&(U.stopPropagation(),U.preventDefault(),r())},R=({code:U})=>{U===27&&r()},m&&b.events.on("keyup",R),O.element.addEventListener("click",P),M(O),t&&!i){const U=O.element.querySelector(`.${c}`),V=ZN(b,F,t,i);U&&(U.innerHTML=V)}M(O)}return()=>{O&&(P&&O.element.removeEventListener("click",P),R&&b.events.off(R),O.destroy(),M(null))}},[n,b]),Qt.useEffect(()=>{if(x&&x.element){const O=zg(e,b)||Bv;if(x.setPosition(O),x.element.className=fp(u,a),t&&!i){const R=x.element.querySelector(`.${c}`);R&&(R.innerHTML=typeof t=="string"?t:"")}n?x.show():x.hide()}},[x,e,n,a,u,t,i]),!x||!n)return null;const N=x.element.querySelector(`.${c}`);return N&&i?Ab.createPortal(i,N):null},_Y=Qt.forwardRef(gY),mY=({tooltipClass:t="ogma-tooltip",placement:e="right",position:i,size:n={width:"auto",height:"auto"},children:s,content:r,visible:a=!0},u)=>{const h=Es(),[c,g]=Qt.useState(),[_,m]=Qt.useState(),[v,b]=Qt.useState(""),[x,M]=Qt.useState(),N=Qt.useRef(0);return Qt.useImperativeHandle(u,()=>c,[c]),Qt.useEffect(()=>{const R=`<div class="${fp(t,e)}"><div class="${t}--content" /></div>`,P={x:-9999,y:-9999};m(P);const F=h.layers.addOverlay({position:P,element:R,scaled:!1,size:n});return g(F),()=>{F.destroy()}},[]),Qt.useEffect(()=>{const O=ZN(h,_,r,s);if(c){O!==v&&(c.element.firstElementChild.innerHTML=O,b(O),M({width:c.element.offsetWidth,height:c.element.offsetHeight}));const R=zg(i,h);_!==R&&m(R),a?c.show():c.hide()}return N.current=requestAnimationFrame(()=>{c&&c.element&&_&&x&&(c.element.className=fp(t,lY(_,e,x,h)),c.setPosition(_))}),()=>cancelAnimationFrame(N.current)},[s,r,i,a]),null},pY=Qt.forwardRef(mY),yY=({noClear:t=!1,isStatic:e=!1,render:i,index:n,visible:s=!0},r)=>{const a=Es(),[u,h]=Qt.useState(null);return Qt.useImperativeHandle(r,()=>u,[u]),Qt.useEffect(()=>{const c=a.layers.addCanvasLayer(i,{isStatic:e,noClear:t},n);return h(c),()=>{c&&(c.destroy(),h(null))}},[]),Qt.useEffect(()=>{u&&(n!==void 0&&isFinite(n)&&u.moveTo(n),s?u.show():u.hide())},[u,n,s]),null},vY=Qt.forwardRef(yY),Uv={x:-9999,y:-9999};Qt.forwardRef(({position:t,children:e,className:i="",size:n,scaled:s},r)=>{const a=Es(),[u,h]=Qt.useState(null);return Qt.useImperativeHandle(r,()=>u,[u]),Qt.useEffect(()=>{const c=zg(t,a)||Uv,g=document.createElement("div");g.className=i;const _=a.layers.addOverlay({position:c||Uv,element:g,size:n||{width:"auto",height:"auto"},scaled:s});return h(_),()=>{u&&(u.destroy(),h(null))}},[]),Qt.useEffect(()=>{if(u){const c=zg(t,a)||Uv;i&&(u.element.className=i),u.setPosition(c)}},[t,i]),u?Ab.createPortal(e,u.element):null});const xY=Qt.forwardRef(({children:t,className:e="",index:i},n)=>{const s=Es(),[r,a]=Qt.useState(null);return Qt.useImperativeHandle(n,()=>r,[r]),Qt.useEffect(()=>{const u=document.createElement("div");u.className=e;const h=s.layers.addLayer(u,i);return a(h),()=>{r&&(r.destroy(),a(null))}},[]),Qt.useEffect(()=>{r&&(r.element.className=e)},[e]),r?Ab.createPortal(t,r.element):null});function bY({enabled:t=!1,...e}){const i=Es();return Qt.useEffect(()=>{t?i.geo.enable(e):i.geo.disable()},[t]),null}function EY(){const t=Es(),e=Qt.useCallback(i=>{t.events.once("idle",()=>t.layouts.force({locate:!0}))},[t]);return Qt.useEffect(()=>(t.events.on(["addNodes","transformationEnabled","transformationDisabled"],e),()=>{t.events.off(e)}),[t]),null}function SY({visible:t=!0}){const e=Es(),i=Qt.createRef(),n=Qt.useCallback(s=>{s.fillStyle="rgba(157, 197, 187, 0.25)",s.beginPath(),e.getNodes().getAttributes(["x","y","radius"]).forEach(({x:r,y:a,radius:u})=>{s.moveTo(r,a),s.arc(r,a,u*6,0,2*Math.PI)}),s.fill()},[]);return Qt.useEffect(()=>{const s=()=>{var r;(r=i.current)==null||r.refresh()};return e.events.on(["nodesDragProgress","idle"],s),()=>{e.events.off(s)}},[]),Re.jsx(vY,{visible:t,render:n,ref:i,index:0})}const AY=({isOpen:t,children:e,onClosed:i,className:n})=>{const[s,r]=Qt.useState(t);Qt.useEffect(()=>{r(t)},[t]);const a=()=>{r(!1),i&&i()};return Re.jsxs(Re.Fragment,{children:[s&&Re.jsx("div",{className:`drawer-underlay ${s?"show":""}`,onClick:a}),Re.jsxs("div",{className:`drawer ${s?"open":""} ${n||""}`,children:[Re.jsx("button",{className:"close-button",onClick:a,children:""}),Re.jsx("div",{className:"drawer-content",children:e})]})]})},Sm=({checked:t,onChange:e,label:i,className:n})=>{const s=cd.useCallback(r=>{typeof e=="function"&&e(r.target.checked)},[e]);return Re.jsxs("label",{className:`switch ${n||""}`,children:[Re.jsx("input",{checked:t,type:"checkbox",onChange:s}),Re.jsx("span",{className:"slider"}),i&&Re.jsx("span",{className:"label-text",children:i})]})},cw=({onChange:t,max:e=0,min:i=1,value:n=0,step:s=.1})=>{const r=a=>{typeof t=="function"&&t(Number(a.target.value))};return Re.jsxs("div",{className:"range-slider",children:[Re.jsx("input",{className:"range-slider__range",type:"range",value:n,min:i,max:e,step:s,onChange:r}),Re.jsx("span",{className:"range-slider__value",children:n})]})};var Gv={exports:{}},Hv,fw;function TY(){if(fw)return Hv;fw=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Hv=t,Hv}var Vv,gw;function wY(){if(gw)return Vv;gw=1;var t=TY();function e(){}function i(){}return i.resetWarningCache=e,Vv=function(){function n(a,u,h,c,g,_){if(_!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:e};return r.PropTypes=r,r},Vv}var _w;function LY(){return _w||(_w=1,Gv.exports=wY()()),Gv.exports}var CY=LY();const mh=a0(CY);function r0(){return r0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r0.apply(this,arguments)}function MY(t,e){if(t==null)return{};var i=NY(t,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NY(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}var Tb=Qt.forwardRef(function(t,e){var i=t.color,n=i===void 0?"currentColor":i,s=t.size,r=s===void 0?24:s,a=MY(t,["color","size"]);return cd.createElement("svg",r0({ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),cd.createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}))});Tb.propTypes={color:mh.string,size:mh.oneOfType([mh.string,mh.number])};Tb.displayName="GitHub";function o0(){return o0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o0.apply(this,arguments)}function RY(t,e){if(t==null)return{};var i=OY(t,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function OY(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}var wb=Qt.forwardRef(function(t,e){var i=t.color,n=i===void 0?"currentColor":i,s=t.size,r=s===void 0?24:s,a=RY(t,["color","size"]);return cd.createElement("svg",o0({ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),cd.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),cd.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),cd.createElement("line",{x1:"3",y1:"18",x2:"21",y2:"18"}))});wb.propTypes={color:mh.string,size:mh.oneOfType([mh.string,mh.number])};wb.displayName="Menu";function IY({toggleNodeGrouping:t,nodeGrouping:e,setNodeSize:i,setEdgeWidth:n,geoEnabled:s,setGeoEnabled:r,outlines:a,setOutlines:u,addNode:h,useClass:c,setUseClass:g}){const[_,m]=Qt.useState(!1),[v,b]=Qt.useState(5),[x,M]=Qt.useState(.25);return Re.jsxs(Re.Fragment,{children:[Re.jsx("div",{className:"control-buttons",children:!_&&Re.jsx("button",{onClick:()=>m(!_),title:"Show controls",children:Re.jsx(wb,{width:18})})}),Re.jsxs(AY,{isOpen:_,onClosed:()=>m(!1),className:"controls",children:[Re.jsx("h2",{children:"Controls"}),Re.jsx("div",{className:"controls-section",children:Re.jsx(Sm,{checked:e,label:"Node grouping",onChange:()=>t(!e)})}),Re.jsxs("div",{className:"controls-section",children:[Re.jsx("h3",{children:"Node size"}),Re.jsx(cw,{value:v,max:50,min:1,step:.25,onChange:N=>{i(N),b(N)}})]}),Re.jsxs("div",{className:"controls-section",children:[Re.jsx("h3",{children:"Edge width"}),Re.jsx(cw,{value:x,max:5,min:.05,step:.25,onChange:N=>{n(N),M(N)}})]}),Re.jsx("div",{className:"controls-section",children:Re.jsx(Sm,{checked:a,onChange:()=>u(!a),label:"Node outlines"})}),Re.jsx("div",{className:"controls-section",children:Re.jsx(Sm,{checked:s,onChange:()=>r(!s),label:"Geo mode"})}),Re.jsx("div",{className:"controls-section",children:Re.jsx("div",{className:"link-button",onClick:()=>h(),children:"Add node"})}),Re.jsx("div",{className:"controls-section",children:Re.jsx(Sm,{checked:c,onChange:g,label:"Use class"})})]})]})}const PY=()=>{const t=Es(),[e,i]=Qt.useState({x:0,y:0}),n=Qt.useRef(null),s=Qt.useCallback(r=>{requestAnimationFrame(()=>i(r))},[i]);return Qt.useEffect(()=>{const r=()=>{const{x:a,y:u}=t.getPointerInformation();s({x:a,y:u})};return t.events.on("mousemove",r),()=>{t.events.off(r)}},[t]),Re.jsx(xY,{className:"position-control",ref:n,children:Re.jsxs("div",{className:"position-control__container",children:[e.x,",",e.y]})})},zY=({width:t=12,height:e=12,...i})=>Re.jsx("svg",{width:t,height:e,role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...i,children:Re.jsx("path",{fill:"currentColor",d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"})}),DY=()=>Re.jsxs("div",{className:"Logo",children:["Ogma + ",Re.jsx(zY,{width:18,height:18,className:"ReactIcon"})," React",Re.jsx("a",{href:"https://github.com/linkurious/ogma-react",target:"_blank",className:"gh-link",children:Re.jsx("div",{title:"Go to code",children:Re.jsx(Tb,{})})})]});VN.libraries.leaflet=k9;function kY(){const[t,e]=Qt.useState(),[i,n]=Qt.useState(!0),[s,r]=Qt.useState(!1),[a,u]=Qt.useState(),h=Qt.createRef(),c=Qt.createRef(),[g,_]=Qt.useState(!0),[m,v]=Qt.useState(!1),[b,x]=Qt.useState(5),[M,N]=Qt.useState(.5),[O]=Qt.useState({groupIdFunction:X=>{const et=X.getData("categories");if(et)return et[0]==="INVESTOR"?"INVESTOR":void 0},nodeGenerator:X=>({data:{multiplier:X.size}}),disabled:!0}),[R,P]=Qt.useState(!1),[F,U]=Qt.useState(!1),[V,Y]=Qt.useState({x:0,y:0}),[K,tt]=Qt.useState(),j=Qt.useCallback(X=>{requestAnimationFrame(()=>Y(X))},[]),lt=Qt.useCallback(()=>a?a.getPosition():null,[a]),pt=Qt.useCallback(()=>r(!1),[]);Qt.useEffect(()=>{n(!0),fetch("data.json").then(X=>X.json()).then(X=>{e(X),n(!1)})},[]);const ft=Fv("click",({target:X})=>{X&&X.isNode&&(u(X),r(!0))}),ht=Fv("mousemove",()=>{if(!h.current)return;const X=h.current.getPointerInformation();j(h.current.view.screenToGraphCoordinates({x:X.x,y:X.y})),tt(X.target)}),W=Fv("addNodes",()=>{h.current&&h.current.view.locateGraph({duration:250,padding:50})}),st=Qt.useCallback(X=>{h.current=X},[]),_t=Qt.useCallback(()=>{if(!h.current)return;const X=h.current.getNodes().size,et=h.current.addNode({id:X});X%2&&et.addClass("class")},[]),Vt=Qt.useMemo(()=>(console.log("Creating styleClassNodeAttributes"),{shape:"diamond",color:X=>{const et=X.getData("categories");return et?et.includes("INVESTOR")?"#FF0000":"#00FF00":"#000000"},halo:{width:0}}),[]);return i?Re.jsx(I9,{}):Re.jsxs("div",{className:"App",children:[Re.jsx(DY,{}),Re.jsxs(U9,{ref:h,graph:t,onClick:ft,onMousemove:ht,onAddNodes:W,onReady:st,theme:O9.morningBreeze,children:[Re.jsx(aw,{attributes:{radius:X=>((X==null?void 0:X.getData("multiplier"))||1)*b,text:{content:X=>X==null?void 0:X.getData("properties.name"),font:"IBM Plex Sans",minVisibleSize:3}}}),Re.jsx(aw.Hovered,{attributes:{radius:X=>((X==null?void 0:X.getData("multiplier"))||1)*b*1.5,color:"#FF0000",halo:{width:2,color:"#FF0000"}},fullOverwrite:!1}),Re.jsx(lw,{attributes:{width:M}}),R&&Re.jsx(Q9,{name:"class",nodeAttributes:Vt}),Re.jsx(lw.Hovered,{attributes:{width:X=>X.getData("weight")*M,color:"#FF0000"},fullOverwrite:!1}),Re.jsx(EY,{}),Re.jsx(j9,{ref:c,disabled:!g&&!m,groupIdFunction:O.groupIdFunction,nodeGenerator:O.nodeGenerator}),Re.jsx(_Y,{position:lt,onClose:pt,isOpen:!!a&&s,children:!!a&&Re.jsx("div",{className:"content",children:`Node ${a.getId()}:`})}),Re.jsx(pY,{visible:!!K&&!s,placement:"right",position:V,children:Re.jsx("div",{className:"x",children:K?`${K.isNode?"Node":"Edge"} #${K.getId()}`:"nothing"})}),Re.jsx(SY,{visible:F}),Re.jsx(bY,{enabled:m,longitudePath:"properties.longitude",latitudePath:"properties.latitude"}),Re.jsx(PY,{})]}),Re.jsx(IY,{toggleNodeGrouping:X=>_(X),nodeGrouping:g,setNodeSize:x,setEdgeWidth:N,outlines:F,setOutlines:U,geoEnabled:m,setGeoEnabled:v,addNode:_t,useClass:R,setUseClass:P})]})}const FY=document.getElementById("root"),BY=sO.createRoot(FY);BY.render(Re.jsx(kY,{}))});export default UY();
